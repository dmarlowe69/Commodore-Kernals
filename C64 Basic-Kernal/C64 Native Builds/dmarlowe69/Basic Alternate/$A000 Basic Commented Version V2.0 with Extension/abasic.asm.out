ABASIC.ASM......PAGE 0001

LINE# LOC   CODE        LINE


00001  0000              *=$A000
00002  A000              ;********************************
00003  A000              ; COMMODORE 64 BASICV2 ROM 
00004  A000              ;
00005  A000              ; (C) 1982 COMMODORE BUSINESS MACHINES
00006  A000              ;
00007  A000              ;********************************
00008  A000              ; BASIC V2
00009  A000              ;********************************
00010  A000              .FIL   BASICV2.ASM
00011  A000              ;********************************
00012  A000              ; COMMODORE 64 BASICV2 ROM 
00013  A000              ;
00014  A000              ; (C) 1982 COMMODORE BUSINESS MACHINES
00015  A000              ;
00016  A000              ;********************************
00017  A000              ; PAGE ZERO EQUATES
00018  A000              ;********************************
00019  A000              ADRAY1 = $03
00020  A000              ADRAY2 = $05
00021  A000              CHARAC = $07
00022  A000              ENDCHR = $08
00023  A000              VERCK  = $0A
00024  A000              COUNT  = $0B
00025  A000              DIMFLG = $0C
00026  A000              VALTYP = $0D
00027  A000              INTFLG = $0E
00028  A000              GARBFL = $0F
00029  A000              SUBFLG = $10
00030  A000              INPFLG = $11
00031  A000              TANSGN = $12
00032  A000              CHANNL = $13
00033  A000              C
00034  A000              LINNUM = $14
00035  A000              TEMPPT = $16
00036  A000              LASTPT = $17
00037  A000              TEMPST = $19           ;NOT USED IN BASIC ROM
00038  A000              INDEX  = $22
00039  A000              RESHO  = $26
00040  A000              TXTTAB = $2B
00041  A000              VARTAB = $2D
00042  A000              ARYTAB = $2F
00043  A000              STREND = $31
00044  A000              FRETOP = $33
00045  A000              FRESPC = $35
00046  A000              MEMSIZ = $37
00047  A000              CURLIN = $39
00048  A000              OLDLIN = $3B
00049  A000              OLDTXT = $3D
00050  A000              DATLIN = $3F
00051  A000              DATPRT = $41
00052  A000              INPPTR = $43
00053  A000              VARNAM = $45
00054  A000              VARPNT = $47
00055  A000              FORPNT = $49






ABASIC.ASM......PAGE 0002

LINE# LOC   CODE        LINE


00056  A000              OPPTR  = $4B
00057  A000              OPMASK = $4D
00058  A000              DEFPNT = $4E
00059  A000              DSCPNT = $50
00060  A000              FOUR6  = $53
00061  A000              JMPER  = $54
00062  A000              J
00063  A000              CHRGET = $73
00064  A000              CHRGOT = $79
00065  A000              TXTPTR = $7A
00066  A000              POINTB = $7C
00067  A000              ;********************************
00068  A000              ; PAGE ONE EQUATES
00069  A000              ;********************************
00070  A000              STACK  = $0100         ; PROCESSOR STACK
00071  A000              ;********************************
00072  A000              ; PAGE TWO EQUATES
00073  A000              ;********************************
00074  A000              BUF    = $0200
00075  A000              LAT    = $0259
00076  A000              FAT    = $0263
00077  A000              SAT    = $026D
00078  A000              KEYD   = $0277
00079  A000              MEMSTR = $0281
00080  A000              MEMSI2 = $0282
00081  A000              TIMOUT = $0285
00082  A000              COLOR  = $0286
00083  A000              GDCOL  = $0287
00084  A000              HIBASE = $0288
00085  A000              XMAX   = $0289
00086  A000              LSTSHF = $028E
00087  A000              KEYLOG = $028F
00088  A000              MODE   = $0291
00089  A000              AUTODN = $0292
00090  A000              ;********************************
00091  A000              ; RS-232 EQUATES
00092  A000              ;********************************
00093  A000              M51CTR = $0293
00094  A000              M51CDR = $0294
00095  A000              M51AJB = $0295
00096  A000              RSSTAT = $0297
00097  A000              BITNUM = $0298
00098  A000              BAUDOF = $0299
00099  A000              RIDBE  = $029B
00100  A000              RIDBS  = $029C
00101  A000              RODBS  = $029D
00102  A000              RODBE  = $029E
00103  A000              IRQTMP = $029F
00104  A000              ENABL  = $02A1
00105  A000              CIA1CA = $02A2
00106  A000              CIA1IR = $02A3
00107  A000              CIA1CB = $02A4
00108  A000              NEXSRO = $02A5
00109  A000              PALNTS = $02A6
00110  A000              ;********************************






ABASIC.ASM......PAGE 0003

LINE# LOC   CODE        LINE


00111  A000              ; PAGE THREE EQUATES
00112  A000              ;********************************
00113  A000              IERROR = $0300
00114  A000              IMAIN  = $0302
00115  A000              ICRNCH = $0304
00116  A000              IQPLOP = $0306
00117  A000              IGONE  = $0308
00118  A000              IEVAL  = $030A
00119  A000              ;********************************
00120  A000              ; SYS - USR EQUATES
00121  A000              ;********************************
00122  A000              SAREG  = $030C
00123  A000              SXREG  = $030D
00124  A000              SYREG  = $030E
00125  A000              SPREG  = $030F
00126  A000              USRPOK = $0310
00127  A000              USRADD = $0311
00128  A000              ;********************************
00129  A000              ; 
00130  A000              ;********************************
00131  A000              CBINV  = $0316
00132  A000              NMINV  = $0318
00133  A000              ;********************************
00134  A000              ; KERNAL INDIRECT VECTORS 
00135  A000              ;********************************
00136  A000              IOPNE  = $031A
00137  A000              ICLOSE = $031C
00138  A000              ICHKIN = $031E
00139  A000              ICKOUT = $0320
00140  A000              ICLRCH = $0322
00141  A000              IBASIN = $0324
00142  A000              IBSOUT = $0326
00143  A000              ISTOP  = $0328
00144  A000              IGETIN = $032A
00145  A000              ICLALL = $032C
00146  A000              USRCMD = $03EE
00147  A000              ILOAD  = $0330
00148  A000              ISAVE  = $0332
00149  A000              ;********************************
00150  A000              ; CASSETTE I/O BUFFER $033C-$03FB 
00151  A000              ;********************************
00152  A000              TBUFER = $033C
00153  A000              ;********************************
00154  A000              ; PAGE FOUR EQUATES
00155  A000              ;********************************
00156  A000              VICSCN = $0400
00157  A000              ;********************************
00158  A000              ; PAGE FIVE EQUATES
00159  A000              ;********************************
00160  A000              
00161  A000              ;********************************
00162  A000              ; PAGE SIX EQUATES
00163  A000              ;********************************
00164  A000              
00165  A000              ;********************************






ABASIC.ASM......PAGE 0004

LINE# LOC   CODE        LINE


00166  A000              ; PAGE SEVEN EQUATES
00167  A000              ;********************************
00168  A000              
00169  A000              ;********************************
00170  A000              ; PAGE EIGHT EQUATES
00171  A000              ;********************************
00172  A000              
00173  A000              ;********************************
00174  A000              ; BASIC-KERNAL ROM EQUATES
00175  A000              ;********************************
00176  A000              ; DIFF
00177  A000              ; POLY1 C64 = $E043 VIC20 = $E040
00178  A000              POLY1  = $E043         ; COMPUTE ODD DEGREES FOR 
SIN AND ATN
00179  A000              ;KKE112 = $E112 ; CHRIN
00180  A000              ;KKE118 = $E118 ; SET OUTPUT DEVICE
00181  A000              ;KKE11E = $E11E ; CHKIN
00182  A000              ;KKE124 = $E124 ; GETIN
00183  A000              ;
00184  A000              KKE12A = $E12A         ; SYS
00185  A000              KKE156 = $E156         ; SAVE
00186  A000              KKE165 = $E165         ; VERIFY
00187  A000              KKE168 = $E168         ; LOAD
00188  A000              KKE1BE = $E1BE         ; OPEN
00189  A000              KKE1C7 = $E1C7         ; CLOSE
00190  A000              ;
00191  A000              ; ADDRESS TABLE FOR FUNCTIONS
00192  A000              ;
00193  A000              ;ZZE097 = $E097   ; RND
00194  A000              ;KKE10C = $E10C
00195  A000              ;KKE264 = $E264   ; COS
00196  A000              ;XXE26B = $E26B   ; SIN
00197  A000              ;ZZE2B4 = $E2B4   ; TAN
00198  A000              ;KKE30E = $E30E   ; ATN
00199  A000              ;
00200  A000              ;XXE386 = $E386   ;
00201  A000              ;********************************
00202  A000              ; KERNAL ROM EQUATES - VECTOR TABLE
00203  A000              ;********************************
00204  A000              SETMSG = $FF90
00205  A000              READST = $FFB7
00206  A000              CLRCHN = $FFCC
00207  A000              RDTIM  = $FFDE
00208  A000              STOP   = $FFE1         ; TEST STOP KEY
00209  A000              CLALL  = $FFE7         ; CLOSE ALL FILES
00210  A000              PLOT   = $FFF0
00211  A000              ;********************************
00212  A000              ; KERNAL ROM EQUATES
00213  A000              ;********************************
00214  A000              KERNAL = $E000         ; START OF KERNAL ROM
00215  A000              BASCLD = $E394         ; BASIC COLD START ENTRY P
OINT
00216  A000              BASWRM = $E37B         ; BASIC WARM START ENTRY P
OINT
00217  A000              ;********************************
00218  A000              ;*** START OF THE BASIC ROM
00219  A000              ;********************************
00220  A000              ; DIFF






ABASIC.ASM......PAGE 0005

LINE# LOC   CODE        LINE


00221  A000              ; C64 = $E394 VIC20 = $E378
00222  A000              ; C64 = $E37B VIC20 = $E467
00223  A000              ;
00224  A000              ;********************************
00225  A000  94 E3       ZZA000 .WORD BASCLD    ; BASIC COLD START ENTRY P
OINT
00226  A002  7B E3       ZZA002 .WORD BASWRM    ; BASIC WARM START ENTRY P
OINT
00227  A004              ;********************************
00228  A004              ; CBMBASIC
00229  A004              ;********************************
00230  A004  43 42       ZZA004 .BYTE 'CBMBASIC'
00231  A00C              ;********************************
00232  A00C              ; ADDRESS TABLE FOR COMMANDS
00233  A00C              ; (ADDRESS MINUS 1 USED)
00234  A00C              ;********************************
00235  A00C              ; DIFF
00236  A00C              ; LOAD   C64 = $E167 VIC20 = $$E164
00237  A00C              ; SAVE   C64 = $E155 VIC20 = $E152
00238  A00C              ; VERIFY C64 = $E164 VIC20 = $E161
00239  A00C              ;
00240  A00C              ; SYS    C64 = $E129 VIC20 = $E126
00241  A00C              ;
00242  A00C              ; OPEN   C64 = #E1BD VIC20 = $$E1BA
00243  A00C              ; CLOSE  C64 = $E1C6 VIC20 = $E1C3
00244  A00C              ;
00245  A00C              ;********************************
00246  A00C  30 A8       ZZA00C .WORD ZZA831-1  ;$A830   ; END
00247  A00E  41 A7              .WORD ZZA742-1  ;$A741   ; FOR
00248  A010  1D AD              .WORD ZZAD1E-1  ;$AD1D   ; NEXT
00249  A012  F7 A8              .WORD XXA8F8-1  ;$A8F7   ; DATA
00250  A014  A4 AB              .WORD ZZABA5-1  ;$ABA4   ; INPUT#
00251  A016  BE AB              .WORD ZZABBF-1  ;$ABBE   ; INPUT
00252  A018  80 B0              .WORD ZZB081-1  ;$B080   ; DIM
00253  A01A  05 AC              .WORD ZZAC06-1  ;$AC05   ; READ
00254  A01C  A4 A9              .WORD XXA9A5-1  ;$A9A4   ; LET
00255  A01E  9F A8              .WORD XXA8A0-1  ;$A89F   ; GOTO
00256  A020  70 A8              .WORD ZZA871-1  ;$A870   ; RUN
00257  A022  27 A9              .WORD ZZA928-1  ;$A927   ; IF
00258  A024  1C A8              .WORD XXA81D-1  ;$A81C   ; RESTORE
00259  A026  82 A8              .WORD ZZA883-1  ;$A882   ; GOSUB
00260  A028  D1 A8              .WORD ZZA8D2-1  ;$A8D1   ; RETURN
00261  A02A  3A A9              .WORD ZZA93B-1  ;$A93A   ; REM
00262  A02C  2E A8              .WORD ZZA82F-1  ;$A82E   ; STOP
00263  A02E  4A A9              .WORD ZZA94B-1  ;$A94A   ; ON
00264  A030  2C B8              .WORD ZZB82D-1  ;$B82C   ; WAIT
00265  A032  67 E1              .WORD KKE168-1  ;$E167   ; LOAD
00266  A034  55 E1              .WORD KKE156-1  ;$E155   ; SAVE
00267  A036  64 E1              .WORD KKE165-1  ;$E164   ; VERIFY
00268  A038  B2 B3              .WORD ZZB3B3-1  ;$B3B2   ; DEF
00269  A03A  23 B8              .WORD ZZB824-1  ;$B823   ; POKE
00270  A03C  7F AA              .WORD ZZAA80-1  ;$AA7F   ; PRINT#
00271  A03E  9F AA              .WORD XXAAA0-1  ;$AA9F   ; PRINT
00272  A040  56 A8              .WORD ZZA857-1  ;$A856   ; CONT
00273  A042  9B A6              .WORD ZZA69C-1  ;$A69B   ; LIST
00274  A044  5D A6              .WORD ZZA65E-1  ;$A65D   ; CLR
00275  A046  85 AA              .WORD XXAA86-1  ;$AA85   ; CMD






ABASIC.ASM......PAGE 0006

LINE# LOC   CODE        LINE


00276  A048  29 E1              .WORD KKE12A-1  ;$E129   ; SYS
00277  A04A  BD E1              .WORD KKE1BE-1  ;$E1BD   ; OPEN
00278  A04C  C6 E1              .WORD KKE1C7-1  ;$E1C6   ; CLOSE
00279  A04E  7A AB              .WORD XXAB7B-1  ;$AB7A   ; GET
00280  A050  41 A6       ZZA050 .WORD ZZA642-1  ;$A641   ; NEW
00281  A052              ;********************************
00282  A052              ; OFFSET TO ADDRESS TABLE
00283  A052              ;********************************
00284  A052              TABLEN = ZZA050 - ZZA00C ; $44
00285  A052              ;********************************
00286  A052              ; ADDRESS TABLE FOR FUNCTIONS
00287  A052              ;********************************
00288  A052              ; DIFF
00289  A052              ; USRPOK C64 = $0310 VIC20 = $0000
00290  A052              ; DIFF - FIXED BY PUTTING BASICV2EX AT END
00291  A052              ; RND    C64 = $E097 VIC20 = $E094
00292  A052              ; COS    C64 = $E264 VIC20 = $E261
00293  A052              ; SIN    C64 = $E26B VIC20 = $E268
00294  A052              ; TAN    C64 = $E2B4 VIC20 = $E2B1
00295  A052              ; ATAN   C64 = $E30E VIC20 = $E30B
00296  A052              ;********************************
00297  A052  39 BC       ZZA052 .WORD XXBC39    ; SGN
00298  A054  CC BC              .WORD XXBCCC    ; INT
00299  A056  58 BC              .WORD XXBC58    ; ABS
00300  A058  10 03              .WORD USRPOK    ; USR
00301  A05A  7D B3              .WORD XXB37D    ; FRE
00302  A05C  9E B3              .WORD XXB39E    ; POS
00303  A05E  71 BF              .WORD XXBF71    ; SQR
00304  A060  97 E0              .WORD ZZE097    ; RND
00305  A062  EA B9              .WORD XXB9EA    ; LOG
00306  A064  ED BF              .WORD XXBFED    ; EXP
00307  A066  64 E2              .WORD KKE264    ; COS
00308  A068  6B E2              .WORD XXE26B    ; SIN
00309  A06A  B4 E2              .WORD ZZE2B4    ; TAN
00310  A06C  0E E3              .WORD KKE30E    ; ATN
00311  A06E  0D B8              .WORD XXB80D    ; PEEK
00312  A070  7C B7              .WORD XXB77C    ; LEN
00313  A072  65 B4              .WORD XXB465    ; STR$
00314  A074  AD B7              .WORD XXB7AD    ; VAL
00315  A076  8B B7              .WORD XXB78B    ; ASC
00316  A078  EC B6              .WORD XXB6EC    ; CHR$
00317  A07A  00 B7              .WORD XXB700    ; LEFT$
00318  A07C  2C B7              .WORD XXB72C    ; RIGHT$
00319  A07E  37 B7              .WORD XXB737    ; MID$
00320  A080              ;********************************
00321  A080              ; PRIORITY AND ADDRESS TABLE
00322  A080              ; FOR OPERATORS
00323  A080              ; (ADDRESS MINUS 1 USED)
00324  A080              ;
00325  A080              ;*** PRECEDENCE BYTE AND ACTION ADDRESSES
00326  A080              ; FOR OPERATORS
00327  A080              ; LIKE THE PRIMARY COMMANDS THESE ARE CALLED
00328  A080              ; BY PUSHING THE ADDRESS ONTO THE STACK
00329  A080              ; AND DOING AN RTS, SO AGAIN THE 
00330  A080              ; ACTUAL ADDRESS -1 NEEDS TO BE PUSHED






ABASIC.ASM......PAGE 0007

LINE# LOC   CODE        LINE


00331  A080              ;********************************
00332  A080  79          XXA080 .BYTE $79
00333  A081  69 B8       XXA081 .WORD XXB86A-1  ;$B869   ; PLUS
00334  A083  79                 .BYTE $79
00335  A084  52 B8              .WORD KKB853-1  ;$B852   ; MINUS
00336  A086  7B                 .BYTE $7B
00337  A087  2A BA              .WORD ZZBA2B-1  ;$BA2A   ; MULTIPLY
00338  A089  7B                 .BYTE $7B
00339  A08A  11 BB              .WORD XXBB12-1  ;$BB11   ; DIVIDE
00340  A08C  7F                 .BYTE $7F
00341  A08D  7A BF              .WORD ZZBF7B-1  ;$BF7A   ; POWER
00342  A08F  50                 .BYTE $50
00343  A090  E8 AF              .WORD ZZAFE9-1  ;$AFE8   ; AND
00344  A092  46                 .BYTE $46
00345  A093  E5 AF              .WORD ZZAFE6-1  ;$AFE5   ; OR
00346  A095  7D                 .BYTE $7D
00347  A096  B3 BF              .WORD XXBFB4-1  ;$BFB3   ; NEGATIVE
00348  A098  5A                 .BYTE $5A
00349  A099  D3 AE              .WORD ZZAED4-1  ;$AED3   ; NOT
00350  A09B  64                 .BYTE $64
00351  A09C  15 B0       WWA09C .WORD ZZB016-1  ;$B015   ; GREATER / EQUAL
 / LESS
00352  A09E              ;********************************
00353  A09E              ; TABLE OF COMMANDS
00354  A09E              ; EACH ENDED WITH A +$80
00355  A09E              ;
00356  A09E              ; *** BASIC KEYWORDS
00357  A09E              ; EACH WORD HAS B7 SET IN IT'S LAST CHARACTER
00358  A09E              ; AS AN END MARKER, EVEN THE ONE CHARACTER
00359  A09E              ; KEYWORDS SUCH AS "<" OR "="
00360  A09E              ; FIRST ARE THE PRIMARY COMMAND KEYWORDS,
00361  A09E              ; ONLY THESE CAN START A STATEMENT
00362  A09E              ;
00363  A09E              ;********************************
00364  A09E  45          XXA09E .BYTE $45,$4E,$C4                 ; END
00364  A09F  4E 
00364  A0A0  C4 
00365  A0A1  46                 .BYTE $46,$4F,$D2                 ; FOR
00365  A0A2  4F 
00365  A0A3  D2 
00366  A0A4  4E                 .BYTE $4E,$45,$58,$D4             ; NEXT
00366  A0A5  45 
00366  A0A6  58 
00366  A0A7  D4 
00367  A0A8  44                 .BYTE $44,$41,$54,$C1             ; DATA
00367  A0A9  41 
00367  A0AA  54 
00367  A0AB  C1 
00368  A0AC  49                 .BYTE $49,$4E,$50,$55,$54,$A3     ; INPUT#

00368  A0AD  4E 
00368  A0AE  50 
00368  A0AF  55 
00368  A0B0  54 
00368  A0B1  A3 
00369  A0B2  49                 .BYTE $49,$4E,$50,$55,$D4         ; INPUT
00369  A0B3  4E 






ABASIC.ASM......PAGE 0008

LINE# LOC   CODE        LINE


00369  A0B4  50 
00369  A0B5  55 
00369  A0B6  D4 
00370  A0B7  44                 .BYTE $44,$49,$CD                 ; DIM
00370  A0B8  49 
00370  A0B9  CD 
00371  A0BA  52                 .BYTE $52,$45,$41,$C4             ; READ
00371  A0BB  45 
00371  A0BC  41 
00371  A0BD  C4 
00372  A0BE  4C                 .BYTE $4C,$45,$D4                 ; LET
00372  A0BF  45 
00372  A0C0  D4 
00373  A0C1  47                 .BYTE $47,$4F,$54,$CF             ; GOTO
00373  A0C2  4F 
00373  A0C3  54 
00373  A0C4  CF 
00374  A0C5  52                 .BYTE $52,$55,$CE                 ; RUN
00374  A0C6  55 
00374  A0C7  CE 
00375  A0C8  49                 .BYTE $49,$C6                     ; IF
00375  A0C9  C6 
00376  A0CA  52                 .BYTE $52,$45,$53,$54,$4F,$52,$C5 ; RESTOR
E
00376  A0CB  45 
00376  A0CC  53 
00376  A0CD  54 
00376  A0CE  4F 
00376  A0CF  52 
00376  A0D0  C5 
00377  A0D1  47                 .BYTE $47,$4F,$53,$55,$C2         ; GOSUB
00377  A0D2  4F 
00377  A0D3  53 
00377  A0D4  55 
00377  A0D5  C2 
00378  A0D6  52                 .BYTE $52,$45,$54,$55,$52,$CE     ; RETURN

00378  A0D7  45 
00378  A0D8  54 
00378  A0D9  55 
00378  A0DA  52 
00378  A0DB  CE 
00379  A0DC  52                 .BYTE $52,$45,$CD                 ; REM
00379  A0DD  45 
00379  A0DE  CD 
00380  A0DF  53                 .BYTE $53,$54,$4F,$D0             ; STOP
00380  A0E0  54 
00380  A0E1  4F 
00380  A0E2  D0 
00381  A0E3  4F                 .BYTE $4F,$CE                     ; ON
00381  A0E4  CE 
00382  A0E5  57                 .BYTE $57,$41,$49,$D4             ; WAIT
00382  A0E6  41 
00382  A0E7  49 
00382  A0E8  D4 
00383  A0E9  4C                 .BYTE $4C,$4F,$41,$C4             ; LOAD
00383  A0EA  4F 






ABASIC.ASM......PAGE 0009

LINE# LOC   CODE        LINE


00383  A0EB  41 
00383  A0EC  C4 
00384  A0ED  53                 .BYTE $53,$41,$56,$C5             ; SAVE
00384  A0EE  41 
00384  A0EF  56 
00384  A0F0  C5 
00385  A0F1  56                 .BYTE $56,$45,$52,$49,$46,$D9     ; VERIFY

00385  A0F2  45 
00385  A0F3  52 
00385  A0F4  49 
00385  A0F5  46 
00385  A0F6  D9 
00386  A0F7  44                 .BYTE $44,$45,$C6                 ; DEF
00386  A0F8  45 
00386  A0F9  C6 
00387  A0FA  50                 .BYTE $50,$4F,$4B,$C5             ; POKE
00387  A0FB  4F 
00387  A0FC  4B 
00387  A0FD  C5 
00388  A0FE  50                 .BYTE $50,$52,$49,$4E,$54,$A3     ; PRINT#

00388  A0FF  52 
00388  A100  49 
00388  A101  4E 
00388  A102  54 
00388  A103  A3 
00389  A104  50                 .BYTE $50,$52,$49,$4E,$D4         ; PRINT
00389  A105  52 
00389  A106  49 
00389  A107  4E 
00389  A108  D4 
00390  A109  43                 .BYTE $43,$4F,$4E,$D4             ; CONT
00390  A10A  4F 
00390  A10B  4E 
00390  A10C  D4 
00391  A10D  4C                 .BYTE $4C,$49,$53,$D4             ; LIST
00391  A10E  49 
00391  A10F  53 
00391  A110  D4 
00392  A111  43                 .BYTE $43,$4C,$D2                 ; CLR
00392  A112  4C 
00392  A113  D2 
00393  A114  43                 .BYTE $43,$4D,$C4                 ; CMD
00393  A115  4D 
00393  A116  C4 
00394  A117  53                 .BYTE $53,$59,$D3                 ; SYS
00394  A118  59 
00394  A119  D3 
00395  A11A  4F                 .BYTE $4F,$50,$45,$CE             ; OPEN
00395  A11B  50 
00395  A11C  45 
00395  A11D  CE 
00396  A11E  43                 .BYTE $43,$4C,$4F,$53,$C5         ; CLOSE
00396  A11F  4C 
00396  A120  4F 
00396  A121  53 






ABASIC.ASM......PAGE 0010

LINE# LOC   CODE        LINE


00396  A122  C5 
00397  A123  47                 .BYTE $47,$45,$D4                 ; GET
00397  A124  45 
00397  A125  D4 
00398  A126  4E                 .BYTE $4E,$45,$D7                 ; NEW
00398  A127  45 
00398  A128  D7 
00399  A129              ;********************************
00400  A129              ; TABLE OF FUNCTIONS
00401  A129              ; EACH ENDED WITH A +$80
00402  A129              ;********************************
00403  A129  54          ZZA129 .BYTE $54,$41,$42,$A8         ; TAB(
00403  A12A  41 
00403  A12B  42 
00403  A12C  A8 
00404  A12D  54                 .BYTE $54,$CF                 ; TO
00404  A12E  CF 
00405  A12F  46                 .BYTE $46,$CE                 ; FN
00405  A130  CE 
00406  A131  53                 .BYTE $53,$50,$43,$A8         ; SPC(
00406  A132  50 
00406  A133  43 
00406  A134  A8 
00407  A135  54                 .BYTE $54,$48,$45,$CE         ; THEN
00407  A136  48 
00407  A137  45 
00407  A138  CE 
00408  A139  4E                 .BYTE $4E,$4F,$D4             ; NOT
00408  A13A  4F 
00408  A13B  D4 
00409  A13C  53                 .BYTE $53,$54,$45,$D0         ; STEP
00409  A13D  54 
00409  A13E  45 
00409  A13F  D0 
00410  A140  AB                 .BYTE $AB                     ; PLUS
00411  A141  AD                 .BYTE $AD                     ; MINUS
00412  A142  AA                 .BYTE $AA                     ; MULTIPLY
00413  A143  AF                 .BYTE $AF                     ; DIVIDE
00414  A144  DE                 .BYTE $DE                     ; POWER
00415  A145  41                 .BYTE $41,$4E,$C4             ; AND
00415  A146  4E 
00415  A147  C4 
00416  A148  4F                 .BYTE $4F,$D2                 ; ON
00416  A149  D2 
00417  A14A  BE                 .BYTE $BE                     ; GREATER
00418  A14B  BD                 .BYTE $BD                     ; EQUAL
00419  A14C  BC                 .BYTE $BC                     ; LESS
00420  A14D  53                 .BYTE $53,$47,$CE             ; SGN
00420  A14E  47 
00420  A14F  CE 
00421  A150  49                 .BYTE $49,$4E,$D4             ; INT
00421  A151  4E 
00421  A152  D4 
00422  A153  41                 .BYTE $41,$42,$D3             ; ABS
00422  A154  42 






ABASIC.ASM......PAGE 0011

LINE# LOC   CODE        LINE


00422  A155  D3 
00423  A156  55                 .BYTE $55,$53,$D2             ; USR
00423  A157  53 
00423  A158  D2 
00424  A159  46                 .BYTE $46,$52,$C5             ; FRE
00424  A15A  52 
00424  A15B  C5 
00425  A15C  50                 .BYTE $50,$4F,$D3             ; POS
00425  A15D  4F 
00425  A15E  D3 
00426  A15F  53                 .BYTE $53,$51,$D2             ; SQR
00426  A160  51 
00426  A161  D2 
00427  A162  52                 .BYTE $52,$4E,$C4             ; RND
00427  A163  4E 
00427  A164  C4 
00428  A165  4C                 .BYTE $4C,$4F,$C7             ; LOG
00428  A166  4F 
00428  A167  C7 
00429  A168  45                 .BYTE $45,$58,$D0             ; EXP
00429  A169  58 
00429  A16A  D0 
00430  A16B  43                 .BYTE $43,$4F,$D3             ; COS
00430  A16C  4F 
00430  A16D  D3 
00431  A16E  53                 .BYTE $53,$49,$CE             ; SIN
00431  A16F  49 
00431  A170  CE 
00432  A171  54                 .BYTE $54,$41,$CE             ; TAN
00432  A172  41 
00432  A173  CE 
00433  A174  41                 .BYTE $41,$54,$CE             ; ATN
00433  A175  54 
00433  A176  CE 
00434  A177  50                 .BYTE $50,$45,$45,$CB         ; PEEK
00434  A178  45 
00434  A179  45 
00434  A17A  CB 
00435  A17B  4C                 .BYTE $4C,$45,$CE             ; LEN
00435  A17C  45 
00435  A17D  CE 
00436  A17E  53                 .BYTE $53,$54,$52,$A4         ; STR$
00436  A17F  54 
00436  A180  52 
00436  A181  A4 
00437  A182  56                 .BYTE $56,$41,$CC             ; VAL
00437  A183  41 
00437  A184  CC 
00438  A185  41                 .BYTE $41,$53,$C3             ; ASC
00438  A186  53 
00438  A187  C3 
00439  A188  43                 .BYTE $43,$48,$52,$A4         ; CHR$
00439  A189  48 
00439  A18A  52 
00439  A18B  A4 






ABASIC.ASM......PAGE 0012

LINE# LOC   CODE        LINE


00440  A18C  4C                 .BYTE $4C,$45,$46,$54,$A4     ; LEFT$
00440  A18D  45 
00440  A18E  46 
00440  A18F  54 
00440  A190  A4 
00441  A191  52                 .BYTE $52,$49,$47,$48,$54,$A4 ; RIGHT$
00441  A192  49 
00441  A193  47 
00441  A194  48 
00441  A195  54 
00441  A196  A4 
00442  A197  4D                 .BYTE $4D,$49,$44,$A4         ; MID$
00442  A198  49 
00442  A199  44 
00442  A19A  A4 
00443  A19B              ;********************************
00444  A19B              ; OTHER COMMANDS
00445  A19B              ;********************************
00446  A19B  47                 .BYTE $47,$CF                 ; GO
00446  A19C  CF 
00447  A19D  00                 .BYTE $00
00448  A19E              ;********************************
00449  A19E              ; TABLE OF ERRORS MESSAGES
00450  A19E              ; EACH ENDED WITH A +$80
00451  A19E              ;********************************
00452  A19E              ; TOO MANY FILES
00453  A19E  54 4F       XXA19E .BYTE 'TOO MANY FILE'
00454  A1AB  D3                 .BYTE $D3
00455  A1AC              ; FILE OPEN
00456  A1AC  46 49       XXA1AC .BYTE 'FILE OPE'
00457  A1B4  CE                 .BYTE $CE
00458  A1B5              ; FILE NOT OPEN
00459  A1B5  46 49       XXA1B5 .BYTE 'FILE NOT OPE'
00460  A1C1  CE                 .BYTE $CE
00461  A1C2              ; FILE NOT FOUND
00462  A1C2  46 49       XXA1C2 .BYTE 'FILE NOT FOUN'
00463  A1CF  C4                 .BYTE $C4
00464  A1D0              ; DEVICE NOT PRESENT
00465  A1D0  44 45       XXA1D0 .BYTE 'DEVICE NOT PRESEN'
00466  A1E1  D4                 .BYTE $D4
00467  A1E2              ; NOT INPUT FILE
00468  A1E2  4E 4F       XXA1E2 .BYTE 'NOT INPUT FIL'
00469  A1EF  C5                 .BYTE $C5
00470  A1F0              ; NOT OUTPUT FILE
00471  A1F0  4E 4F       XXA1F0 .BYTE 'NOT OUTPUT FIL'
00472  A1FE  C5                 .BYTE $C5
00473  A1FF              ; MISSISNG FILE NAME
00474  A1FF  4D 49       XXA1FF .BYTE 'MISSING FILE NAM'
00475  A20F  C5                 .BYTE $C5
00476  A210              ; ILLEGAL DEVICE NUMBER
00477  A210  49 4C       XXA210 .BYTE 'ILLEGAL DEVICE NUMBE'
00478  A224  D2                 .BYTE $D2
00479  A225              ; NEXT WITHOUT FOR
00480  A225  4E 45       XXA225 .BYTE 'NEXT WITHOUT FO'
00481  A234  D2                 .BYTE $D2






ABASIC.ASM......PAGE 0013

LINE# LOC   CODE        LINE


00482  A235              ; SYNTAX
00483  A235  53 59       XXA235 .BYTE 'SYNTA'
00484  A23A  D8                 .BYTE $D8
00485  A23B              ; RETURN WITHOUT GOSUB
00486  A23B  52 45       XXA23B .BYTE 'RETURN WITHOUT GOSU'
00487  A24E  C2                 .BYTE $C2
00488  A24F              ; OUT OF DATA
00489  A24F  4F 55       XXA24F .BYTE 'OUT OF DAT'
00490  A259  C1                 .BYTE $C1
00491  A25A              ; ILLEGAL QUANTITY
00492  A25A  49 4C       XXA25A .BYTE 'ILLEGAL QUANTIT'
00493  A269  D9                 .BYTE $D9
00494  A26A              ; OVERFLOW
00495  A26A  4F 56       XXA26A .BYTE 'OVERFLO'
00496  A271  D7                 .BYTE $D7
00497  A272              ; OUT OF MEMORY
00498  A272  4F 55       XXA272 .BYTE 'OUT OF MEMOR'
00499  A27E  D9                 .BYTE $D9
00500  A27F              ; UNDEF'D STATEMENT
00501  A27F  55 4E       XXA27F .BYTE 'UNDEF''D STATEMEN'
00502  A28F  D4                 .BYTE $D4
00503  A290              ; BAD SUBSCRIPT
00504  A290  42 41       XXA290 .BYTE 'BAD SUBSCRIP'
00505  A29C  D4                 .BYTE $D4
00506  A29D              ; REDIM'D ARRAY
00507  A29D  52 45       XXA29D .BYTE 'REDIM''D ARRA'
00508  A2A9  D9                 .BYTE $D9
00509  A2AA              ; DIVISION BY ZERO
00510  A2AA  44 49       XXA2AA .BYTE 'DIVISION BY ZER'
00511  A2B9  CF                 .BYTE $CF
00512  A2BA              ; ILLEGAL DIRECT
00513  A2BA  49 4C       XXA2BA .BYTE 'ILLEGAL DIREC'
00514  A2C7  D4                 .BYTE $D4
00515  A2C8              ; TYPE MISMATCH
00516  A2C8  54 59       XXA2C8 .BYTE 'TYPE MISMATC'
00517  A2D4  C8                 .BYTE $C8
00518  A2D5              ; STRING TO LONG
00519  A2D5  53 54       XXA2D5 .BYTE 'STRING TOO LON'
00520  A2E3  C7                 .BYTE $C7
00521  A2E4              ; FILE DATA
00522  A2E4  46 49       XXA2E4 .BYTE 'FILE DAT'
00523  A2EC  C1                 .BYTE $C1
00524  A2ED              ; FORMULA TOO COMPLEX
00525  A2ED  46 4F       XXA2ED .BYTE 'FORMULA TOO COMPLE'
00526  A2FF  D8                 .BYTE $D8
00527  A300              ; CAN'T CONTINUE
00528  A300  43 41       XXA300 .BYTE 'CAN''T CONTINU'
00529  A30D  C5                 .BYTE $C5
00530  A30E              ; UNDEF'D FUNCTION
00531  A30E  55 4E       XXA30E .BYTE 'UNDEF''D FUNCTIO'
00532  A31D  CE                 .BYTE $CE
00533  A31E              ; VERIFY
00534  A31E  56 45       XXA31E .BYTE 'VERIF'
00535  A323  D9                 .BYTE $D9
00536  A324              ; LOAD






ABASIC.ASM......PAGE 0014

LINE# LOC   CODE        LINE


00537  A324  4C 4F 41    XXA324 .BYTE 'LOA'
00538  A327  C4          XXA327 .BYTE $C4
00539  A328              ;********************************
00540  A328              ; ERROR MESSAGE ADDRESS LOCATIONS
00541  A328              ;********************************
00542  A328  9E A1       WWA328 .WORD XXA19E    ; 01 TOO MANY FILES
00543  A32A  AC A1              .WORD XXA1AC    ; 02 FILE OPEN
00544  A32C  B5 A1              .WORD XXA1B5    ; 03 FILE NOT OPEN
00545  A32E  C2 A1              .WORD XXA1C2    ; 04 FILE NOT FOUND
00546  A330  D0 A1              .WORD XXA1D0    ; 05 DEVICE NOT PRESENT
00547  A332  E2 A1              .WORD XXA1E2    ; 06 NOT INPUT FILE
00548  A334  F0 A1              .WORD XXA1F0    ; 07 NOT OUTPUT FILE
00549  A336  FF A1              .WORD XXA1FF    ; 08 MISSING FILE NAME
00550  A338  10 A2              .WORD XXA210    ; 09 ILLEGAL DEVICE NUMBER

00551  A33A  25 A2              .WORD XXA225    ; 0A NEXT WITHOUT FOR
00552  A33C  35 A2              .WORD XXA235    ; 0B SYNTAX
00553  A33E  3B A2              .WORD XXA23B    ; 0C RETURN WITHOUT GOSUB
00554  A340  4F A2              .WORD XXA24F    ; 0D OUT OF DATA
00555  A342  5A A2              .WORD XXA25A    ; 0E ILLEGAL QUANTITY
00556  A344  6A A2              .WORD XXA26A    ; 0F OVERFLOW
00557  A346  72 A2              .WORD XXA272    ; 10 OUT OF MEMORY
00558  A348  7F A2              .WORD XXA27F    ; 11 UNDEF'D STATMENT
00559  A34A  90 A2              .WORD XXA290    ; 12 BAD SUBSCRIPT
00560  A34C  9D A2              .WORD XXA29D    ; 13 REDIM'D ARRAY
00561  A34E  AA A2              .WORD XXA2AA    ; 14 DEVISION BY ZERO
00562  A350  BA A2              .WORD XXA2BA    ; 15 ILLEGAL DIRECT
00563  A352  C8 A2              .WORD XXA2C8    ; 16 TYPE MISMATCH
00564  A354  D5 A2              .WORD XXA2D5    ; 17 STRING TOO LONG
00565  A356  E4 A2              .WORD XXA2E4    ; 18 FILE DATA
00566  A358  ED A2              .WORD XXA2ED    ; 19 FORMULA TOO COMPLEX
00567  A35A  00 A3              .WORD XXA300    ; 1A CAN'T CONTINUE
00568  A35C  0E A3              .WORD XXA30E    ; 1B UNDEF'D FUNCTION
00569  A35E  1E A3              .WORD XXA31E    ; 1C VERIFY
00570  A360  24 A3              .WORD XXA324    ; 1D LOAD
00571  A362  83 A3              .WORD XXA383    ; 1E BREAK
00572  A364              ;********************************
00573  A364              ; OTHER MESSAGES
00574  A364              ;********************************
00575  A364              ; OK
00576  A364  0D          WWA364 .BYTE $0D
00577  A365  4F 4B              .BYTE 'OK'
00578  A367  0D                 .BYTE $0D
00579  A368  00                 .BYTE $00
00580  A369              ; ERROR
00581  A369              ; DIFF
00582  A369              ; C64 = '  ERROR' VIC20 = $0D,' ERROR'
00583  A369  20 20       WWA369 .BYTE '  ERROR'
00584  A370  00                 .BYTE $00
00585  A371              ; IN
00586  A371  20 49       WWA371 .BYTE ' IN '
00587  A375  00                 .BYTE $00
00588  A376              ; READY.
00589  A376  0D          WWA376 .BYTE $0D
00590  A377  0A                 .BYTE $0A
00591  A378  52 45              .BYTE 'READY.'






ABASIC.ASM......PAGE 0015

LINE# LOC   CODE        LINE


00592  A37E  0D                 .BYTE $0D
00593  A37F  0A                 .BYTE $0A
00594  A380  00                 .BYTE $00
00595  A381              ; BREAK
00596  A381  0D          WWA381 .BYTE $0D
00597  A382  0A                 .BYTE $0A
00598  A383  42 52       XXA383 .BYTE 'BREAK'
00599  A388  00                 .BYTE $00
00600  A389  A0                 .BYTE $A0
00601  A38A              ;********************************
00602  A38A              ; SEARCH FOR "FOR" BLOCKS ON STACK
00603  A38A              ;
00604  A38A              ; *** SEARCH THE STACK FOR FOR OR GOSUB ACTIVITY
00605  A38A              ; RETURN ZB=1 IF FOR VARIABLE FOUND
00606  A38A              ;********************************
00607  A38A  BA          XXA38A TSX             ;COPY STACK POINTER
00608  A38B  E8                 INX             ;+1 PASS RETURN ADDRESS
00609  A38C  E8                 INX             ;+2 PASS RETURN ADDRESS
00610  A38D  E8                 INX             ;+3 PASS CALLING ROUTINE R
ETURN ADDRESS
00611  A38E  E8                 INX             ;+4 PASS CALLING ROUTINE R
ETURN ADDRESS
00612  A38F  BD 01 01    XXA38F LDA STACK+1,X GET THE TOKEN BYTE FROM THE 
STACK
00613  A392  C9 81              CMP #$81        ; FOR BLOCK CODE - IS IT T
HE FOR TOKEN
00614  A394  D0 21              BNE XXA3B7      ; IF NOT FOR TOKEN JUST EX
IT
00615  A396                                     ;IT WAS THE FOR TOKEN
00616  A396  A5 4A              LDA FORPNT+1     ;GET FOR/NEXT VARIABLE PO
INTER HIGH BYTE
00617  A398  D0 0A              BNE XXA3A4      ;BRANCH IF NOT NULL
00618  A39A  BD 02 01           LDA STACK+2,X   ;GET FOR VARIABLE POINTER 
LOW BYTE
00619  A39D  85 49              STA FORPNT      ;SAVE FOR/NEXT VARIABLE PO
INTER LOW BYTE
00620  A39F  BD 03 01           LDA STACK+3,X   ;GET FOR VARIABLE POINTER 
HIGH BYTE
00621  A3A2  85 4A              STA FORPNT+1     ;SAVE FOR/NEXT VARIABLE P
OINTER HIGH BYTE
00622  A3A4  DD 03 01    XXA3A4 CMP STACK+3,X   ;COMPARE VARIABLE POINTER 
WITH STACKED VARIABLE POINTER
00623  A3A7                                     ;HIGH BYTE
00624  A3A7  D0 07              BNE XXA3B0      ;BRANCH IF NO MATCH
00625  A3A9  A5 49              LDA FORPNT      ;GET FOR/NEXT VARIABLE POI
NTER LOW BYTE
00626  A3AB  DD 02 01           CMP STACK+2,X   ;COMPARE VARIABLE POINTER 
WITH STACKED VARIABLE POINTER
00627  A3AE                                     ;LOW BYTE
00628  A3AE  F0 07              BEQ XXA3B7      ;EXIT IF MATCH FOUND
00629  A3B0  8A          XXA3B0 TXA             ;COPY INDEX
00630  A3B1  18                 CLC             ;CLEAR CARRY FOR ADD
00631  A3B2  69 12              ADC #$12        ;ADD FOR STACK USE SIZE
00632  A3B4  AA                 TAX             ;COPY BACK TO INDEX
00633  A3B5  D0 D8              BNE XXA38F      ;LOOP IF NOT AT START OF S
TACK
00634  A3B7  60          XXA3B7 RTS             ;DONE WITH IT
00635  A3B8              ;********************************
00636  A3B8              ; MOVE BYTES AFTER CHECK FOR SPACE
00637  A3B8              ;********************************
00638  A3B8  20 08 A4    XXA3B8 JSR XXA408
00639  A3BB  85 31              STA STREND
00640  A3BD  84 32              STY STREND+1
00641  A3BF              ;********************************
00642  A3BF              ; MOVE BYTES ROUTINE
00643  A3BF              ;  $5F/$60 SOURCE START ADDRESS
00644  A3BF              ;  $5A/$5B SOURCE END ADDRESS
00645  A3BF              ;  $58/$59 DESTINATION END ADDRESS
00646  A3BF              ;********************************






ABASIC.ASM......PAGE 0016

LINE# LOC   CODE        LINE


00647  A3BF  38          XXA3BF SEC 
00648  A3C0  A5 5A              LDA $5A
00649  A3C2  E5 5F              SBC $5F
00650  A3C4  85 22              STA INDEX
00651  A3C6  A8                 TAY 
00652  A3C7  A5 5B              LDA $5B
00653  A3C9  E5 60              SBC $60
00654  A3CB  AA                 TAX 
00655  A3CC  E8                 INX 
00656  A3CD  98                 TYA 
00657  A3CE  F0 23              BEQ XXA3F3
00658  A3D0  A5 5A              LDA $5A
00659  A3D2  38                 SEC 
00660  A3D3  E5 22              SBC INDEX
00661  A3D5  85 5A              STA $5A
00662  A3D7  B0 03              BCS XXA3DC
00663  A3D9  C6 5B              DEC $5B
00664  A3DB  38                 SEC 
00665  A3DC  A5 58       XXA3DC LDA $58
00666  A3DE  E5 22              SBC INDEX
00667  A3E0  85 58              STA $58
00668  A3E2  B0 08              BCS XXA3EC
00669  A3E4  C6 59              DEC $59
00670  A3E6  90 04              BCC XXA3EC
00671  A3E8  B1 5A       XXA3E8 LDA ($5A),Y
00672  A3EA  91 58              STA ($58),Y
00673  A3EC  88          XXA3EC DEY 
00674  A3ED  D0 F9              BNE XXA3E8
00675  A3EF  B1 5A              LDA ($5A),Y
00676  A3F1  91 58              STA ($58),Y
00677  A3F3  C6 5B       XXA3F3 DEC $5B
00678  A3F5  C6 59              DEC $59
00679  A3F7  CA                 DEX 
00680  A3F8  D0 F2              BNE XXA3EC
00681  A3FA  60                 RTS 
00682  A3FB              ;********************************
00683  A3FB              ; TEST FOR 2 * A BYTES FREE ON STACK
00684  A3FB              ;********************************
00685  A3FB  0A          XXA3FB ASL A
00686  A3FC  69 3E              ADC #$3E        ;'>'
00687  A3FE  B0 35              BCS XXA435
00688  A400  85 22              STA INDEX
00689  A402  BA                 TSX 
00690  A403  E4 22              CPX INDEX
00691  A405  90 2E              BCC XXA435
00692  A407  60                 RTS 
00693  A408              ;********************************
00694  A408              ; ARRAY AREA OVERFLOW CHECK
00695  A408              ;********************************
00696  A408  C4 34       XXA408 CPY FRETOP+1
00697  A40A  90 28              BCC XXA434
00698  A40C  D0 04              BNE XXA412
00699  A40E  C5 33              CMP FRETOP
00700  A410  90 22              BCC XXA434
00701  A412  48          XXA412 PHA 






ABASIC.ASM......PAGE 0017

LINE# LOC   CODE        LINE


00702  A413  A2 09              LDX #$09
00703  A415  98                 TYA 
00704  A416  48          XXA416 PHA 
00705  A417  B5 57              LDA $57,X
00706  A419  CA                 DEX 
00707  A41A  10 FA              BPL XXA416
00708  A41C  20 26 B5           JSR XXB526
00709  A41F  A2 F7              LDX #$F7
00710  A421  68          XXA421 PLA 
00711  A422  95 61              STA $61,X
00712  A424  E8                 INX 
00713  A425  30 FA              BMI XXA421
00714  A427  68                 PLA 
00715  A428  A8                 TAY 
00716  A429  68                 PLA 
00717  A42A  C4 34              CPY FRETOP+1
00718  A42C  90 06              BCC XXA434
00719  A42E  D0 05              BNE XXA435
00720  A430  C5 33              CMP FRETOP
00721  A432  B0 01              BCS XXA435
00722  A434  60          XXA434 RTS 
00723  A435              ;********************************
00724  A435              ; OUT OF MEMORY ERROR
00725  A435              ;********************************
00726  A435  A2 10       XXA435 LDX #$10        ; ERROR NUMBER
00727  A437              ;********************************
00728  A437              ; HANDLE ERROR MESSAGES
00729  A437              ;********************************
00730  A437  6C 00 03    XXA437 JMP (IERROR)    ; NORMALLY A43A
00731  A43A              ;********************************
00732  A43A              ; STANDARD ERROR MESSAGE HANDLER
00733  A43A              ;********************************
00734  A43A  8A          KKA43A TXA 
00735  A43B  0A                 ASL A
00736  A43C  AA                 TAX 
00737  A43D  BD 26 A3           LDA XXA327-1,X
00738  A440  85 22              STA INDEX
00739  A442  BD 27 A3           LDA XXA327,X
00740  A445  85 23              STA INDEX+1
00741  A447  20 CC FF           JSR CLRCHN
00742  A44A  A9 00              LDA #$00
00743  A44C  85 13              STA CHANNL
00744  A44E  20 D7 AA           JSR XXAAD7
00745  A451  20 45 AB           JSR XXAB45
00746  A454  A0 00              LDY #$00
00747  A456  B1 22       XXA456 LDA (INDEX),Y
00748  A458  48                 PHA 
00749  A459  29 7F              AND #$7F
00750  A45B  20 47 AB           JSR XXAB47
00751  A45E  C8                 INY 
00752  A45F  68                 PLA 
00753  A460  10 F4              BPL XXA456
00754  A462  20 7A A6           JSR XXA67A
00755  A465  A9 69              LDA #<WWA369    ;#$69   ; LOW  A369
00756  A467  A0 A3              LDY #>WWA369    ;#$A3   ; HIGH A369






ABASIC.ASM......PAGE 0018

LINE# LOC   CODE        LINE


00757  A469  20 1E AB    XXA469 JSR XXAB1E
00758  A46C  A4 3A              LDY CURLIN+1
00759  A46E  C8                 INY 
00760  A46F  F0 03              BEQ XXA474
00761  A471  20 C2 BD           JSR XXBDC2
00762  A474  A9 76       XXA474 LDA #<WWA376    ;#$76   ; LOW A376
00763  A476  A0 A3              LDY #>WWA376    ;#$A3   ; HIGH A376
00764  A478  20 1E AB           JSR XXAB1E
00765  A47B  A9 80              LDA #$80
00766  A47D  20 90 FF           JSR SETMSG
00767  A480  6C 02 03    XXA480 JMP (IMAIN)     ; NORMALLY A483
00768  A483              ;################################
00769  A483              ;********************************
00770  A483              ;
00771  A483              ; STANDARD WARM START ROUTINE
00772  A483              ;
00773  A483              ;********************************
00774  A483              ;################################
00775  A483  20 60 A5    KKA483 JSR XXA560
00776  A486  86 7A              STX TXTPTR
00777  A488  84 7B              STY TXTPTR+1
00778  A48A  20 73 00           JSR CHRGET
00779  A48D  AA                 TAX 
00780  A48E  F0 F0              BEQ XXA480
00781  A490  A2 FF              LDX #$FF
00782  A492  86 3A              STX CURLIN+1
00783  A494  90 06              BCC XXA49C
00784  A496  20 79 A5           JSR XXA579
00785  A499  4C E1 A7           JMP XXA7E1
00786  A49C              ;********************************
00787  A49C              ; HANDLE INSERT/DELETE BASIC LINES
00788  A49C              ;********************************
00789  A49C  20 6B A9    XXA49C JSR XXA96B
00790  A49F  20 79 A5           JSR XXA579
00791  A4A2  84 0B              STY COUNT
00792  A4A4  20 13 A6           JSR XXA613
00793  A4A7  90 44              BCC XXA4ED
00794  A4A9              ;********************************
00795  A4A9              ; DELETE OLD LINE
00796  A4A9              ;********************************
00797  A4A9  A0 01              LDY #$01
00798  A4AB  B1 5F              LDA ($5F),Y
00799  A4AD  85 23              STA INDEX+1
00800  A4AF  A5 2D              LDA VARTAB
00801  A4B1  85 22              STA INDEX
00802  A4B3  A5 60              LDA $60
00803  A4B5  85 25              STA INDEX+3
00804  A4B7  A5 5F              LDA $5F
00805  A4B9  88                 DEY 
00806  A4BA  F1 5F              SBC ($5F),Y
00807  A4BC  18                 CLC 
00808  A4BD  65 2D              ADC VARTAB
00809  A4BF  85 2D              STA VARTAB
00810  A4C1  85 24              STA INDEX+2
00811  A4C3  A5 2E              LDA VARTAB+1






ABASIC.ASM......PAGE 0019

LINE# LOC   CODE        LINE


00812  A4C5  69 FF              ADC #$FF
00813  A4C7  85 2E              STA VARTAB+1
00814  A4C9  E5 60              SBC $60
00815  A4CB  AA                 TAX 
00816  A4CC  38                 SEC 
00817  A4CD  A5 5F              LDA $5F
00818  A4CF  E5 2D              SBC VARTAB
00819  A4D1  A8                 TAY 
00820  A4D2  B0 03              BCS XXA4D7
00821  A4D4  E8                 INX 
00822  A4D5  C6 25              DEC INDEX+3
00823  A4D7  18          XXA4D7 CLC 
00824  A4D8  65 22              ADC INDEX
00825  A4DA  90 03              BCC XXA4DF
00826  A4DC  C6 23              DEC INDEX+1
00827  A4DE  18                 CLC 
00828  A4DF  B1 22       XXA4DF LDA (INDEX),Y
00829  A4E1  91 24              STA (INDEX+2),Y
00830  A4E3  C8                 INY 
00831  A4E4  D0 F9              BNE XXA4DF
00832  A4E6  E6 23              INC INDEX+1
00833  A4E8  E6 25              INC INDEX+3
00834  A4EA  CA                 DEX 
00835  A4EB  D0 F2              BNE XXA4DF
00836  A4ED              ;********************************
00837  A4ED              ; INSERT NEW LINE
00838  A4ED              ;********************************
00839  A4ED  20 59 A6    XXA4ED JSR XXA659
00840  A4F0  20 33 A5           JSR XXA533
00841  A4F3  AD 00 02           LDA BUF
00842  A4F6  F0 88              BEQ XXA480
00843  A4F8  18                 CLC 
00844  A4F9  A5 2D              LDA VARTAB
00845  A4FB  85 5A              STA $5A
00846  A4FD  65 0B              ADC COUNT
00847  A4FF  85 58              STA $58
00848  A501  A4 2E              LDY VARTAB+1
00849  A503  84 5B              STY $5B
00850  A505  90 01              BCC XXA508
00851  A507  C8                 INY 
00852  A508  84 59       XXA508 STY $59
00853  A50A  20 B8 A3           JSR XXA3B8
00854  A50D  A5 14              LDA LINNUM
00855  A50F  A4 15              LDY LINNUM+1
00856  A511  8D FE 01           STA $01FE
00857  A514  8C FF 01           STY $01FF
00858  A517  A5 31              LDA STREND
00859  A519  A4 32              LDY STREND+1
00860  A51B  85 2D              STA VARTAB
00861  A51D  84 2E              STY VARTAB+1
00862  A51F  A4 0B              LDY COUNT
00863  A521  88                 DEY 
00864  A522  B9 FC 01    XXA522 LDA $01FC,Y
00865  A525  91 5F              STA ($5F),Y
00866  A527  88                 DEY 






ABASIC.ASM......PAGE 0020

LINE# LOC   CODE        LINE


00867  A528  10 F8              BPL XXA522
00868  A52A  20 59 A6    KKA52A JSR XXA659
00869  A52D  20 33 A5           JSR XXA533
00870  A530  4C 80 A4           JMP XXA480
00871  A533              ;********************************
00872  A533              ; RELINK BASIC PROGRAM
00873  A533              ;********************************
00874  A533  A5 2B       XXA533 LDA TXTTAB
00875  A535  A4 2C              LDY TXTTAB+1
00876  A537  85 22              STA INDEX
00877  A539  84 23              STY INDEX+1
00878  A53B  18                 CLC 
00879  A53C  A0 01       XXA53C LDY #$01
00880  A53E  B1 22              LDA (INDEX),Y
00881  A540  F0 1D              BEQ XXA55F
00882  A542  A0 04              LDY #$04
00883  A544  C8          XXA544 INY 
00884  A545  B1 22              LDA (INDEX),Y
00885  A547  D0 FB              BNE XXA544
00886  A549  C8                 INY 
00887  A54A  98                 TYA 
00888  A54B  65 22              ADC INDEX
00889  A54D  AA                 TAX 
00890  A54E  A0 00              LDY #$00
00891  A550  91 22              STA (INDEX),Y
00892  A552  A5 23              LDA INDEX+1
00893  A554  69 00              ADC #$00
00894  A556  C8                 INY 
00895  A557  91 22              STA (INDEX),Y
00896  A559  86 22              STX INDEX
00897  A55B  85 23              STA INDEX+1
00898  A55D  90 DD              BCC XXA53C
00899  A55F  60          XXA55F RTS 
00900  A560              ;********************************
00901  A560              ; GET STATEMENT INTO BUFFER
00902  A560              ;********************************
00903  A560  A2 00       XXA560 LDX #$00
00904  A562              ; DIFF - FIXED BY ADDING BASICV3EX TO END
00905  A562              ; C64 = $E112 VIC20 = $E10F
00906  A562  20 12 E1    XXA562 JSR KKE112
00907  A565  C9 0D              CMP #$0D
00908  A567  F0 0D              BEQ XXA576
00909  A569  9D 00 02           STA BUF,X
00910  A56C  E8                 INX 
00911  A56D  E0 59              CPX #$59        ;'Y'
00912  A56F  90 F1              BCC XXA562
00913  A571  A2 17              LDX #$17        ; ERROR NUMBER
00914  A573  4C 37 A4           JMP XXA437
00915  A576              ;********************************
00916  A576  4C CA AA    XXA576 JMP XXAACA      ; GOTO END OF LINE
00917  A579              ;********************************
00918  A579              ; CRUNCH TOKENS
00919  A579              ;********************************
00920  A579  6C 04 03    XXA579 JMP (ICRNCH)    ; NORMALLY A57C
00921  A57C              ;********************************






ABASIC.ASM......PAGE 0021

LINE# LOC   CODE        LINE


00922  A57C              ; STANDARD TOKEN CRUNCHER
00923  A57C              ;********************************
00924  A57C  A6 7A       KKA57C LDX TXTPTR
00925  A57E  A0 04              LDY #$04
00926  A580  84 0F              STY GARBFL
00927  A582  BD 00 02    XXA582 LDA BUF,X
00928  A585  10 07              BPL XXA58E
00929  A587  C9 FF              CMP #$FF        ; PI
00930  A589  F0 3E              BEQ XXA5C9
00931  A58B  E8                 INX 
00932  A58C  D0 F4              BNE XXA582
00933  A58E  C9 20       XXA58E CMP #$20        ;' '
00934  A590  F0 37              BEQ XXA5C9
00935  A592  85 08              STA ENDCHR
00936  A594  C9 22              CMP #$22        ;'"'
00937  A596  F0 56              BEQ XXA5EE
00938  A598  24 0F              BIT GARBFL
00939  A59A  70 2D              BVS XXA5C9
00940  A59C  C9 3F              CMP #$3F        ;'?'
00941  A59E  D0 04              BNE XXA5A4
00942  A5A0  A9 99              LDA #$99        ; PRINT CODE
00943  A5A2  D0 25              BNE XXA5C9
00944  A5A4  C9 30       XXA5A4 CMP #$30        ;'0'
00945  A5A6  90 04              BCC XXA5AC
00946  A5A8  C9 3C              CMP #$3C        ;'<'
00947  A5AA  90 1D              BCC XXA5C9
00948  A5AC  84 71       XXA5AC STY $71
00949  A5AE  A0 00              LDY #$00
00950  A5B0  84 0B              STY COUNT
00951  A5B2  88                 DEY 
00952  A5B3  86 7A              STX TXTPTR
00953  A5B5  CA                 DEX 
00954  A5B6  C8          XXA5B6 INY 
00955  A5B7  E8                 INX 
00956  A5B8  BD 00 02    XXA5B8 LDA BUF,X
00957  A5BB  38                 SEC 
00958  A5BC  F9 9E A0           SBC XXA09E,Y
00959  A5BF  F0 F5              BEQ XXA5B6
00960  A5C1  C9 80              CMP #$80
00961  A5C3  D0 30              BNE XXA5F5
00962  A5C5  05 0B              ORA COUNT
00963  A5C7  A4 71       XXA5C7 LDY $71
00964  A5C9  E8          XXA5C9 INX 
00965  A5CA  C8                 INY 
00966  A5CB  99 FB 01           STA $01FB,Y
00967  A5CE  B9 FB 01           LDA $01FB,Y
00968  A5D1  F0 36              BEQ XXA609
00969  A5D3  38                 SEC 
00970  A5D4  E9 3A              SBC #$3A        ;':'
00971  A5D6  F0 04              BEQ XXA5DC
00972  A5D8  C9 49              CMP #$49        ; DATA CODE
00973  A5DA  D0 02              BNE XXA5DE
00974  A5DC  85 0F       XXA5DC STA GARBFL
00975  A5DE  38          XXA5DE SEC 
00976  A5DF  E9 55              SBC #$55        ; REM CODE






ABASIC.ASM......PAGE 0022

LINE# LOC   CODE        LINE


00977  A5E1  D0 9F              BNE XXA582
00978  A5E3  85 08              STA ENDCHR
00979  A5E5  BD 00 02    XXA5E5 LDA BUF,X
00980  A5E8  F0 DF              BEQ XXA5C9
00981  A5EA  C5 08              CMP ENDCHR
00982  A5EC  F0 DB              BEQ XXA5C9
00983  A5EE  C8          XXA5EE INY 
00984  A5EF  99 FB 01           STA $01FB,Y
00985  A5F2  E8                 INX 
00986  A5F3  D0 F0              BNE XXA5E5
00987  A5F5  A6 7A       XXA5F5 LDX TXTPTR
00988  A5F7  E6 0B              INC COUNT
00989  A5F9  C8          XXA5F9 INY 
00990  A5FA  B9 9D A0           LDA XXA09E-1,Y
00991  A5FD  10 FA              BPL XXA5F9
00992  A5FF  B9 9E A0           LDA XXA09E,Y
00993  A602  D0 B4              BNE XXA5B8
00994  A604  BD 00 02           LDA BUF,X
00995  A607  10 BE              BPL XXA5C7
00996  A609  99 FD 01    XXA609 STA $01FD,Y
00997  A60C  C6 7B              DEC TXTPTR+1
00998  A60E  A9 FF              LDA #$FF
00999  A610  85 7A              STA TXTPTR
01000  A612  60                 RTS 
01001  A613              ;********************************
01002  A613              ; SEARCH FOR A LINE IN A PROGRAM
01003  A613              ;********************************
01004  A613  A5 2B       XXA613 LDA TXTTAB
01005  A615  A6 2C              LDX TXTTAB+1
01006  A617  A0 01       XXA617 LDY #$01
01007  A619  85 5F              STA $5F
01008  A61B  86 60              STX $60
01009  A61D  B1 5F              LDA ($5F),Y
01010  A61F  F0 1F              BEQ XXA640
01011  A621  C8                 INY 
01012  A622  C8                 INY 
01013  A623  A5 15              LDA LINNUM+1
01014  A625  D1 5F              CMP ($5F),Y
01015  A627  90 18              BCC XXA641
01016  A629  F0 03              BEQ XXA62E
01017  A62B  88                 DEY 
01018  A62C  D0 09              BNE XXA637
01019  A62E  A5 14       XXA62E LDA LINNUM
01020  A630  88                 DEY 
01021  A631  D1 5F              CMP ($5F),Y
01022  A633  90 0C              BCC XXA641
01023  A635  F0 0A              BEQ XXA641
01024  A637  88          XXA637 DEY 
01025  A638  B1 5F              LDA ($5F),Y
01026  A63A  AA                 TAX 
01027  A63B  88                 DEY 
01028  A63C  B1 5F              LDA ($5F),Y
01029  A63E  B0 D7              BCS XXA617
01030  A640  18          XXA640 CLC 
01031  A641  60          XXA641 RTS 






ABASIC.ASM......PAGE 0023

LINE# LOC   CODE        LINE


01032  A642              ;********************************
01033  A642              ; NEW COMMAND
01034  A642              ;********************************
01035  A642  D0 FD       ZZA642 BNE XXA641
01036  A644  A9 00       KKA644 LDA #$00
01037  A646  A8                 TAY 
01038  A647  91 2B              STA (TXTTAB),Y
01039  A649  C8                 INY 
01040  A64A  91 2B              STA (TXTTAB),Y
01041  A64C  A5 2B              LDA TXTTAB
01042  A64E  18                 CLC 
01043  A64F  69 02              ADC #$02
01044  A651  85 2D              STA VARTAB
01045  A653  A5 2C              LDA TXTTAB+1
01046  A655  69 00              ADC #$00
01047  A657  85 2E              STA VARTAB+1
01048  A659  20 8E A6    XXA659 JSR XXA68E
01049  A65C  A9 00              LDA #$00
01050  A65E              ;********************************
01051  A65E              ; CLR COMMAND
01052  A65E              ;********************************
01053  A65E  D0 2D       ZZA65E BNE XXA68D
01054  A660  20 E7 FF    XXA660 JSR CLALL
01055  A663  A5 37       KKA663 LDA MEMSIZ
01056  A665  A4 38              LDY MEMSIZ+1
01057  A667  85 33              STA FRETOP
01058  A669  84 34              STY FRETOP+1
01059  A66B  A5 2D              LDA VARTAB
01060  A66D  A4 2E              LDY VARTAB+1
01061  A66F  85 2F              STA ARYTAB
01062  A671  84 30              STY ARYTAB+1
01063  A673  85 31              STA STREND
01064  A675  84 32              STY STREND+1
01065  A677  20 1D A8    KKA677 JSR XXA81D
01066  A67A              ;********************************
01067  A67A              ; RESET STACK AND PROGRAM POINTERS
01068  A67A              ;********************************
01069  A67A  A2 19       XXA67A LDX #$19
01070  A67C  86 16              STX TEMPPT
01071  A67E  68                 PLA 
01072  A67F  A8                 TAY 
01073  A680  68                 PLA 
01074  A681  A2 FA              LDX #$FA
01075  A683  9A                 TXS 
01076  A684  48                 PHA 
01077  A685  98                 TYA 
01078  A686  48                 PHA 
01079  A687  A9 00              LDA #$00
01080  A689  85 3E              STA OLDTXT+1
01081  A68B  85 10              STA SUBFLG
01082  A68D  60          XXA68D RTS 
01083  A68E              ;********************************
01084  A68E              ; SET CURRENT CHARACTER POINTER TO START OF BASIC
 - 1
01085  A68E              ;********************************
01086  A68E  18          XXA68E CLC 






ABASIC.ASM......PAGE 0024

LINE# LOC   CODE        LINE


01087  A68F  A5 2B              LDA TXTTAB
01088  A691  69 FF              ADC #$FF
01089  A693  85 7A              STA TXTPTR
01090  A695  A5 2C              LDA TXTTAB+1
01091  A697  69 FF              ADC #$FF
01092  A699  85 7B              STA TXTPTR+1
01093  A69B  60          XXA69B RTS 
01094  A69C              ;********************************
01095  A69C              ; LIST COMMAND
01096  A69C              ;********************************
01097  A69C  90 06       ZZA69C BCC XXA6A4
01098  A69E  F0 04              BEQ XXA6A4
01099  A6A0  C9 AB              CMP #$AB
01100  A6A2  D0 E9              BNE XXA68D
01101  A6A4  20 6B A9    XXA6A4 JSR XXA96B
01102  A6A7  20 13 A6           JSR XXA613
01103  A6AA  20 79 00           JSR CHRGOT
01104  A6AD  F0 0C              BEQ XXA6BB
01105  A6AF  C9 AB              CMP #$AB
01106  A6B1  D0 8E              BNE XXA641
01107  A6B3  20 73 00           JSR CHRGET
01108  A6B6  20 6B A9           JSR XXA96B
01109  A6B9  D0 86              BNE XXA641
01110  A6BB  68          XXA6BB PLA 
01111  A6BC  68                 PLA 
01112  A6BD  A5 14              LDA LINNUM
01113  A6BF  05 15              ORA LINNUM+1
01114  A6C1  D0 06              BNE XXA6C9
01115  A6C3  A9 FF              LDA #$FF
01116  A6C5  85 14              STA LINNUM
01117  A6C7  85 15              STA LINNUM+1
01118  A6C9              ;********************************
01119  A6C9              ; LIST LINES FROM $5F/$60 TO LINNUM/LINNUM+1
01120  A6C9              ;********************************
01121  A6C9  A0 01       XXA6C9 LDY #$01
01122  A6CB  84 0F              STY GARBFL
01123  A6CD  B1 5F              LDA ($5F),Y
01124  A6CF  F0 43              BEQ XXA714
01125  A6D1  20 2C A8           JSR XXA82C
01126  A6D4  20 D7 AA           JSR XXAAD7
01127  A6D7  C8                 INY 
01128  A6D8  B1 5F              LDA ($5F),Y
01129  A6DA  AA                 TAX 
01130  A6DB  C8                 INY 
01131  A6DC  B1 5F              LDA ($5F),Y
01132  A6DE  C5 15              CMP LINNUM+1
01133  A6E0  D0 04              BNE XXA6E6
01134  A6E2  E4 14              CPX LINNUM
01135  A6E4  F0 02              BEQ XXA6E8
01136  A6E6  B0 2C       XXA6E6 BCS XXA714
01137  A6E8  84 49       XXA6E8 STY FORPNT
01138  A6EA  20 CD BD           JSR XXBDCD
01139  A6ED  A9 20              LDA #$20        ;' '
01140  A6EF  A4 49       XXA6EF LDY FORPNT
01141  A6F1  29 7F              AND #$7F






ABASIC.ASM......PAGE 0025

LINE# LOC   CODE        LINE


01142  A6F3  20 47 AB    XXA6F3 JSR XXAB47
01143  A6F6  C9 22              CMP #$22        ;'"'
01144  A6F8  D0 06              BNE XXA700
01145  A6FA  A5 0F              LDA GARBFL
01146  A6FC  49 FF              EOR #$FF
01147  A6FE  85 0F              STA GARBFL
01148  A700  C8          XXA700 INY 
01149  A701  F0 11              BEQ XXA714
01150  A703  B1 5F              LDA ($5F),Y
01151  A705  D0 10              BNE XXA717
01152  A707  A8                 TAY 
01153  A708  B1 5F              LDA ($5F),Y
01154  A70A  AA                 TAX 
01155  A70B  C8                 INY 
01156  A70C  B1 5F              LDA ($5F),Y
01157  A70E  86 5F              STX $5F
01158  A710  85 60              STA $60
01159  A712  D0 B5              BNE XXA6C9
01160  A714              ; DIFF
01161  A714              ; C64 = $E386 VIC20 = $C474
01162  A714  4C 86 E3    XXA714 JMP XXE386
01163  A717              ;********************************
01164  A717              ; PRINT TOKENS ROUTINE
01165  A717              ;********************************
01166  A717  6C 06 03    XXA717 JMP (IQPLOP)    ; NORMALLY A71A
01167  A71A              ;********************************
01168  A71A              ; STANDARD TOKEN PRINTER
01169  A71A              ;********************************
01170  A71A  10 D7       ZZA71A BPL XXA6F3
01171  A71C  C9 FF              CMP #$FF
01172  A71E  F0 D3              BEQ XXA6F3
01173  A720  24 0F              BIT GARBFL
01174  A722  30 CF              BMI XXA6F3
01175  A724  38                 SEC 
01176  A725  E9 7F              SBC #$7F
01177  A727  AA                 TAX 
01178  A728  84 49              STY FORPNT
01179  A72A  A0 FF              LDY #$FF
01180  A72C  CA          XXA72C DEX 
01181  A72D  F0 08              BEQ XXA737
01182  A72F  C8          XXA72F INY 
01183  A730  B9 9E A0           LDA XXA09E,Y
01184  A733  10 FA              BPL XXA72F
01185  A735  30 F5              BMI XXA72C
01186  A737              ;********************************
01187  A737              ; PRINT KEYWORD
01188  A737              ;********************************
01189  A737  C8          XXA737 INY 
01190  A738  B9 9E A0           LDA XXA09E,Y
01191  A73B  30 B2              BMI XXA6EF
01192  A73D  20 47 AB           JSR XXAB47
01193  A740  D0 F5              BNE XXA737
01194  A742              ;********************************
01195  A742              ; FOR COMMAND
01196  A742              ;********************************






ABASIC.ASM......PAGE 0026

LINE# LOC   CODE        LINE


01197  A742  A9 80       ZZA742 LDA #$80
01198  A744  85 10              STA SUBFLG
01199  A746  20 A5 A9           JSR XXA9A5
01200  A749  20 8A A3           JSR XXA38A
01201  A74C  D0 05              BNE XXA753
01202  A74E  8A                 TXA 
01203  A74F  69 0F              ADC #$0F
01204  A751  AA                 TAX 
01205  A752  9A                 TXS 
01206  A753  68          XXA753 PLA 
01207  A754  68                 PLA 
01208  A755  A9 09              LDA #$09
01209  A757  20 FB A3           JSR XXA3FB
01210  A75A  20 06 A9           JSR XXA906
01211  A75D  18                 CLC 
01212  A75E  98                 TYA 
01213  A75F  65 7A              ADC TXTPTR
01214  A761  48                 PHA 
01215  A762  A5 7B              LDA TXTPTR+1
01216  A764  69 00              ADC #$00
01217  A766  48                 PHA 
01218  A767  A5 3A              LDA CURLIN+1
01219  A769  48                 PHA 
01220  A76A  A5 39              LDA CURLIN
01221  A76C  48                 PHA 
01222  A76D  A9 A4              LDA #$A4
01223  A76F  20 FF AE           JSR XXAEFF
01224  A772  20 8D AD           JSR XXAD8D
01225  A775  20 8A AD           JSR XXAD8A
01226  A778  A5 66              LDA $66
01227  A77A  09 7F              ORA #$7F
01228  A77C  25 62              AND $62
01229  A77E  85 62              STA $62
01230  A780  A9 8B              LDA #<ZZA78B    ;#$8B   ; LOW  A78B
01231  A782  A0 A7              LDY #>ZZA78B    ;#$A7   ; HIGH A78B
01232  A784  85 22              STA INDEX
01233  A786  84 23              STY INDEX+1
01234  A788  4C 43 AE           JMP XXAE43
01235  A78B              ;********************************
01236  A78B              ;
01237  A78B              ;********************************
01238  A78B  A9 BC       ZZA78B LDA #<WWB9BC    ;#$BC   ; LOW  B9BC
01239  A78D  A0 B9              LDY #>WWB9BC    ;#$B9   ; HIGH B9BC
01240  A78F  20 A2 BB           JSR XXBBA2
01241  A792  20 79 00           JSR CHRGOT
01242  A795  C9 A9              CMP #$A9
01243  A797  D0 06              BNE XXA79F
01244  A799  20 73 00           JSR CHRGET
01245  A79C  20 8A AD           JSR XXAD8A
01246  A79F  20 2B BC    XXA79F JSR XXBC2B
01247  A7A2  20 38 AE           JSR XXAE38
01248  A7A5  A5 4A              LDA FORPNT+1
01249  A7A7  48                 PHA 
01250  A7A8  A5 49              LDA FORPNT
01251  A7AA  48                 PHA 






ABASIC.ASM......PAGE 0027

LINE# LOC   CODE        LINE


01252  A7AB  A9 81              LDA #$81        ; FOR BLOCK CODE
01253  A7AD  48                 PHA 
01254  A7AE              ;********************************
01255  A7AE              ; EXECUTE NEXT STATEMENT
01256  A7AE              ;********************************
01257  A7AE  20 2C A8    XXA7AE JSR XXA82C
01258  A7B1  A5 7A              LDA TXTPTR
01259  A7B3  A4 7B              LDY TXTPTR+1
01260  A7B5  C0 02              CPY #$02
01261  A7B7  EA                 NOP 
01262  A7B8  F0 04              BEQ XXA7BE
01263  A7BA  85 3D              STA OLDTXT
01264  A7BC  84 3E              STY OLDTXT+1
01265  A7BE  A0 00       XXA7BE LDY #$00
01266  A7C0  B1 7A              LDA (TXTPTR),Y
01267  A7C2  D0 43              BNE XXA807
01268  A7C4  A0 02              LDY #$02
01269  A7C6  B1 7A              LDA (TXTPTR),Y
01270  A7C8  18                 CLC 
01271  A7C9  D0 03              BNE XXA7CE
01272  A7CB  4C 4B A8           JMP XXA84B
01273  A7CE              ;********************************
01274  A7CE              ;
01275  A7CE              ;********************************
01276  A7CE  C8          XXA7CE INY 
01277  A7CF  B1 7A              LDA (TXTPTR),Y
01278  A7D1  85 39              STA CURLIN
01279  A7D3  C8                 INY 
01280  A7D4  B1 7A              LDA (TXTPTR),Y
01281  A7D6  85 3A              STA CURLIN+1
01282  A7D8  98                 TYA 
01283  A7D9  65 7A              ADC TXTPTR
01284  A7DB  85 7A              STA TXTPTR
01285  A7DD  90 02              BCC XXA7E1
01286  A7DF  E6 7B              INC TXTPTR+1
01287  A7E1  6C 08 03    XXA7E1 JMP (IGONE)     ; NORMALLY A7E4
01288  A7E4              ;********************************
01289  A7E4              ; EXECUTE A STATEMENT
01290  A7E4              ;********************************
01291  A7E4  20 73 00    KKA7E4 JSR CHRGET
01292  A7E7  20 ED A7           JSR XXA7ED
01293  A7EA  4C AE A7           JMP XXA7AE
01294  A7ED              ;********************************
01295  A7ED              ; EXECUTE COMMAND IN A
01296  A7ED              ;********************************
01297  A7ED  F0 3C       XXA7ED BEQ XXA82B
01298  A7EF  E9 80       XXA7EF SBC #$80
01299  A7F1  90 11              BCC XXA804
01300  A7F3  C9 23              CMP #$23        ;'#'
01301  A7F5  B0 17              BCS XXA80E
01302  A7F7  0A                 ASL A
01303  A7F8  A8                 TAY 
01304  A7F9  B9 0D A0           LDA ZZA00C+1,Y
01305  A7FC  48                 PHA 
01306  A7FD  B9 0C A0           LDA ZZA00C,Y






ABASIC.ASM......PAGE 0028

LINE# LOC   CODE        LINE


01307  A800  48                 PHA 
01308  A801  4C 73 00           JMP CHRGET
01309  A804              ;********************************
01310  A804              ;
01311  A804              ;********************************
01312  A804  4C A5 A9    XXA804 JMP XXA9A5
01313  A807              ;********************************
01314  A807  C9 3A       XXA807 CMP #$3A        ;':'
01315  A809  F0 D6              BEQ XXA7E1
01316  A80B  4C 08 AF    XXA80B JMP XXAF08
01317  A80E              ;********************************
01318  A80E              ;
01319  A80E              ;********************************
01320  A80E  C9 4B       XXA80E CMP #$4B        ; GO CODE
01321  A810  D0 F9              BNE XXA80B
01322  A812  20 73 00           JSR CHRGET
01323  A815  A9 A4              LDA #$A4        ; TO CODE
01324  A817  20 FF AE           JSR XXAEFF
01325  A81A  4C A0 A8           JMP XXA8A0      ; DO GOTO
01326  A81D              ;********************************
01327  A81D              ; RESTORE COMMAND
01328  A81D              ;********************************
01329  A81D  38          XXA81D SEC 
01330  A81E  A5 2B              LDA TXTTAB
01331  A820  E9 01              SBC #$01
01332  A822  A4 2C              LDY TXTTAB+1
01333  A824  B0 01              BCS XXA827
01334  A826  88                 DEY 
01335  A827  85 41       XXA827 STA DATPRT
01336  A829  84 42              STY DATPRT+1
01337  A82B  60          XXA82B RTS 
01338  A82C              ;********************************
01339  A82C              ; STOP COMMAND
01340  A82C              ;********************************
01341  A82C  20 E1 FF    XXA82C JSR STOP        ; TEST STOP KEY
01342  A82F              ;********************************
01343  A82F              ; STOP COMMAND
01344  A82F              ;********************************
01345  A82F  B0 01       ZZA82F BCS XXA832
01346  A831  18          ZZA831 CLC
01347  A832              ;********************************
01348  A832              ; END COMMAND
01349  A832              ;********************************
01350  A832  D0 3C       XXA832 BNE XXA870
01351  A834  A5 7A              LDA TXTPTR
01352  A836  A4 7B              LDY TXTPTR+1
01353  A838  A6 3A              LDX CURLIN+1
01354  A83A  E8                 INX 
01355  A83B  F0 0C              BEQ XXA849
01356  A83D  85 3D              STA OLDTXT
01357  A83F  84 3E              STY OLDTXT+1
01358  A841  A5 39              LDA CURLIN
01359  A843  A4 3A              LDY CURLIN+1
01360  A845  85 3B              STA OLDLIN
01361  A847  84 3C              STY OLDLIN+1






ABASIC.ASM......PAGE 0029

LINE# LOC   CODE        LINE


01362  A849  68          XXA849 PLA 
01363  A84A  68                 PLA 
01364  A84B  A9 81       XXA84B LDA #<WWA381    ;#$81   ; LOW  A381
01365  A84D  A0 A3              LDY #>WWA381    ;#$A3   ; HIGH A381
01366  A84F  90 03              BCC XXA854
01367  A851  4C 69 A4           JMP XXA469
01368  A854              ;********************************
01369  A854              ;
01370  A854              ;********************************
01371  A854              ; DIFF
01372  A854              ; C64 = $E386 VIC20 = $C474
01373  A854  4C 86 E3    XXA854 JMP XXE386
01374  A857              ;********************************
01375  A857              ; CONT COMMAND
01376  A857              ;********************************
01377  A857  D0 17       ZZA857 BNE XXA870
01378  A859  A2 1A              LDX #$1A        ; ERROR NUMBER
01379  A85B  A4 3E              LDY OLDTXT+1
01380  A85D  D0 03              BNE XXA862
01381  A85F  4C 37 A4           JMP XXA437
01382  A862              ;********************************
01383  A862              ;
01384  A862              ;********************************
01385  A862  A5 3D       XXA862 LDA OLDTXT
01386  A864  85 7A              STA TXTPTR
01387  A866  84 7B              STY TXTPTR+1
01388  A868  A5 3B              LDA OLDLIN
01389  A86A  A4 3C              LDY OLDLIN+1
01390  A86C  85 39              STA CURLIN
01391  A86E  84 3A              STY CURLIN+1
01392  A870  60          XXA870 RTS 
01393  A871              ;********************************
01394  A871              ; RUN COMMAND
01395  A871              ;********************************
01396  A871  08          ZZA871 PHP 
01397  A872  A9 00              LDA #$00
01398  A874  20 90 FF           JSR SETMSG
01399  A877  28                 PLP 
01400  A878  D0 03              BNE XXA87D
01401  A87A  4C 59 A6           JMP XXA659
01402  A87D              ;********************************
01403  A87D              ;
01404  A87D              ;********************************
01405  A87D  20 60 A6    XXA87D JSR XXA660      ; DO CLR
01406  A880  4C 97 A8           JMP XXA897      ; DO GOTO
01407  A883              ;********************************
01408  A883              ; GOSUB COMMAND
01409  A883              ;********************************
01410  A883  A9 03       ZZA883 LDA #$03
01411  A885  20 FB A3           JSR XXA3FB
01412  A888  A5 7B              LDA TXTPTR+1
01413  A88A  48                 PHA 
01414  A88B  A5 7A              LDA TXTPTR
01415  A88D  48                 PHA 
01416  A88E  A5 3A              LDA CURLIN+1






ABASIC.ASM......PAGE 0030

LINE# LOC   CODE        LINE


01417  A890  48                 PHA 
01418  A891  A5 39              LDA CURLIN
01419  A893  48                 PHA 
01420  A894  A9 8D              LDA #$8D
01421  A896  48                 PHA 
01422  A897  20 79 00    XXA897 JSR CHRGOT
01423  A89A  20 A0 A8           JSR XXA8A0
01424  A89D  4C AE A7           JMP XXA7AE
01425  A8A0              ;********************************
01426  A8A0              ;
01427  A8A0              ;********************************
01428  A8A0  20 6B A9    XXA8A0 JSR XXA96B
01429  A8A3  20 09 A9           JSR XXA909
01430  A8A6  38                 SEC 
01431  A8A7  A5 39              LDA CURLIN
01432  A8A9  E5 14              SBC LINNUM
01433  A8AB  A5 3A              LDA CURLIN+1
01434  A8AD  E5 15              SBC LINNUM+1
01435  A8AF  B0 0B              BCS XXA8BC
01436  A8B1  98                 TYA 
01437  A8B2  38                 SEC 
01438  A8B3  65 7A              ADC TXTPTR
01439  A8B5  A6 7B              LDX TXTPTR+1
01440  A8B7  90 07              BCC XXA8C0
01441  A8B9  E8                 INX 
01442  A8BA  B0 04              BCS XXA8C0
01443  A8BC  A5 2B       XXA8BC LDA TXTTAB
01444  A8BE  A6 2C              LDX TXTTAB+1
01445  A8C0  20 17 A6    XXA8C0 JSR XXA617
01446  A8C3  90 1E              BCC XXA8E3
01447  A8C5  A5 5F              LDA $5F
01448  A8C7  E9 01              SBC #$01
01449  A8C9  85 7A              STA TXTPTR
01450  A8CB  A5 60              LDA $60
01451  A8CD  E9 00              SBC #$00
01452  A8CF  85 7B              STA TXTPTR+1
01453  A8D1  60          XXA8D1 RTS 
01454  A8D2              ;********************************
01455  A8D2              ;
01456  A8D2              ;********************************
01457  A8D2  D0 FD       ZZA8D2 BNE XXA8D1
01458  A8D4  A9 FF              LDA #$FF
01459  A8D6  85 4A              STA FORPNT+1
01460  A8D8  20 8A A3           JSR XXA38A
01461  A8DB  9A                 TXS 
01462  A8DC  C9 8D              CMP #$8D
01463  A8DE  F0 0B              BEQ XXA8EB
01464  A8E0  A2 0C              LDX #$0C
01465  A8E2              ;********************************
01466  A8E2  2C                 .BYTE $2C
01467  A8E3              ;********************************
01468  A8E3  A2 11       XXA8E3 LDX #$11
01469  A8E5  4C 37 A4           JMP XXA437
01470  A8E8              ;********************************
01471  A8E8              ;






ABASIC.ASM......PAGE 0031

LINE# LOC   CODE        LINE


01472  A8E8              ;********************************
01473  A8E8  4C 08 AF    XXA8E8 JMP XXAF08
01474  A8EB              ;********************************
01475  A8EB              ;
01476  A8EB              ;********************************
01477  A8EB  68          XXA8EB PLA 
01478  A8EC  68                 PLA 
01479  A8ED  85 39              STA CURLIN
01480  A8EF  68                 PLA 
01481  A8F0  85 3A              STA CURLIN+1
01482  A8F2  68                 PLA 
01483  A8F3  85 7A              STA TXTPTR
01484  A8F5  68                 PLA 
01485  A8F6  85 7B              STA TXTPTR+1
01486  A8F8              ;********************************
01487  A8F8              ; DATA
01488  A8F8              ;********************************
01489  A8F8  20 06 A9    XXA8F8 JSR XXA906
01490  A8FB  98          XXA8FB TYA 
01491  A8FC  18                 CLC 
01492  A8FD  65 7A              ADC TXTPTR
01493  A8FF  85 7A              STA TXTPTR
01494  A901  90 02              BCC XXA905
01495  A903  E6 7B              INC TXTPTR+1
01496  A905  60          XXA905 RTS 
01497  A906              ;********************************
01498  A906              ;
01499  A906              ;********************************
01500  A906  A2 3A       XXA906 LDX #$3A        ;':'
01501  A908              ;********************************
01502  A908  2C                 .BYTE $2C
01503  A909              ;********************************
01504  A909  A2 00       XXA909 LDX #$00
01505  A90B  86 07              STX CHARAC
01506  A90D  A0 00              LDY #$00
01507  A90F  84 08              STY ENDCHR
01508  A911  A5 08       XXA911 LDA ENDCHR
01509  A913  A6 07              LDX CHARAC
01510  A915  85 07              STA CHARAC
01511  A917  86 08              STX ENDCHR
01512  A919  B1 7A       XXA919 LDA (TXTPTR),Y
01513  A91B  F0 E8              BEQ XXA905
01514  A91D  C5 08              CMP ENDCHR
01515  A91F  F0 E4              BEQ XXA905
01516  A921  C8                 INY 
01517  A922  C9 22              CMP #$22        ;'"'
01518  A924  D0 F3              BNE XXA919
01519  A926  F0 E9              BEQ XXA911
01520  A928              ;********************************
01521  A928              ;
01522  A928              ;********************************
01523  A928  20 9E AD    ZZA928 JSR XXAD9E
01524  A92B  20 79 00           JSR CHRGOT
01525  A92E  C9 89              CMP #$89
01526  A930  F0 05              BEQ XXA937






ABASIC.ASM......PAGE 0032

LINE# LOC   CODE        LINE


01527  A932  A9 A7              LDA #$A7
01528  A934  20 FF AE           JSR XXAEFF
01529  A937  A5 61       XXA937 LDA $61
01530  A939  D0 05              BNE XXA940
01531  A93B              ;********************************
01532  A93B              ;
01533  A93B              ;********************************
01534  A93B  20 09 A9    ZZA93B JSR XXA909
01535  A93E  F0 BB              BEQ XXA8FB
01536  A940  20 79 00    XXA940 JSR CHRGOT
01537  A943  B0 03              BCS XXA948
01538  A945  4C A0 A8           JMP XXA8A0
01539  A948              ;********************************
01540  A948              ;
01541  A948              ;********************************
01542  A948  4C ED A7    XXA948 JMP XXA7ED
01543  A94B              ;********************************
01544  A94B              ;
01545  A94B              ;********************************
01546  A94B  20 9E B7    ZZA94B JSR XXB79E
01547  A94E  48                 PHA 
01548  A94F  C9 8D              CMP #$8D
01549  A951  F0 04              BEQ XXA957
01550  A953  C9 89       XXA953 CMP #$89
01551  A955  D0 91              BNE XXA8E8
01552  A957  C6 65       XXA957 DEC $65
01553  A959  D0 04              BNE XXA95F
01554  A95B  68                 PLA 
01555  A95C  4C EF A7           JMP XXA7EF
01556  A95F              ;********************************
01557  A95F              ;
01558  A95F              ;********************************
01559  A95F  20 73 00    XXA95F JSR CHRGET
01560  A962  20 6B A9           JSR XXA96B
01561  A965  C9 2C              CMP #$2C        ;','
01562  A967  F0 EE              BEQ XXA957
01563  A969  68                 PLA 
01564  A96A  60          XXA96A RTS 
01565  A96B              ;********************************
01566  A96B              ;
01567  A96B              ;********************************
01568  A96B  A2 00       XXA96B LDX #$00
01569  A96D  86 14              STX LINNUM
01570  A96F  86 15              STX LINNUM+1
01571  A971  B0 F7       XXA971 BCS XXA96A
01572  A973  E9 2F              SBC #$2F        ;'/'
01573  A975  85 07              STA CHARAC
01574  A977  A5 15              LDA LINNUM+1
01575  A979  85 22              STA INDEX
01576  A97B  C9 19              CMP #$19
01577  A97D  B0 D4              BCS XXA953
01578  A97F  A5 14              LDA LINNUM
01579  A981  0A                 ASL A
01580  A982  26 22              ROL INDEX
01581  A984  0A                 ASL A






ABASIC.ASM......PAGE 0033

LINE# LOC   CODE        LINE


01582  A985  26 22              ROL INDEX
01583  A987  65 14              ADC LINNUM
01584  A989  85 14              STA LINNUM
01585  A98B  A5 22              LDA INDEX
01586  A98D  65 15              ADC LINNUM+1
01587  A98F  85 15              STA LINNUM+1
01588  A991  06 14              ASL LINNUM
01589  A993  26 15              ROL LINNUM+1
01590  A995  A5 14              LDA LINNUM
01591  A997  65 07              ADC CHARAC
01592  A999  85 14              STA LINNUM
01593  A99B  90 02              BCC XXA99F
01594  A99D  E6 15              INC LINNUM+1
01595  A99F  20 73 00    XXA99F JSR CHRGET
01596  A9A2  4C 71 A9           JMP XXA971
01597  A9A5              ;********************************
01598  A9A5              ;
01599  A9A5              ;********************************
01600  A9A5  20 8B B0    XXA9A5 JSR XXB08B
01601  A9A8  85 49              STA FORPNT
01602  A9AA  84 4A              STY FORPNT+1
01603  A9AC  A9 B2              LDA #$B2
01604  A9AE  20 FF AE           JSR XXAEFF
01605  A9B1  A5 0E              LDA INTFLG
01606  A9B3  48                 PHA 
01607  A9B4  A5 0D              LDA VALTYP
01608  A9B6  48                 PHA 
01609  A9B7  20 9E AD           JSR XXAD9E
01610  A9BA  68                 PLA 
01611  A9BB  2A                 ROL A
01612  A9BC  20 90 AD           JSR XXAD90
01613  A9BF  D0 18              BNE XXA9D9
01614  A9C1  68                 PLA 
01615  A9C2  10 12       XXA9C2 BPL XXA9D6
01616  A9C4  20 1B BC           JSR XXBC1B
01617  A9C7  20 BF B1           JSR XXB1BF
01618  A9CA  A0 00              LDY #$00
01619  A9CC  A5 64              LDA $64
01620  A9CE  91 49              STA (FORPNT),Y
01621  A9D0  C8                 INY 
01622  A9D1  A5 65              LDA $65
01623  A9D3  91 49              STA (FORPNT),Y
01624  A9D5  60                 RTS 
01625  A9D6              ;********************************
01626  A9D6              ;
01627  A9D6              ;********************************
01628  A9D6  4C D0 BB    XXA9D6 JMP XXBBD0
01629  A9D9              ;********************************
01630  A9D9              ;
01631  A9D9              ;********************************
01632  A9D9  68          XXA9D9 PLA 
01633  A9DA  A4 4A       XXA9DA LDY FORPNT+1
01634  A9DC  C0 BF              CPY #>ZZBF11    ;#$BF
01635  A9DE  D0 4C              BNE XXAA2C
01636  A9E0  20 A6 B6           JSR XXB6A6






ABASIC.ASM......PAGE 0034

LINE# LOC   CODE        LINE


01637  A9E3  C9 06              CMP #$06
01638  A9E5  D0 3D              BNE XXAA24
01639  A9E7  A0 00              LDY #$00
01640  A9E9  84 61              STY $61
01641  A9EB  84 66              STY $66
01642  A9ED  84 71       XXA9ED STY $71
01643  A9EF  20 1D AA           JSR XXAA1D
01644  A9F2  20 E2 BA           JSR XXBAE2
01645  A9F5  E6 71              INC $71
01646  A9F7  A4 71              LDY $71
01647  A9F9  20 1D AA           JSR XXAA1D
01648  A9FC  20 0C BC           JSR XXBC0C
01649  A9FF  AA                 TAX 
01650  AA00  F0 05              BEQ XXAA07
01651  AA02  E8                 INX 
01652  AA03  8A                 TXA 
01653  AA04  20 ED BA           JSR XXBAED
01654  AA07  A4 71       XXAA07 LDY $71
01655  AA09  C8                 INY 
01656  AA0A  C0 06              CPY #$06
01657  AA0C  D0 DF              BNE XXA9ED
01658  AA0E  20 E2 BA           JSR XXBAE2
01659  AA11  20 9B BC           JSR XXBC9B
01660  AA14  A6 64              LDX $64
01661  AA16  A4 63              LDY $63
01662  AA18  A5 65              LDA $65
01663  AA1A  4C DB FF           JMP $FFDB
01664  AA1D              ;********************************
01665  AA1D              ;
01666  AA1D              ;********************************
01667  AA1D  B1 22       XXAA1D LDA (INDEX),Y
01668  AA1F  20 80 00           JSR POINTB+4    ;$0080
01669  AA22  90 03              BCC XXAA27
01670  AA24  4C 48 B2    XXAA24 JMP XXB248
01671  AA27              ;********************************
01672  AA27              ;
01673  AA27              ;********************************
01674  AA27  E9 2F       XXAA27 SBC #$2F        ;'/'
01675  AA29  4C 7E BD           JMP XXBD7E
01676  AA2C              ;********************************
01677  AA2C              ;
01678  AA2C              ;********************************
01679  AA2C  A0 02       XXAA2C LDY #$02
01680  AA2E  B1 64              LDA ($64),Y
01681  AA30  C5 34              CMP FRETOP+1
01682  AA32  90 17              BCC XXAA4B
01683  AA34  D0 07              BNE XXAA3D
01684  AA36  88                 DEY 
01685  AA37  B1 64              LDA ($64),Y
01686  AA39  C5 33              CMP FRETOP
01687  AA3B  90 0E              BCC XXAA4B
01688  AA3D  A4 65       XXAA3D LDY $65
01689  AA3F  C4 2E              CPY VARTAB+1
01690  AA41  90 08              BCC XXAA4B
01691  AA43  D0 0D              BNE XXAA52






ABASIC.ASM......PAGE 0035

LINE# LOC   CODE        LINE


01692  AA45  A5 64              LDA $64
01693  AA47  C5 2D              CMP VARTAB
01694  AA49  B0 07              BCS XXAA52
01695  AA4B  A5 64       XXAA4B LDA $64
01696  AA4D  A4 65              LDY $65
01697  AA4F  4C 68 AA           JMP XXAA68
01698  AA52              ;********************************
01699  AA52              ;
01700  AA52              ;********************************
01701  AA52  A0 00       XXAA52 LDY #$00
01702  AA54  B1 64              LDA ($64),Y
01703  AA56  20 75 B4           JSR XXB475
01704  AA59  A5 50              LDA DSCPNT
01705  AA5B  A4 51              LDY DSCPNT+1
01706  AA5D  85 6F              STA $6F
01707  AA5F  84 70              STY $70
01708  AA61  20 7A B6           JSR XXB67A
01709  AA64  A9 61              LDA #$61
01710  AA66  A0 00              LDY #$00
01711  AA68  85 50       XXAA68 STA DSCPNT
01712  AA6A  84 51              STY DSCPNT+1
01713  AA6C  20 DB B6           JSR XXB6DB
01714  AA6F  A0 00              LDY #$00
01715  AA71  B1 50              LDA (DSCPNT),Y
01716  AA73  91 49              STA (FORPNT),Y
01717  AA75  C8                 INY 
01718  AA76  B1 50              LDA (DSCPNT),Y
01719  AA78  91 49              STA (FORPNT),Y
01720  AA7A  C8                 INY 
01721  AA7B  B1 50              LDA (DSCPNT),Y
01722  AA7D  91 49              STA (FORPNT),Y
01723  AA7F  60          XXAA7F RTS 
01724  AA80              ;********************************
01725  AA80              ;
01726  AA80              ;********************************
01727  AA80  20 86 AA    ZZAA80 JSR XXAA86
01728  AA83  4C B5 AB           JMP XXABB5
01729  AA86              ;********************************
01730  AA86              ;
01731  AA86              ;********************************
01732  AA86  20 9E B7    XXAA86 JSR XXB79E
01733  AA89  F0 05              BEQ XXAA90
01734  AA8B  A9 2C              LDA #$2C        ;','
01735  AA8D  20 FF AE           JSR XXAEFF
01736  AA90  08          XXAA90 PHP 
01737  AA91  86 13              STX CHANNL
01738  AA93              ; DIFF
01739  AA93              ; C64 = $E118 VIC20 = $$E115
01740  AA93  20 18 E1           JSR KKE118
01741  AA96  28                 PLP 
01742  AA97  4C A0 AA           JMP XXAAA0
01743  AA9A              ;********************************
01744  AA9A              ;
01745  AA9A              ;********************************
01746  AA9A  20 21 AB    XXAA9A JSR XXAB21






ABASIC.ASM......PAGE 0036

LINE# LOC   CODE        LINE


01747  AA9D  20 79 00    XXAA9D JSR CHRGOT
01748  AAA0  F0 35       XXAAA0 BEQ XXAAD7
01749  AAA2  F0 43       XXAAA2 BEQ XXAAE7
01750  AAA4  C9 A3              CMP #$A3
01751  AAA6  F0 50              BEQ XXAAF8
01752  AAA8  C9 A6              CMP #$A6
01753  AAAA  18                 CLC 
01754  AAAB  F0 4B              BEQ XXAAF8
01755  AAAD  C9 2C              CMP #$2C        ;','
01756  AAAF  F0 37              BEQ XXAAE8
01757  AAB1  C9 3B              CMP #$3B        ;';'
01758  AAB3  F0 5E              BEQ XXAB13
01759  AAB5  20 9E AD           JSR XXAD9E
01760  AAB8  24 0D              BIT VALTYP
01761  AABA  30 DE              BMI XXAA9A
01762  AABC  20 DD BD           JSR XXBDDD
01763  AABF  20 87 B4           JSR XXB487
01764  AAC2  20 21 AB           JSR XXAB21
01765  AAC5  20 3B AB           JSR XXAB3B
01766  AAC8  D0 D3              BNE XXAA9D
01767  AACA  A9 00       XXAACA LDA #$00
01768  AACC  9D 00 02           STA BUF,X
01769  AACF  A2 FF              LDX #$FF
01770  AAD1  A0 01              LDY #$01
01771  AAD3  A5 13              LDA CHANNL
01772  AAD5  D0 10              BNE XXAAE7
01773  AAD7  A9 0D       XXAAD7 LDA #$0D
01774  AAD9  20 47 AB           JSR XXAB47
01775  AADC  24 13              BIT CHANNL
01776  AADE  10 05              BPL XXAAE5
01777  AAE0  A9 0A              LDA #$0A
01778  AAE2  20 47 AB           JSR XXAB47
01779  AAE5  49 FF       XXAAE5 EOR #$FF
01780  AAE7  60          XXAAE7 RTS 
01781  AAE8              ;********************************
01782  AAE8              ;
01783  AAE8              ;********************************
01784  AAE8  38          XXAAE8 SEC 
01785  AAE9  20 F0 FF           JSR PLOT
01786  AAEC  98                 TYA 
01787  AAED  38                 SEC 
01788  AAEE              ; DIFF
01789  AAEE              ; C64 = #$0A VIC20 = #$0B
01790  AAEE  E9 0A       XXAAEE SBC #$0A
01791  AAF0  B0 FC              BCS XXAAEE
01792  AAF2  49 FF              EOR #$FF
01793  AAF4  69 01              ADC #$01
01794  AAF6  D0 16              BNE XXAB0E
01795  AAF8  08          XXAAF8 PHP 
01796  AAF9  38                 SEC 
01797  AAFA  20 F0 FF           JSR PLOT
01798  AAFD  84 09              STY $09
01799  AAFF  20 9B B7           JSR XXB79B
01800  AB02  C9 29              CMP #$29        ;')'
01801  AB04  D0 59              BNE XXAB5F






ABASIC.ASM......PAGE 0037

LINE# LOC   CODE        LINE


01802  AB06  28                 PLP 
01803  AB07  90 06              BCC XXAB0F
01804  AB09  8A                 TXA 
01805  AB0A  E5 09              SBC $09
01806  AB0C  90 05              BCC XXAB13
01807  AB0E  AA          XXAB0E TAX 
01808  AB0F  E8          XXAB0F INX 
01809  AB10  CA          XXAB10 DEX 
01810  AB11  D0 06              BNE XXAB19
01811  AB13  20 73 00    XXAB13 JSR CHRGET
01812  AB16  4C A2 AA           JMP XXAAA2
01813  AB19              ;********************************
01814  AB19              ;
01815  AB19              ;********************************
01816  AB19  20 3B AB    XXAB19 JSR XXAB3B
01817  AB1C  D0 F2              BNE XXAB10
01818  AB1E  20 87 B4    XXAB1E JSR XXB487
01819  AB21  20 A6 B6    XXAB21 JSR XXB6A6
01820  AB24  AA                 TAX 
01821  AB25  A0 00              LDY #$00
01822  AB27  E8                 INX 
01823  AB28  CA          XXAB28 DEX 
01824  AB29  F0 BC              BEQ XXAAE7
01825  AB2B  B1 22              LDA (INDEX),Y
01826  AB2D  20 47 AB           JSR XXAB47
01827  AB30  C8                 INY 
01828  AB31  C9 0D              CMP #$0D
01829  AB33  D0 F3              BNE XXAB28
01830  AB35  20 E5 AA           JSR XXAAE5
01831  AB38  4C 28 AB           JMP XXAB28
01832  AB3B              ;********************************
01833  AB3B              ;
01834  AB3B              ;********************************
01835  AB3B  A5 13       XXAB3B LDA CHANNL
01836  AB3D  F0 03              BEQ XXAB42
01837  AB3F  A9 20              LDA #$20        ;' '
01838  AB41              ;********************************
01839  AB41  2C                 .BYTE $2C
01840  AB42              ;********************************
01841  AB42  A9 1D       XXAB42 LDA #$1D
01842  AB44              ;********************************
01843  AB44  2C                 .BYTE $2C
01844  AB45              ;********************************
01845  AB45  A9 3F       XXAB45 LDA #$3F        ;'?'
01846  AB47              ; DIFF
01847  AB47              ; C64 = $E10C VIC20 = $E109
01848  AB47  20 0C E1    XXAB47 JSR KKE10C
01849  AB4A  29 FF              AND #$FF
01850  AB4C  60                 RTS 
01851  AB4D              ;********************************
01852  AB4D              ;
01853  AB4D              ;********************************
01854  AB4D  A5 11       XXAB4D LDA INPFLG
01855  AB4F  F0 11              BEQ XXAB62
01856  AB51  30 04              BMI XXAB57






ABASIC.ASM......PAGE 0038

LINE# LOC   CODE        LINE


01857  AB53  A0 FF              LDY #$FF
01858  AB55  D0 04              BNE XXAB5B
01859  AB57  A5 3F       XXAB57 LDA DATLIN
01860  AB59  A4 40              LDY DATLIN+1
01861  AB5B  85 39       XXAB5B STA CURLIN
01862  AB5D  84 3A              STY CURLIN+1
01863  AB5F  4C 08 AF    XXAB5F JMP XXAF08
01864  AB62              ;********************************
01865  AB62              ;
01866  AB62              ;********************************
01867  AB62  A5 13       XXAB62 LDA CHANNL
01868  AB64  F0 05              BEQ XXAB6B
01869  AB66  A2 18              LDX #$18
01870  AB68  4C 37 A4           JMP XXA437
01871  AB6B              ;********************************
01872  AB6B              ;
01873  AB6B              ;********************************
01874  AB6B  A9 0C       XXAB6B LDA #<ZZAD0C    ;#$0C
01875  AB6D  A0 AD              LDY #>ZZAD0C    ;#$AD
01876  AB6F  20 1E AB           JSR XXAB1E
01877  AB72  A5 3D              LDA OLDTXT
01878  AB74  A4 3E              LDY OLDTXT+1
01879  AB76  85 7A              STA TXTPTR
01880  AB78  84 7B              STY TXTPTR+1
01881  AB7A  60          XXAB7A RTS 
01882  AB7B              ;********************************
01883  AB7B              ;
01884  AB7B              ;********************************
01885  AB7B  20 A6 B3    XXAB7B JSR XXB3A6
01886  AB7E  C9 23              CMP #$23        ;'#'
01887  AB80  D0 10              BNE XXAB92
01888  AB82  20 73 00           JSR CHRGET
01889  AB85  20 9E B7           JSR XXB79E
01890  AB88  A9 2C              LDA #$2C        ;','
01891  AB8A  20 FF AE           JSR XXAEFF
01892  AB8D  86 13              STX CHANNL
01893  AB8F  20 1E E1           JSR KKE11E
01894  AB92  A2 01       XXAB92 LDX #$01
01895  AB94  A0 02              LDY #$02
01896  AB96  A9 00              LDA #$00
01897  AB98  8D 01 02           STA $0201
01898  AB9B  A9 40              LDA #$40        ;'@'
01899  AB9D  20 0F AC           JSR XXAC0F
01900  ABA0  A6 13              LDX CHANNL
01901  ABA2  D0 13              BNE XXABB7
01902  ABA4  60          XXABA4 RTS 
01903  ABA5              ;********************************
01904  ABA5              ; INPUT#
01905  ABA5              ;********************************
01906  ABA5  20 9E B7    ZZABA5 JSR XXB79E
01907  ABA8  A9 2C              LDA #$2C        ;','
01908  ABAA  20 FF AE           JSR XXAEFF
01909  ABAD  86 13              STX CHANNL
01910  ABAF              ; DIFF
01911  ABAF              ; C64 = $E11E VIC20 = $E11B






ABASIC.ASM......PAGE 0039

LINE# LOC   CODE        LINE


01912  ABAF  20 1E E1           JSR KKE11E
01913  ABB2  20 CE AB           JSR XXABCE
01914  ABB5  A5 13       XXABB5 LDA CHANNL
01915  ABB7  20 CC FF    XXABB7 JSR CLRCHN
01916  ABBA  A2 00              LDX #$00
01917  ABBC  86 13              STX CHANNL
01918  ABBE  60          XXABBE RTS 
01919  ABBF              ;********************************
01920  ABBF              ; INPUT
01921  ABBF              ;********************************
01922  ABBF  C9 22       ZZABBF CMP #$22        ;'"'
01923  ABC1  D0 0B              BNE XXABCE
01924  ABC3  20 BD AE           JSR XXAEBD
01925  ABC6  A9 3B              LDA #$3B        ;';'
01926  ABC8  20 FF AE           JSR XXAEFF
01927  ABCB  20 21 AB           JSR XXAB21
01928  ABCE  20 A6 B3    XXABCE JSR XXB3A6
01929  ABD1  A9 2C              LDA #$2C        ;','
01930  ABD3  8D FF 01           STA $01FF
01931  ABD6  20 F9 AB    XXABD6 JSR XXABF9
01932  ABD9  A5 13              LDA CHANNL
01933  ABDB  F0 0D              BEQ XXABEA
01934  ABDD  20 B7 FF           JSR READST
01935  ABE0  29 02              AND #$02
01936  ABE2  F0 06              BEQ XXABEA
01937  ABE4  20 B5 AB           JSR XXABB5
01938  ABE7  4C F8 A8           JMP XXA8F8
01939  ABEA              ;********************************
01940  ABEA              ;
01941  ABEA              ;********************************
01942  ABEA  AD 00 02    XXABEA LDA BUF
01943  ABED  D0 1E              BNE XXAC0D
01944  ABEF  A5 13              LDA CHANNL
01945  ABF1  D0 E3              BNE XXABD6
01946  ABF3  20 06 A9           JSR XXA906
01947  ABF6  4C FB A8           JMP XXA8FB
01948  ABF9              ;********************************
01949  ABF9              ;
01950  ABF9              ;********************************
01951  ABF9  A5 13       XXABF9 LDA CHANNL
01952  ABFB  D0 06              BNE XXAC03
01953  ABFD  20 45 AB           JSR XXAB45
01954  AC00  20 3B AB           JSR XXAB3B
01955  AC03  4C 60 A5    XXAC03 JMP XXA560
01956  AC06              ;********************************
01957  AC06              ;
01958  AC06              ;********************************
01959  AC06  A6 41       ZZAC06 LDX DATPRT
01960  AC08  A4 42              LDY DATPRT+1
01961  AC0A  A9 98              LDA #$98
01962  AC0C              ;********************************
01963  AC0C  2C                 .BYTE $2C
01964  AC0D              ;********************************
01965  AC0D  A9 00       XXAC0D LDA #$00
01966  AC0F  85 11       XXAC0F STA INPFLG






ABASIC.ASM......PAGE 0040

LINE# LOC   CODE        LINE


01967  AC11  86 43              STX INPPTR
01968  AC13  84 44              STY INPPTR+1
01969  AC15  20 8B B0    XXAC15 JSR XXB08B
01970  AC18  85 49              STA FORPNT
01971  AC1A  84 4A              STY FORPNT+1
01972  AC1C  A5 7A              LDA TXTPTR
01973  AC1E  A4 7B              LDY TXTPTR+1
01974  AC20  85 4B              STA OPPTR
01975  AC22  84 4C              STY OPPTR+1
01976  AC24  A6 43              LDX INPPTR
01977  AC26  A4 44              LDY INPPTR+1
01978  AC28  86 7A              STX TXTPTR
01979  AC2A  84 7B              STY TXTPTR+1
01980  AC2C  20 79 00           JSR CHRGOT
01981  AC2F  D0 20              BNE XXAC51
01982  AC31  24 11              BIT INPFLG
01983  AC33  50 0C              BVC XXAC41
01984  AC35              ; DIFF
01985  AC35              ; C64 = $E124 VIC20 = $E121
01986  AC35  20 24 E1           JSR KKE124
01987  AC38  8D 00 02           STA BUF
01988  AC3B  A2 FF              LDX #$FF
01989  AC3D  A0 01              LDY #$01
01990  AC3F  D0 0C              BNE XXAC4D
01991  AC41  30 75       XXAC41 BMI XXACB8
01992  AC43  A5 13              LDA CHANNL
01993  AC45  D0 03              BNE XXAC4A
01994  AC47  20 45 AB           JSR XXAB45
01995  AC4A  20 F9 AB    XXAC4A JSR XXABF9
01996  AC4D  86 7A       XXAC4D STX TXTPTR
01997  AC4F  84 7B              STY TXTPTR+1
01998  AC51  20 73 00    XXAC51 JSR CHRGET
01999  AC54  24 0D              BIT VALTYP
02000  AC56  10 31              BPL XXAC89
02001  AC58  24 11              BIT INPFLG
02002  AC5A  50 09              BVC XXAC65
02003  AC5C  E8                 INX 
02004  AC5D  86 7A              STX TXTPTR
02005  AC5F  A9 00              LDA #$00
02006  AC61  85 07              STA CHARAC
02007  AC63  F0 0C              BEQ XXAC71
02008  AC65  85 07       XXAC65 STA CHARAC
02009  AC67  C9 22              CMP #$22        ;'"'
02010  AC69  F0 07              BEQ XXAC72
02011  AC6B  A9 3A              LDA #$3A        ;':'
02012  AC6D  85 07              STA CHARAC
02013  AC6F  A9 2C              LDA #$2C        ;','
02014  AC71  18          XXAC71 CLC 
02015  AC72  85 08       XXAC72 STA ENDCHR
02016  AC74  A5 7A              LDA TXTPTR
02017  AC76  A4 7B              LDY TXTPTR+1
02018  AC78  69 00              ADC #$00
02019  AC7A  90 01              BCC XXAC7D
02020  AC7C  C8                 INY 
02021  AC7D  20 8D B4    XXAC7D JSR XXB48D






ABASIC.ASM......PAGE 0041

LINE# LOC   CODE        LINE


02022  AC80  20 E2 B7           JSR XXB7E2
02023  AC83  20 DA A9           JSR XXA9DA
02024  AC86  4C 91 AC           JMP XXAC91
02025  AC89              ;********************************
02026  AC89              ;
02027  AC89              ;********************************
02028  AC89  20 F3 BC    XXAC89 JSR XXBCF3
02029  AC8C  A5 0E              LDA INTFLG
02030  AC8E  20 C2 A9           JSR XXA9C2
02031  AC91  20 79 00    XXAC91 JSR CHRGOT
02032  AC94  F0 07              BEQ XXAC9D
02033  AC96  C9 2C              CMP #$2C        ;','
02034  AC98  F0 03              BEQ XXAC9D
02035  AC9A  4C 4D AB           JMP XXAB4D
02036  AC9D              ;********************************
02037  AC9D              ;
02038  AC9D              ;********************************
02039  AC9D  A5 7A       XXAC9D LDA TXTPTR
02040  AC9F  A4 7B              LDY TXTPTR+1
02041  ACA1  85 43              STA INPPTR
02042  ACA3  84 44              STY INPPTR+1
02043  ACA5  A5 4B              LDA OPPTR
02044  ACA7  A4 4C              LDY OPPTR+1
02045  ACA9  85 7A              STA TXTPTR
02046  ACAB  84 7B              STY TXTPTR+1
02047  ACAD  20 79 00           JSR CHRGOT
02048  ACB0  F0 2D              BEQ XXACDF
02049  ACB2  20 FD AE           JSR XXAEFD
02050  ACB5  4C 15 AC           JMP XXAC15
02051  ACB8              ;********************************
02052  ACB8              ;
02053  ACB8              ;********************************
02054  ACB8  20 06 A9    XXACB8 JSR XXA906
02055  ACBB  C8                 INY 
02056  ACBC  AA                 TAX 
02057  ACBD  D0 12              BNE XXACD1
02058  ACBF  A2 0D              LDX #$0D
02059  ACC1  C8                 INY 
02060  ACC2  B1 7A              LDA (TXTPTR),Y
02061  ACC4  F0 6C              BEQ XXAD32
02062  ACC6  C8                 INY 
02063  ACC7  B1 7A              LDA (TXTPTR),Y
02064  ACC9  85 3F              STA DATLIN
02065  ACCB  C8                 INY 
02066  ACCC  B1 7A              LDA (TXTPTR),Y
02067  ACCE  C8                 INY 
02068  ACCF  85 40              STA DATLIN+1
02069  ACD1  20 FB A8    XXACD1 JSR XXA8FB
02070  ACD4  20 79 00           JSR CHRGOT
02071  ACD7  AA                 TAX 
02072  ACD8  E0 83              CPX #$83
02073  ACDA  D0 DC              BNE XXACB8
02074  ACDC  4C 51 AC           JMP XXAC51
02075  ACDF              ;********************************
02076  ACDF              ;






ABASIC.ASM......PAGE 0042

LINE# LOC   CODE        LINE


02077  ACDF              ;********************************
02078  ACDF  A5 43       XXACDF LDA INPPTR
02079  ACE1  A4 44              LDY INPPTR+1
02080  ACE3  A6 11              LDX INPFLG
02081  ACE5  10 03              BPL XXACEA
02082  ACE7  4C 27 A8           JMP XXA827
02083  ACEA              ;********************************
02084  ACEA              ;
02085  ACEA              ;********************************
02086  ACEA  A0 00       XXACEA LDY #$00
02087  ACEC  B1 43              LDA (INPPTR),Y
02088  ACEE  F0 0B              BEQ XXACFB
02089  ACF0  A5 13              LDA CHANNL
02090  ACF2  D0 07              BNE XXACFB
02091  ACF4  A9 FC              LDA #<ZZACFC    ;#$FC
02092  ACF6  A0 AC              LDY #>ZZACFC    ;#$AC
02093  ACF8  4C 1E AB           JMP XXAB1E
02094  ACFB              ;********************************
02095  ACFB              ;
02096  ACFB              ;********************************
02097  ACFB  60          XXACFB RTS 
02098  ACFC              ;********************************
02099  ACFC              ;
02100  ACFC              ;********************************
02101  ACFC  3F 45       ZZACFC .BYTE '?EXTRA IGNORED'
02102  AD0A  0D                 .BYTE $0D
02103  AD0B  00                 .BYTE $00
02104  AD0C  3F 52       ZZAD0C .BYTE '?REDO FROM START'
02105  AD1C  0D                 .BYTE $0D
02106  AD1D  00          XXAD1D .BYTE $00
02107  AD1E              ;********************************
02108  AD1E              ;
02109  AD1E              ;********************************
02110  AD1E  D0 04       ZZAD1E BNE XXAD24
02111  AD20  A0 00              LDY #$00
02112  AD22  F0 03              BEQ XXAD27
02113  AD24  20 8B B0    XXAD24 JSR XXB08B
02114  AD27  85 49       XXAD27 STA FORPNT
02115  AD29  84 4A              STY FORPNT+1
02116  AD2B  20 8A A3           JSR XXA38A
02117  AD2E  F0 05              BEQ XXAD35
02118  AD30  A2 0A              LDX #$0A
02119  AD32  4C 37 A4    XXAD32 JMP XXA437
02120  AD35              ;********************************
02121  AD35              ;
02122  AD35              ;********************************
02123  AD35  9A          XXAD35 TXS 
02124  AD36  8A                 TXA 
02125  AD37  18                 CLC 
02126  AD38  69 04              ADC #$04
02127  AD3A  48                 PHA 
02128  AD3B  69 06              ADC #$06
02129  AD3D  85 24              STA INDEX+2
02130  AD3F  68                 PLA 
02131  AD40  A0 01              LDY #$01






ABASIC.ASM......PAGE 0043

LINE# LOC   CODE        LINE


02132  AD42  20 A2 BB           JSR XXBBA2
02133  AD45  BA                 TSX 
02134  AD46  BD 09 01           LDA $0109,X
02135  AD49  85 66              STA $66
02136  AD4B  A5 49              LDA FORPNT
02137  AD4D  A4 4A              LDY FORPNT+1
02138  AD4F  20 67 B8           JSR XXB867
02139  AD52  20 D0 BB           JSR XXBBD0
02140  AD55  A0 01              LDY #$01
02141  AD57  20 5D BC           JSR XXBC5D
02142  AD5A  BA                 TSX 
02143  AD5B  38                 SEC 
02144  AD5C  FD 09 01           SBC $0109,X
02145  AD5F  F0 17              BEQ XXAD78
02146  AD61  BD 0F 01           LDA $010F,X
02147  AD64  85 39              STA CURLIN
02148  AD66  BD 10 01           LDA $0110,X
02149  AD69  85 3A              STA CURLIN+1
02150  AD6B  BD 12 01           LDA $0112,X
02151  AD6E  85 7A              STA TXTPTR
02152  AD70  BD 11 01           LDA $0111,X
02153  AD73  85 7B              STA TXTPTR+1
02154  AD75  4C AE A7    XXAD75 JMP XXA7AE
02155  AD78              ;********************************
02156  AD78              ;
02157  AD78              ;********************************
02158  AD78  8A          XXAD78 TXA 
02159  AD79  69 11              ADC #$11
02160  AD7B  AA                 TAX 
02161  AD7C  9A                 TXS 
02162  AD7D  20 79 00           JSR CHRGOT
02163  AD80  C9 2C              CMP #$2C        ;','
02164  AD82  D0 F1              BNE XXAD75
02165  AD84  20 73 00           JSR CHRGET
02166  AD87  20 24 AD           JSR XXAD24
02167  AD8A  20 9E AD    XXAD8A JSR XXAD9E
02168  AD8D  18          XXAD8D CLC 
02169  AD8E              ;********************************
02170  AD8E  24                 .BYTE $24
02171  AD8F              ;********************************
02172  AD8F  38          XXAD8F SEC 
02173  AD90  24 0D       XXAD90 BIT VALTYP
02174  AD92  30 03              BMI XXAD97
02175  AD94  B0 03              BCS XXAD99
02176  AD96  60          XXAD96 RTS 
02177  AD97              ;********************************
02178  AD97              ;
02179  AD97              ;********************************
02180  AD97  B0 FD       XXAD97 BCS XXAD96
02181  AD99  A2 16       XXAD99 LDX #$16
02182  AD9B  4C 37 A4           JMP XXA437
02183  AD9E              ;********************************
02184  AD9E              ;
02185  AD9E              ;********************************
02186  AD9E  A6 7A       XXAD9E LDX TXTPTR






ABASIC.ASM......PAGE 0044

LINE# LOC   CODE        LINE


02187  ADA0  D0 02              BNE XXADA4
02188  ADA2  C6 7B              DEC TXTPTR+1
02189  ADA4  C6 7A       XXADA4 DEC TXTPTR
02190  ADA6  A2 00              LDX #$00
02191  ADA8              ;********************************
02192  ADA8  24                 .BYTE $24
02193  ADA9              ;********************************
02194  ADA9  48          XXADA9 PHA 
02195  ADAA  8A                 TXA 
02196  ADAB  48                 PHA 
02197  ADAC  A9 01              LDA #$01
02198  ADAE  20 FB A3           JSR XXA3FB
02199  ADB1  20 83 AE           JSR XXAE83
02200  ADB4  A9 00              LDA #$00
02201  ADB6  85 4D              STA OPMASK
02202  ADB8  20 79 00    XXADB8 JSR CHRGOT
02203  ADBB  38          XXADBB SEC 
02204  ADBC  E9 B1              SBC #$B1
02205  ADBE  90 17              BCC XXADD7
02206  ADC0  C9 03              CMP #$03
02207  ADC2  B0 13              BCS XXADD7
02208  ADC4  C9 01              CMP #$01
02209  ADC6  2A                 ROL A
02210  ADC7  49 01              EOR #$01
02211  ADC9  45 4D              EOR OPMASK
02212  ADCB  C5 4D              CMP OPMASK
02213  ADCD  90 61              BCC XXAE30
02214  ADCF  85 4D              STA OPMASK
02215  ADD1  20 73 00           JSR CHRGET
02216  ADD4  4C BB AD           JMP XXADBB
02217  ADD7              ;********************************
02218  ADD7              ;
02219  ADD7              ;********************************
02220  ADD7  A6 4D       XXADD7 LDX OPMASK
02221  ADD9  D0 2C              BNE XXAE07
02222  ADDB  B0 7B              BCS XXAE58
02223  ADDD  69 07              ADC #$07
02224  ADDF  90 77              BCC XXAE58
02225  ADE1  65 0D              ADC VALTYP
02226  ADE3  D0 03              BNE XXADE8
02227  ADE5  4C 3D B6           JMP XXB63D
02228  ADE8              ;********************************
02229  ADE8              ;
02230  ADE8              ;********************************
02231  ADE8  69 FF       XXADE8 ADC #$FF
02232  ADEA  85 22              STA INDEX
02233  ADEC  0A                 ASL A
02234  ADED  65 22              ADC INDEX
02235  ADEF  A8                 TAY 
02236  ADF0  68          XXADF0 PLA 
02237  ADF1  D9 80 A0           CMP XXA080,Y
02238  ADF4  B0 67              BCS XXAE5D
02239  ADF6  20 8D AD           JSR XXAD8D
02240  ADF9  48          XXADF9 PHA 
02241  ADFA  20 20 AE    XXADFA JSR XXAE20






ABASIC.ASM......PAGE 0045

LINE# LOC   CODE        LINE


02242  ADFD  68                 PLA 
02243  ADFE  A4 4B              LDY OPPTR
02244  AE00  10 17              BPL XXAE19
02245  AE02  AA                 TAX 
02246  AE03  F0 56              BEQ XXAE5B
02247  AE05  D0 5F              BNE XXAE66
02248  AE07  46 0D       XXAE07 LSR VALTYP
02249  AE09  8A                 TXA 
02250  AE0A  2A                 ROL A
02251  AE0B  A6 7A              LDX TXTPTR
02252  AE0D  D0 02              BNE XXAE11
02253  AE0F  C6 7B              DEC TXTPTR+1
02254  AE11  C6 7A       XXAE11 DEC TXTPTR
02255  AE13  A0 1B              LDY #$1B
02256  AE15  85 4D              STA OPMASK
02257  AE17  D0 D7              BNE XXADF0
02258  AE19  D9 80 A0    XXAE19 CMP XXA080,Y
02259  AE1C  B0 48              BCS XXAE66
02260  AE1E  90 D9              BCC XXADF9
02261  AE20  B9 82 A0    XXAE20 LDA XXA081+1,Y
02262  AE23  48                 PHA 
02263  AE24  B9 81 A0           LDA XXA081,Y
02264  AE27  48                 PHA 
02265  AE28  20 33 AE           JSR XXAE33
02266  AE2B  A5 4D              LDA OPMASK
02267  AE2D  4C A9 AD           JMP XXADA9
02268  AE30              ;********************************
02269  AE30              ;
02270  AE30              ;********************************
02271  AE30  4C 08 AF    XXAE30 JMP XXAF08
02272  AE33              ;********************************
02273  AE33              ;
02274  AE33              ;********************************
02275  AE33  A5 66       XXAE33 LDA $66
02276  AE35  BE 80 A0           LDX XXA080,Y
02277  AE38  A8          XXAE38 TAY 
02278  AE39  68                 PLA 
02279  AE3A  85 22              STA INDEX
02280  AE3C  E6 22              INC INDEX
02281  AE3E  68                 PLA 
02282  AE3F  85 23              STA INDEX+1
02283  AE41  98                 TYA 
02284  AE42  48                 PHA 
02285  AE43  20 1B BC    XXAE43 JSR XXBC1B
02286  AE46  A5 65              LDA $65
02287  AE48  48                 PHA 
02288  AE49  A5 64              LDA $64
02289  AE4B  48                 PHA 
02290  AE4C  A5 63              LDA $63
02291  AE4E  48                 PHA 
02292  AE4F  A5 62              LDA $62
02293  AE51  48                 PHA 
02294  AE52  A5 61              LDA $61
02295  AE54  48                 PHA 
02296  AE55  6C 22 00           JMP ($0022)






ABASIC.ASM......PAGE 0046

LINE# LOC   CODE        LINE


02297  AE58              ;********************************
02298  AE58              ;
02299  AE58              ;********************************
02300  AE58  A0 FF       XXAE58 LDY #$FF
02301  AE5A  68                 PLA 
02302  AE5B  F0 23       XXAE5B BEQ XXAE80
02303  AE5D  C9 64       XXAE5D CMP #$64
02304  AE5F  F0 03              BEQ XXAE64
02305  AE61  20 8D AD           JSR XXAD8D
02306  AE64  84 4B       XXAE64 STY OPPTR
02307  AE66  68          XXAE66 PLA 
02308  AE67  4A                 LSR A
02309  AE68  85 12              STA TANSGN
02310  AE6A  68                 PLA 
02311  AE6B  85 69              STA $69
02312  AE6D  68                 PLA 
02313  AE6E  85 6A              STA $6A
02314  AE70  68                 PLA 
02315  AE71  85 6B              STA $6B
02316  AE73  68                 PLA 
02317  AE74  85 6C              STA $6C
02318  AE76  68                 PLA 
02319  AE77  85 6D              STA $6D
02320  AE79  68                 PLA 
02321  AE7A  85 6E              STA $6E
02322  AE7C  45 66              EOR $66
02323  AE7E  85 6F              STA $6F
02324  AE80  A5 61       XXAE80 LDA $61
02325  AE82  60                 RTS 
02326  AE83              ;********************************
02327  AE83              ;
02328  AE83              ;********************************
02329  AE83  6C 0A 03    XXAE83 JMP (IEVAL)
02330  AE86              ;********************************
02331  AE86              ;
02332  AE86              ;********************************
02333  AE86  A9 00       KKAE86 LDA #$00
02334  AE88  85 0D              STA VALTYP
02335  AE8A  20 73 00    XXAE8A JSR CHRGET
02336  AE8D  B0 03              BCS XXAE92
02337  AE8F  4C F3 BC    XXAE8F JMP XXBCF3
02338  AE92              ;********************************
02339  AE92              ;
02340  AE92              ;********************************
02341  AE92  20 13 B1    XXAE92 JSR XXB113
02342  AE95  90 03              BCC XXAE9A
02343  AE97  4C 28 AF           JMP XXAF28
02344  AE9A              ;********************************
02345  AE9A              ;
02346  AE9A              ;********************************
02347  AE9A  C9 FF       XXAE9A CMP #$FF
02348  AE9C  D0 0F              BNE XXAEAD
02349  AE9E  A9 A8              LDA #<ZZAEA8    ;#$A8
02350  AEA0  A0 AE              LDY #>ZZAEA8    ;#$AE
02351  AEA2  20 A2 BB           JSR XXBBA2






ABASIC.ASM......PAGE 0047

LINE# LOC   CODE        LINE


02352  AEA5  4C 73 00           JMP CHRGET
02353  AEA8              ;********************************
02354  AEA8              ;
02355  AEA8              ;********************************
02356  AEA8  82          ZZAEA8 .BYTE $82
02357  AEA9  49                 .BYTE $49
02358  AEAA  0F                 .BYTE $0F
02359  AEAB  DA                 .BYTE $DA
02360  AEAC  A1                 .BYTE $A1
02361  AEAD              ;********************************
02362  AEAD              ;
02363  AEAD              ;********************************
02364  AEAD  C9 2E       XXAEAD CMP #$2E        ;'.'
02365  AEAF  F0 DE              BEQ XXAE8F
02366  AEB1  C9 AB              CMP #$AB
02367  AEB3  F0 58              BEQ XXAF0D
02368  AEB5  C9 AA              CMP #$AA
02369  AEB7  F0 D1              BEQ XXAE8A
02370  AEB9  C9 22              CMP #$22        ;'"'
02371  AEBB  D0 0F              BNE XXAECC
02372  AEBD  A5 7A       XXAEBD LDA TXTPTR
02373  AEBF  A4 7B              LDY TXTPTR+1
02374  AEC1  69 00              ADC #$00
02375  AEC3  90 01              BCC XXAEC6
02376  AEC5  C8                 INY 
02377  AEC6  20 87 B4    XXAEC6 JSR XXB487
02378  AEC9  4C E2 B7           JMP XXB7E2
02379  AECC              ;********************************
02380  AECC              ;
02381  AECC              ;********************************
02382  AECC  C9 A8       XXAECC CMP #$A8
02383  AECE  D0 13              BNE XXAEE3
02384  AED0  A0 18              LDY #$18
02385  AED2  D0 3B              BNE XXAF0F
02386  AED4              ;********************************
02387  AED4              ;
02388  AED4              ;********************************
02389  AED4  20 BF B1    ZZAED4 JSR XXB1BF
02390  AED7  A5 65              LDA $65
02391  AED9  49 FF              EOR #$FF
02392  AEDB  A8                 TAY 
02393  AEDC  A5 64              LDA $64
02394  AEDE  49 FF              EOR #$FF
02395  AEE0  4C 91 B3           JMP XXB391
02396  AEE3              ;********************************
02397  AEE3              ;
02398  AEE3              ;********************************
02399  AEE3  C9 A5       XXAEE3 CMP #$A5
02400  AEE5  D0 03              BNE XXAEEA
02401  AEE7  4C F4 B3           JMP XXB3F4
02402  AEEA              ;********************************
02403  AEEA              ;
02404  AEEA              ;********************************
02405  AEEA  C9 B4       XXAEEA CMP #$B4
02406  AEEC  90 03              BCC XXAEF1






ABASIC.ASM......PAGE 0048

LINE# LOC   CODE        LINE


02407  AEEE  4C A7 AF           JMP XXAFA7
02408  AEF1              ;********************************
02409  AEF1              ;
02410  AEF1              ;********************************
02411  AEF1  20 FA AE    XXAEF1 JSR XXAEFA
02412  AEF4  20 9E AD           JSR XXAD9E
02413  AEF7  A9 29       XXAEF7 LDA #$29        ;')'
02414  AEF9              ;********************************
02415  AEF9  2C                 .BYTE $2C
02416  AEFA              ;********************************
02417  AEFA  A9 28       XXAEFA LDA #$28        ;'('
02418  AEFC              ;********************************
02419  AEFC  2C                 .BYTE $2C
02420  AEFD              ;********************************
02421  AEFD  A9 2C       XXAEFD LDA #$2C        ;','
02422  AEFF  A0 00       XXAEFF LDY #$00
02423  AF01  D1 7A              CMP (TXTPTR),Y
02424  AF03  D0 03              BNE XXAF08
02425  AF05  4C 73 00           JMP CHRGET
02426  AF08              ;********************************
02427  AF08              ;
02428  AF08              ;********************************
02429  AF08  A2 0B       XXAF08 LDX #$0B
02430  AF0A  4C 37 A4           JMP XXA437
02431  AF0D              ;********************************
02432  AF0D              ;
02433  AF0D              ;********************************
02434  AF0D  A0 15       XXAF0D LDY #$15
02435  AF0F  68          XXAF0F PLA 
02436  AF10  68                 PLA 
02437  AF11  4C FA AD           JMP XXADFA
02438  AF14              ;********************************
02439  AF14              ;
02440  AF14              ;********************************
02441  AF14  38          XXAF14 SEC 
02442  AF15  A5 64              LDA $64
02443  AF17  E9 00              SBC #$00
02444  AF19  A5 65              LDA $65
02445  AF1B  E9 A0              SBC #>ZZA000    ;#$A0
02446  AF1D  90 08              BCC XXAF27
02447  AF1F              ; DIFF
02448  AF1F              ; C64 = $E3A2 VIC20 = $E387
02449  AF1F  A9 A2              LDA #<XXE3A2    ;#$A2
02450  AF21  E5 64              SBC $64
02451  AF23  A9 E3              LDA #>XXE3A2    ;#$E3
02452  AF25  E5 65              SBC $65
02453  AF27  60          XXAF27 RTS 
02454  AF28              ;********************************
02455  AF28              ;
02456  AF28              ;********************************
02457  AF28  20 8B B0    XXAF28 JSR XXB08B
02458  AF2B  85 64              STA $64
02459  AF2D  84 65              STY $65
02460  AF2F  A6 45              LDX VARNAM
02461  AF31  A4 46              LDY VARNAM+1






ABASIC.ASM......PAGE 0049

LINE# LOC   CODE        LINE


02462  AF33  A5 0D              LDA VALTYP
02463  AF35  F0 26              BEQ XXAF5D
02464  AF37  A9 00              LDA #$00
02465  AF39  85 70              STA $70
02466  AF3B  20 14 AF           JSR XXAF14
02467  AF3E  90 1C              BCC XXAF5C
02468  AF40  E0 54              CPX #$54        ;'T'
02469  AF42  D0 18              BNE XXAF5C
02470  AF44  C0 C9              CPY #$C9
02471  AF46  D0 14              BNE XXAF5C
02472  AF48  20 84 AF           JSR XXAF84
02473  AF4B  84 5E              STY $5E
02474  AF4D  88                 DEY 
02475  AF4E  84 71              STY $71
02476  AF50  A0 06              LDY #$06
02477  AF52  84 5D              STY $5D
02478  AF54  A0 24              LDY #$24        ;'$'
02479  AF56  20 68 BE           JSR XXBE68
02480  AF59  4C 6F B4           JMP XXB46F
02481  AF5C              ;********************************
02482  AF5C              ;
02483  AF5C              ;********************************
02484  AF5C  60          XXAF5C RTS 
02485  AF5D              ;********************************
02486  AF5D              ;
02487  AF5D              ;********************************
02488  AF5D  24 0E       XXAF5D BIT INTFLG
02489  AF5F  10 0D              BPL XXAF6E
02490  AF61  A0 00              LDY #$00
02491  AF63  B1 64              LDA ($64),Y
02492  AF65  AA                 TAX 
02493  AF66  C8                 INY 
02494  AF67  B1 64              LDA ($64),Y
02495  AF69  A8                 TAY 
02496  AF6A  8A                 TXA 
02497  AF6B  4C 91 B3           JMP XXB391
02498  AF6E              ;********************************
02499  AF6E              ;
02500  AF6E              ;********************************
02501  AF6E  20 14 AF    XXAF6E JSR XXAF14
02502  AF71  90 2D              BCC XXAFA0
02503  AF73  E0 54              CPX #$54        ;'T'
02504  AF75  D0 1B              BNE XXAF92
02505  AF77  C0 49              CPY #$49        ;'I'
02506  AF79  D0 25              BNE XXAFA0
02507  AF7B  20 84 AF           JSR XXAF84
02508  AF7E  98                 TYA 
02509  AF7F  A2 A0              LDX #$A0
02510  AF81  4C 4F BC           JMP XXBC4F
02511  AF84              ;********************************
02512  AF84              ;
02513  AF84              ;********************************
02514  AF84  20 DE FF    XXAF84 JSR RDTIM
02515  AF87  86 64              STX $64
02516  AF89  84 63              STY $63






ABASIC.ASM......PAGE 0050

LINE# LOC   CODE        LINE


02517  AF8B  85 65              STA $65
02518  AF8D  A0 00              LDY #$00
02519  AF8F  84 62              STY $62
02520  AF91  60                 RTS 
02521  AF92              ;********************************
02522  AF92              ;
02523  AF92              ;********************************
02524  AF92  E0 53       XXAF92 CPX #$53        ;'S'
02525  AF94  D0 0A              BNE XXAFA0
02526  AF96  C0 54              CPY #$54        ;'T'
02527  AF98  D0 06              BNE XXAFA0
02528  AF9A  20 B7 FF           JSR READST
02529  AF9D  4C 3C BC           JMP XXBC3C
02530  AFA0              ;********************************
02531  AFA0              ;
02532  AFA0              ;********************************
02533  AFA0  A5 64       XXAFA0 LDA $64
02534  AFA2  A4 65              LDY $65
02535  AFA4  4C A2 BB           JMP XXBBA2
02536  AFA7              ;********************************
02537  AFA7              ; ISFUN - DISPATCH AND EVALUATE A FUNCTION
02538  AFA7              ;********************************
02539  AFA7  0A          XXAFA7 ASL A
02540  AFA8  48                 PHA 
02541  AFA9  AA                 TAX 
02542  AFAA  20 73 00           JSR CHRGET
02543  AFAD  E0 8F              CPX #$8F
02544  AFAF  90 20              BCC XXAFD1
02545  AFB1  20 FA AE           JSR XXAEFA
02546  AFB4  20 9E AD           JSR XXAD9E
02547  AFB7  20 FD AE           JSR XXAEFD
02548  AFBA  20 8F AD           JSR XXAD8F
02549  AFBD  68                 PLA 
02550  AFBE  AA                 TAX 
02551  AFBF  A5 65              LDA $65
02552  AFC1  48                 PHA 
02553  AFC2  A5 64              LDA $64
02554  AFC4  48                 PHA 
02555  AFC5  8A                 TXA 
02556  AFC6  48                 PHA 
02557  AFC7  20 9E B7           JSR XXB79E
02558  AFCA  68                 PLA 
02559  AFCB  A8                 TAY 
02560  AFCC  8A                 TXA 
02561  AFCD  48                 PHA 
02562  AFCE  4C D6 AF           JMP XXAFD6
02563  AFD1              ;********************************
02564  AFD1              ;
02565  AFD1              ;********************************
02566  AFD1              TT9FEA = ZZA00C-$0022  ; (ZZA050-ZZA00C/2)
02567  AFD1              TT9FEB = ZZA00C-$0021  ; (ZZA050-ZZA00C/2)-1
02568  AFD1              ;********************************
02569  AFD1              ;
02570  AFD1              ;********************************
02571  AFD1  20 F1 AE    XXAFD1 JSR XXAEF1






ABASIC.ASM......PAGE 0051

LINE# LOC   CODE        LINE


02572  AFD4  68                 PLA 
02573  AFD5  A8                 TAY 
02574  AFD6  B9 EA 9F    XXAFD6 LDA TT9FEA,Y    ;$9FEA,Y
02575  AFD9  85 55              STA JMPER+1     ;$55
02576  AFDB              ;
02577  AFDB  B9 EB 9F           LDA TT9FEB,Y    ;$9FEB,Y
02578  AFDE  85 56              STA JMPER+2     ;$56
02579  AFE0              ;
02580  AFE0  20 54 00           JSR JMPER
02581  AFE3  4C 8D AD           JMP XXAD8D
02582  AFE6              ;********************************
02583  AFE6              ; OR OPERATOR
02584  AFE6              ;********************************
02585  AFE6  A0 FF       ZZAFE6 LDY #$FF
02586  AFE8              ;********************************
02587  AFE8  2C                 .BYTE $2C
02588  AFE9              ;********************************
02589  AFE9              ; AND OPERATOR
02590  AFE9              ;********************************
02591  AFE9  A0 00       ZZAFE9 LDY #$00
02592  AFEB  84 0B              STY COUNT
02593  AFED  20 BF B1           JSR XXB1BF
02594  AFF0  A5 64              LDA $64
02595  AFF2  45 0B              EOR COUNT
02596  AFF4  85 07              STA CHARAC
02597  AFF6  A5 65              LDA $65
02598  AFF8  45 0B              EOR COUNT
02599  AFFA  85 08              STA ENDCHR
02600  AFFC  20 FC BB           JSR XXBBFC
02601  AFFF  20 BF B1           JSR XXB1BF
02602  B002  A5 65              LDA $65
02603  B004  45 0B              EOR COUNT
02604  B006  25 08              AND ENDCHR
02605  B008  45 0B              EOR COUNT
02606  B00A  A8                 TAY 
02607  B00B  A5 64              LDA $64
02608  B00D  45 0B              EOR COUNT
02609  B00F  25 07              AND CHARAC
02610  B011  45 0B              EOR COUNT
02611  B013  4C 91 B3           JMP XXB391
02612  B016              ;********************************
02613  B016              ;
02614  B016              ;********************************
02615  B016  20 90 AD    ZZB016 JSR XXAD90
02616  B019  B0 13              BCS XXB02E
02617  B01B  A5 6E              LDA $6E
02618  B01D  09 7F              ORA #$7F
02619  B01F  25 6A              AND $6A
02620  B021  85 6A              STA $6A
02621  B023  A9 69              LDA #$69
02622  B025  A0 00              LDY #$00
02623  B027  20 5B BC           JSR XXBC5B
02624  B02A  AA                 TAX 
02625  B02B  4C 61 B0           JMP XXB061
02626  B02E              ;********************************






ABASIC.ASM......PAGE 0052

LINE# LOC   CODE        LINE


02627  B02E              ;
02628  B02E              ;********************************
02629  B02E  A9 00       XXB02E LDA #$00
02630  B030  85 0D              STA VALTYP
02631  B032  C6 4D              DEC OPMASK
02632  B034  20 A6 B6           JSR XXB6A6
02633  B037  85 61              STA $61
02634  B039  86 62              STX $62
02635  B03B  84 63              STY $63
02636  B03D  A5 6C              LDA $6C
02637  B03F  A4 6D              LDY $6D
02638  B041  20 AA B6           JSR XXB6AA
02639  B044  86 6C              STX $6C
02640  B046  84 6D              STY $6D
02641  B048  AA                 TAX 
02642  B049  38                 SEC 
02643  B04A  E5 61              SBC $61
02644  B04C  F0 08              BEQ XXB056
02645  B04E  A9 01              LDA #$01
02646  B050  90 04              BCC XXB056
02647  B052  A6 61              LDX $61
02648  B054  A9 FF              LDA #$FF
02649  B056  85 66       XXB056 STA $66
02650  B058  A0 FF              LDY #$FF
02651  B05A  E8                 INX 
02652  B05B  C8          XXB05B INY 
02653  B05C  CA                 DEX 
02654  B05D  D0 07              BNE XXB066
02655  B05F  A6 66              LDX $66
02656  B061  30 0F       XXB061 BMI XXB072
02657  B063  18                 CLC 
02658  B064  90 0C              BCC XXB072
02659  B066  B1 6C       XXB066 LDA ($6C),Y
02660  B068  D1 62              CMP ($62),Y
02661  B06A  F0 EF              BEQ XXB05B
02662  B06C  A2 FF              LDX #$FF
02663  B06E  B0 02              BCS XXB072
02664  B070  A2 01              LDX #$01
02665  B072  E8          XXB072 INX 
02666  B073  8A                 TXA 
02667  B074  2A                 ROL A
02668  B075  25 12              AND TANSGN
02669  B077  F0 02              BEQ XXB07B
02670  B079  A9 FF              LDA #$FF
02671  B07B  4C 3C BC    XXB07B JMP XXBC3C
02672  B07E              ;********************************
02673  B07E              ;
02674  B07E              ;********************************
02675  B07E  20 FD AE    XXB07E JSR XXAEFD
02676  B081              ;********************************
02677  B081              ; DIM COMMAND
02678  B081              ;********************************
02679  B081  AA          ZZB081 TAX 
02680  B082  20 90 B0           JSR XXB090
02681  B085  20 79 00           JSR CHRGOT






ABASIC.ASM......PAGE 0053

LINE# LOC   CODE        LINE


02682  B088  D0 F4              BNE XXB07E
02683  B08A  60                 RTS 
02684  B08B              ;********************************
02685  B08B              ; GET NAME AND POINTER TO A VARIABLE
02686  B08B              ;********************************
02687  B08B  A2 00       XXB08B LDX #$00
02688  B08D  20 79 00           JSR CHRGOT
02689  B090  86 0C       XXB090 STX DIMFLG
02690  B092  85 45       XXB092 STA VARNAM
02691  B094  20 79 00           JSR CHRGOT
02692  B097  20 13 B1           JSR XXB113
02693  B09A  B0 03              BCS XXB09F
02694  B09C  4C 08 AF    XXB09C JMP XXAF08
02695  B09F              ;********************************
02696  B09F              ;
02697  B09F              ;********************************
02698  B09F  A2 00       XXB09F LDX #$00
02699  B0A1  86 0D              STX VALTYP
02700  B0A3  86 0E              STX INTFLG
02701  B0A5  20 73 00           JSR CHRGET
02702  B0A8  90 05              BCC XXB0AF
02703  B0AA  20 13 B1           JSR XXB113
02704  B0AD  90 0B              BCC XXB0BA
02705  B0AF  AA          XXB0AF TAX 
02706  B0B0  20 73 00    XXB0B0 JSR CHRGET
02707  B0B3  90 FB              BCC XXB0B0
02708  B0B5  20 13 B1           JSR XXB113
02709  B0B8  B0 F6              BCS XXB0B0
02710  B0BA  C9 24       XXB0BA CMP #$24        ;'$'
02711  B0BC  D0 06              BNE XXB0C4
02712  B0BE  A9 FF              LDA #$FF
02713  B0C0  85 0D              STA VALTYP
02714  B0C2  D0 10              BNE XXB0D4
02715  B0C4  C9 25       XXB0C4 CMP #$25        ;'%'
02716  B0C6  D0 13              BNE XXB0DB
02717  B0C8  A5 10              LDA SUBFLG
02718  B0CA  D0 D0              BNE XXB09C
02719  B0CC  A9 80              LDA #$80
02720  B0CE  85 0E              STA INTFLG
02721  B0D0  05 45              ORA VARNAM
02722  B0D2  85 45              STA VARNAM
02723  B0D4  8A          XXB0D4 TXA 
02724  B0D5  09 80              ORA #$80
02725  B0D7  AA                 TAX 
02726  B0D8  20 73 00           JSR CHRGET
02727  B0DB  86 46       XXB0DB STX VARNAM+1
02728  B0DD  38                 SEC 
02729  B0DE  05 10              ORA SUBFLG
02730  B0E0  E9 28              SBC #$28        ;'('
02731  B0E2  D0 03              BNE XXB0E7
02732  B0E4  4C D1 B1           JMP XXB1D1
02733  B0E7              ;********************************
02734  B0E7              ;
02735  B0E7              ;********************************
02736  B0E7  A0 00       XXB0E7 LDY #$00






ABASIC.ASM......PAGE 0054

LINE# LOC   CODE        LINE


02737  B0E9  84 10              STY SUBFLG
02738  B0EB  A5 2D              LDA VARTAB
02739  B0ED  A6 2E              LDX VARTAB+1
02740  B0EF  86 60       XXB0EF STX $60
02741  B0F1  85 5F       XXB0F1 STA $5F
02742  B0F3  E4 30              CPX ARYTAB+1
02743  B0F5  D0 04              BNE XXB0FB
02744  B0F7  C5 2F              CMP ARYTAB
02745  B0F9  F0 22              BEQ XXB11D
02746  B0FB  A5 45       XXB0FB LDA VARNAM
02747  B0FD  D1 5F              CMP ($5F),Y
02748  B0FF  D0 08              BNE XXB109
02749  B101  A5 46              LDA VARNAM+1
02750  B103  C8                 INY 
02751  B104  D1 5F              CMP ($5F),Y
02752  B106  F0 7D              BEQ XXB185
02753  B108  88                 DEY 
02754  B109  18          XXB109 CLC 
02755  B10A  A5 5F              LDA $5F
02756  B10C  69 07              ADC #$07
02757  B10E  90 E1              BCC XXB0F1
02758  B110  E8                 INX 
02759  B111  D0 DC              BNE XXB0EF
02760  B113              ;********************************
02761  B113              ; CHECK CHARACTER IN A
02762  B113              ; C=1 IF ALPHABETIC, C=0 IF NOT
02763  B113              ;********************************
02764  B113  C9 41       XXB113 CMP #$41        ;'A'
02765  B115  90 05              BCC XXB11C
02766  B117  E9 5B              SBC #$5B        ;'['
02767  B119  38                 SEC 
02768  B11A  E9 A5              SBC #$A5
02769  B11C  60          XXB11C RTS 
02770  B11D              ;********************************
02771  B11D              ; VARIABLE NOT FOUND
02772  B11D              ;********************************
02773  B11D  68          XXB11D PLA 
02774  B11E  48                 PHA 
02775  B11F  C9 2A              CMP #$2A        ;'*'
02776  B121  D0 05              BNE XXB128
02777  B123  A9 13       XXB123 LDA #<ZZBF13    ;#$13
02778  B125  A0 BF              LDY #>ZZBF13    ;#$BF
02779  B127  60                 RTS 
02780  B128              ;********************************
02781  B128              ;
02782  B128              ;********************************
02783  B128  A5 45       XXB128 LDA VARNAM
02784  B12A  A4 46              LDY VARNAM+1
02785  B12C  C9 54              CMP #$54        ;'T'
02786  B12E  D0 0B              BNE XXB13B
02787  B130  C0 C9              CPY #$C9
02788  B132  F0 EF              BEQ XXB123
02789  B134  C0 49              CPY #$49        ;'I'
02790  B136  D0 03              BNE XXB13B
02791  B138  4C 08 AF    XXB138 JMP XXAF08






ABASIC.ASM......PAGE 0055

LINE# LOC   CODE        LINE


02792  B13B              ;********************************
02793  B13B              ;
02794  B13B              ;********************************
02795  B13B  C9 53       XXB13B CMP #$53        ;'S'
02796  B13D  D0 04              BNE XXB143
02797  B13F  C0 54              CPY #$54        ;'T'
02798  B141  F0 F5              BEQ XXB138
02799  B143  A5 2F       XXB143 LDA ARYTAB
02800  B145  A4 30              LDY ARYTAB+1
02801  B147  85 5F              STA $5F
02802  B149  84 60              STY $60
02803  B14B  A5 31              LDA STREND
02804  B14D  A4 32              LDY STREND+1
02805  B14F  85 5A              STA $5A
02806  B151  84 5B              STY $5B
02807  B153  18                 CLC 
02808  B154  69 07              ADC #$07
02809  B156  90 01              BCC XXB159
02810  B158  C8                 INY 
02811  B159  85 58       XXB159 STA $58
02812  B15B  84 59              STY $59
02813  B15D  20 B8 A3           JSR XXA3B8
02814  B160  A5 58              LDA $58
02815  B162  A4 59              LDY $59
02816  B164  C8                 INY 
02817  B165  85 2F              STA ARYTAB
02818  B167  84 30              STY ARYTAB+1
02819  B169  A0 00              LDY #$00
02820  B16B  A5 45              LDA VARNAM
02821  B16D  91 5F              STA ($5F),Y
02822  B16F  C8                 INY 
02823  B170  A5 46              LDA VARNAM+1
02824  B172  91 5F              STA ($5F),Y
02825  B174  A9 00              LDA #$00
02826  B176  C8                 INY 
02827  B177  91 5F              STA ($5F),Y
02828  B179  C8                 INY 
02829  B17A  91 5F              STA ($5F),Y
02830  B17C  C8                 INY 
02831  B17D  91 5F              STA ($5F),Y
02832  B17F  C8                 INY 
02833  B180  91 5F              STA ($5F),Y
02834  B182  C8                 INY 
02835  B183  91 5F              STA ($5F),Y
02836  B185              ;********************************
02837  B185              ; VARIABLE FOUND
02838  B185              ;********************************
02839  B185  A5 5F       XXB185 LDA $5F
02840  B187  18                 CLC 
02841  B188  69 02              ADC #$02
02842  B18A  A4 60              LDY $60
02843  B18C  90 01              BCC XXB18F
02844  B18E  C8                 INY 
02845  B18F  85 47       XXB18F STA VARPNT
02846  B191  84 48              STY VARPNT+1






ABASIC.ASM......PAGE 0056

LINE# LOC   CODE        LINE


02847  B193  60                 RTS 
02848  B194              ;********************************
02849  B194              ; COMPUTE POINTER TO ARRAY BODY
02850  B194              ;********************************
02851  B194  A5 0B       XXB194 LDA COUNT
02852  B196  0A                 ASL A
02853  B197  69 05              ADC #$05
02854  B199  65 5F              ADC $5F
02855  B19B  A4 60              LDY $60
02856  B19D  90 01              BCC XXB1A0
02857  B19F  C8                 INY 
02858  B1A0  85 58       XXB1A0 STA $58
02859  B1A2  84 59              STY $59
02860  B1A4  60                 RTS 
02861  B1A5              ;********************************
02862  B1A5              ; ; FLOAT NUMBER FOR CONVERSION TO INTEGER
02863  B1A5              ;********************************
02864  B1A5  90          WWB1A5 .BYTE $90
02865  B1A6  80                 .BYTE $80
02866  B1A7  00                 .BYTE $00
02867  B1A8  00                 .BYTE $00
02868  B1A9  00                 .BYTE $00
02869  B1AA              ;********************************
02870  B1AA              ; ROUTINE TO CONVERT FLOAT TO FIXED POINT
02871  B1AA              ;********************************
02872  B1AA  20 BF B1    ZZB1AA JSR XXB1BF
02873  B1AD  A5 64              LDA $64
02874  B1AF  A4 65              LDY $65
02875  B1B1  60                 RTS 
02876  B1B2              ;********************************
02877  B1B2              ; CONVERT VALUE FROM STATEMENT TO INTEGER
02878  B1B2              ;********************************
02879  B1B2  20 73 00    XXB1B2 JSR CHRGET
02880  B1B5  20 9E AD           JSR XXAD9E
02881  B1B8  20 8D AD    XXB1B8 JSR XXAD8D
02882  B1BB  A5 66              LDA $66
02883  B1BD  30 0D              BMI XXB1CC
02884  B1BF              ;********************************
02885  B1BF              ; CONVERT FLOAT NUMBER TO INTEGER
02886  B1BF              ;********************************
02887  B1BF  A5 61       XXB1BF LDA $61
02888  B1C1  C9 90              CMP #$90
02889  B1C3  90 09              BCC XXB1CE
02890  B1C5  A9 A5              LDA #<WWB1A5    ;#$A5
02891  B1C7  A0 B1              LDY #>WWB1A5    ;#$B1
02892  B1C9  20 5B BC           JSR XXBC5B
02893  B1CC  D0 7A       XXB1CC BNE XXB248
02894  B1CE  4C 9B BC    XXB1CE JMP XXBC9B
02895  B1D1              ;********************************
02896  B1D1              ; GET POINTER TO DIMENSIONED VARIABLE
02897  B1D1              ;********************************
02898  B1D1  A5 0C       XXB1D1 LDA DIMFLG
02899  B1D3  05 0E              ORA INTFLG
02900  B1D5  48                 PHA 
02901  B1D6  A5 0D              LDA VALTYP






ABASIC.ASM......PAGE 0057

LINE# LOC   CODE        LINE


02902  B1D8  48                 PHA 
02903  B1D9  A0 00              LDY #$00
02904  B1DB  98          XXB1DB TYA 
02905  B1DC  48                 PHA 
02906  B1DD  A5 46              LDA VARNAM+1
02907  B1DF  48                 PHA 
02908  B1E0  A5 45              LDA VARNAM
02909  B1E2  48                 PHA 
02910  B1E3  20 B2 B1           JSR XXB1B2
02911  B1E6  68                 PLA 
02912  B1E7  85 45              STA VARNAM
02913  B1E9  68                 PLA 
02914  B1EA  85 46              STA VARNAM+1
02915  B1EC  68                 PLA 
02916  B1ED  A8                 TAY 
02917  B1EE  BA                 TSX 
02918  B1EF  BD 02 01           LDA STACK+2,X
02919  B1F2  48                 PHA 
02920  B1F3  BD 01 01           LDA STACK+1,X
02921  B1F6  48                 PHA 
02922  B1F7  A5 64              LDA $64
02923  B1F9  9D 02 01           STA STACK+2,X
02924  B1FC  A5 65              LDA $65
02925  B1FE  9D 01 01           STA STACK+1,X
02926  B201  C8                 INY 
02927  B202  20 79 00           JSR CHRGOT
02928  B205  C9 2C              CMP #$2C        ;','
02929  B207  F0 D2              BEQ XXB1DB
02930  B209  84 0B              STY COUNT
02931  B20B  20 F7 AE           JSR XXAEF7
02932  B20E  68                 PLA 
02933  B20F  85 0D              STA VALTYP
02934  B211  68                 PLA 
02935  B212  85 0E              STA INTFLG
02936  B214  29 7F              AND #$7F
02937  B216  85 0C              STA DIMFLG
02938  B218  A6 2F              LDX ARYTAB
02939  B21A  A5 30              LDA ARYTAB+1
02940  B21C  86 5F       XXB21C STX $5F
02941  B21E  85 60              STA $60
02942  B220  C5 32              CMP STREND+1
02943  B222  D0 04              BNE XXB228
02944  B224  E4 31              CPX STREND
02945  B226  F0 39              BEQ XXB261
02946  B228  A0 00       XXB228 LDY #$00
02947  B22A  B1 5F              LDA ($5F),Y
02948  B22C  C8                 INY 
02949  B22D  C5 45              CMP VARNAM
02950  B22F  D0 06              BNE XXB237
02951  B231  A5 46              LDA VARNAM+1
02952  B233  D1 5F              CMP ($5F),Y
02953  B235  F0 16              BEQ XXB24D
02954  B237  C8          XXB237 INY 
02955  B238  B1 5F              LDA ($5F),Y
02956  B23A  18                 CLC 






ABASIC.ASM......PAGE 0058

LINE# LOC   CODE        LINE


02957  B23B  65 5F              ADC $5F
02958  B23D  AA                 TAX 
02959  B23E  C8                 INY 
02960  B23F  B1 5F              LDA ($5F),Y
02961  B241  65 60              ADC $60
02962  B243  90 D7              BCC XXB21C
02963  B245  A2 12       XXB245 LDX #$12        ; ERROR NUMBER
02964  B247              ;********************************
02965  B247  2C                 .BYTE $2C
02966  B248              ;********************************
02967  B248  A2 0E       XXB248 LDX #$0E        ; ERROR NUMBER
02968  B24A  4C 37 A4    XXB24A JMP XXA437
02969  B24D              ;********************************
02970  B24D              ;
02971  B24D              ;********************************
02972  B24D  A2 13       XXB24D LDX #$13        ; ERROR NUMBER
02973  B24F  A5 0C              LDA DIMFLG
02974  B251  D0 F7              BNE XXB24A
02975  B253  20 94 B1           JSR XXB194
02976  B256  A5 0B              LDA COUNT
02977  B258  A0 04              LDY #$04
02978  B25A  D1 5F              CMP ($5F),Y
02979  B25C  D0 E7              BNE XXB245
02980  B25E  4C EA B2           JMP XXB2EA
02981  B261              ;********************************
02982  B261              ; ALLOCATE ARRAY
02983  B261              ;********************************
02984  B261  20 94 B1    XXB261 JSR XXB194
02985  B264  20 08 A4           JSR XXA408
02986  B267  A0 00              LDY #$00
02987  B269  84 72              STY $72
02988  B26B  A2 05              LDX #$05
02989  B26D  A5 45              LDA VARNAM
02990  B26F  91 5F              STA ($5F),Y
02991  B271  10 01              BPL XXB274
02992  B273  CA                 DEX 
02993  B274  C8          XXB274 INY 
02994  B275  A5 46              LDA VARNAM+1
02995  B277  91 5F              STA ($5F),Y
02996  B279  10 02              BPL XXB27D
02997  B27B  CA                 DEX 
02998  B27C  CA                 DEX 
02999  B27D  86 71       XXB27D STX $71
03000  B27F  A5 0B              LDA COUNT
03001  B281  C8                 INY 
03002  B282  C8                 INY 
03003  B283  C8                 INY 
03004  B284  91 5F              STA ($5F),Y
03005  B286  A2 0B       XXB286 LDX #$0B
03006  B288  A9 00              LDA #$00
03007  B28A  24 0C              BIT DIMFLG
03008  B28C  50 08              BVC XXB296
03009  B28E  68                 PLA 
03010  B28F  18                 CLC 
03011  B290  69 01              ADC #$01






ABASIC.ASM......PAGE 0059

LINE# LOC   CODE        LINE


03012  B292  AA                 TAX 
03013  B293  68                 PLA 
03014  B294  69 00              ADC #$00
03015  B296  C8          XXB296 INY 
03016  B297  91 5F              STA ($5F),Y
03017  B299  C8                 INY 
03018  B29A  8A                 TXA 
03019  B29B  91 5F              STA ($5F),Y
03020  B29D  20 4C B3           JSR XXB34C
03021  B2A0  86 71              STX $71
03022  B2A2  85 72              STA $72
03023  B2A4  A4 22              LDY INDEX
03024  B2A6  C6 0B              DEC COUNT
03025  B2A8  D0 DC              BNE XXB286
03026  B2AA  65 59              ADC $59
03027  B2AC  B0 5D              BCS XXB30B
03028  B2AE  85 59              STA $59
03029  B2B0  A8                 TAY 
03030  B2B1  8A                 TXA 
03031  B2B2  65 58              ADC $58
03032  B2B4  90 03              BCC XXB2B9
03033  B2B6  C8                 INY 
03034  B2B7  F0 52              BEQ XXB30B
03035  B2B9  20 08 A4    XXB2B9 JSR XXA408
03036  B2BC  85 31              STA STREND
03037  B2BE  84 32              STY STREND+1
03038  B2C0  A9 00              LDA #$00
03039  B2C2  E6 72              INC $72
03040  B2C4  A4 71              LDY $71
03041  B2C6  F0 05              BEQ XXB2CD
03042  B2C8  88          XXB2C8 DEY 
03043  B2C9  91 58              STA ($58),Y
03044  B2CB  D0 FB              BNE XXB2C8
03045  B2CD  C6 59       XXB2CD DEC $59
03046  B2CF  C6 72              DEC $72
03047  B2D1  D0 F5              BNE XXB2C8
03048  B2D3  E6 59              INC $59
03049  B2D5  38                 SEC 
03050  B2D6  A5 31              LDA STREND
03051  B2D8  E5 5F              SBC $5F
03052  B2DA  A0 02              LDY #$02
03053  B2DC  91 5F              STA ($5F),Y
03054  B2DE  A5 32              LDA STREND+1
03055  B2E0  C8                 INY 
03056  B2E1  E5 60              SBC $60
03057  B2E3  91 5F              STA ($5F),Y
03058  B2E5  A5 0C              LDA DIMFLG
03059  B2E7  D0 62              BNE XXB34B
03060  B2E9  C8                 INY
03061  B2EA              ;********************************
03062  B2EA              ; COMPUTE REFERENCE TO ARRAY ELEMENT
03063  B2EA              ;********************************
03064  B2EA  B1 5F       XXB2EA LDA ($5F),Y
03065  B2EC  85 0B              STA COUNT
03066  B2EE  A9 00              LDA #$00






ABASIC.ASM......PAGE 0060

LINE# LOC   CODE        LINE


03067  B2F0  85 71              STA $71
03068  B2F2  85 72       XXB2F2 STA $72
03069  B2F4  C8                 INY 
03070  B2F5  68                 PLA 
03071  B2F6  AA                 TAX 
03072  B2F7  85 64              STA $64
03073  B2F9  68                 PLA 
03074  B2FA  85 65              STA $65
03075  B2FC  D1 5F              CMP ($5F),Y
03076  B2FE  90 0E              BCC XXB30E
03077  B300  D0 06              BNE XXB308
03078  B302  C8                 INY 
03079  B303  8A                 TXA 
03080  B304  D1 5F              CMP ($5F),Y
03081  B306  90 07              BCC XXB30F
03082  B308  4C 45 B2    XXB308 JMP XXB245
03083  B30B              ;********************************
03084  B30B              ;
03085  B30B              ;********************************
03086  B30B  4C 35 A4    XXB30B JMP XXA435
03087  B30E              ;********************************
03088  B30E              ;
03089  B30E              ;********************************
03090  B30E  C8          XXB30E INY 
03091  B30F  A5 72       XXB30F LDA $72
03092  B311  05 71              ORA $71
03093  B313  18                 CLC 
03094  B314  F0 0A              BEQ XXB320
03095  B316  20 4C B3           JSR XXB34C
03096  B319  8A                 TXA 
03097  B31A  65 64              ADC $64
03098  B31C  AA                 TAX 
03099  B31D  98                 TYA 
03100  B31E  A4 22              LDY INDEX
03101  B320  65 65       XXB320 ADC $65
03102  B322  86 71              STX $71
03103  B324  C6 0B              DEC COUNT
03104  B326  D0 CA              BNE XXB2F2
03105  B328  85 72              STA $72
03106  B32A  A2 05              LDX #$05
03107  B32C  A5 45              LDA VARNAM
03108  B32E  10 01              BPL XXB331
03109  B330  CA                 DEX 
03110  B331  A5 46       XXB331 LDA VARNAM+1
03111  B333  10 02              BPL XXB337
03112  B335  CA                 DEX 
03113  B336  CA                 DEX 
03114  B337  86 28       XXB337 STX RESHO+2
03115  B339  A9 00              LDA #$00
03116  B33B  20 55 B3           JSR XXB355
03117  B33E  8A                 TXA 
03118  B33F  65 58              ADC $58
03119  B341  85 47              STA VARPNT
03120  B343  98                 TYA 
03121  B344  65 59              ADC $59






ABASIC.ASM......PAGE 0061

LINE# LOC   CODE        LINE


03122  B346  85 48              STA VARPNT+1
03123  B348  A8                 TAY 
03124  B349  A5 47              LDA VARPNT
03125  B34B  60          XXB34B RTS 
03126  B34C              ;********************************
03127  B34C              ; XY = XA = LENGTH * LIMIT FROM ARRAY DATA
03128  B34C              ;********************************
03129  B34C  84 22       XXB34C STY INDEX
03130  B34E  B1 5F              LDA ($5F),Y
03131  B350  85 28              STA RESHO+2
03132  B352  88                 DEY 
03133  B353  B1 5F              LDA ($5F),Y
03134  B355  85 29       XXB355 STA RESHO+3
03135  B357  A9 10              LDA #$10
03136  B359  85 5D              STA $5D
03137  B35B  A2 00              LDX #$00
03138  B35D  A0 00              LDY #$00
03139  B35F  8A          XXB35F TXA 
03140  B360  0A                 ASL A
03141  B361  AA                 TAX 
03142  B362  98                 TYA 
03143  B363  2A                 ROL A
03144  B364  A8                 TAY 
03145  B365  B0 A4              BCS XXB30B
03146  B367  06 71              ASL $71
03147  B369  26 72              ROL $72
03148  B36B  90 0B              BCC XXB378
03149  B36D  18                 CLC 
03150  B36E  8A                 TXA 
03151  B36F  65 28              ADC RESHO+2
03152  B371  AA                 TAX 
03153  B372  98                 TYA 
03154  B373  65 29              ADC RESHO+3
03155  B375  A8                 TAY 
03156  B376  B0 93              BCS XXB30B
03157  B378  C6 5D       XXB378 DEC $5D
03158  B37A  D0 E3              BNE XXB35F
03159  B37C  60                 RTS 
03160  B37D              ;********************************
03161  B37D              ; FRE FUNCTION
03162  B37D              ;********************************
03163  B37D  A5 0D       XXB37D LDA VALTYP
03164  B37F  F0 03              BEQ XXB384
03165  B381  20 A6 B6           JSR XXB6A6
03166  B384  20 26 B5    XXB384 JSR XXB526
03167  B387  38                 SEC 
03168  B388  A5 33              LDA FRETOP
03169  B38A  E5 31              SBC STREND
03170  B38C  A8                 TAY 
03171  B38D  A5 34              LDA FRETOP+1
03172  B38F  E5 32              SBC STREND+1
03173  B391              ;********************************
03174  B391              ; ROUTINE TO CONVERT INTEGER TO FLOAT
03175  B391              ;********************************
03176  B391  A2 00       XXB391 LDX #$00






ABASIC.ASM......PAGE 0062

LINE# LOC   CODE        LINE


03177  B393  86 0D              STX VALTYP
03178  B395  85 62              STA $62
03179  B397  84 63              STY $63
03180  B399  A2 90              LDX #$90
03181  B39B  4C 44 BC           JMP XXBC44
03182  B39E              ;********************************
03183  B39E              ; POS FUNCTION
03184  B39E              ;********************************
03185  B39E  38          XXB39E SEC 
03186  B39F  20 F0 FF           JSR PLOT
03187  B3A2  A9 00       XXB3A2 LDA #$00
03188  B3A4  F0 EB              BEQ XXB391
03189  B3A6              ;********************************
03190  B3A6              ; CHECK FOR NON-DIRECT MODE
03191  B3A6              ;********************************
03192  B3A6  A6 3A       XXB3A6 LDX CURLIN+1
03193  B3A8  E8                 INX 
03194  B3A9  D0 A0              BNE XXB34B
03195  B3AB  A2 15              LDX #$15        ; ERROR NUMBER
03196  B3AD              ;********************************
03197  B3AD  2C                 .BYTE $2C
03198  B3AE              ;********************************
03199  B3AE  A2 1B       XXB3AE LDX #$1B        ; ERROR NUMBER
03200  B3B0  4C 37 A4           JMP XXA437
03201  B3B3              ;********************************
03202  B3B3              ; DEF COMMAND
03203  B3B3              ;********************************
03204  B3B3  20 E1 B3    ZZB3B3 JSR XXB3E1
03205  B3B6  20 A6 B3           JSR XXB3A6
03206  B3B9  20 FA AE           JSR XXAEFA
03207  B3BC  A9 80              LDA #$80
03208  B3BE  85 10              STA SUBFLG
03209  B3C0  20 8B B0           JSR XXB08B
03210  B3C3  20 8D AD           JSR XXAD8D
03211  B3C6  20 F7 AE           JSR XXAEF7
03212  B3C9  A9 B2              LDA #$B2
03213  B3CB  20 FF AE           JSR XXAEFF
03214  B3CE  48                 PHA 
03215  B3CF  A5 48              LDA VARPNT+1
03216  B3D1  48                 PHA 
03217  B3D2  A5 47              LDA VARPNT
03218  B3D4  48                 PHA 
03219  B3D5  A5 7B              LDA TXTPTR+1
03220  B3D7  48                 PHA 
03221  B3D8  A5 7A              LDA TXTPTR
03222  B3DA  48                 PHA 
03223  B3DB  20 F8 A8           JSR XXA8F8
03224  B3DE  4C 4F B4           JMP XXB44F
03225  B3E1              ;********************************
03226  B3E1              ; GET FUNCTION NAME
03227  B3E1              ;********************************
03228  B3E1  A9 A5       XXB3E1 LDA #$A5
03229  B3E3  20 FF AE           JSR XXAEFF
03230  B3E6  09 80              ORA #$80
03231  B3E8  85 10              STA SUBFLG






ABASIC.ASM......PAGE 0063

LINE# LOC   CODE        LINE


03232  B3EA  20 92 B0           JSR XXB092
03233  B3ED  85 4E              STA DEFPNT
03234  B3EF  84 4F              STY DEFPNT+1
03235  B3F1  4C 8D AD           JMP XXAD8D
03236  B3F4              ;********************************
03237  B3F4              ; EXPAND FN CALL
03238  B3F4              ;********************************
03239  B3F4  20 E1 B3    XXB3F4 JSR XXB3E1
03240  B3F7  A5 4F              LDA DEFPNT+1
03241  B3F9  48                 PHA 
03242  B3FA  A5 4E              LDA DEFPNT
03243  B3FC  48                 PHA 
03244  B3FD  20 F1 AE           JSR XXAEF1
03245  B400  20 8D AD           JSR XXAD8D
03246  B403  68                 PLA 
03247  B404  85 4E              STA DEFPNT
03248  B406  68                 PLA 
03249  B407  85 4F              STA DEFPNT+1
03250  B409  A0 02              LDY #$02
03251  B40B  B1 4E              LDA (DEFPNT),Y
03252  B40D  85 47              STA VARPNT
03253  B40F  AA                 TAX 
03254  B410  C8                 INY 
03255  B411  B1 4E              LDA (DEFPNT),Y
03256  B413  F0 99              BEQ XXB3AE
03257  B415  85 48              STA VARPNT+1
03258  B417  C8                 INY 
03259  B418  B1 47       XXB418 LDA (VARPNT),Y
03260  B41A  48                 PHA 
03261  B41B  88                 DEY 
03262  B41C  10 FA              BPL XXB418
03263  B41E  A4 48              LDY VARPNT+1
03264  B420  20 D4 BB           JSR XXBBD4
03265  B423  A5 7B              LDA TXTPTR+1
03266  B425  48                 PHA 
03267  B426  A5 7A              LDA TXTPTR
03268  B428  48                 PHA 
03269  B429  B1 4E              LDA (DEFPNT),Y
03270  B42B  85 7A              STA TXTPTR
03271  B42D  C8                 INY 
03272  B42E  B1 4E              LDA (DEFPNT),Y
03273  B430  85 7B              STA TXTPTR+1
03274  B432  A5 48              LDA VARPNT+1
03275  B434  48                 PHA 
03276  B435  A5 47              LDA VARPNT
03277  B437  48                 PHA 
03278  B438  20 8A AD           JSR XXAD8A
03279  B43B  68                 PLA 
03280  B43C  85 4E              STA DEFPNT
03281  B43E  68                 PLA 
03282  B43F  85 4F              STA DEFPNT+1
03283  B441  20 79 00           JSR CHRGOT
03284  B444  F0 03              BEQ XXB449
03285  B446  4C 08 AF           JMP XXAF08
03286  B449              ;********************************






ABASIC.ASM......PAGE 0064

LINE# LOC   CODE        LINE


03287  B449              ;
03288  B449              ;********************************
03289  B449  68          XXB449 PLA 
03290  B44A  85 7A              STA TXTPTR
03291  B44C  68                 PLA 
03292  B44D  85 7B              STA TXTPTR+1
03293  B44F  A0 00       XXB44F LDY #$00
03294  B451  68                 PLA 
03295  B452  91 4E              STA (DEFPNT),Y
03296  B454  68                 PLA 
03297  B455  C8                 INY 
03298  B456  91 4E              STA (DEFPNT),Y
03299  B458  68                 PLA 
03300  B459  C8                 INY 
03301  B45A  91 4E              STA (DEFPNT),Y
03302  B45C  68                 PLA 
03303  B45D  C8                 INY 
03304  B45E  91 4E              STA (DEFPNT),Y
03305  B460  68                 PLA 
03306  B461  C8                 INY 
03307  B462  91 4E              STA (DEFPNT),Y
03308  B464  60                 RTS 
03309  B465              ;********************************
03310  B465              ; STR$ FUNCTION
03311  B465              ;********************************
03312  B465  20 8D AD    XXB465 JSR XXAD8D
03313  B468  A0 00              LDY #$00
03314  B46A  20 DF BD           JSR XXBDDF
03315  B46D  68                 PLA 
03316  B46E  68                 PLA 
03317  B46F  A9 FF       XXB46F LDA #$FF
03318  B471  A0 00              LDY #$00
03319  B473  F0 12              BEQ XXB487
03320  B475  A6 64       XXB475 LDX $64
03321  B477  A4 65              LDY $65
03322  B479  86 50              STX DSCPNT
03323  B47B  84 51              STY DSCPNT+1
03324  B47D              ;********************************
03325  B47D              ; ALLOCATE AREA ACCORDING TO A
03326  B47D              ;********************************
03327  B47D  20 F4 B4    XXB47D JSR XXB4F4
03328  B480  86 62              STX $62
03329  B482  84 63              STY $63
03330  B484  85 61              STA $61
03331  B486  60                 RTS 
03332  B487              ;********************************
03333  B487              ; GET DESCRIPTION OF STRING INTO FLOAT ACCU
03334  B487              ;********************************
03335  B487  A2 22       XXB487 LDX #$22        ;'"'
03336  B489  86 07              STX CHARAC
03337  B48B  86 08              STX ENDCHR
03338  B48D  85 6F       XXB48D STA $6F
03339  B48F  84 70              STY $70
03340  B491  85 62              STA $62
03341  B493  84 63              STY $63






ABASIC.ASM......PAGE 0065

LINE# LOC   CODE        LINE


03342  B495  A0 FF              LDY #$FF
03343  B497  C8          XXB497 INY 
03344  B498  B1 6F              LDA ($6F),Y
03345  B49A  F0 0C              BEQ XXB4A8
03346  B49C  C5 07              CMP CHARAC
03347  B49E  F0 04              BEQ XXB4A4
03348  B4A0  C5 08              CMP ENDCHR
03349  B4A2  D0 F3              BNE XXB497
03350  B4A4  C9 22       XXB4A4 CMP #$22        ;'"'
03351  B4A6  F0 01              BEQ XXB4A9
03352  B4A8  18          XXB4A8 CLC 
03353  B4A9  84 61       XXB4A9 STY $61
03354  B4AB  98                 TYA 
03355  B4AC  65 6F              ADC $6F
03356  B4AE  85 71              STA $71
03357  B4B0  A6 70              LDX $70
03358  B4B2  90 01              BCC XXB4B5
03359  B4B4  E8                 INX 
03360  B4B5  86 72       XXB4B5 STX $72
03361  B4B7  A5 70              LDA $70
03362  B4B9  F0 04              BEQ XXB4BF
03363  B4BB  C9 02              CMP #$02
03364  B4BD  D0 0B              BNE XXB4CA
03365  B4BF  98          XXB4BF TYA 
03366  B4C0  20 75 B4           JSR XXB475
03367  B4C3  A6 6F              LDX $6F
03368  B4C5  A4 70              LDY $70
03369  B4C7  20 88 B6           JSR XXB688
03370  B4CA              ;********************************
03371  B4CA              ; SAVE DESCRIPTOR FROM $61-$63 ON STACK
03372  B4CA              ;********************************
03373  B4CA  A6 16       XXB4CA LDX TEMPPT
03374  B4CC  E0 22              CPX #$22        ;'"'
03375  B4CE  D0 05              BNE XXB4D5
03376  B4D0  A2 19              LDX #$19
03377  B4D2  4C 37 A4    XXB4D2 JMP XXA437
03378  B4D5              ;********************************
03379  B4D5              ;
03380  B4D5              ;********************************
03381  B4D5  A5 61       XXB4D5 LDA $61
03382  B4D7  95 00              STA $00,X
03383  B4D9  A5 62              LDA $62
03384  B4DB  95 01              STA $01,X
03385  B4DD  A5 63              LDA $63
03386  B4DF  95 02              STA $02,X
03387  B4E1  A0 00              LDY #$00
03388  B4E3  86 64              STX $64
03389  B4E5  84 65              STY $65
03390  B4E7  84 70              STY $70
03391  B4E9  88                 DEY 
03392  B4EA  84 0D              STY VALTYP
03393  B4EC  86 17              STX LASTPT
03394  B4EE  E8                 INX 
03395  B4EF  E8                 INX 
03396  B4F0  E8                 INX 






ABASIC.ASM......PAGE 0066

LINE# LOC   CODE        LINE


03397  B4F1  86 16              STX TEMPPT
03398  B4F3  60                 RTS 
03399  B4F4              ;********************************
03400  B4F4              ; ALLOCATE NUMBER OF BYTES IN A
03401  B4F4              ;********************************
03402  B4F4  46 0F       XXB4F4 LSR GARBFL
03403  B4F6  48          XXB4F6 PHA 
03404  B4F7  49 FF              EOR #$FF
03405  B4F9  38                 SEC 
03406  B4FA  65 33              ADC FRETOP
03407  B4FC  A4 34              LDY FRETOP+1
03408  B4FE  B0 01              BCS XXB501
03409  B500  88                 DEY 
03410  B501  C4 32       XXB501 CPY STREND+1
03411  B503  90 11              BCC XXB516
03412  B505  D0 04              BNE XXB50B
03413  B507  C5 31              CMP STREND
03414  B509  90 0B              BCC XXB516
03415  B50B  85 33       XXB50B STA FRETOP
03416  B50D  84 34              STY FRETOP+1
03417  B50F  85 35              STA FRESPC
03418  B511  84 36              STY FRESPC+1
03419  B513  AA                 TAX 
03420  B514  68                 PLA 
03421  B515  60                 RTS 
03422  B516              ;********************************
03423  B516              ;
03424  B516              ;********************************
03425  B516  A2 10       XXB516 LDX #$10
03426  B518  A5 0F              LDA GARBFL
03427  B51A  30 B6              BMI XXB4D2
03428  B51C  20 26 B5           JSR XXB526
03429  B51F  A9 80              LDA #$80
03430  B521  85 0F              STA GARBFL
03431  B523  68                 PLA 
03432  B524  D0 D0              BNE XXB4F6
03433  B526              ;********************************
03434  B526              ; STRING GARBAGE CLEAN UP
03435  B526              ;********************************
03436  B526  A6 37       XXB526 LDX MEMSIZ
03437  B528  A5 38              LDA MEMSIZ+1
03438  B52A  86 33       XXB52A STX FRETOP
03439  B52C  85 34              STA FRETOP+1
03440  B52E  A0 00              LDY #$00
03441  B530  84 4F              STY DEFPNT+1
03442  B532  84 4E              STY DEFPNT
03443  B534  A5 31              LDA STREND
03444  B536  A6 32              LDX STREND+1
03445  B538  85 5F              STA $5F
03446  B53A  86 60              STX $60
03447  B53C  A9 19              LDA #$19        ; LOW  0019
03448  B53E  A2 00              LDX #$00        ; HIGH 0019
03449  B540  85 22              STA INDEX
03450  B542  86 23              STX INDEX+1
03451  B544  C5 16       XXB544 CMP TEMPPT






ABASIC.ASM......PAGE 0067

LINE# LOC   CODE        LINE


03452  B546  F0 05              BEQ XXB54D
03453  B548  20 C7 B5           JSR XXB5C7
03454  B54B  F0 F7              BEQ XXB544
03455  B54D  A9 07       XXB54D LDA #$07
03456  B54F  85 53              STA FOUR6
03457  B551  A5 2D              LDA VARTAB
03458  B553  A6 2E              LDX VARTAB+1
03459  B555  85 22              STA INDEX
03460  B557  86 23              STX INDEX+1
03461  B559  E4 30       XXB559 CPX ARYTAB+1
03462  B55B  D0 04              BNE XXB561
03463  B55D  C5 2F              CMP ARYTAB
03464  B55F  F0 05              BEQ XXB566
03465  B561  20 BD B5    XXB561 JSR XXB5BD
03466  B564  F0 F3              BEQ XXB559
03467  B566  85 58       XXB566 STA $58
03468  B568  86 59              STX $59
03469  B56A  A9 03              LDA #$03
03470  B56C  85 53              STA FOUR6
03471  B56E  A5 58       XXB56E LDA $58
03472  B570  A6 59              LDX $59
03473  B572  E4 32       XXB572 CPX STREND+1
03474  B574  D0 07              BNE XXB57D
03475  B576  C5 31              CMP STREND
03476  B578  D0 03              BNE XXB57D
03477  B57A  4C 06 B6           JMP XXB606
03478  B57D              ;********************************
03479  B57D              ;
03480  B57D              ;********************************
03481  B57D  85 22       XXB57D STA INDEX
03482  B57F  86 23              STX INDEX+1
03483  B581  A0 00              LDY #$00
03484  B583  B1 22              LDA (INDEX),Y
03485  B585  AA                 TAX 
03486  B586  C8                 INY 
03487  B587  B1 22              LDA (INDEX),Y
03488  B589  08                 PHP 
03489  B58A  C8                 INY 
03490  B58B  B1 22              LDA (INDEX),Y
03491  B58D  65 58              ADC $58
03492  B58F  85 58              STA $58
03493  B591  C8                 INY 
03494  B592  B1 22              LDA (INDEX),Y
03495  B594  65 59              ADC $59
03496  B596  85 59              STA $59
03497  B598  28                 PLP 
03498  B599  10 D3              BPL XXB56E
03499  B59B  8A                 TXA 
03500  B59C  30 D0              BMI XXB56E
03501  B59E  C8                 INY 
03502  B59F  B1 22              LDA (INDEX),Y
03503  B5A1  A0 00              LDY #$00
03504  B5A3  0A                 ASL A
03505  B5A4  69 05              ADC #$05
03506  B5A6  65 22              ADC INDEX






ABASIC.ASM......PAGE 0068

LINE# LOC   CODE        LINE


03507  B5A8  85 22              STA INDEX
03508  B5AA  90 02              BCC XXB5AE
03509  B5AC  E6 23              INC INDEX+1
03510  B5AE  A6 23       XXB5AE LDX INDEX+1
03511  B5B0  E4 59       XXB5B0 CPX $59
03512  B5B2  D0 04              BNE XXB5B8
03513  B5B4  C5 58              CMP $58
03514  B5B6  F0 BA              BEQ XXB572
03515  B5B8  20 C7 B5    XXB5B8 JSR XXB5C7
03516  B5BB  F0 F3              BEQ XXB5B0
03517  B5BD              ;********************************
03518  B5BD              ; CHECK STRING AREA
03519  B5BD              ;********************************
03520  B5BD  B1 22              XXB5BD LDA (INDEX),Y
03521  B5BF  30 35              BMI XXB5F6
03522  B5C1  C8                 INY 
03523  B5C2  B1 22              LDA (INDEX),Y
03524  B5C4  10 30              BPL XXB5F6
03525  B5C6  C8                 INY 
03526  B5C7              ;********************************
03527  B5C7              ; CHECK STRING AREA
03528  B5C7              ;********************************
03529  B5C7  B1 22       XXB5C7 LDA (INDEX),Y
03530  B5C9  F0 2B              BEQ XXB5F6
03531  B5CB  C8                 INY 
03532  B5CC  B1 22              LDA (INDEX),Y
03533  B5CE  AA                 TAX 
03534  B5CF  C8                 INY 
03535  B5D0  B1 22              LDA (INDEX),Y
03536  B5D2  C5 34              CMP FRETOP+1
03537  B5D4  90 06              BCC XXB5DC
03538  B5D6  D0 1E              BNE XXB5F6
03539  B5D8  E4 33              CPX FRETOP
03540  B5DA  B0 1A              BCS XXB5F6
03541  B5DC  C5 60       XXB5DC CMP $60
03542  B5DE  90 16              BCC XXB5F6
03543  B5E0  D0 04              BNE XXB5E6
03544  B5E2  E4 5F              CPX $5F
03545  B5E4  90 10              BCC XXB5F6
03546  B5E6  86 5F       XXB5E6 STX $5F
03547  B5E8  85 60              STA $60
03548  B5EA  A5 22              LDA INDEX
03549  B5EC  A6 23              LDX INDEX+1
03550  B5EE  85 4E              STA DEFPNT
03551  B5F0  86 4F              STX DEFPNT+1
03552  B5F2  A5 53              LDA FOUR6
03553  B5F4  85 55              STA JMPER+1
03554  B5F6  A5 53       XXB5F6 LDA FOUR6
03555  B5F8  18                 CLC 
03556  B5F9  65 22              ADC INDEX
03557  B5FB  85 22              STA INDEX
03558  B5FD  90 02              BCC XXB601
03559  B5FF  E6 23              INC INDEX+1
03560  B601  A6 23       XXB601 LDX INDEX+1
03561  B603  A0 00              LDY #$00






ABASIC.ASM......PAGE 0069

LINE# LOC   CODE        LINE


03562  B605  60                 RTS 
03563  B606              ;********************************
03564  B606              ; CONTINUATION OF GARBAGE CLEAN UP
03565  B606              ;********************************
03566  B606  A5 4F       XXB606 LDA DEFPNT+1
03567  B608  05 4E              ORA DEFPNT
03568  B60A  F0 F5              BEQ XXB601
03569  B60C  A5 55              LDA JMPER+1
03570  B60E  29 04              AND #$04
03571  B610  4A                 LSR A
03572  B611  A8                 TAY 
03573  B612  85 55              STA JMPER+1
03574  B614  B1 4E              LDA (DEFPNT),Y
03575  B616  65 5F              ADC $5F
03576  B618  85 5A              STA $5A
03577  B61A  A5 60              LDA $60
03578  B61C  69 00              ADC #$00
03579  B61E  85 5B              STA $5B
03580  B620  A5 33              LDA FRETOP
03581  B622  A6 34              LDX FRETOP+1
03582  B624  85 58              STA $58
03583  B626  86 59              STX $59
03584  B628  20 BF A3           JSR XXA3BF
03585  B62B  A4 55              LDY JMPER+1
03586  B62D  C8                 INY 
03587  B62E  A5 58              LDA $58
03588  B630  91 4E              STA (DEFPNT),Y
03589  B632  AA                 TAX 
03590  B633  E6 59              INC $59
03591  B635  A5 59              LDA $59
03592  B637  C8                 INY 
03593  B638  91 4E              STA (DEFPNT),Y
03594  B63A  4C 2A B5           JMP XXB52A
03595  B63D              ;********************************
03596  B63D              ; JOINING STRINGS
03597  B63D              ;********************************
03598  B63D  A5 65       XXB63D LDA $65
03599  B63F  48                 PHA 
03600  B640  A5 64              LDA $64
03601  B642  48                 PHA 
03602  B643  20 83 AE           JSR XXAE83
03603  B646  20 8F AD           JSR XXAD8F
03604  B649  68                 PLA 
03605  B64A  85 6F              STA $6F
03606  B64C  68                 PLA 
03607  B64D  85 70              STA $70
03608  B64F  A0 00              LDY #$00
03609  B651  B1 6F              LDA ($6F),Y
03610  B653  18                 CLC 
03611  B654  71 64              ADC ($64),Y
03612  B656  90 05              BCC XXB65D
03613  B658  A2 17              LDX #$17
03614  B65A  4C 37 A4           JMP XXA437
03615  B65D              ;********************************
03616  B65D              ;






ABASIC.ASM......PAGE 0070

LINE# LOC   CODE        LINE


03617  B65D              ;********************************
03618  B65D  20 75 B4    XXB65D JSR XXB475
03619  B660  20 7A B6           JSR XXB67A
03620  B663  A5 50              LDA DSCPNT
03621  B665  A4 51              LDY DSCPNT+1
03622  B667  20 AA B6           JSR XXB6AA
03623  B66A  20 8C B6           JSR XXB68C
03624  B66D  A5 6F              LDA $6F
03625  B66F  A4 70              LDY $70
03626  B671  20 AA B6           JSR XXB6AA
03627  B674  20 CA B4           JSR XXB4CA
03628  B677  4C B8 AD           JMP XXADB8
03629  B67A              ;********************************
03630  B67A              ; MOVE STRING
03631  B67A              ;********************************
03632  B67A  A0 00       XXB67A LDY #$00
03633  B67C  B1 6F              LDA ($6F),Y
03634  B67E  48                 PHA 
03635  B67F  C8                 INY 
03636  B680  B1 6F              LDA ($6F),Y
03637  B682  AA                 TAX 
03638  B683  C8                 INY 
03639  B684  B1 6F              LDA ($6F),Y
03640  B686  A8                 TAY 
03641  B687  68                 PLA 
03642  B688              ;********************************
03643  B688              ; MOVE STRING WITH LENGTH A, POINTER IN XY
03644  B688              ;********************************
03645  B688  86 22       XXB688 STX INDEX
03646  B68A  84 23              STY INDEX+1
03647  B68C  A8          XXB68C TAY 
03648  B68D  F0 0A              BEQ XXB699
03649  B68F  48                 PHA 
03650  B690  88          XXB690 DEY 
03651  B691  B1 22              LDA (INDEX),Y
03652  B693  91 35              STA (FRESPC),Y
03653  B695  98                 TYA 
03654  B696  D0 F8              BNE XXB690
03655  B698  68                 PLA 
03656  B699  18          XXB699 CLC 
03657  B69A  65 35              ADC FRESPC
03658  B69C  85 35              STA FRESPC
03659  B69E  90 02              BCC XXB6A2
03660  B6A0  E6 36              INC FRESPC+1
03661  B6A2  60          XXB6A2 RTS 
03662  B6A3              ;********************************
03663  B6A3              ; DE-ALLOCATE TEMPORARY STRING
03664  B6A3              ;********************************
03665  B6A3  20 8F AD    XXB6A3 JSR XXAD8F
03666  B6A6  A5 64       XXB6A6 LDA $64
03667  B6A8  A4 65              LDY $65
03668  B6AA  85 22       XXB6AA STA INDEX
03669  B6AC  84 23              STY INDEX+1
03670  B6AE  20 DB B6           JSR XXB6DB
03671  B6B1  08                 PHP 






ABASIC.ASM......PAGE 0071

LINE# LOC   CODE        LINE


03672  B6B2  A0 00              LDY #$00
03673  B6B4  B1 22              LDA (INDEX),Y
03674  B6B6  48                 PHA 
03675  B6B7  C8                 INY 
03676  B6B8  B1 22              LDA (INDEX),Y
03677  B6BA  AA                 TAX 
03678  B6BB  C8                 INY 
03679  B6BC  B1 22              LDA (INDEX),Y
03680  B6BE  A8                 TAY 
03681  B6BF  68                 PLA 
03682  B6C0  28                 PLP 
03683  B6C1  D0 13              BNE XXB6D6
03684  B6C3  C4 34              CPY FRETOP+1
03685  B6C5  D0 0F              BNE XXB6D6
03686  B6C7  E4 33              CPX FRETOP
03687  B6C9  D0 0B              BNE XXB6D6
03688  B6CB  48                 PHA 
03689  B6CC  18                 CLC 
03690  B6CD  65 33              ADC FRETOP
03691  B6CF  85 33              STA FRETOP
03692  B6D1  90 02              BCC XXB6D5
03693  B6D3  E6 34              INC FRETOP+1
03694  B6D5  68          XXB6D5 PLA 
03695  B6D6  86 22       XXB6D6 STX INDEX
03696  B6D8  84 23              STY INDEX+1
03697  B6DA  60                 RTS 
03698  B6DB              ;********************************
03699  B6DB              ; CHECK DESCRIPTOR STACK
03700  B6DB              ;********************************
03701  B6DB  C4 18       XXB6DB CPY LASTPT+1
03702  B6DD  D0 0C              BNE XXB6EB
03703  B6DF  C5 17              CMP LASTPT
03704  B6E1  D0 08              BNE XXB6EB
03705  B6E3  85 16              STA TEMPPT
03706  B6E5  E9 03              SBC #$03
03707  B6E7  85 17              STA LASTPT
03708  B6E9  A0 00              LDY #$00
03709  B6EB  60          XXB6EB RTS 
03710  B6EC              ;********************************
03711  B6EC              ; CHR$ FUNCTION
03712  B6EC              ;********************************
03713  B6EC  20 A1 B7    XXB6EC JSR XXB7A1
03714  B6EF  8A                 TXA 
03715  B6F0  48                 PHA 
03716  B6F1  A9 01              LDA #$01
03717  B6F3  20 7D B4           JSR XXB47D
03718  B6F6  68                 PLA 
03719  B6F7  A0 00              LDY #$00
03720  B6F9  91 62              STA ($62),Y
03721  B6FB  68                 PLA 
03722  B6FC  68                 PLA 
03723  B6FD  4C CA B4           JMP XXB4CA
03724  B700              ;********************************
03725  B700              ; LEFT$ FUNCTION
03726  B700              ;********************************






ABASIC.ASM......PAGE 0072

LINE# LOC   CODE        LINE


03727  B700  20 61 B7    XXB700 JSR XXB761
03728  B703  D1 50              CMP (DSCPNT),Y
03729  B705  98                 TYA 
03730  B706  90 04       XXB706 BCC XXB70C
03731  B708  B1 50              LDA (DSCPNT),Y
03732  B70A  AA                 TAX 
03733  B70B  98                 TYA 
03734  B70C  48          XXB70C PHA 
03735  B70D  8A          XXB70D TXA 
03736  B70E  48          XXB70E PHA 
03737  B70F  20 7D B4           JSR XXB47D
03738  B712  A5 50              LDA DSCPNT
03739  B714  A4 51              LDY DSCPNT+1
03740  B716  20 AA B6           JSR XXB6AA
03741  B719  68                 PLA 
03742  B71A  A8                 TAY 
03743  B71B  68                 PLA 
03744  B71C  18                 CLC 
03745  B71D  65 22              ADC INDEX
03746  B71F  85 22              STA INDEX
03747  B721  90 02              BCC XXB725
03748  B723  E6 23              INC INDEX+1
03749  B725  98          XXB725 TYA 
03750  B726  20 8C B6           JSR XXB68C
03751  B729  4C CA B4           JMP XXB4CA
03752  B72C              ;********************************
03753  B72C              ; RIGHT$ FUNCTIO
03754  B72C              ;********************************
03755  B72C  20 61 B7    XXB72C JSR XXB761
03756  B72F  18                 CLC 
03757  B730  F1 50              SBC (DSCPNT),Y
03758  B732  49 FF              EOR #$FF
03759  B734  4C 06 B7           JMP XXB706
03760  B737              ;********************************
03761  B737              ; MID$ FUNCTION
03762  B737              ;********************************
03763  B737  A9 FF       XXB737 LDA #$FF        ; DEFAULT 3 PARAMETER
03764  B739  85 65              STA $65
03765  B73B  20 79 00           JSR CHRGOT
03766  B73E  C9 29              CMP #$29        ;')'
03767  B740  F0 06              BEQ XXB748
03768  B742  20 FD AE           JSR XXAEFD
03769  B745  20 9E B7           JSR XXB79E
03770  B748  20 61 B7    XXB748 JSR XXB761
03771  B74B  F0 4B              BEQ XXB798
03772  B74D  CA                 DEX 
03773  B74E  8A                 TXA 
03774  B74F  48                 PHA 
03775  B750  18                 CLC 
03776  B751  A2 00              LDX #$00
03777  B753  F1 50              SBC (DSCPNT),Y
03778  B755  B0 B6              BCS XXB70D
03779  B757  49 FF              EOR #$FF
03780  B759  C5 65              CMP $65
03781  B75B  90 B1              BCC XXB70E






ABASIC.ASM......PAGE 0073

LINE# LOC   CODE        LINE


03782  B75D  A5 65              LDA $65
03783  B75F  B0 AD              BCS XXB70E
03784  B761              ;********************************
03785  B761              ; GET FIRST 2 PARAMETERS FOR
03786  B761              ; LEFT$, RIGHT$ AND MID$
03787  B761              ;********************************
03788  B761  20 F7 AE    XXB761 JSR XXAEF7
03789  B764  68                 PLA 
03790  B765  A8                 TAY 
03791  B766  68                 PLA 
03792  B767  85 55              STA JMPER+1
03793  B769  68                 PLA 
03794  B76A  68                 PLA 
03795  B76B  68                 PLA 
03796  B76C  AA                 TAX 
03797  B76D  68                 PLA 
03798  B76E  85 50              STA DSCPNT
03799  B770  68                 PLA 
03800  B771  85 51              STA DSCPNT+1
03801  B773  A5 55              LDA JMPER+1
03802  B775  48                 PHA 
03803  B776  98                 TYA 
03804  B777  48                 PHA 
03805  B778  A0 00              LDY #$00
03806  B77A  8A                 TXA 
03807  B77B  60                 RTS 
03808  B77C              ;********************************
03809  B77C              ; LEN FUNCTION
03810  B77C              ;********************************
03811  B77C  20 82 B7    XXB77C JSR XXB782
03812  B77F  4C A2 B3           JMP XXB3A2
03813  B782              ;********************************
03814  B782              ;
03815  B782              ;********************************
03816  B782  20 A3 B6    XXB782 JSR XXB6A3
03817  B785  A2 00              LDX #$00
03818  B787  86 0D              STX VALTYP
03819  B789  A8                 TAY 
03820  B78A  60                 RTS 
03821  B78B              ;********************************
03822  B78B              ; ASC FUNCTION
03823  B78B              ;********************************
03824  B78B  20 82 B7    XXB78B JSR XXB782
03825  B78E  F0 08              BEQ XXB798
03826  B790  A0 00              LDY #$00
03827  B792  B1 22              LDA (INDEX),Y
03828  B794  A8                 TAY 
03829  B795  4C A2 B3           JMP XXB3A2
03830  B798              ;********************************
03831  B798              ;
03832  B798              ;********************************
03833  B798  4C 48 B2    XXB798 JMP XXB248
03834  B79B              ;********************************
03835  B79B              ; FETCH INTEGER VALUE IN X AND CHECK RANGE
03836  B79B              ;********************************






ABASIC.ASM......PAGE 0074

LINE# LOC   CODE        LINE


03837  B79B  20 73 00    XXB79B JSR CHRGET
03838  B79E  20 8A AD    XXB79E JSR XXAD8A
03839  B7A1  20 B8 B1    XXB7A1 JSR XXB1B8
03840  B7A4  A6 64              LDX $64
03841  B7A6  D0 F0              BNE XXB798
03842  B7A8  A6 65              LDX $65
03843  B7AA  4C 79 00           JMP CHRGOT
03844  B7AD              ;********************************
03845  B7AD              ; VAL FUNCTION
03846  B7AD              ;********************************
03847  B7AD  20 82 B7    XXB7AD JSR XXB782
03848  B7B0  D0 03              BNE XXB7B5
03849  B7B2  4C F7 B8           JMP XXB8F7
03850  B7B5              ;********************************
03851  B7B5              ;
03852  B7B5              ;********************************
03853  B7B5  A6 7A       XXB7B5 LDX TXTPTR
03854  B7B7  A4 7B              LDY TXTPTR+1
03855  B7B9  86 71              STX $71
03856  B7BB  84 72              STY $72
03857  B7BD  A6 22              LDX INDEX
03858  B7BF  86 7A              STX TXTPTR
03859  B7C1  18                 CLC 
03860  B7C2  65 22              ADC INDEX
03861  B7C4  85 24              STA INDEX+2
03862  B7C6  A6 23              LDX INDEX+1
03863  B7C8  86 7B              STX TXTPTR+1
03864  B7CA  90 01              BCC XXB7CD
03865  B7CC  E8                 INX 
03866  B7CD  86 25       XXB7CD STX INDEX+3
03867  B7CF  A0 00              LDY #$00
03868  B7D1  B1 24              LDA (INDEX+2),Y
03869  B7D3  48                 PHA 
03870  B7D4  98                 TYA 
03871  B7D5  91 24              STA (INDEX+2),Y
03872  B7D7  20 79 00           JSR CHRGOT
03873  B7DA  20 F3 BC           JSR XXBCF3
03874  B7DD  68                 PLA 
03875  B7DE  A0 00              LDY #$00
03876  B7E0  91 24              STA (INDEX+2),Y
03877  B7E2  A6 71       XXB7E2 LDX $71
03878  B7E4  A4 72              LDY $72
03879  B7E6  86 7A              STX TXTPTR
03880  B7E8  84 7B              STY TXTPTR+1
03881  B7EA  60                 RTS 
03882  B7EB              ;********************************
03883  B7EB              ; GET ADDRESS INTO LINNUM/LINNUM+1 AND INTEGER IN
 X
03884  B7EB              ;********************************
03885  B7EB  20 8A AD    XXB7EB JSR XXAD8A
03886  B7EE  20 F7 B7           JSR XXB7F7
03887  B7F1  20 FD AE    XXB7F1 JSR XXAEFD
03888  B7F4  4C 9E B7           JMP XXB79E
03889  B7F7              ;********************************
03890  B7F7              ; CONVERT FLOAT TI INTEGER IN LINNUM/$1
03891  B7F7              ;********************************






ABASIC.ASM......PAGE 0075

LINE# LOC   CODE        LINE


03892  B7F7  A5 66       XXB7F7 LDA $66
03893  B7F9  30 9D              BMI XXB798
03894  B7FB  A5 61              LDA $61
03895  B7FD  C9 91              CMP #$91
03896  B7FF  B0 97              BCS XXB798
03897  B801  20 9B BC           JSR XXBC9B
03898  B804  A5 64              LDA $64
03899  B806  A4 65              LDY $65
03900  B808  84 14              STY LINNUM
03901  B80A  85 15              STA LINNUM+1
03902  B80C  60                 RTS 
03903  B80D              ;********************************
03904  B80D              ; PEEK FUNCTIO
03905  B80D              ;********************************
03906  B80D  A5 15       XXB80D LDA LINNUM+1
03907  B80F  48                 PHA 
03908  B810  A5 14              LDA LINNUM
03909  B812  48                 PHA 
03910  B813  20 F7 B7           JSR XXB7F7
03911  B816  A0 00              LDY #$00
03912  B818  B1 14              LDA (LINNUM),Y
03913  B81A  A8                 TAY 
03914  B81B  68                 PLA 
03915  B81C  85 14              STA LINNUM
03916  B81E  68                 PLA 
03917  B81F  85 15              STA LINNUM+1
03918  B821  4C A2 B3           JMP XXB3A2
03919  B824              ;********************************
03920  B824              ; POKE COMMAND
03921  B824              ;********************************
03922  B824  20 EB B7    ZZB824 JSR XXB7EB
03923  B827  8A                 TXA 
03924  B828  A0 00              LDY #$00
03925  B82A  91 14              STA (LINNUM),Y
03926  B82C  60          XXB82C RTS 
03927  B82D              ;********************************
03928  B82D              ; WAIT COMMAND
03929  B82D              ;********************************
03930  B82D  20 EB B7    ZZB82D JSR XXB7EB
03931  B830  86 49              STX FORPNT
03932  B832  A2 00              LDX #$00
03933  B834  20 79 00           JSR CHRGOT
03934  B837  F0 03              BEQ XXB83C
03935  B839  20 F1 B7           JSR XXB7F1
03936  B83C  86 4A       XXB83C STX FORPNT+1
03937  B83E  A0 00              LDY #$00
03938  B840  B1 14       XXB840 LDA (LINNUM),Y
03939  B842  45 4A              EOR FORPNT+1
03940  B844  25 49              AND FORPNT
03941  B846  F0 F8              BEQ XXB840
03942  B848  60          XXB848 RTS 
03943  B849              ;********************************
03944  B849              ; ADD 0.5 TO FLOAT ACCU (ROUNDING)
03945  B849              ;********************************
03946  B849  A9 11       XXB849 LDA #<ZZBF11    ;#$11






ABASIC.ASM......PAGE 0076

LINE# LOC   CODE        LINE


03947  B84B  A0 BF              LDY #>ZZBF11    ;#$BF
03948  B84D  4C 67 B8           JMP XXB867
03949  B850              ;********************************
03950  B850              ; MINUS OPERATOR
03951  B850              ;********************************
03952  B850  20 8C BA    XXB850 JSR XXBA8C
03953  B853  A5 66       KKB853 LDA $66
03954  B855  49 FF              EOR #$FF
03955  B857  85 66              STA $66
03956  B859  45 6E              EOR $6E
03957  B85B  85 6F              STA $6F
03958  B85D  A5 61              LDA $61
03959  B85F  4C 6A B8           JMP XXB86A
03960  B862              ;********************************
03961  B862              ;
03962  B862              ;********************************
03963  B862  20 99 B9    XXB862 JSR XXB999
03964  B865  90 3C              BCC XXB8A3
03965  B867              ;********************************
03966  B867              ; ADD FLOAT INDEXED BY AY TO FLOAT ACCU
03967  B867              ;********************************
03968  B867  20 8C BA    XXB867 JSR XXBA8C
03969  B86A              ;********************************
03970  B86A              ; PLUS OPERATOR
03971  B86A              ;********************************
03972  B86A  D0 03       XXB86A BNE XXB86F
03973  B86C  4C FC BB           JMP XXBBFC
03974  B86F              ;********************************
03975  B86F              ;
03976  B86F              ;********************************
03977  B86F  A6 70       XXB86F LDX $70
03978  B871  86 56              STX JMPER+2
03979  B873  A2 69              LDX #$69
03980  B875  A5 69              LDA $69
03981  B877  A8          XXB877 TAY 
03982  B878  F0 CE              BEQ XXB848
03983  B87A  38                 SEC 
03984  B87B  E5 61              SBC $61
03985  B87D  F0 24              BEQ XXB8A3
03986  B87F  90 12              BCC XXB893
03987  B881  84 61              STY $61
03988  B883  A4 6E              LDY $6E
03989  B885  84 66              STY $66
03990  B887  49 FF              EOR #$FF
03991  B889  69 00              ADC #$00
03992  B88B  A0 00              LDY #$00
03993  B88D  84 56              STY JMPER+2
03994  B88F  A2 61              LDX #$61
03995  B891  D0 04              BNE XXB897
03996  B893  A0 00       XXB893 LDY #$00
03997  B895  84 70              STY $70
03998  B897  C9 F9       XXB897 CMP #$F9
03999  B899  30 C7              BMI XXB862
04000  B89B  A8                 TAY 
04001  B89C  A5 70              LDA $70






ABASIC.ASM......PAGE 0077

LINE# LOC   CODE        LINE


04002  B89E  56 01              LSR $01,X
04003  B8A0  20 B0 B9           JSR XXB9B0
04004  B8A3  24 6F       XXB8A3 BIT $6F
04005  B8A5  10 57              BPL XXB8FE
04006  B8A7  A0 61              LDY #$61
04007  B8A9  E0 69              CPX #$69
04008  B8AB  F0 02              BEQ XXB8AF
04009  B8AD  A0 69              LDY #$69
04010  B8AF  38          XXB8AF SEC 
04011  B8B0  49 FF              EOR #$FF
04012  B8B2  65 56              ADC JMPER+2
04013  B8B4  85 70              STA $70
04014  B8B6  B9 04 00           LDA $0004,Y
04015  B8B9  F5 04              SBC ADRAY1+1,X
04016  B8BB  85 65              STA $65
04017  B8BD  B9 03 00           LDA $0003,Y
04018  B8C0  F5 03              SBC ADRAY1,X
04019  B8C2  85 64              STA $64
04020  B8C4  B9 02 00           LDA $0002,Y
04021  B8C7  F5 02              SBC $02,X
04022  B8C9  85 63              STA $63
04023  B8CB  B9 01 00           LDA $0001,Y
04024  B8CE  F5 01              SBC $01,X
04025  B8D0  85 62              STA $62
04026  B8D2  B0 03       XXB8D2 BCS XXB8D7
04027  B8D4  20 47 B9           JSR XXB947
04028  B8D7  A0 00       XXB8D7 LDY #$00
04029  B8D9  98                 TYA 
04030  B8DA  18                 CLC 
04031  B8DB  A6 62       XXB8DB LDX $62
04032  B8DD  D0 4A              BNE XXB929
04033  B8DF  A6 63              LDX $63
04034  B8E1  86 62              STX $62
04035  B8E3  A6 64              LDX $64
04036  B8E5  86 63              STX $63
04037  B8E7  A6 65              LDX $65
04038  B8E9  86 64              STX $64
04039  B8EB  A6 70              LDX $70
04040  B8ED  86 65              STX $65
04041  B8EF  84 70              STY $70
04042  B8F1  69 08              ADC #$08
04043  B8F3  C9 20              CMP #$20        ;' '
04044  B8F5  D0 E4              BNE XXB8DB
04045  B8F7  A9 00       XXB8F7 LDA #$00
04046  B8F9  85 61       XXB8F9 STA $61
04047  B8FB  85 66       XXB8FB STA $66
04048  B8FD  60                 RTS 
04049  B8FE              ;********************************
04050  B8FE              ; ADD FRACTIONS
04051  B8FE              ;********************************
04052  B8FE  65 56       XXB8FE ADC JMPER+2
04053  B900  85 70              STA $70
04054  B902  A5 65              LDA $65
04055  B904  65 6D              ADC $6D
04056  B906  85 65              STA $65






ABASIC.ASM......PAGE 0078

LINE# LOC   CODE        LINE


04057  B908  A5 64              LDA $64
04058  B90A  65 6C              ADC $6C
04059  B90C  85 64              STA $64
04060  B90E  A5 63              LDA $63
04061  B910  65 6B              ADC $6B
04062  B912  85 63              STA $63
04063  B914  A5 62              LDA $62
04064  B916  65 6A              ADC $6A
04065  B918  85 62              STA $62
04066  B91A  4C 36 B9           JMP XXB936
04067  B91D              ;********************************
04068  B91D              ; POSTSHIFT
04069  B91D              ;********************************
04070  B91D  69 01       XXB91D ADC #$01
04071  B91F  06 70              ASL $70
04072  B921  26 65              ROL $65
04073  B923  26 64              ROL $64
04074  B925  26 63              ROL $63
04075  B927  26 62              ROL $62
04076  B929  10 F2       XXB929 BPL XXB91D
04077  B92B  38                 SEC 
04078  B92C  E5 61              SBC $61
04079  B92E  B0 C7              BCS XXB8F7
04080  B930  49 FF              EOR #$FF
04081  B932  69 01              ADC #$01
04082  B934  85 61              STA $61
04083  B936  90 0E       XXB936 BCC XXB946
04084  B938  E6 61       XXB938 INC $61
04085  B93A  F0 42              BEQ XXB97E
04086  B93C  66 62              ROR $62
04087  B93E  66 63              ROR $63
04088  B940  66 64              ROR $64
04089  B942  66 65              ROR $65
04090  B944  66 70              ROR $70
04091  B946  60          XXB946 RTS 
04092  B947              ;********************************
04093  B947              ; NEGATE FLOAT ACCU
04094  B947              ;********************************
04095  B947  A5 66       XXB947 LDA $66
04096  B949  49 FF              EOR #$FF
04097  B94B  85 66              STA $66
04098  B94D  A5 62       XXB94D LDA $62
04099  B94F  49 FF              EOR #$FF
04100  B951  85 62              STA $62
04101  B953  A5 63              LDA $63
04102  B955  49 FF              EOR #$FF
04103  B957  85 63              STA $63
04104  B959  A5 64              LDA $64
04105  B95B  49 FF              EOR #$FF
04106  B95D  85 64              STA $64
04107  B95F  A5 65              LDA $65
04108  B961  49 FF              EOR #$FF
04109  B963  85 65              STA $65
04110  B965  A5 70              LDA $70
04111  B967  49 FF              EOR #$FF






ABASIC.ASM......PAGE 0079

LINE# LOC   CODE        LINE


04112  B969  85 70              STA $70
04113  B96B  E6 70              INC $70
04114  B96D  D0 0E              BNE XXB97D
04115  B96F              ;********************************
04116  B96F              ; INCREMENT FRACTION
04117  B96F              ;********************************
04118  B96F  E6 65       XXB96F INC $65
04119  B971  D0 0A              BNE XXB97D
04120  B973  E6 64              INC $64
04121  B975  D0 06              BNE XXB97D
04122  B977  E6 63              INC $63
04123  B979  D0 02              BNE XXB97D
04124  B97B  E6 62              INC $62
04125  B97D  60          XXB97D RTS 
04126  B97E              ;********************************
04127  B97E              ;
04128  B97E              ;********************************
04129  B97E  A2 0F       XXB97E LDX #$0F        ; ERROR NUMBER
04130  B980  4C 37 A4           JMP XXA437
04131  B983              ;********************************
04132  B983              ; PRESHIFT
04133  B983              ;********************************
04134  B983  A2 25       XXB983 LDX #$25        ;'%'
04135  B985  B4 04       XXB985 LDY ADRAY1+1,X
04136  B987  84 70              STY $70
04137  B989  B4 03              LDY ADRAY1,X
04138  B98B  94 04              STY ADRAY1+1,X
04139  B98D  B4 02              LDY $02,X
04140  B98F  94 03              STY ADRAY1,X
04141  B991  B4 01              LDY $01,X
04142  B993  94 02              STY $02,X
04143  B995  A4 68              LDY $68
04144  B997  94 01              STY $01,X
04145  B999  69 08       XXB999 ADC #$08
04146  B99B  30 E8              BMI XXB985
04147  B99D  F0 E6              BEQ XXB985
04148  B99F  E9 08              SBC #$08
04149  B9A1  A8                 TAY 
04150  B9A2  A5 70              LDA $70
04151  B9A4  B0 14              BCS XXB9BA
04152  B9A6  16 01       XXB9A6 ASL $01,X
04153  B9A8  90 02              BCC XXB9AC
04154  B9AA  F6 01              INC $01,X
04155  B9AC  76 01       XXB9AC ROR $01,X
04156  B9AE  76 01              ROR $01,X
04157  B9B0  76 02       XXB9B0 ROR $02,X
04158  B9B2  76 03              ROR ADRAY1,X
04159  B9B4  76 04              ROR ADRAY1+1,X
04160  B9B6  6A                 ROR A
04161  B9B7  C8                 INY 
04162  B9B8  D0 EC              BNE XXB9A6
04163  B9BA  18          XXB9BA CLC 
04164  B9BB  60                 RTS 
04165  B9BC              ;********************************
04166  B9BC              ; 1






ABASIC.ASM......PAGE 0080

LINE# LOC   CODE        LINE


04167  B9BC              ;********************************
04168  B9BC  81          WWB9BC .BYTE $81
04169  B9BD  00                 .BYTE $00
04170  B9BE  00                 .BYTE $00
04171  B9BF  00                 .BYTE $00
04172  B9C0  00                 .BYTE $00
04173  B9C1              ;********************************
04174  B9C1              ; LOG POLYNOMIAL TABLE
04175  B9C1              ;********************************
04176  B9C1  03          WWB9C1 .BYTE $03       ; DEGREE 4
04177  B9C2  7F                 .BYTE $7F
04178  B9C3  5E                 .BYTE $5E
04179  B9C4  56                 .BYTE $56
04180  B9C5  CB                 .BYTE $CB
04181  B9C6  79                 .BYTE $79
04182  B9C7  80                 .BYTE $80
04183  B9C8  13                 .BYTE $13
04184  B9C9  9B                 .BYTE $9B
04185  B9CA  0B                 .BYTE $0B
04186  B9CB  64                 .BYTE $64
04187  B9CC  80                 .BYTE $80
04188  B9CD  76                 .BYTE $76
04189  B9CE  38                 .BYTE $38
04190  B9CF  93                 .BYTE $93
04191  B9D0  16                 .BYTE $16
04192  B9D1  82                 .BYTE $82
04193  B9D2  38                 .BYTE $38
04194  B9D3  AA                 .BYTE $AA
04195  B9D4  3B                 .BYTE $3B
04196  B9D5  20                 .BYTE $20
04197  B9D6              ;********************************
04198  B9D6              ; 0,5 * SQR(2)
04199  B9D6              ;********************************
04200  B9D6  80          WWB9D6 .BYTE $80
04201  B9D7  35                 .BYTE $35
04202  B9D8  04                 .BYTE $04
04203  B9D9  F3                 .BYTE $F3
04204  B9DA  34                 .BYTE $34
04205  B9DB              ;********************************
04206  B9DB              ; SQR(2)
04207  B9DB              ;********************************
04208  B9DB  81          WWB9DB .BYTE $81
04209  B9DC  35                 .BYTE $35
04210  B9DD  04                 .BYTE $04
04211  B9DE  F3                 .BYTE $F3
04212  B9DF  34                 .BYTE $34
04213  B9E0              ;********************************
04214  B9E0              ; -0.5
04215  B9E0              ;********************************
04216  B9E0  80          WWB9E0 .BYTE $80
04217  B9E1  80                 .BYTE $80
04218  B9E2  00                 .BYTE $00
04219  B9E3  00                 .BYTE $00
04220  B9E4  00                 .BYTE $00
04221  B9E5              ;********************************






ABASIC.ASM......PAGE 0081

LINE# LOC   CODE        LINE


04222  B9E5              ; LOG(2)
04223  B9E5              ;********************************
04224  B9E5  80          WWB9E5 .BYTE $80
04225  B9E6  31                 .BYTE $31
04226  B9E7  72                 .BYTE $72
04227  B9E8  17                 .BYTE $17
04228  B9E9  F8                 .BYTE $F8
04229  B9EA              ;********************************
04230  B9EA              ; LOG FUNCTION
04231  B9EA              ;********************************
04232  B9EA  20 2B BC    XXB9EA JSR XXBC2B
04233  B9ED  F0 02              BEQ XXB9F1
04234  B9EF  10 03              BPL XXB9F4
04235  B9F1  4C 48 B2    XXB9F1 JMP XXB248
04236  B9F4              ;********************************
04237  B9F4              ;
04238  B9F4              ;********************************
04239  B9F4  A5 61       XXB9F4 LDA $61
04240  B9F6  E9 7F              SBC #$7F
04241  B9F8  48                 PHA 
04242  B9F9  A9 80              LDA #$80
04243  B9FB  85 61              STA $61
04244  B9FD  A9 D6              LDA #<WWB9D6    ;#$D6   ; LOW  B9D6
04245  B9FF  A0 B9              LDY #>WWB9D6    ;#$B9   ; HIGH B9D6
04246  BA01  20 67 B8           JSR XXB867
04247  BA04  A9 DB              LDA #<WWB9DB    ;#$DB   ; LOW  B9DB
04248  BA06  A0 B9              LDY #>WWB9DB    ;#$B9   ; HIGH B9DB
04249  BA08  20 0F BB           JSR XXBB0F
04250  BA0B  A9 BC              LDA #<WWB9BC    ;#$BC   ; LOW  B9BC
04251  BA0D  A0 B9              LDY #>WWB9BC    ;#$B9   ; HIGH B9BC
04252  BA0F  20 50 B8           JSR XXB850
04253  BA12  A9 C1              LDA #<WWB9C1    ;#$C1   ; LOW  B9C1
04254  BA14  A0 B9              LDY #>WWB9C1    ;#$B9   ; HIGH B9C1
04255  BA16              ; DIFF
04256  BA16              ; C64 = $E043 VIC20 = $E040
04257  BA16  20 43 E0           JSR XXE043
04258  BA19  A9 E0              LDA #<WWB9E0    ;#$E0   ; LOW  B9E0
04259  BA1B  A0 B9              LDY #>WWB9E0    ;#$B9   ; HIGH B9E0
04260  BA1D  20 67 B8           JSR XXB867
04261  BA20  68                 PLA 
04262  BA21  20 7E BD           JSR XXBD7E
04263  BA24  A9 E5              LDA #<WWB9E5    ;#$E5   ; LOW  B9E5
04264  BA26  A0 B9              LDY #>WWB9E5    ;#$B9   ; HIGH B9E5
04265  BA28  20 8C BA    XXBA28 JSR XXBA8C
04266  BA2B              ;********************************
04267  BA2B              ; TIMES OPERATOR
04268  BA2B              ;********************************
04269  BA2B  D0 03       ZZBA2B BNE XXBA30
04270  BA2D  4C 8B BA           JMP XXBA8B
04271  BA30              ;********************************
04272  BA30              ;
04273  BA30              ;********************************
04274  BA30  20 B7 BA    XXBA30 JSR XXBAB7
04275  BA33  A9 00              LDA #$00
04276  BA35  85 26              STA RESHO






ABASIC.ASM......PAGE 0082

LINE# LOC   CODE        LINE


04277  BA37  85 27              STA RESHO+1
04278  BA39  85 28              STA RESHO+2
04279  BA3B  85 29              STA RESHO+3
04280  BA3D  A5 70              LDA $70
04281  BA3F  20 59 BA           JSR XXBA59
04282  BA42  A5 65              LDA $65
04283  BA44  20 59 BA           JSR XXBA59
04284  BA47  A5 64              LDA $64
04285  BA49  20 59 BA           JSR XXBA59
04286  BA4C  A5 63              LDA $63
04287  BA4E  20 59 BA           JSR XXBA59
04288  BA51  A5 62              LDA $62
04289  BA53  20 5E BA           JSR XXBA5E
04290  BA56  4C 8F BB           JMP XXBB8F
04291  BA59              ;********************************
04292  BA59              ;
04293  BA59              ;********************************
04294  BA59  D0 03       XXBA59 BNE XXBA5E
04295  BA5B  4C 83 B9           JMP XXB983
04296  BA5E              ;********************************
04297  BA5E              ;
04298  BA5E              ;********************************
04299  BA5E  4A          XXBA5E LSR A
04300  BA5F  09 80              ORA #$80
04301  BA61  A8          XXBA61 TAY 
04302  BA62  90 19              BCC XXBA7D
04303  BA64  18                 CLC 
04304  BA65  A5 29              LDA RESHO+3
04305  BA67  65 6D              ADC $6D
04306  BA69  85 29              STA RESHO+3
04307  BA6B  A5 28              LDA RESHO+2
04308  BA6D  65 6C              ADC $6C
04309  BA6F  85 28              STA RESHO+2
04310  BA71  A5 27              LDA RESHO+1
04311  BA73  65 6B              ADC $6B
04312  BA75  85 27              STA RESHO+1
04313  BA77  A5 26              LDA RESHO
04314  BA79  65 6A              ADC $6A
04315  BA7B  85 26              STA RESHO
04316  BA7D  66 26       XXBA7D ROR RESHO
04317  BA7F  66 27              ROR RESHO+1
04318  BA81  66 28              ROR RESHO+2
04319  BA83  66 29              ROR RESHO+3
04320  BA85  66 70              ROR $70
04321  BA87  98                 TYA 
04322  BA88  4A                 LSR A
04323  BA89  D0 D6              BNE XXBA61
04324  BA8B  60          XXBA8B RTS 
04325  BA8C              ;********************************
04326  BA8C              ; MOVE FLOAT INDEXED BY AY INTO SECOND FLOAT ACCU

04327  BA8C              ;********************************
04328  BA8C  85 22       XXBA8C STA INDEX
04329  BA8E  84 23              STY INDEX+1
04330  BA90  A0 04              LDY #$04
04331  BA92  B1 22              LDA (INDEX),Y






ABASIC.ASM......PAGE 0083

LINE# LOC   CODE        LINE


04332  BA94  85 6D              STA $6D
04333  BA96  88                 DEY 
04334  BA97  B1 22              LDA (INDEX),Y
04335  BA99  85 6C              STA $6C
04336  BA9B  88                 DEY 
04337  BA9C  B1 22              LDA (INDEX),Y
04338  BA9E  85 6B              STA $6B
04339  BAA0  88                 DEY 
04340  BAA1  B1 22              LDA (INDEX),Y
04341  BAA3  85 6E              STA $6E
04342  BAA5  45 66              EOR $66
04343  BAA7  85 6F              STA $6F
04344  BAA9  A5 6E              LDA $6E
04345  BAAB  09 80              ORA #$80
04346  BAAD  85 6A              STA $6A
04347  BAAF  88                 DEY 
04348  BAB0  B1 22              LDA (INDEX),Y
04349  BAB2  85 69              STA $69
04350  BAB4  A5 61              LDA $61
04351  BAB6  60                 RTS 
04352  BAB7              ;********************************
04353  BAB7              ; ADD EXPONENTS
04354  BAB7              ;********************************
04355  BAB7  A5 69       XXBAB7 LDA $69
04356  BAB9  F0 1F       KKBAB9 BEQ XXBADA
04357  BABB  18                 CLC 
04358  BABC  65 61              ADC $61
04359  BABE  90 04              BCC XXBAC4
04360  BAC0  30 1D              BMI XXBADF
04361  BAC2  18                 CLC 
04362  BAC3              ;********************************
04363  BAC3  2C                 .BYTE $2C
04364  BAC4              ;********************************
04365  BAC4  10 14       XXBAC4 BPL XXBADA
04366  BAC6  69 80              ADC #$80
04367  BAC8  85 61              STA $61
04368  BACA  D0 03       KKBACA BNE XXBACF
04369  BACC  4C FB B8           JMP XXB8FB
04370  BACF              ;********************************
04371  BACF              ;
04372  BACF              ;********************************
04373  BACF  A5 6F       XXBACF LDA $6F
04374  BAD1  85 66              STA $66
04375  BAD3  60                 RTS 
04376  BAD4              ;********************************
04377  BAD4              ;
04378  BAD4              ;********************************
04379  BAD4  A5 66       KKBAD4 LDA $66
04380  BAD6  49 FF              EOR #$FF
04381  BAD8  30 05              BMI XXBADF
04382  BADA  68          XXBADA PLA 
04383  BADB  68                 PLA 
04384  BADC  4C F7 B8           JMP XXB8F7
04385  BADF              ;********************************
04386  BADF              ;






ABASIC.ASM......PAGE 0084

LINE# LOC   CODE        LINE


04387  BADF              ;********************************
04388  BADF  4C 7E B9    XXBADF JMP XXB97E
04389  BAE2              ;********************************
04390  BAE2              ; MULTIPLY FLOAT ACCU BY 10
04391  BAE2              ;********************************
04392  BAE2  20 0C BC    XXBAE2 JSR XXBC0C
04393  BAE5  AA                 TAX 
04394  BAE6  F0 10              BEQ XXBAF8
04395  BAE8  18                 CLC 
04396  BAE9  69 02              ADC #$02
04397  BAEB  B0 F2              BCS XXBADF
04398  BAED  A2 00       XXBAED LDX #$00
04399  BAEF  86 6F              STX $6F
04400  BAF1  20 77 B8           JSR XXB877
04401  BAF4  E6 61              INC $61
04402  BAF6  F0 E7              BEQ XXBADF
04403  BAF8  60          XXBAF8 RTS 
04404  BAF9              ;********************************
04405  BAF9              ; CONSTANT 10 FOR DIVISION
04406  BAF9              ;********************************
04407  BAF9  84          WWBAF9 .BYTE $84
04408  BAFA  20                 .BYTE $20
04409  BAFB  00                 .BYTE $00
04410  BAFC  00                 .BYTE $00
04411  BAFD  00                 .BYTE $00
04412  BAFE              ;********************************
04413  BAFE              ; DIVIDE FLOAT BY 10
04414  BAFE              ;********************************
04415  BAFE  20 0C BC    XXBAFE JSR XXBC0C
04416  BB01  A9 F9              LDA #<WWBAF9    ;#$F9   ; LOW  BAF9
04417  BB03  A0 BA              LDY #>WWBAF9    ;#$BA   ; HIGH BAF
04418  BB05  A2 00              LDX #$00
04419  BB07  86 6F       KKBB07 STX $6F
04420  BB09  20 A2 BB           JSR XXBBA2
04421  BB0C  4C 12 BB           JMP XXBB12
04422  BB0F              ;********************************
04423  BB0F              ; DIVIDE NUMBER INDEXED BY AY BY FLOAT ACCU
04424  BB0F              ;********************************
04425  BB0F  20 8C BA    XXBB0F JSR XXBA8C
04426  BB12              ;********************************
04427  BB12              ; DIVIDE OPERATOR
04428  BB12              ;********************************
04429  BB12  F0 76       XXBB12 BEQ XXBB8A
04430  BB14  20 1B BC           JSR XXBC1B
04431  BB17  A9 00              LDA #$00
04432  BB19  38                 SEC 
04433  BB1A  E5 61              SBC $61
04434  BB1C  85 61              STA $61
04435  BB1E  20 B7 BA           JSR XXBAB7
04436  BB21  E6 61              INC $61
04437  BB23  F0 BA              BEQ XXBADF
04438  BB25  A2 FC              LDX #$FC
04439  BB27  A9 01              LDA #$01
04440  BB29  A4 6A       XXBB29 LDY $6A
04441  BB2B  C4 62              CPY $62






ABASIC.ASM......PAGE 0085

LINE# LOC   CODE        LINE


04442  BB2D  D0 10              BNE XXBB3F
04443  BB2F  A4 6B              LDY $6B
04444  BB31  C4 63              CPY $63
04445  BB33  D0 0A              BNE XXBB3F
04446  BB35  A4 6C              LDY $6C
04447  BB37  C4 64              CPY $64
04448  BB39  D0 04              BNE XXBB3F
04449  BB3B  A4 6D              LDY $6D
04450  BB3D  C4 65              CPY $65
04451  BB3F  08          XXBB3F PHP 
04452  BB40  2A                 ROL A
04453  BB41  90 09              BCC XXBB4C
04454  BB43  E8                 INX 
04455  BB44  95 29              STA RESHO+3,X
04456  BB46  F0 32              BEQ XXBB7A
04457  BB48  10 34              BPL XXBB7E
04458  BB4A  A9 01              LDA #$01
04459  BB4C  28          XXBB4C PLP 
04460  BB4D  B0 0E              BCS XXBB5D
04461  BB4F  06 6D       XXBB4F ASL $6D
04462  BB51  26 6C              ROL $6C
04463  BB53  26 6B              ROL $6B
04464  BB55  26 6A              ROL $6A
04465  BB57  B0 E6              BCS XXBB3F
04466  BB59  30 CE              BMI XXBB29
04467  BB5B  10 E2              BPL XXBB3F
04468  BB5D  A8          XXBB5D TAY 
04469  BB5E  A5 6D              LDA $6D
04470  BB60  E5 65              SBC $65
04471  BB62  85 6D              STA $6D
04472  BB64  A5 6C              LDA $6C
04473  BB66  E5 64              SBC $64
04474  BB68  85 6C              STA $6C
04475  BB6A  A5 6B              LDA $6B
04476  BB6C  E5 63              SBC $63
04477  BB6E  85 6B              STA $6B
04478  BB70  A5 6A              LDA $6A
04479  BB72  E5 62              SBC $62
04480  BB74  85 6A              STA $6A
04481  BB76  98                 TYA 
04482  BB77  4C 4F BB           JMP XXBB4F
04483  BB7A              ;********************************
04484  BB7A              ;
04485  BB7A              ;********************************
04486  BB7A  A9 40       XXBB7A LDA #$40        ;'@'
04487  BB7C  D0 CE              BNE XXBB4C
04488  BB7E  0A          XXBB7E ASL A
04489  BB7F  0A                 ASL A
04490  BB80  0A                 ASL A
04491  BB81  0A                 ASL A
04492  BB82  0A                 ASL A
04493  BB83  0A                 ASL A
04494  BB84  85 70              STA $70
04495  BB86  28                 PLP 
04496  BB87  4C 8F BB           JMP XXBB8F






ABASIC.ASM......PAGE 0086

LINE# LOC   CODE        LINE


04497  BB8A              ;********************************
04498  BB8A              ;
04499  BB8A              ;********************************
04500  BB8A  A2 14       XXBB8A LDX #$14        ; ERROR NUMBER
04501  BB8C  4C 37 A4           JMP XXA437
04502  BB8F              ;********************************
04503  BB8F              ;
04504  BB8F              ;********************************
04505  BB8F  A5 26       XXBB8F LDA RESHO
04506  BB91  85 62              STA $62
04507  BB93  A5 27              LDA RESHO+1
04508  BB95  85 63              STA $63
04509  BB97  A5 28              LDA RESHO+2
04510  BB99  85 64              STA $64
04511  BB9B  A5 29              LDA RESHO+3
04512  BB9D  85 65              STA $65
04513  BB9F  4C D7 B8           JMP XXB8D7
04514  BBA2              ;********************************
04515  BBA2              ;
04516  BBA2              ;********************************
04517  BBA2  85 22       XXBBA2 STA INDEX
04518  BBA4  84 23              STY INDEX+1
04519  BBA6  A0 04              LDY #$04
04520  BBA8  B1 22              LDA (INDEX),Y
04521  BBAA  85 65              STA $65
04522  BBAC  88                 DEY 
04523  BBAD  B1 22              LDA (INDEX),Y
04524  BBAF  85 64              STA $64
04525  BBB1  88                 DEY 
04526  BBB2  B1 22              LDA (INDEX),Y
04527  BBB4  85 63              STA $63
04528  BBB6  88                 DEY 
04529  BBB7  B1 22              LDA (INDEX),Y
04530  BBB9  85 66              STA $66
04531  BBBB  09 80              ORA #$80
04532  BBBD  85 62              STA $62
04533  BBBF  88                 DEY 
04534  BBC0  B1 22              LDA (INDEX),Y
04535  BBC2  85 61              STA $61
04536  BBC4  84 70              STY $70
04537  BBC6  60                 RTS 
04538  BBC7              ;********************************
04539  BBC7              ; STORE FLOAT ACCU AT $5C-$60
04540  BBC7              ;********************************
04541  BBC7  A2 5C       ZZBBC7 LDX #$5C        ; LOW  005C
04542  BBC9              ;********************************
04543  BBC9  2C                 .BYTE $2C
04544  BBCA              ;********************************
04545  BBCA              ; STORE FLOAT ACCU AT $57-$5B
04546  BBCA              ;********************************
04547  BBCA  A2 57       KKBBCA LDX #$57        ; LOW  0057
04548  BBCC  A0 00              LDY #$00        ; HIGH 0057
04549  BBCE  F0 04              BEQ XXBBD4
04550  BBD0              ;********************************
04551  BBD0              ; STORE FLOAT ACCU IN INDEX AT $49/$4A






ABASIC.ASM......PAGE 0087

LINE# LOC   CODE        LINE


04552  BBD0              ;********************************
04553  BBD0  A6 49       XXBBD0 LDX FORPNT
04554  BBD2  A4 4A              LDY FORPNT+1
04555  BBD4              ;********************************
04556  BBD4              ; STORE FLOAT ACCU IN INDEX XY
04557  BBD4              ;********************************
04558  BBD4  20 1B BC    XXBBD4 JSR XXBC1B
04559  BBD7  86 22              STX INDEX
04560  BBD9  84 23              STY INDEX+1
04561  BBDB  A0 04              LDY #$04
04562  BBDD  A5 65              LDA $65
04563  BBDF  91 22              STA (INDEX),Y
04564  BBE1  88                 DEY 
04565  BBE2  A5 64              LDA $64
04566  BBE4  91 22              STA (INDEX),Y
04567  BBE6  88                 DEY 
04568  BBE7  A5 63              LDA $63
04569  BBE9  91 22              STA (INDEX),Y
04570  BBEB  88                 DEY 
04571  BBEC  A5 66              LDA $66
04572  BBEE  09 7F              ORA #$7F
04573  BBF0  25 62              AND $62
04574  BBF2  91 22              STA (INDEX),Y
04575  BBF4  88                 DEY 
04576  BBF5  A5 61              LDA $61
04577  BBF7  91 22              STA (INDEX),Y
04578  BBF9  84 70              STY $70
04579  BBFB  60                 RTS 
04580  BBFC              ;********************************
04581  BBFC              ; MOVE SECOND FLOAT ACCU INTO FIRST
04582  BBFC              ;********************************
04583  BBFC  A5 6E       XXBBFC LDA $6E
04584  BBFE  85 66       XXBBFE STA $66
04585  BC00  A2 05              LDX #$05
04586  BC02  B5 68       XXBC02 LDA $68,X
04587  BC04  95 60              STA $60,X
04588  BC06  CA                 DEX 
04589  BC07  D0 F9              BNE XXBC02
04590  BC09  86 70              STX $70
04591  BC0B  60                 RTS 
04592  BC0C              ;********************************
04593  BC0C              ; MOVE ROUNDED FLOAT ACCU INTO SECOND
04594  BC0C              ;********************************
04595  BC0C  20 1B BC    XXBC0C JSR XXBC1B
04596  BC0F  A2 06       KKBC0F LDX #$06
04597  BC11  B5 60       XXBC11 LDA $60,X
04598  BC13  95 68              STA $68,X
04599  BC15  CA                 DEX 
04600  BC16  D0 F9              BNE XXBC11
04601  BC18  86 70              STX $70
04602  BC1A  60          XXBC1A RTS 
04603  BC1B              ;********************************
04604  BC1B              ; ROUND FLOAT ACCU ACCORDING TO GUARD BIT
04605  BC1B              ;********************************
04606  BC1B  A5 61       XXBC1B LDA $61






ABASIC.ASM......PAGE 0088

LINE# LOC   CODE        LINE


04607  BC1D  F0 FB              BEQ XXBC1A
04608  BC1F  06 70              ASL $70
04609  BC21  90 F7              BCC XXBC1A
04610  BC23  20 6F B9    XXBC23 JSR XXB96F
04611  BC26  D0 F2              BNE XXBC1A
04612  BC28  4C 38 B9           JMP XXB938
04613  BC2B              ;********************************
04614  BC2B              ; GET SIGN OF FLOAT ACCU IN 
04615  BC2B              ;********************************
04616  BC2B  A5 61       XXBC2B LDA $61
04617  BC2D  F0 09              BEQ XXBC38
04618  BC2F  A5 66       XXBC2F LDA $66
04619  BC31  2A          XXBC31 ROL A
04620  BC32  A9 FF              LDA #$FF
04621  BC34  B0 02              BCS XXBC38
04622  BC36  A9 01              LDA #$01
04623  BC38  60          XXBC38 RTS 
04624  BC39              ;********************************
04625  BC39              ; SGN FUNCTION
04626  BC39              ;********************************
04627  BC39  20 2B BC    XXBC39 JSR XXBC2B
04628  BC3C              ;********************************
04629  BC3C              ; MOVE SIGNED NUMBER FROM A INTO FLOAT ACCU
04630  BC3C              ;********************************
04631  BC3C  85 62       XXBC3C STA $62
04632  BC3E  A9 00              LDA #$00
04633  BC40  85 63              STA $63
04634  BC42  A2 88              LDX #$88
04635  BC44  A5 62       XXBC44 LDA $62
04636  BC46  49 FF              EOR #$FF
04637  BC48  2A                 ROL A
04638  BC49  A9 00       XXBC49 LDA #$00
04639  BC4B  85 65              STA $65
04640  BC4D  85 64              STA $64
04641  BC4F  86 61       XXBC4F STX $61
04642  BC51  85 70              STA $70
04643  BC53  85 66              STA $66
04644  BC55  4C D2 B8           JMP XXB8D2
04645  BC58              ;********************************
04646  BC58              ; ABS FUNCTION
04647  BC58              ;********************************
04648  BC58  46 66       XXBC58 LSR $66
04649  BC5A  60                 RTS 
04650  BC5B              ;********************************
04651  BC5B              ; COMPARE FLOAT ACCU TO FLOAT INDEXED BY XY
04652  BC5B              ;********************************
04653  BC5B  85 24       XXBC5B STA INDEX+2
04654  BC5D  84 25       XXBC5D STY INDEX+3
04655  BC5F  A0 00              LDY #$00
04656  BC61  B1 24              LDA (INDEX+2),Y
04657  BC63  C8                 INY 
04658  BC64  AA                 TAX 
04659  BC65  F0 C4              BEQ XXBC2B
04660  BC67  B1 24              LDA (INDEX+2),Y
04661  BC69  45 66              EOR $66






ABASIC.ASM......PAGE 0089

LINE# LOC   CODE        LINE


04662  BC6B  30 C2              BMI XXBC2F
04663  BC6D  E4 61              CPX $61
04664  BC6F  D0 21              BNE XXBC92
04665  BC71  B1 24              LDA (INDEX+2),Y
04666  BC73  09 80              ORA #$80
04667  BC75  C5 62              CMP $62
04668  BC77  D0 19              BNE XXBC92
04669  BC79  C8                 INY 
04670  BC7A  B1 24              LDA (INDEX+2),Y
04671  BC7C  C5 63              CMP $63
04672  BC7E  D0 12              BNE XXBC92
04673  BC80  C8                 INY 
04674  BC81  B1 24              LDA (INDEX+2),Y
04675  BC83  C5 64              CMP $64
04676  BC85  D0 0B              BNE XXBC92
04677  BC87  C8                 INY 
04678  BC88  A9 7F              LDA #$7F
04679  BC8A  C5 70              CMP $70
04680  BC8C  B1 24              LDA (INDEX+2),Y
04681  BC8E  E5 65              SBC $65
04682  BC90  F0 28              BEQ XXBCBA
04683  BC92  A5 66       XXBC92 LDA $66
04684  BC94  90 02              BCC XXBC98
04685  BC96  49 FF              EOR #$FF
04686  BC98  4C 31 BC    XXBC98 JMP XXBC31
04687  BC9B              ;********************************
04688  BC9B              ; CONVERT FLOAT TO A 4 BYTE SIGNED INTEGER
04689  BC9B              ;********************************
04690  BC9B  A5 61       XXBC9B LDA $61
04691  BC9D  F0 4A              BEQ XXBCE9
04692  BC9F  38                 SEC 
04693  BCA0  E9 A0              SBC #$A0
04694  BCA2  24 66              BIT $66
04695  BCA4  10 09              BPL XXBCAF
04696  BCA6  AA                 TAX 
04697  BCA7  A9 FF              LDA #$FF
04698  BCA9  85 68              STA $68
04699  BCAB  20 4D B9           JSR XXB94D
04700  BCAE  8A                 TXA 
04701  BCAF  A2 61       XXBCAF LDX #$61
04702  BCB1  C9 F9              CMP #$F9
04703  BCB3  10 06              BPL XXBCBB
04704  BCB5  20 99 B9           JSR XXB999
04705  BCB8  84 68              STY $68
04706  BCBA  60          XXBCBA RTS 
04707  BCBB              ;********************************
04708  BCBB              ;
04709  BCBB              ;********************************
04710  BCBB  A8          XXBCBB TAY 
04711  BCBC  A5 66              LDA $66
04712  BCBE  29 80              AND #$80
04713  BCC0  46 62              LSR $62
04714  BCC2  05 62              ORA $62
04715  BCC4  85 62              STA $62
04716  BCC6  20 B0 B9           JSR XXB9B0






ABASIC.ASM......PAGE 0090

LINE# LOC   CODE        LINE


04717  BCC9  84 68              STY $68
04718  BCCB  60                 RTS 
04719  BCCC              ;********************************
04720  BCCC              ; INT FUNCTION
04721  BCCC              ;********************************
04722  BCCC  A5 61       XXBCCC LDA $61
04723  BCCE  C9 A0              CMP #$A0
04724  BCD0  B0 20              BCS XXBCF2
04725  BCD2  20 9B BC           JSR XXBC9B
04726  BCD5  84 70              STY $70
04727  BCD7  A5 66              LDA $66
04728  BCD9  84 66              STY $66
04729  BCDB  49 80              EOR #$80
04730  BCDD  2A                 ROL A
04731  BCDE  A9 A0              LDA #$A0
04732  BCE0  85 61              STA $61
04733  BCE2  A5 65              LDA $65
04734  BCE4  85 07              STA CHARAC
04735  BCE6  4C D2 B8           JMP XXB8D2
04736  BCE9              ;********************************
04737  BCE9              ; CLEAR FLOAT ACCU
04738  BCE9              ;********************************
04739  BCE9  85 62       XXBCE9 STA $62
04740  BCEB  85 63              STA $63
04741  BCED  85 64              STA $64
04742  BCEF  85 65              STA $65
04743  BCF1  A8                 TAY 
04744  BCF2  60          XXBCF2 RTS 
04745  BCF3              ;********************************
04746  BCF3              ; CONVERT STRING TO FLOAT IN FLOAT ACCU
04747  BCF3              ;********************************
04748  BCF3  A0 00       XXBCF3 LDY #$00
04749  BCF5  A2 0A              LDX #$0A
04750  BCF7  94 5D       XXBCF7 STY $5D,X
04751  BCF9  CA                 DEX 
04752  BCFA  10 FB              BPL XXBCF7
04753  BCFC  90 0F              BCC XXBD0D
04754  BCFE  C9 2D              CMP #$2D        ;'-'
04755  BD00  D0 04              BNE XXBD06
04756  BD02  86 67              STX $67
04757  BD04  F0 04              BEQ XXBD0A
04758  BD06  C9 2B       XXBD06 CMP #$2B        ;'+'
04759  BD08  D0 05              BNE XXBD0F
04760  BD0A  20 73 00    XXBD0A JSR CHRGET
04761  BD0D  90 5B       XXBD0D BCC XXBD6A
04762  BD0F  C9 2E       XXBD0F CMP #$2E        ;'.'
04763  BD11  F0 2E              BEQ XXBD41
04764  BD13  C9 45              CMP #$45        ;'E'
04765  BD15  D0 30              BNE XXBD47
04766  BD17  20 73 00           JSR CHRGET
04767  BD1A  90 17              BCC XXBD33
04768  BD1C  C9 AB              CMP #$AB
04769  BD1E  F0 0E              BEQ XXBD2E
04770  BD20  C9 2D              CMP #$2D        ;'-'
04771  BD22  F0 0A              BEQ XXBD2E






ABASIC.ASM......PAGE 0091

LINE# LOC   CODE        LINE


04772  BD24  C9 AA              CMP #$AA
04773  BD26  F0 08              BEQ XXBD30
04774  BD28  C9 2B              CMP #$2B        ;'+'
04775  BD2A  F0 04              BEQ XXBD30
04776  BD2C  D0 07              BNE XXBD35
04777  BD2E  66 60       XXBD2E ROR $60
04778  BD30  20 73 00    XXBD30 JSR CHRGET
04779  BD33  90 5C       XXBD33 BCC XXBD91
04780  BD35  24 60       XXBD35 BIT $60
04781  BD37  10 0E              BPL XXBD47
04782  BD39  A9 00              LDA #$00
04783  BD3B  38                 SEC 
04784  BD3C  E5 5E              SBC $5E
04785  BD3E  4C 49 BD           JMP XXBD49
04786  BD41              ;********************************
04787  BD41              ;
04788  BD41              ;********************************
04789  BD41  66 5F       XXBD41 ROR $5F
04790  BD43  24 5F              BIT $5F
04791  BD45  50 C3              BVC XXBD0A
04792  BD47  A5 5E       XXBD47 LDA $5E
04793  BD49  38          XXBD49 SEC 
04794  BD4A  E5 5D              SBC $5D
04795  BD4C  85 5E              STA $5E
04796  BD4E  F0 12              BEQ XXBD62
04797  BD50  10 09              BPL XXBD5B
04798  BD52  20 FE BA    XXBD52 JSR XXBAFE
04799  BD55  E6 5E              INC $5E
04800  BD57  D0 F9              BNE XXBD52
04801  BD59  F0 07              BEQ XXBD62
04802  BD5B  20 E2 BA    XXBD5B JSR XXBAE2
04803  BD5E  C6 5E              DEC $5E
04804  BD60  D0 F9              BNE XXBD5B
04805  BD62  A5 67       XXBD62 LDA $67
04806  BD64  30 01              BMI XXBD67
04807  BD66  60                 RTS 
04808  BD67              ;********************************
04809  BD67              ;
04810  BD67              ;********************************
04811  BD67  4C B4 BF    XXBD67 JMP XXBFB4
04812  BD6A              ;********************************
04813  BD6A              ;
04814  BD6A              ;********************************
04815  BD6A  48          XXBD6A PHA 
04816  BD6B  24 5F              BIT $5F
04817  BD6D  10 02              BPL XXBD71
04818  BD6F  E6 5D              INC $5D
04819  BD71  20 E2 BA    XXBD71 JSR XXBAE2
04820  BD74  68                 PLA 
04821  BD75  38                 SEC 
04822  BD76  E9 30              SBC #$30        ;'0'
04823  BD78  20 7E BD           JSR XXBD7E
04824  BD7B  4C 0A BD           JMP XXBD0A
04825  BD7E              ;********************************
04826  BD7E              ; ADD SIGNED INTEGER FROM A TO FLOAT ACCU






ABASIC.ASM......PAGE 0092

LINE# LOC   CODE        LINE


04827  BD7E              ;********************************
04828  BD7E  48          XXBD7E PHA 
04829  BD7F  20 0C BC           JSR XXBC0C
04830  BD82  68                 PLA 
04831  BD83  20 3C BC           JSR XXBC3C
04832  BD86  A5 6E              LDA $6E
04833  BD88  45 66              EOR $66
04834  BD8A  85 6F              STA $6F
04835  BD8C  A6 61              LDX $61
04836  BD8E  4C 6A B8           JMP XXB86A
04837  BD91              ;********************************
04838  BD91              ; GET EXPONENT OF NUMBER FROM STRING
04839  BD91              ;********************************
04840  BD91  A5 5E       XXBD91 LDA $5E
04841  BD93  C9 0A              CMP #$0A
04842  BD95  90 09              BCC XXBDA0
04843  BD97  A9 64              LDA #$64
04844  BD99  24 60              BIT $60
04845  BD9B  30 11              BMI XXBDAE
04846  BD9D  4C 7E B9           JMP XXB97E
04847  BDA0              ;********************************
04848  BDA0              ;
04849  BDA0              ;********************************
04850  BDA0  0A          XXBDA0 ASL A
04851  BDA1  0A                 ASL A
04852  BDA2  18                 CLC 
04853  BDA3  65 5E              ADC $5E
04854  BDA5  0A                 ASL A
04855  BDA6  18                 CLC 
04856  BDA7  A0 00              LDY #$00
04857  BDA9  71 7A              ADC (TXTPTR),Y
04858  BDAB  38                 SEC 
04859  BDAC  E9 30              SBC #$30        ;'0'
04860  BDAE  85 5E       XXBDAE STA $5E
04861  BDB0  4C 30 BD           JMP XXBD30
04862  BDB3              ;********************************
04863  BDB3              ; CONSTANTS FOR FLOAT TO STRING CONVERSION
04864  BDB3              ;********************************
04865  BDB3  9B          ZZBDB3 .BYTE $9B,$3E,$BC,$1F,$FD
04865  BDB4  3E 
04865  BDB5  BC 
04865  BDB6  1F 
04865  BDB7  FD 
04866  BDB8  9E          WWBDB8 .BYTE $9E,$6E,$6B,$27,$FD
04866  BDB9  6E 
04866  BDBA  6B 
04866  BDBB  27 
04866  BDBC  FD 
04867  BDBD  9E          WWBDBD .BYTE $9E,$6E,$6B,$28,$00
04867  BDBE  6E 
04867  BDBF  6B 
04867  BDC0  28 
04867  BDC1  00 
04868  BDC2              ;********************************
04869  BDC2              ; PRINT IN FOLLOWED BY LINE NUMBER






ABASIC.ASM......PAGE 0093

LINE# LOC   CODE        LINE


04870  BDC2              ;********************************
04871  BDC2  A9 71       XXBDC2 LDA #<WWA371    ;#$71   ; LOW  A371
04872  BDC4  A0 A3              LDY #>WWA371    ;#$A3   ; HIGH A371
04873  BDC6  20 DA BD           JSR XXBDDA
04874  BDC9  A5 3A              LDA CURLIN+1
04875  BDCB  A6 39              LDX CURLIN
04876  BDCD              ;********************************
04877  BDCD              ; PRINT NUMBER FROM AX
04878  BDCD              ;********************************
04879  BDCD  85 62       XXBDCD STA $62
04880  BDCF  86 63              STX $63
04881  BDD1  A2 90              LDX #$90
04882  BDD3  38                 SEC 
04883  BDD4  20 49 BC           JSR XXBC49
04884  BDD7  20 DF BD           JSR XXBDDF
04885  BDDA  4C 1E AB    XXBDDA JMP XXAB1E
04886  BDDD              ;********************************
04887  BDDD              ; CONVERT NUMBER IN FLOAT ACCU TO STRING
04888  BDDD              ;********************************
04889  BDDD  A0 01       XXBDDD LDY #$01
04890  BDDF  A9 20       XXBDDF LDA #$20        ;' '
04891  BDE1  24 66              BIT $66
04892  BDE3  10 02              BPL XXBDE7
04893  BDE5  A9 2D              LDA #$2D        ;'-'
04894  BDE7  99 FF 00    XXBDE7 STA $00FF,Y
04895  BDEA  85 66              STA $66
04896  BDEC  84 71              STY $71
04897  BDEE  C8                 INY 
04898  BDEF  A9 30              LDA #$30        ;'0'
04899  BDF1  A6 61              LDX $61
04900  BDF3  D0 03              BNE XXBDF8
04901  BDF5  4C 04 BF           JMP XXBF04
04902  BDF8              ;********************************
04903  BDF8              ;
04904  BDF8              ;********************************
04905  BDF8  A9 00       XXBDF8 LDA #$00
04906  BDFA  E0 80              CPX #$80
04907  BDFC  F0 02              BEQ XXBE00
04908  BDFE  B0 09              BCS XXBE09
04909  BE00  A9 BD       XXBE00 LDA #<WWBDBD    ;#$BD   ; LOW  BDBD
04910  BE02  A0 BD              LDY #>WWBDBD    ;#$BD   ; HIGH BDBD
04911  BE04  20 28 BA           JSR XXBA28
04912  BE07  A9 F7              LDA #$F7
04913  BE09  85 5D       XXBE09 STA $5D
04914  BE0B  A9 B8       XXBE0B LDA #<WWBDB8    ;#$B8   ; LOW  BDB8
04915  BE0D  A0 BD              LDY #>WWBDB8    ;#$BD   ; HIGH BDB8
04916  BE0F  20 5B BC           JSR XXBC5B
04917  BE12  F0 1E              BEQ XXBE32
04918  BE14  10 12              BPL XXBE28
04919  BE16  A9 B3       XXBE16 LDA #<ZZBDB3    ;#$B3   ; LOW  BDB3
04920  BE18  A0 BD              LDY #>ZZBDB3    ;#$BD   ; HIGH BDB3
04921  BE1A  20 5B BC           JSR XXBC5B
04922  BE1D  F0 02              BEQ XXBE21
04923  BE1F  10 0E              BPL XXBE2F
04924  BE21  20 E2 BA    XXBE21 JSR XXBAE2






ABASIC.ASM......PAGE 0094

LINE# LOC   CODE        LINE


04925  BE24  C6 5D              DEC $5D
04926  BE26  D0 EE              BNE XXBE16
04927  BE28  20 FE BA    XXBE28 JSR XXBAFE
04928  BE2B  E6 5D              INC $5D
04929  BE2D  D0 DC              BNE XXBE0B
04930  BE2F  20 49 B8    XXBE2F JSR XXB849
04931  BE32  20 9B BC    XXBE32 JSR XXBC9B
04932  BE35  A2 01              LDX #$01
04933  BE37  A5 5D              LDA $5D
04934  BE39  18                 CLC 
04935  BE3A  69 0A              ADC #$0A
04936  BE3C  30 09              BMI XXBE47
04937  BE3E  C9 0B              CMP #$0B
04938  BE40  B0 06              BCS XXBE48
04939  BE42  69 FF              ADC #$FF
04940  BE44  AA                 TAX 
04941  BE45  A9 02              LDA #$02
04942  BE47  38          XXBE47 SEC 
04943  BE48  E9 02       XXBE48 SBC #$02
04944  BE4A  85 5E              STA $5E
04945  BE4C  86 5D              STX $5D
04946  BE4E  8A                 TXA 
04947  BE4F  F0 02              BEQ XXBE53
04948  BE51  10 13              BPL XXBE66
04949  BE53  A4 71       XXBE53 LDY $71
04950  BE55  A9 2E              LDA #$2E        ;'.'
04951  BE57  C8                 INY 
04952  BE58  99 FF 00           STA $00FF,Y
04953  BE5B  8A                 TXA 
04954  BE5C  F0 06              BEQ XXBE64
04955  BE5E  A9 30              LDA #$30        ;'0'
04956  BE60  C8                 INY 
04957  BE61  99 FF 00           STA $00FF,Y
04958  BE64  84 71       XXBE64 STY $71
04959  BE66  A0 00       XXBE66 LDY #$00
04960  BE68  A2 80       XXBE68 LDX #$80
04961  BE6A  A5 65       XXBE6A LDA $65
04962  BE6C  18                 CLC 
04963  BE6D  79 19 BF           ADC XXBF19,Y
04964  BE70  85 65              STA $65
04965  BE72  A5 64              LDA $64
04966  BE74  79 18 BF           ADC XXBF18,Y
04967  BE77  85 64              STA $64
04968  BE79  A5 63              LDA $63
04969  BE7B  79 17 BF           ADC XXBF17,Y
04970  BE7E  85 63              STA $63
04971  BE80  A5 62              LDA $62
04972  BE82  79 16 BF           ADC XXBF16,Y
04973  BE85  85 62              STA $62
04974  BE87  E8                 INX 
04975  BE88  B0 04              BCS XXBE8E
04976  BE8A  10 DE              BPL XXBE6A
04977  BE8C  30 02              BMI XXBE90
04978  BE8E  30 DA       XXBE8E BMI XXBE6A
04979  BE90  8A          XXBE90 TXA 






ABASIC.ASM......PAGE 0095

LINE# LOC   CODE        LINE


04980  BE91  90 04              BCC XXBE97
04981  BE93  49 FF              EOR #$FF
04982  BE95  69 0A              ADC #$0A
04983  BE97  69 2F       XXBE97 ADC #$2F        ;'/'
04984  BE99  C8                 INY 
04985  BE9A  C8                 INY 
04986  BE9B  C8                 INY 
04987  BE9C  C8                 INY 
04988  BE9D  84 47              STY VARPNT
04989  BE9F  A4 71              LDY $71
04990  BEA1  C8                 INY 
04991  BEA2  AA                 TAX 
04992  BEA3  29 7F              AND #$7F
04993  BEA5  99 FF 00           STA $00FF,Y
04994  BEA8  C6 5D              DEC $5D
04995  BEAA  D0 06              BNE XXBEB2
04996  BEAC  A9 2E              LDA #$2E        ;'.'
04997  BEAE  C8                 INY 
04998  BEAF  99 FF 00           STA $00FF,Y
04999  BEB2  84 71       XXBEB2 STY $71
05000  BEB4  A4 47              LDY VARPNT
05001  BEB6  8A                 TXA 
05002  BEB7  49 FF              EOR #$FF
05003  BEB9  29 80              AND #$80
05004  BEBB  AA                 TAX 
05005  BEBC  C0 24              CPY #$24        ;'$'
05006  BEBE  F0 04              BEQ XXBEC4
05007  BEC0  C0 3C              CPY #$3C        ;'<'
05008  BEC2  D0 A6              BNE XXBE6A
05009  BEC4  A4 71       XXBEC4 LDY $71
05010  BEC6  B9 FF 00    XXBEC6 LDA $00FF,Y
05011  BEC9  88                 DEY 
05012  BECA  C9 30              CMP #$30        ;'0'
05013  BECC  F0 F8              BEQ XXBEC6
05014  BECE  C9 2E              CMP #$2E        ;'.'
05015  BED0  F0 01              BEQ XXBED3
05016  BED2  C8                 INY 
05017  BED3  A9 2B       XXBED3 LDA #$2B        ;'+'
05018  BED5  A6 5E              LDX $5E
05019  BED7  F0 2E              BEQ XXBF07
05020  BED9  10 08              BPL XXBEE3
05021  BEDB  A9 00              LDA #$00
05022  BEDD  38                 SEC 
05023  BEDE  E5 5E              SBC $5E
05024  BEE0  AA                 TAX 
05025  BEE1  A9 2D              LDA #$2D        ;'-'
05026  BEE3  99 01 01    XXBEE3 STA STACK+1,Y
05027  BEE6  A9 45              LDA #$45        ;'E'
05028  BEE8  99 00 01           STA STACK,Y
05029  BEEB  8A                 TXA 
05030  BEEC  A2 2F              LDX #$2F        ;'/'
05031  BEEE  38                 SEC 
05032  BEEF  E8          XXBEEF INX 
05033  BEF0  E9 0A              SBC #$0A
05034  BEF2  B0 FB              BCS XXBEEF






ABASIC.ASM......PAGE 0096

LINE# LOC   CODE        LINE


05035  BEF4  69 3A              ADC #$3A        ;':'
05036  BEF6  99 03 01           STA STACK+3,Y
05037  BEF9  8A                 TXA 
05038  BEFA  99 02 01           STA STACK+2,Y
05039  BEFD  A9 00              LDA #$00
05040  BEFF  99 04 01           STA STACK+4,Y
05041  BF02  F0 08              BEQ XXBF0C
05042  BF04  99 FF 00    XXBF04 STA $00FF,Y
05043  BF07  A9 00       XXBF07 LDA #$00
05044  BF09  99 00 01           STA STACK,Y
05045  BF0C  A9 00       XXBF0C LDA #$00        ; LOW  0100
05046  BF0E  A0 01              LDY #$01        ; HIGH 0100
05047  BF10  60                 RTS 
05048  BF11              ;********************************
05049  BF11              ; 0.5
05050  BF11              ;********************************
05051  BF11  80          ZZBF11 .BYTE $80,$00
05051  BF12  00 
05052  BF13  00          ZZBF13 .BYTE $00,$00,$00
05052  BF14  00 
05052  BF15  00 
05053  BF16              ;********************************
05054  BF16              ; DIVISORS FOR DECIMAL CONVERSION
05055  BF16              ;********************************
05056  BF16  FA          XXBF16 .BYTE $FA
05057  BF17  0A          XXBF17 .BYTE $0A
05058  BF18  1F          XXBF18 .BYTE $1F
05059  BF19  00          XXBF19 .BYTE $00
05060  BF1A  00          ZZBF1A .BYTE $00,$98,$96,$80
05060  BF1B  98 
05060  BF1C  96 
05060  BF1D  80 
05061  BF1E  FF                 .BYTE $FF,$F0,$BD,$C0
05061  BF1F  F0 
05061  BF20  BD 
05061  BF21  C0 
05062  BF22  00                 .BYTE $00,$01,$86,$A0
05062  BF23  01 
05062  BF24  86 
05062  BF25  A0 
05063  BF26  FF                 .BYTE $FF,$FF,$D8,$F0
05063  BF27  FF 
05063  BF28  D8 
05063  BF29  F0 
05064  BF2A  00                 .BYTE $00,$00,$03,$E8
05064  BF2B  00 
05064  BF2C  03 
05064  BF2D  E8 
05065  BF2E  FF                 .BYTE $FF,$FF,$FF,$9C
05065  BF2F  FF 
05065  BF30  FF 
05065  BF31  9C 
05066  BF32  00                 .BYTE $00,$00,$00,$0A
05066  BF33  00 
05066  BF34  00 






ABASIC.ASM......PAGE 0097

LINE# LOC   CODE        LINE


05066  BF35  0A 
05067  BF36  FF                 .BYTE $FF,$FF,$FF,$FF
05067  BF37  FF 
05067  BF38  FF 
05067  BF39  FF 
05068  BF3A              ;********************************
05069  BF3A              ; DIVISORS FOR TIME CONVERSION
05070  BF3A              ;********************************
05071  BF3A  FF          ZZBF3A .BYTE $FF,$DF,$0A,$80
05071  BF3B  DF 
05071  BF3C  0A 
05071  BF3D  80 
05072  BF3E  00                 .BYTE $00,$03,$4B,$C0
05072  BF3F  03 
05072  BF40  4B 
05072  BF41  C0 
05073  BF42  FF                 .BYTE $FF,$FF,$73,$60
05073  BF43  FF 
05073  BF44  73 
05073  BF45  60 
05074  BF46  00                 .BYTE $00,$00,$0E,$10
05074  BF47  00 
05074  BF48  0E 
05074  BF49  10 
05075  BF4A  FF                 .BYTE $FF,$FF,$FD,$A8
05075  BF4B  FF 
05075  BF4C  FD 
05075  BF4D  A8 
05076  BF4E  00                 .BYTE $00,$00,$00,$3C
05076  BF4F  00 
05076  BF50  00 
05076  BF51  3C 
05077  BF52              ;********************************
05078  BF52              ; UNUSED
05079  BF52              ; IS THIS SOME VERSION ID?
05080  BF52              ;********************************
05081  BF52              ; DIFF
05082  BF52              ; C64 = $EC VIC20 = $BF
05083  BF52  EC          ZZBF52 .BYTE $EC
05084  BF53              ;********************************
05085  BF53              ; UNUSED
05086  BF53              ;********************************
05087  BF53  AA          ZZBF53 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
05087  BF54  AA 
05087  BF55  AA 
05087  BF56  AA 
05087  BF57  AA 
05087  BF58  AA 
05087  BF59  AA 
05087  BF5A  AA 
05088  BF5B  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
05088  BF5C  AA 
05088  BF5D  AA 
05088  BF5E  AA 
05088  BF5F  AA 






ABASIC.ASM......PAGE 0098

LINE# LOC   CODE        LINE


05088  BF60  AA 
05088  BF61  AA 
05088  BF62  AA 
05089  BF63  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
05089  BF64  AA 
05089  BF65  AA 
05089  BF66  AA 
05089  BF67  AA 
05089  BF68  AA 
05089  BF69  AA 
05089  BF6A  AA 
05090  BF6B  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA
05090  BF6C  AA 
05090  BF6D  AA 
05090  BF6E  AA 
05090  BF6F  AA 
05090  BF70  AA 
05091  BF71              ;********************************
05092  BF71              ; SQR FUNCTION
05093  BF71              ;********************************
05094  BF71  20 0C BC    XXBF71 JSR XXBC0C
05095  BF74  A9 11              LDA #<ZZBF11    ;#$11
05096  BF76  A0 BF              LDY #>ZZBF11    ;#$BF
05097  BF78  20 A2 BB           JSR XXBBA2
05098  BF7B              ;********************************
05099  BF7B              ; POWER OPERATOR
05100  BF7B              ;********************************
05101  BF7B  F0 70       ZZBF7B BEQ XXBFED
05102  BF7D  A5 69              LDA $69
05103  BF7F  D0 03              BNE XXBF84
05104  BF81  4C F9 B8           JMP XXB8F9
05105  BF84              ;********************************
05106  BF84              ;
05107  BF84              ;********************************
05108  BF84  A2 4E       XXBF84 LDX #$4E        ; LOW  004E
05109  BF86  A0 00              LDY #$00        ; HIGH 004E
05110  BF88  20 D4 BB           JSR XXBBD4
05111  BF8B  A5 6E              LDA $6E
05112  BF8D  10 0F              BPL XXBF9E
05113  BF8F  20 CC BC           JSR XXBCCC
05114  BF92  A9 4E              LDA #$4E        ; LOW  004E
05115  BF94  A0 00              LDY #$00        ; HIGH 004E
05116  BF96  20 5B BC           JSR XXBC5B
05117  BF99  D0 03              BNE XXBF9E
05118  BF9B  98                 TYA 
05119  BF9C  A4 07              LDY CHARAC
05120  BF9E  20 FE BB    XXBF9E JSR XXBBFE
05121  BFA1  98                 TYA 
05122  BFA2  48                 PHA 
05123  BFA3  20 EA B9           JSR XXB9EA
05124  BFA6  A9 4E              LDA #$4E        ; LOW  004E
05125  BFA8  A0 00              LDY #$00        ; HIGH 004E
05126  BFAA  20 28 BA           JSR XXBA28
05127  BFAD  20 ED BF           JSR XXBFED
05128  BFB0  68                 PLA 






ABASIC.ASM......PAGE 0099

LINE# LOC   CODE        LINE


05129  BFB1  4A                 LSR A
05130  BFB2  90 0A              BCC XXBFBE
05131  BFB4              ;********************************
05132  BFB4              ; MINUS OPERATOR
05133  BFB4              ;********************************
05134  BFB4  A5 61       XXBFB4 LDA $61
05135  BFB6  F0 06              BEQ XXBFBE
05136  BFB8  A5 66              LDA $66
05137  BFBA  49 FF              EOR #$FF
05138  BFBC  85 66              STA $66
05139  BFBE  60          XXBFBE RTS 
05140  BFBF              ;********************************
05141  BFBF              ; FLOATING POINT CONSTANDS FOR EXP
05142  BFBF              ;
05143  BFBF              ; 1/LOG(2)
05144  BFBF              ;********************************
05145  BFBF  81          ZZBFBF .BYTE $81,$38,$AA,$3B,$29
05145  BFC0  38 
05145  BFC1  AA 
05145  BFC2  3B 
05145  BFC3  29 
05146  BFC4              ;********************************
05147  BFC4              ; EXP POLYNOMIAL TABLE
05148  BFC4              ;********************************
05149  BFC4  07          ZZBFC4 .BYTE $07       ; DEGREE 8
05150  BFC5  71                 .BYTE $71,$34,$58,$3E,$56
05150  BFC6  34 
05150  BFC7  58 
05150  BFC8  3E 
05150  BFC9  56 
05151  BFCA  74                 .BYTE $74,$16,$7E,$B3,$1B
05151  BFCB  16 
05151  BFCC  7E 
05151  BFCD  B3 
05151  BFCE  1B 
05152  BFCF  77                 .BYTE $77,$2F,$EE,$E3,$85
05152  BFD0  2F 
05152  BFD1  EE 
05152  BFD2  E3 
05152  BFD3  85 
05153  BFD4  7A                 .BYTE $7A,$1D,$84,$1C,$2A
05153  BFD5  1D 
05153  BFD6  84 
05153  BFD7  1C 
05153  BFD8  2A 
05154  BFD9  7C                 .BYTE $7C,$63,$59,$58,$0A
05154  BFDA  63 
05154  BFDB  59 
05154  BFDC  58 
05154  BFDD  0A 
05155  BFDE  7E                 .BYTE $7E,$75,$FD,$E7,$C6
05155  BFDF  75 
05155  BFE0  FD 
05155  BFE1  E7 
05155  BFE2  C6 






ABASIC.ASM......PAGE 0100

LINE# LOC   CODE        LINE


05156  BFE3  80                 .BYTE $80,$31,$72,$18,$10
05156  BFE4  31 
05156  BFE5  72 
05156  BFE6  18 
05156  BFE7  10 
05157  BFE8  81                 .BYTE $81,$00,$00,$00,$00
05157  BFE9  00 
05157  BFEA  00 
05157  BFEB  00 
05157  BFEC  00 
05158  BFED              ;********************************
05159  BFED              ; EXP COMMAND
05160  BFED              ;********************************
05161  BFED  A9 BF       XXBFED LDA #<ZZBFBF    ;#$BF
05162  BFEF  A0 BF              LDY #>ZZBFBF    ;#$BF
05163  BFF1  20 28 BA           JSR XXBA28
05164  BFF4  A5 70              LDA $70
05165  BFF6  69 50              ADC #$50        ;'P'
05166  BFF8  90 03              BCC XXBFFD
05167  BFFA  20 23 BC           JSR XXBC23
05168  BFFD              ; DIFF
05169  BFFD              ; C64 = JMP KERNAL - $4C $00 $E0 VIC20 = STA $56 
JSR - $85 $56 $20
05170  BFFD  4C 00 E0    XXBFFD JMP KERNAL      ;$E000
05171  C000              ;********************************
05172  C000              .FIL   BASICV2EX.ASM
05173  C000              *=$E000
05174  E000              ;********************************
05175  E000              ; COMMODORE 64 KERNAL ($03) ROM 
05176  E000              ;
05177  E000              ; (C) 1982 COMMODORE BUSINESS MACHINES
05178  E000              ;
05179  E000              ; CONTINUATION OF EXP FUNCTION
05180  E000              ;********************************
05181  E000              
05182  E000              ;********************************
05183  E000              ; PAGE ZERO EQUATES
05184  E000              ;********************************
05185  E000              ;ADRAY1 = $03
05186  E000              ;ADRAY2 = $05
05187  E000              ;CHARAC = $07
05188  E000              ;ENDCHR = $08
05189  E000              ;VERCK  = $0A
05190  E000              ;TANSGN = $12
05191  E000              ;CHANNL = $13
05192  E000              ;LINNUM = $14
05193  E000              ;TEMPPT = $16
05194  E000              ;LASTPT = $17
05195  E000              
05196  E000              ;INDEX  = $22
05197  E000              ;TXTTAB = $2B
05198  E000              ;VARTAB = $2D
05199  E000              
05200  E000              ;FRETOP = $33
05201  E000              ;MEMSIZ = $37
05202  E000              






ABASIC.ASM......PAGE 0101

LINE# LOC   CODE        LINE


05203  E000              ;FORPNT = $49
05204  E000              ;DEFPNT = $4E
05205  E000              
05206  E000              ;FOUR6  = $53
05207  E000              ;JMPER  = $54
05208  E000              BASWRK = $57
05209  E000              B
05210  E000              FAC1   = $61
05211  E000              FACEXP = $61
05212  E000              FACHO  = $62
05213  E000              FACSGN = $66
05214  E000              SGNFLG = $67
05215  E000              BITS   = $68
05216  E000              FAC2   = $69
05217  E000              ARGEXP = $69
05218  E000              ARGHO  = $6A
05219  E000              ARGSGN = $6E
05220  E000              ARISGN = $6F
05221  E000              FACOV  = $70
05222  E000              FBUFPT = $71
05223  E000              ;CHRGET = $73
05224  E000              ;CHRGOT = $79
05225  E000              ;TXTPTR = $7A
05226  E000              ;********************************
05227  E000              ; PAGE THREE EQUATES
05228  E000              ;********************************
05229  E000              ;IERROR = $0300
05230  E000              ;IMAIN  = $0302
05231  E000              ;ICRNCH = $0304
05232  E000              ;IQPLOP = $0306
05233  E000              ;IGONE  = $0308
05234  E000              ;IEVAL  = $030A
05235  E000              ;
05236  E000              ;SAREG  = $030C
05237  E000              ;SXREG  = $030D
05238  E000              ;SYREG  = $030E
05239  E000              ;SPREG  = $030F
05240  E000              ;USRPOK = $0310
05241  E000              ;USRADD = $0311
05242  E000              ;********************************
05243  E000              ; BASIC ROM EQUATES
05244  E000              ;********************************
05245  E000              ;WWA376 = $A376 ;READY MESSAGE
05246  E000              ;XXA408 = $A408
05247  E000              ;XXA437 = $A437
05248  E000              ;KKA43A = $A43A
05249  E000              ;XXA474 = $A474
05250  E000              ;KKA483 = $A483
05251  E000              ;KKA52A = $A52A
05252  E000              ;XXA533 = $A533
05253  E000              ;KKA57C = $A57C
05254  E000              ;KKA644 = $A644
05255  E000              ;KKA663 = $A663
05256  E000              ;KKA677 = $A677
05257  E000              ;XXA67A = $A67A






ABASIC.ASM......PAGE 0102

LINE# LOC   CODE        LINE


05258  E000              ;XXA68E = $A68E
05259  E000              ;ZZA71A = $A71A
05260  E000              ;KKA7E4 = $A7E4
05261  E000              ;XXAB1E = $AB1E
05262  E000              ;XXAD8A = $AD8A
05263  E000              ;XXAD9E = $AD9E
05264  E000              ;KKAE86 = $AE86
05265  E000              ;XXAEFD = $AEFD
05266  E000              ;XXAF08 = $AF08
05267  E000              ;
05268  E000              ;ZZB1AA = $B1AA
05269  E000              ;XXB248 = $B248
05270  E000              ;XXB391 = $B391
05271  E000              ;
05272  E000              ;XXB6A3 = $B6A3
05273  E000              ;XXB79E = $B79E
05274  E000              ;XXB7F7 = $B7F7
05275  E000              ;XXB849 = $B849
05276  E000              ;XXB850 = $B850
05277  E000              ;KKB853 = $B853
05278  E000              ;XXB867 = $B867
05279  E000              ;XXB8D7 = $B8D7
05280  E000              ;WWB9BC = $B9BC
05281  E000              ;XXBA28 = $BA28
05282  E000              ;KKBAD4 = $BAD4
05283  E000              ;KKBAB9 = $BAB9
05284  E000              ;KKBB07 = $BB07
05285  E000              ;XXBB0F = $BB0F
05286  E000              ;XXBBA2 = $BBA2
05287  E000              ;ZZBBC7 = $BBC7
05288  E000              ;KKBBCA = $BBCA
05289  E000              ;XXBBD4 = $BBD4
05290  E000              ;XXBC0C = $BC0C
05291  E000              ;KKBC0F = $BC0F
05292  E000              ;XXBC2B = $BC2B
05293  E000              ;XXBCCC = $BCCC
05294  E000              ;XXBDCD = $BDCD
05295  E000              ;XXBFB4 = $BFB4
05296  E000              ;ZZBFC4 = $BFC4 ;EXP POLYNOMIAL TABLE
05297  E000              ;********************************
05298  E000              ; KERNAL ROM EQUATES
05299  E000              ;********************************
05300  E000              XXEA61 = $EA61
05301  E000              ;********************************
05302  E000              ; KERNAL ROM EQUATES
05303  E000              ;********************************
05304  E000              MEMTOP = $FF99
05305  E000              MEMBOT = $FF9C
05306  E000              SETLFS = $FFBA
05307  E000              SETNAM = $FFBD
05308  E000              OPEN   = $FFC0
05309  E000              CLOSE  = $FFC3
05310  E000              CHKIN  = $FFC6
05311  E000              CHKOUT = $FFC9
05312  E000              CLRCHN = $FFCC






ABASIC.ASM......PAGE 0103

LINE# LOC   CODE        LINE


05313  E000              CHRIN  = $FFCF
05314  E000              CHROUT = $FFD2
05315  E000              LOAD   = $FFD5
05316  E000              SAVE   = $FFD8
05317  E000              GETIN  = $FFE4
05318  E000              READST = $FFB7         ;READ I/O STATUS
05319  E000              IOBASE = $FFF3
05320  E000              ;********************************
05321  E000              ; CONTINUATION OF EXP FUNCTION
05322  E000              ;********************************
05323  E000  85 56       KKE000 STA JMPER+2
05324  E002  20 0F BC           JSR KKBC0F
05325  E005  A5 61              LDA FACEXP
05326  E007  C9 88              CMP #$88
05327  E009  90 03              BCC XXE00E
05328  E00B  20 D4 BA    XXE00B JSR KKBAD4
05329  E00E  20 CC BC    XXE00E JSR XXBCCC
05330  E011  A5 07              LDA CHARAC
05331  E013  18                 CLC 
05332  E014  69 81              ADC #$81
05333  E016  F0 F3              BEQ XXE00B
05334  E018  38                 SEC 
05335  E019  E9 01              SBC #$01
05336  E01B  48                 PHA 
05337  E01C  A2 05              LDX #$05
05338  E01E  B5 69       XXE01E LDA ARGEXP,X
05339  E020  B4 61              LDY FACEXP,X
05340  E022  95 61              STA FACEXP,X
05341  E024  94 69              STY ARGEXP,X
05342  E026  CA                 DEX 
05343  E027  10 F5              BPL XXE01E
05344  E029  A5 56              LDA JMPER+2
05345  E02B  85 70              STA FACOV
05346  E02D  20 53 B8           JSR KKB853
05347  E030  20 B4 BF           JSR XXBFB4
05348  E033              ;********************************
05349  E033              ; EXP POLYNOMIAL TABLE
05350  E033              ;********************************
05351  E033  A9 C4              LDA #<ZZBFC4    ;#$C4
05352  E035  A0 BF              LDY #>ZZBFC4    ;#$BF
05353  E037  20 59 E0           JSR XXE059
05354  E03A  A9 00              LDA #$00
05355  E03C  85 6F              STA ARISGN
05356  E03E  68                 PLA 
05357  E03F  20 B9 BA           JSR KKBAB9
05358  E042  60                 RTS 
05359  E043              ;********************************
05360  E043              ; COMPUTE ODD DEGREES FOR SIN AND ATN
05361  E043              ;********************************
05362  E043  85 71       XXE043 STA FBUFPT
05363  E045  84 72              STY FBUFPT+1
05364  E047  20 CA BB           JSR KKBBCA
05365  E04A  A9 57              LDA #$57        ;'W'
05366  E04C  20 28 BA           JSR XXBA28
05367  E04F  20 5D E0           JSR XXE05D






ABASIC.ASM......PAGE 0104

LINE# LOC   CODE        LINE


05368  E052  A9 57              LDA #$57        ;'W'
05369  E054  A0 00              LDY #$00
05370  E056  4C 28 BA           JMP XXBA28
05371  E059              ;********************************
05372  E059              ; COMPUTE POLYNOMIALS ACCORDING TO TABLE INDEXED 
BY AY
05373  E059              ;********************************
05374  E059  85 71       XXE059 STA FBUFPT
05375  E05B  84 72              STY FBUFPT+1
05376  E05D  20 C7 BB    XXE05D JSR ZZBBC7
05377  E060  B1 71              LDA (FBUFPT),Y
05378  E062  85 67              STA SGNFLG
05379  E064  A4 71              LDY FBUFPT
05380  E066  C8                 INY 
05381  E067  98                 TYA 
05382  E068  D0 02              BNE XXE06C
05383  E06A  E6 72              INC FBUFPT+1
05384  E06C  85 71       XXE06C STA FBUFPT
05385  E06E  A4 72              LDY FBUFPT+1
05386  E070  20 28 BA    XXE070 JSR XXBA28
05387  E073  A5 71              LDA FBUFPT
05388  E075  A4 72              LDY FBUFPT+1
05389  E077  18                 CLC 
05390  E078  69 05              ADC #$05
05391  E07A  90 01              BCC XXE07D
05392  E07C  C8                 INY 
05393  E07D  85 71       XXE07D STA FBUFPT
05394  E07F  84 72              STY FBUFPT+1
05395  E081  20 67 B8           JSR XXB867
05396  E084  A9 5C              LDA #$5C        ;'\'
05397  E086  A0 00              LDY #$00
05398  E088  C6 67              DEC SGNFLG
05399  E08A  D0 E4              BNE XXE070
05400  E08C  60                 RTS 
05401  E08D              ;********************************
05402  E08D              ; FLOAT NUMBERS FOR RND
05403  E08D              ;********************************
05404  E08D  98          ZZE08D .BYTE $98,$35,$44,$7A,$00
05404  E08E  35 
05404  E08F  44 
05404  E090  7A 
05404  E091  00 
05405  E092  68          ZZE092 .BYTE $68,$28,$B1,$46,$00
05405  E093  28 
05405  E094  B1 
05405  E095  46 
05405  E096  00 
05406  E097              ;********************************
05407  E097              ; RND FUNCTION
05408  E097              ;********************************
05409  E097  20 2B BC    ZZE097 JSR XXBC2B
05410  E09A  30 37              BMI XXE0D3
05411  E09C  D0 20              BNE XXE0BE
05412  E09E  20 F3 FF           JSR IOBASE
05413  E0A1  86 22              STX INDEX
05414  E0A3  84 23              STY INDEX+1






ABASIC.ASM......PAGE 0105

LINE# LOC   CODE        LINE


05415  E0A5  A0 04              LDY #$04
05416  E0A7  B1 22              LDA (INDEX),Y
05417  E0A9  85 62              STA FACHO
05418  E0AB  C8                 INY 
05419  E0AC  B1 22              LDA (INDEX),Y
05420  E0AE  85 64              STA FACHO+2
05421  E0B0  A0 08              LDY #$08
05422  E0B2  B1 22              LDA (INDEX),Y
05423  E0B4  85 63              STA FACHO+1
05424  E0B6  C8                 INY 
05425  E0B7  B1 22              LDA (INDEX),Y
05426  E0B9  85 65              STA FACHO+3
05427  E0BB  4C E3 E0           JMP XXE0E3
05428  E0BE              ;********************************
05429  E0BE              ;
05430  E0BE              ;********************************
05431  E0BE  A9 8B       XXE0BE LDA #$8B
05432  E0C0  A0 00              LDY #$00
05433  E0C2  20 A2 BB           JSR XXBBA2
05434  E0C5              ;********************************
05435  E0C5              ; FLOAT NUMBERS FOR RND
05436  E0C5              ;********************************
05437  E0C5  A9 8D              LDA #<ZZE08D    ;#$8D
05438  E0C7  A0 E0              LDY #>ZZE08D    ;#$E0
05439  E0C9  20 28 BA           JSR XXBA28
05440  E0CC              ;********************************
05441  E0CC              ; FLOAT NUMBERS FOR RND
05442  E0CC              ;********************************
05443  E0CC  A9 92              LDA #<ZZE092    ;#$92
05444  E0CE  A0 E0              LDY #>ZZE092    ;#$E0
05445  E0D0  20 67 B8           JSR XXB867
05446  E0D3              ;********************************
05447  E0D3              ; 
05448  E0D3              ;********************************
05449  E0D3  A6 65       XXE0D3 LDX FACHO+3
05450  E0D5  A5 62              LDA FACHO
05451  E0D7  85 65              STA FACHO+3
05452  E0D9  86 62              STX FACHO
05453  E0DB  A6 63              LDX FACHO+1
05454  E0DD  A5 64              LDA FACHO+2
05455  E0DF  85 63              STA FACHO+1
05456  E0E1  86 64              STX FACHO+2
05457  E0E3  A9 00       XXE0E3 LDA #$00
05458  E0E5  85 66              STA FACSGN
05459  E0E7  A5 61              LDA FACEXP
05460  E0E9  85 70              STA FACOV
05461  E0EB  A9 80              LDA #$80
05462  E0ED  85 61              STA FACEXP
05463  E0EF  20 D7 B8           JSR XXB8D7
05464  E0F2  A2 8B              LDX #$8B
05465  E0F4  A0 00              LDY #$00
05466  E0F6  4C D4 BB    XXE0F6 JMP XXBBD4
05467  E0F9              ;********************************
05468  E0F9              ; HANDLE ERRORS FOR DIRECT I/O
05469  E0F9              ; CALLS FROM BASIC






ABASIC.ASM......PAGE 0106

LINE# LOC   CODE        LINE


05470  E0F9              ;********************************
05471  E0F9  C9 F0       XXE0F9 CMP #$F0
05472  E0FB  D0 07              BNE XXE104
05473  E0FD  84 38              STY MEMSIZ+1
05474  E0FF  86 37              STX MEMSIZ
05475  E101  4C 63 A6           JMP KKA663
05476  E104              ;********************************
05477  E104              ;
05478  E104              ;********************************
05479  E104  AA          XXE104 TAX 
05480  E105  D0 02              BNE XXE109
05481  E107  A2 1E              LDX #$1E
05482  E109  4C 37 A4    XXE109 JMP XXA437
05483  E10C              ;********************************
05484  E10C              ;
05485  E10C              ;********************************
05486  E10C  20 D2 FF    KKE10C JSR CHROUT
05487  E10F  B0 E8              BCS XXE0F9
05488  E111  60                 RTS 
05489  E112              ;********************************
05490  E112              ;
05491  E112              ;********************************
05492  E112  20 CF FF    KKE112 JSR CHRIN
05493  E115  B0 E2              BCS XXE0F9
05494  E117  60                 RTS 
05495  E118              ;********************************
05496  E118              ;
05497  E118              ;********************************
05498  E118              ; DIFF
05499  E118              ; C64 = $E4AD VIC20 = $FFC9
05500  E118  20 AD E4    KKE118 JSR XXE4AD
05501  E11B  B0 DC              BCS XXE0F9
05502  E11D  60                 RTS 
05503  E11E              ;********************************
05504  E11E              ;
05505  E11E              ;********************************
05506  E11E  20 C6 FF    KKE11E JSR CHKIN
05507  E121  B0 D6              BCS XXE0F9
05508  E123  60                 RTS 
05509  E124              ;********************************
05510  E124              ;
05511  E124              ;********************************
05512  E124  20 E4 FF    KKE124 JSR GETIN
05513  E127  B0 D0              BCS XXE0F9
05514  E129  60                 RTS 
05515  E12A              ;********************************
05516  E12A              ; SYS COMMAND
05517  E12A              ;********************************
05518  E12A  20 8A AD    ZZE12A JSR XXAD8A
05519  E12D  20 F7 B7           JSR XXB7F7
05520  E130  A9 E1              LDA #>KKE147    ;#$E1
05521  E132  48                 PHA 
05522  E133  A9 46              LDA #<KKE147-1  ;#$46      ;'F'
05523  E135  48                 PHA 
05524  E136  AD 0F 03           LDA SPREG






ABASIC.ASM......PAGE 0107

LINE# LOC   CODE        LINE


05525  E139  48                 PHA 
05526  E13A  AD 0C 03           LDA SAREG
05527  E13D  AE 0D 03           LDX SXREG
05528  E140  AC 0E 03           LDY SYREG
05529  E143  28                 PLP 
05530  E144  6C 14 00           JMP (LINNUM)
05531  E147              ;********************************
05532  E147              ;
05533  E147              ;********************************
05534  E147  08          KKE147 PHP 
05535  E148  8D 0C 03           STA SAREG
05536  E14B  8E 0D 03           STX SXREG
05537  E14E  8C 0E 03           STY SYREG
05538  E151  68                 PLA 
05539  E152  8D 0F 03           STA SPREG
05540  E155  60                 RTS 
05541  E156              ;********************************
05542  E156              ; SAVE COMMAND
05543  E156              ;********************************
05544  E156  20 D4 E1    ZZE156 JSR XXE1D4
05545  E159  A6 2D              LDX VARTAB
05546  E15B  A4 2E              LDY VARTAB+1
05547  E15D  A9 2B              LDA #TXTTAB      ;'+'
05548  E15F  20 D8 FF           JSR SAVE
05549  E162  B0 95              BCS XXE0F9
05550  E164  60                 RTS 
05551  E165              ;********************************
05552  E165              ; VERIFY COMMAND
05553  E165              ;********************************
05554  E165  A9 01       ZZE165 LDA #$01
05555  E167              ;********************************
05556  E167  2C                 .BYTE $2C
05557  E168              ;********************************
05558  E168              ; LOAD COMMAND
05559  E168              ;********************************
05560  E168  A9 00       ZZE168 LDA #$00
05561  E16A  85 0A              STA VERCK
05562  E16C  20 D4 E1           JSR XXE1D4
05563  E16F  A5 0A              LDA VERCK
05564  E171  A6 2B              LDX TXTTAB
05565  E173  A4 2C              LDY TXTTAB+1
05566  E175  20 D5 FF           JSR LOAD
05567  E178  B0 57              BCS XXE1D1
05568  E17A  A5 0A              LDA VERCK
05569  E17C              ; DIFF
05570  E17C              ; C64 = BEQ $17 VIC20 = BEQ $1A
05571  E17C  F0 17              BEQ XXE195
05572  E17E  A2 1C              LDX #$1C
05573  E180  20 B7 FF           JSR READST
05574  E183  29 10              AND #$10
05575  E185              ; C64 = BNE XXE19E VIC20 = BEQ XXE187
05576  E185              ; C64 = BNE $17 VIC20 = BEQ $03
05577  E185  D0 17              BNE XXE19E
05578  E187  A5 7A              LDA TXTPTR
05579  E189  C9 02              CMP #$02






ABASIC.ASM......PAGE 0108

LINE# LOC   CODE        LINE


05580  E18B  F0 07              BEQ XXE194
05581  E18D  A9 64              LDA #<WWA364    ;#$64
05582  E18F  A0 A3              LDY #>WWA364    ;#$A3
05583  E191  4C 1E AB           JMP XXAB1E
05584  E194              ;********************************
05585  E194              ;
05586  E194              ;********************************
05587  E194  60          XXE194 RTS 
05588  E195              ;********************************
05589  E195              ;
05590  E195              ;********************************
05591  E195  20 B7 FF    XXE195 JSR READST
05592  E198  29 BF              AND #$BF
05593  E19A  F0 05              BEQ XXE1A1
05594  E19C  A2 1D              LDX #$1D
05595  E19E  4C 37 A4    XXE19E JMP XXA437
05596  E1A1              ;********************************
05597  E1A1              ;
05598  E1A1              ;********************************
05599  E1A1  A5 7B       XXE1A1 LDA TXTPTR+1
05600  E1A3  C9 02              CMP #$02
05601  E1A5  D0 0E              BNE XXE1B5
05602  E1A7  86 2D              STX VARTAB
05603  E1A9  84 2E              STY VARTAB+1
05604  E1AB  A9 76              LDA #<WWA376    ;#$76
05605  E1AD  A0 A3              LDY #>WWA376    ;#$A3
05606  E1AF  20 1E AB           JSR XXAB1E
05607  E1B2  4C 2A A5           JMP KKA52A
05608  E1B5              ;********************************
05609  E1B5              ;
05610  E1B5              ;********************************
05611  E1B5  20 8E A6    XXE1B5 JSR XXA68E
05612  E1B8              ; DIFF
05613  E1B8              ; C64 JSR $A533 VIC20 = NOTHING
05614  E1B8  20 33 A5           JSR XXA533
05615  E1BB              ; DIFF
05616  E1BB              ; C64 = JMP $A677 VIC20 = JMP $E476
05617  E1BB  4C 77 A6           JMP KKA677
05618  E1BE              ;********************************
05619  E1BE              ; OPEN COMMAND
05620  E1BE              ;********************************
05621  E1BE  20 19 E2    ZZE1BE JSR XXE219
05622  E1C1  20 C0 FF           JSR OPEN
05623  E1C4  B0 0B              BCS XXE1D1
05624  E1C6  60                 RTS 
05625  E1C7              ;********************************
05626  E1C7              ; CLOSE COMMAND
05627  E1C7              ;********************************
05628  E1C7  20 19 E2    ZZE1C7 JSR XXE219
05629  E1CA  A5 49              LDA FORPNT
05630  E1CC  20 C3 FF           JSR CLOSE
05631  E1CF              ; DIFF
05632  E1CF              ; C64 = BCC XXE194 VIC20 = BCC XXE194
05633  E1CF              ; C64 = BCC $C3    VIC20 = BCC $C6
05634  E1CF  90 C3              BCC XXE194






ABASIC.ASM......PAGE 0109

LINE# LOC   CODE        LINE


05635  E1D1  4C F9 E0    XXE1D1 JMP XXE0F9
05636  E1D4              ;********************************
05637  E1D4              ; SET PARAMETERS FOR LOAD/VERIFY/SAVE
05638  E1D4              ;********************************
05639  E1D4  A9 00       XXE1D4 LDA #$00
05640  E1D6  20 BD FF           JSR SETNAM
05641  E1D9  A2 01              LDX #$01
05642  E1DB  A0 00              LDY #$00
05643  E1DD  20 BA FF           JSR SETLFS
05644  E1E0  20 06 E2           JSR XXE206
05645  E1E3  20 57 E2           JSR XXE257
05646  E1E6  20 06 E2           JSR XXE206
05647  E1E9  20 00 E2           JSR XXE200
05648  E1EC  A0 00              LDY #$00
05649  E1EE  86 49              STX FORPNT
05650  E1F0  20 BA FF           JSR SETLFS
05651  E1F3  20 06 E2           JSR XXE206
05652  E1F6  20 00 E2           JSR XXE200
05653  E1F9  8A                 TXA 
05654  E1FA  A8                 TAY 
05655  E1FB  A6 49              LDX FORPNT
05656  E1FD  4C BA FF           JMP SETLFS
05657  E200              ;********************************
05658  E200              ; SKIP COMMA AND GET INTEGER IN X
05659  E200              ;********************************
05660  E200  20 0E E2    XXE200 JSR XXE20E
05661  E203  4C 9E B7           JMP XXB79E
05662  E206              ;********************************
05663  E206              ; GET CHARACTER AND CHECK FOR END OF LINE
05664  E206              ;********************************
05665  E206  20 79 00    XXE206 JSR CHRGOT
05666  E209  D0 02              BNE XXE20D
05667  E20B  68                 PLA 
05668  E20C  68                 PLA 
05669  E20D  60          XXE20D RTS 
05670  E20E              ;********************************
05671  E20E              ; CHECK FOR COMMA AND SKIP IT
05672  E20E              ;********************************
05673  E20E  20 FD AE    XXE20E JSR XXAEFD
05674  E211  20 79 00    XXE211 JSR CHRGOT
05675  E214  D0 F7              BNE XXE20D
05676  E216  4C 08 AF           JMP XXAF08
05677  E219              ;********************************
05678  E219              ; GET OPEN/CLOSE PARAMETERS
05679  E219              ;********************************
05680  E219  A9 00       XXE219 LDA #$00
05681  E21B  20 BD FF           JSR SETNAM
05682  E21E  20 11 E2           JSR XXE211
05683  E221  20 9E B7           JSR XXB79E
05684  E224  86 49              STX FORPNT
05685  E226  8A                 TXA 
05686  E227  A2 01              LDX #$01
05687  E229  A0 00              LDY #$00
05688  E22B  20 BA FF           JSR SETLFS
05689  E22E  20 06 E2           JSR XXE206






ABASIC.ASM......PAGE 0110

LINE# LOC   CODE        LINE


05690  E231  20 00 E2           JSR XXE200
05691  E234  86 4A              STX FORPNT+1
05692  E236  A0 00              LDY #$00
05693  E238  A5 49              LDA FORPNT
05694  E23A  E0 03              CPX #$03
05695  E23C  90 01              BCC XXE23F
05696  E23E  88                 DEY 
05697  E23F  20 BA FF    XXE23F JSR SETLFS
05698  E242  20 06 E2           JSR XXE206
05699  E245  20 00 E2           JSR XXE200
05700  E248  8A                 TXA 
05701  E249  A8                 TAY 
05702  E24A  A6 4A              LDX FORPNT+1
05703  E24C  A5 49              LDA FORPNT
05704  E24E  20 BA FF           JSR SETLFS
05705  E251  20 06 E2           JSR XXE206
05706  E254  20 0E E2           JSR XXE20E
05707  E257  20 9E AD    XXE257 JSR XXAD9E
05708  E25A  20 A3 B6           JSR XXB6A3
05709  E25D  A6 22              LDX INDEX
05710  E25F  A4 23              LDY INDEX+1
05711  E261  4C BD FF           JMP SETNAM
05712  E264              ;********************************
05713  E264              ; COS FUNCTION
05714  E264              ;********************************
05715  E264  A9 E0       KKE264 LDA #<ZZE2E0      ; LOW  E2E0
05716  E266  A0 E2              LDY #>ZZE2E0      ; HIGH E2E0
05717  E268  20 67 B8           JSR XXB867
05718  E26B              ;********************************
05719  E26B              ; SIN FUNCTION
05720  E26B              ;********************************
05721  E26B  20 0C BC    XXE26B JSR XXBC0C
05722  E26E  A9 E5              LDA #<ZZE2E5      ; LOW  E2E5
05723  E270  A0 E2              LDY #>ZZE2E5      ; HIGH E2E5
05724  E272  A6 6E              LDX ARGSGN
05725  E274  20 07 BB           JSR KKBB07
05726  E277  20 0C BC           JSR XXBC0C
05727  E27A  20 CC BC           JSR XXBCCC
05728  E27D  A9 00              LDA #$00
05729  E27F  85 6F              STA ARISGN
05730  E281  20 53 B8           JSR KKB853
05731  E284  A9 EA              LDA #<ZZE2EA      ; LOW  E2EA
05732  E286  A0 E2              LDY #>ZZE2EA      ; HIGH E2EA
05733  E288  20 50 B8           JSR XXB850
05734  E28B  A5 66              LDA FACSGN
05735  E28D  48                 PHA 
05736  E28E  10 0D              BPL XXE29D
05737  E290  20 49 B8           JSR XXB849
05738  E293  A5 66              LDA FACSGN
05739  E295  30 09              BMI XXE2A0
05740  E297  A5 12              LDA TANSGN
05741  E299  49 FF              EOR #$FF
05742  E29B  85 12              STA TANSGN
05743  E29D  20 B4 BF    XXE29D JSR XXBFB4
05744  E2A0  A9 EA       XXE2A0 LDA #<ZZE2EA      ; LOW  E2EA






ABASIC.ASM......PAGE 0111

LINE# LOC   CODE        LINE


05745  E2A2  A0 E2              LDY #>ZZE2EA      ; HIGH E2EA
05746  E2A4  20 67 B8           JSR XXB867
05747  E2A7  68                 PLA 
05748  E2A8  10 03              BPL XXE2AD
05749  E2AA  20 B4 BF           JSR XXBFB4
05750  E2AD  A9 EF       XXE2AD LDA #<ZZE2EF    ;#$EF
05751  E2AF  A0 E2              LDY #>ZZE2EF    ;#$E2
05752  E2B1  4C 43 E0           JMP XXE043
05753  E2B4              ;********************************
05754  E2B4              ; TAN FUNCTION
05755  E2B4              ;********************************
05756  E2B4  20 CA BB    ZZE2B4 JSR KKBBCA
05757  E2B7  A9 00              LDA #$00
05758  E2B9  85 12              STA TANSGN
05759  E2BB  20 6B E2           JSR XXE26B
05760  E2BE  A2 4E              LDX #<DEFPNT    ;#$4E      ; LOW  004E
05761  E2C0  A0 00              LDY #>DEFPNT    ;#$00      ; HIGH 004E
05762  E2C2  20 F6 E0           JSR XXE0F6
05763  E2C5  A9 57              LDA #<BASWRK    ;#$57      ; LOW  0057
05764  E2C7  A0 00              LDY #>BASWRK    ;#$00      ; HIGH 0057
05765  E2C9  20 A2 BB           JSR XXBBA2
05766  E2CC  A9 00              LDA #$00
05767  E2CE  85 66              STA FACSGN
05768  E2D0  A5 12              LDA TANSGN
05769  E2D2  20 DC E2           JSR XXE2DC
05770  E2D5  A9 4E              LDA #<DEFPNT    ;#$4E      ; LOW  004E
05771  E2D7  A0 00              LDY #>DEFPNT    ;#$00      ; HIGH 004E
05772  E2D9  4C 0F BB           JMP XXBB0F
05773  E2DC              ;********************************
05774  E2DC              ;
05775  E2DC              ;********************************
05776  E2DC  48          XXE2DC PHA 
05777  E2DD  4C 9D E2           JMP XXE29D
05778  E2E0              ;********************************
05779  E2E0              ; FLOAT NUMBERS FOR SIN, COS AND TAN
05780  E2E0              ;********************************
05781  E2E0              ; 0.5 * PI
05782  E2E0  81          ZZE2E0 .BYTE $81,$49,$0F,$DA,$A2
05782  E2E1  49 
05782  E2E2  0F 
05782  E2E3  DA 
05782  E2E4  A2 
05783  E2E5              ; 2 * PI
05784  E2E5  83          ZZE2E5 .BYTE $83,$49,$0F,$DA,$A2
05784  E2E6  49 
05784  E2E7  0F 
05784  E2E8  DA 
05784  E2E9  A2 
05785  E2EA              ; 0.25 * PI
05786  E2EA  7F          ZZE2EA .BYTE $7F,$00,$00,$00,$00
05786  E2EB  00 
05786  E2EC  00 
05786  E2ED  00 
05786  E2EE  00 
05787  E2EF              ;********************************






ABASIC.ASM......PAGE 0112

LINE# LOC   CODE        LINE


05788  E2EF              ; POLYNOMIAL TABLE
05789  E2EF              ;********************************
05790  E2EF  05          ZZE2EF .BYTE $05       ; DEGREE 6
05791  E2F0  84                 .BYTE $84,$E6,$1A,$2D,$1B
05791  E2F1  E6 
05791  E2F2  1A 
05791  E2F3  2D 
05791  E2F4  1B 
05792  E2F5  86                 .BYTE $86,$28,$07,$FB,$F8
05792  E2F6  28 
05792  E2F7  07 
05792  E2F8  FB 
05792  E2F9  F8 
05793  E2FA  87                 .BYTE $87,$99,$68,$89,$01
05793  E2FB  99 
05793  E2FC  68 
05793  E2FD  89 
05793  E2FE  01 
05794  E2FF  87                 .BYTE $87,$23,$35,$DF,$E1
05794  E300  23 
05794  E301  35 
05794  E302  DF 
05794  E303  E1 
05795  E304  86                 .BYTE $86,$A5,$5D,$E7,$28
05795  E305  A5 
05795  E306  5D 
05795  E307  E7 
05795  E308  28 
05796  E309  83                 .BYTE $83,$49,$0F,$DA,$A2
05796  E30A  49 
05796  E30B  0F 
05796  E30C  DA 
05796  E30D  A2 
05797  E30E              ;********************************
05798  E30E              ; ATN FUNCTION
05799  E30E              ;********************************
05800  E30E  A5 66       KKE30E LDA FACSGN
05801  E310  48                 PHA 
05802  E311  10 03              BPL XXE316
05803  E313  20 B4 BF           JSR XXBFB4
05804  E316  A5 61       XXE316 LDA FACEXP
05805  E318  48                 PHA 
05806  E319  C9 81              CMP #$81
05807  E31B  90 07              BCC XXE324
05808  E31D  A9 BC              LDA #<WWB9BC    ;#$BC      ; LOW  B9BC
05809  E31F  A0 B9              LDY #>WWB9BC    ;#$B9      ; HIGH B9BC
05810  E321  20 0F BB           JSR XXBB0F
05811  E324  A9 3E       XXE324 LDA #<ZZE33E      ; LOW  E33E
05812  E326  A0 E3              LDY #>ZZE33E      ; HIGH E33E
05813  E328  20 43 E0           JSR XXE043
05814  E32B  68                 PLA 
05815  E32C  C9 81              CMP #$81
05816  E32E  90 07              BCC XXE337
05817  E330  A9 E0              LDA #<ZZE2E0      ; LOW  E2E0
05818  E332  A0 E2              LDY #>ZZE2E0      ; HIGH E2E0






ABASIC.ASM......PAGE 0113

LINE# LOC   CODE        LINE


05819  E334  20 50 B8           JSR XXB850
05820  E337  68          XXE337 PLA 
05821  E338  10 03              BPL XXE33D
05822  E33A  4C B4 BF           JMP XXBFB4
05823  E33D              ;********************************
05824  E33D              ;
05825  E33D              ;********************************
05826  E33D  60          XXE33D RTS 
05827  E33E              ;********************************
05828  E33E              ; FLOAT NUMBERS FOR ATN
05829  E33E              ; POLYNOMIAL TABLE
05830  E33E              ;********************************
05831  E33E  0B          ZZE33E .BYTE $0B       ; DEGREE 12
05832  E33F  76                 .BYTE $76,$B3,$83,$BD,$D3
05832  E340  B3 
05832  E341  83 
05832  E342  BD 
05832  E343  D3 
05833  E344  79                 .BYTE $79,$1E,$F4,$A6,$F5
05833  E345  1E 
05833  E346  F4 
05833  E347  A6 
05833  E348  F5 
05834  E349  7B                 .BYTE $7B,$83,$FC,$B0,$10
05834  E34A  83 
05834  E34B  FC 
05834  E34C  B0 
05834  E34D  10 
05835  E34E  7C                 .BYTE $7C,$0C,$1F,$67,$CA
05835  E34F  0C 
05835  E350  1F 
05835  E351  67 
05835  E352  CA 
05836  E353  7C                 .BYTE $7C,$DE,$53,$CB,$C1
05836  E354  DE 
05836  E355  53 
05836  E356  CB 
05836  E357  C1 
05837  E358  7D                 .BYTE $7D,$14,$64,$70,$4C
05837  E359  14 
05837  E35A  64 
05837  E35B  70 
05837  E35C  4C 
05838  E35D  7D                 .BYTE $7D,$B7,$EA,$51,$7A
05838  E35E  B7 
05838  E35F  EA 
05838  E360  51 
05838  E361  7A 
05839  E362  7D                 .BYTE $7D,$63,$30,$88,$7E
05839  E363  63 
05839  E364  30 
05839  E365  88 
05839  E366  7E 
05840  E367  7E                 .BYTE $7E,$92,$44,$99,$3A
05840  E368  92 






ABASIC.ASM......PAGE 0114

LINE# LOC   CODE        LINE


05840  E369  44 
05840  E36A  99 
05840  E36B  3A 
05841  E36C  7E                 .BYTE $7E,$4C,$CC,$91,$C7
05841  E36D  4C 
05841  E36E  CC 
05841  E36F  91 
05841  E370  C7 
05842  E371  7F                 .BYTE $7F,$AA,$AA,$AA,$13
05842  E372  AA 
05842  E373  AA 
05842  E374  AA 
05842  E375  13 
05843  E376  81                 .BYTE $81,$00,$00,$00,$00
05843  E377  00 
05843  E378  00 
05843  E379  00 
05843  E37A  00 
05844  E37B              ;********************************
05845  E37B              ; WARM START ENTRY
05846  E37B              ;********************************
05847  E37B              ; DIFF
05848  E37B              ; MANY DIFFERENCES FROM HERE ON 
05849  E37B              ;BASWRM = *
05850  E37B  20 CC FF    KKE37B JSR CLRCHN
05851  E37E  A9 00              LDA #$00
05852  E380  85 13              STA CHANNL
05853  E382  20 7A A6           JSR XXA67A
05854  E385  58                 CLI 
05855  E386  A2 80       XXE386 LDX #$80
05856  E388  6C 00 03           JMP (IERROR)    ; NORMALLY E38B
05857  E38B              ;********************************
05858  E38B              ; HANDLE ERROR MESSAGES
05859  E38B              ;********************************
05860  E38B  8A          XXE38B TXA 
05861  E38C  30 03              BMI XXE391
05862  E38E  4C 3A A4           JMP KKA43A
05863  E391              ;********************************
05864  E391  4C 74 A4    XXE391 JMP XXA474
05865  E394              ;********************************
05866  E394              ; RESET ROUTINE
05867  E394              ;********************************
05868  E394              ;BASCLD = *
05869  E394  20 53 E4    ZZE394 JSR XXE453
05870  E397  20 BF E3           JSR XXE3BF
05871  E39A  20 22 E4           JSR XXE422
05872  E39D  A2 FB              LDX #$FB
05873  E39F  9A                 TXS 
05874  E3A0  D0 E4              BNE XXE386
05875  E3A2              ;********************************
05876  E3A2              ; CHARACTER FETCH CODE FOR ZERO PAGE $0073-$008F
05877  E3A2              ;********************************
05878  E3A2  E6 7A       XXE3A2 INC TXTPTR
05879  E3A4  D0 02              BNE XXE3A8
05880  E3A6  E6 7B              INC TXTPTR+1






ABASIC.ASM......PAGE 0115

LINE# LOC   CODE        LINE


05881  E3A8  AD 60 EA    XXE3A8 LDA XXEA61-1
05882  E3AB  C9 3A              CMP #$3A        ; COLON ;':'
05883  E3AD  B0 0A              BCS XXE3B9
05884  E3AF  C9 20              CMP #$20        ; SPACE ' '
05885  E3B1  F0 EF              BEQ XXE3A2
05886  E3B3  38                 SEC 
05887  E3B4  E9 30              SBC #$30        ; '0'
05888  E3B6  38                 SEC 
05889  E3B7  E9 D0              SBC #$D0
05890  E3B9  60          XXE3B9 RTS 
05891  E3BA              ;********************************
05892  E3BA              ; FIRST RND SEED VALUE
05893  E3BA              ;********************************
05894  E3BA  80          WWE3BA .BYTE $80,$4F,$C7,$52,$58
05894  E3BB  4F 
05894  E3BC  C7 
05894  E3BD  52 
05894  E3BE  58 
05895  E3BF              ;********************************
05896  E3BF              ; INITIALISATION OF BASIC
05897  E3BF              ;********************************
05898  E3BF  A9 4C       XXE3BF LDA #$4C        ;'L'
05899  E3C1  85 54              STA JMPER
05900  E3C3  8D 10 03           STA USRPOK
05901  E3C6  A9 48              LDA #<XXB248    ;#$48      ; LOW  B248
05902  E3C8  A0 B2              LDY #>XXB248    ;#$B2      ; HIGH B248
05903  E3CA  8D 11 03           STA USRADD
05904  E3CD  8C 12 03           STY USRADD+1
05905  E3D0  A9 91              LDA #<XXB391    ;#$91      ; LOW B391
05906  E3D2  A0 B3              LDY #>XXB391    ;#$B3      ; HIGH B391
05907  E3D4  85 05              STA ADRAY2
05908  E3D6  84 06              STY ADRAY2+1
05909  E3D8  A9 AA              LDA #<ZZB1AA    ;#$AA      ; LOW  B1AA
05910  E3DA  A0 B1              LDY #>ZZB1AA    ;#$B1      ; HIGH B1AA
05911  E3DC  85 03              STA ADRAY1
05912  E3DE  84 04              STY ADRAY1+1
05913  E3E0  A2 1C              LDX #$1C
05914  E3E2  BD A2 E3    XXE3E2 LDA XXE3A2,X
05915  E3E5  95 73              STA CHRGET,X
05916  E3E7  CA                 DEX 
05917  E3E8  10 F8              BPL XXE3E2
05918  E3EA  A9 03              LDA #$03
05919  E3EC  85 53              STA FOUR6
05920  E3EE  A9 00              LDA #$00
05921  E3F0  85 68              STA BITS
05922  E3F2  85 13              STA CHANNL
05923  E3F4  85 18              STA LASTPT+1
05924  E3F6  A2 01              LDX #$01
05925  E3F8  8E FD 01           STX $01FD
05926  E3FB  8E FC 01           STX $01FC
05927  E3FE  A2 19              LDX #$19
05928  E400  86 16              STX TEMPPT
05929  E402  38                 SEC 
05930  E403  20 9C FF           JSR MEMBOT
05931  E406  86 2B              STX TXTTAB






ABASIC.ASM......PAGE 0116

LINE# LOC   CODE        LINE


05932  E408  84 2C              STY TXTTAB+1
05933  E40A  38                 SEC 
05934  E40B  20 99 FF           JSR MEMTOP
05935  E40E  86 37              STX MEMSIZ
05936  E410  84 38              STY MEMSIZ+1
05937  E412  86 33              STX FRETOP
05938  E414  84 34              STY FRETOP+1
05939  E416  A0 00              LDY #$00
05940  E418  98                 TYA 
05941  E419  91 2B              STA (TXTTAB),Y
05942  E41B  E6 2B              INC TXTTAB
05943  E41D  D0 02              BNE XXE421
05944  E41F  E6 2C              INC TXTTAB+1
05945  E421  60          XXE421 RTS 
05946  E422              ;********************************
05947  E422              ; PRINT BASIC START UP MESSAGES
05948  E422              ;********************************
05949  E422  A5 2B       XXE422 LDA TXTTAB
05950  E424  A4 2C              LDY TXTTAB+1
05951  E426  20 08 A4           JSR XXA408
05952  E429  A9 73              LDA #<ZZE473    ; LOW  E473
05953  E42B  A0 E4              LDY #>ZZE473    ; HIGH E473
05954  E42D  20 1E AB           JSR XXAB1E
05955  E430  A5 37              LDA MEMSIZ
05956  E432  38                 SEC 
05957  E433  E5 2B              SBC TXTTAB
05958  E435  AA                 TAX 
05959  E436  A5 38              LDA MEMSIZ+1
05960  E438  E5 2C              SBC TXTTAB+1
05961  E43A  20 CD BD           JSR XXBDCD
05962  E43D  A9 60              LDA #<ZZE460    ; LOW  E460
05963  E43F  A0 E4              LDY #>ZZE460    ; HIGH E460
05964  E441  20 1E AB           JSR XXAB1E
05965  E444  4C 44 A6           JMP KKA644
05966  E447              ;********************************
05967  E447              ; VECTORS FOR $0300-$030B
05968  E447              ;********************************
05969  E447  8B E3       XXE447 .WORD XXE38B    ;$E38B
05970  E449  83 A4              .WORD KKA483    ;$A483
05971  E44B  7C A5              .WORD KKA57C    ;$A57C
05972  E44D  1A A7              .WORD ZZA71A    ;$A71A
05973  E44F  E4 A7              .WORD KKA7E4    ;$A7E4
05974  E451  86 AE              .WORD KKAE86    ;$AE86
05975  E453              ;********************************
05976  E453              ; INITIALIZE VECTORS
05977  E453              ;********************************
05978  E453  A2 0B       XXE453 LDX #$0B
05979  E455  BD 47 E4    XXE455 LDA XXE447,X
05980  E458  9D 00 03           STA IERROR,X
05981  E45B  CA                 DEX 
05982  E45C  10 F7              BPL XXE455
05983  E45E  60                 RTS 
05984  E45F              ;********************************
05985  E45F              ; STARTUP MESSAGES
05986  E45F              ;********************************






ABASIC.ASM......PAGE 0117

LINE# LOC   CODE        LINE


05987  E45F  00          ZZE45F .BYTE $00
05988  E460  20 42       ZZE460 .BYTE ' BASIC BYTES FREE'
05989  E471  0D                 .BYTE $0D
05990  E472  00                 .BYTE $00
05991  E473  93          ZZE473 .BYTE $93
05992  E474  0D                 .BYTE $0D
05993  E475  20 20              .BYTE '    **** COMMODORE 64 BASIC V2 ****
'
05994  E498  0D                 .BYTE $0D
05995  E499  0D                 .BYTE $0D
05996  E49A  20 36              .BYTE ' 64K RAM SYSTEM  '
05997  E4AB  00                 .BYTE $00
05998  E4AC  81          ZZE4AC .BYTE $81
05999  E4AD              ;********************************
06000  E4AD              ; SET OUTPUT DEVICE
06001  E4AD              ;********************************
06002  E4AD  48          XXE4AD PHA 
06003  E4AE  20 C9 FF           JSR CHKOUT
06004  E4B1  AA                 TAX 
06005  E4B2  68                 PLA 
06006  E4B3  90 01              BCC XXE4B6
06007  E4B5  8A                 TXA 
06008  E4B6  60          XXE4B6 RTS 
06009  E4B7              ;********************************
06010  E4B7              ; UNUSED
06011  E4B7              ;********************************
06012  E4B7  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
06012  E4B8  AA 
06012  E4B9  AA 
06012  E4BA  AA 
06012  E4BB  AA 
06012  E4BC  AA 
06012  E4BD  AA 
06012  E4BE  AA 
06013  E4BF  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
06013  E4C0  AA 
06013  E4C1  AA 
06013  E4C2  AA 
06013  E4C3  AA 
06013  E4C4  AA 
06013  E4C5  AA 
06013  E4C6  AA 
06014  E4C7  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
06014  E4C8  AA 
06014  E4C9  AA 
06014  E4CA  AA 
06014  E4CB  AA 
06014  E4CC  AA 
06014  E4CD  AA 
06014  E4CE  AA 
06015  E4CF  AA                 .BYTE $AA,$AA,$AA,$AA
06015  E4D0  AA 
06015  E4D1  AA 
06015  E4D2  AA 
06016  E4D3              ;********************************
06017  E4D3              ; RS-232 EQUATES






ABASIC.ASM......PAGE 0118

LINE# LOC   CODE        LINE


06018  E4D3              ;********************************
06019  E4D3              RINONE = $A9
06020  E4D3              RIPRTY = $AB
06021  E4D3              ;********************************
06022  E4D3              ; RS-232
06023  E4D3              ;********************************
06024  E4D3  85 A9       XXE4D3 STA RINONE
06025  E4D5  A9 01              LDA #$01
06026  E4D7  85 AB              STA RIPRTY
06027  E4D9  60                 RTS 
06028  E4DA              ;********************************
06029  E4DA              .END


ERRORS = 00000


SYMBOL TABLE

SYMBOL VALUE
 ADRAY1   0003    ADRAY2   0005    ARGEXP   0069    ARGHO    006A
 ARGSGN   006E    ARISGN   006F    ARYTAB   002F    AUTODN   0292
 BASCLD   E394    BASWRK   0057    BASWRM   E37B    BAUDOF   0299
 BITNUM   0298    BITS     0068    BUF      0200    CBINV    0316
 CHANNL   0013    CHARAC   0007    CHKIN    FFC6    CHKOUT   FFC9
 CHRGET   0073    CHRGOT   0079    CHRIN    FFCF    CHROUT   FFD2
 CIA1CA   02A2    CIA1CB   02A4    CIA1IR   02A3    CLALL    FFE7
 CLOSE    FFC3    CLRCHN   FFCC    COLOR    0286    COUNT    000B
 CURLIN   0039    DATLIN   003F    DATPRT   0041    DEFPNT   004E
 DIMFLG   000C    DSCPNT   0050    ENABL    02A1    ENDCHR   0008
 FAC1     0061    FAC2     0069    FACEXP   0061    FACHO    0062
 FACOV    0070    FACSGN   0066    FAT      0263    FBUFPT   0071
 FORPNT   0049    FOUR6    0053    FRESPC   0035    FRETOP   0033
 GARBFL   000F    GDCOL    0287    GETIN    FFE4    HIBASE   0288
 IBASIN   0324    IBSOUT   0326    ICHKIN   031E    ICKOUT   0320
 ICLALL   032C    ICLOSE   031C    ICLRCH   0322    ICRNCH   0304
 IERROR   0300    IEVAL    030A    IGETIN   032A    IGONE    0308
 ILOAD    0330    IMAIN    0302    INDEX    0022    INPFLG   0011
 INPPTR   0043    INTFLG   000E    IOBASE   FFF3    IOPNE    031A
 IQPLOP   0306    IRQTMP   029F    ISAVE    0332    ISTOP    0328
 JMPER    0054    KERNAL   E000    KEYD     0277    KEYLOG   028F
 KKA43A   A43A    KKA483   A483    KKA52A   A52A    KKA57C   A57C
 KKA644   A644    KKA663   A663    KKA677   A677    KKA7E4   A7E4
 KKAE86   AE86    KKB853   B853    KKBAB9   BAB9    KKBACA   BACA
 KKBAD4   BAD4    KKBB07   BB07    KKBBCA   BBCA    KKBC0F   BC0F
 KKE000   E000    KKE10C   E10C    KKE112   E112    KKE118   E118
 KKE11E   E11E    KKE124   E124    KKE12A   E12A    KKE147   E147
 KKE156   E156    KKE165   E165    KKE168   E168    KKE1BE   E1BE
 KKE1C7   E1C7    KKE264   E264    KKE30E   E30E    KKE37B   E37B
 LASTPT   0017    LAT      0259    LINNUM   0014    LOAD     FFD5
 LSTSHF   028E    M51AJB   0295    M51CDR   0294    M51CTR   0293
 MEMBOT   FF9C    MEMSI2   0282    MEMSIZ   0037    MEMSTR   0281
 MEMTOP   FF99    MODE     0291    NEXSRO   02A5    NMINV    0318
 OLDLIN   003B    OLDTXT   003D    OPEN     FFC0    OPMASK   004D








SYMBOL TABLE

SYMBOL VALUE
 OPPTR    004B    PALNTS   02A6    PLOT     FFF0    POINTB   007C
 POLY1    E043    RDTIM    FFDE    READST   FFB7    RESHO    0026
 RIDBE    029B    RIDBS    029C    RINONE   00A9    RIPRTY   00AB
 RODBE    029E    RODBS    029D    RSSTAT   0297    SAREG    030C
 SAT      026D    SAVE     FFD8    SETLFS   FFBA    SETMSG   FF90
 SETNAM   FFBD    SGNFLG   0067    SPREG    030F    STACK    0100
 STOP     FFE1    STREND   0031    SUBFLG   0010    SXREG    030D
 SYREG    030E    TABLEN   A050    TANSGN   0012    TBUFER   033C
 TEMPPT   0016    TEMPST   0019    TIMOUT   0285    TT9FEA   9FEA
 TT9FEB   9FEB    TXTPTR   007A    TXTTAB   002B    USRADD   0311
 USRCMD   03EE    USRPOK   0310    VALTYP   000D    VARNAM   0045
 VARPNT   0047    VARTAB   002D    VERCK    000A    VICSCN   0400
 WWA09C   A09C    WWA328   A328    WWA364   A364    WWA369   A369
 WWA371   A371    WWA376   A376    WWA381   A381    WWB1A5   B1A5
 WWB9BC   B9BC    WWB9C1   B9C1    WWB9D6   B9D6    WWB9DB   B9DB
 WWB9E0   B9E0    WWB9E5   B9E5    WWBAF9   BAF9    WWBDB8   BDB8
 WWBDBD   BDBD    WWE3BA   E3BA    XMAX     0289    XXA080   A080
 XXA081   A081    XXA09E   A09E    XXA19E   A19E    XXA1AC   A1AC
 XXA1B5   A1B5    XXA1C2   A1C2    XXA1D0   A1D0    XXA1E2   A1E2
 XXA1F0   A1F0    XXA1FF   A1FF    XXA210   A210    XXA225   A225
 XXA235   A235    XXA23B   A23B    XXA24F   A24F    XXA25A   A25A
 XXA26A   A26A    XXA272   A272    XXA27F   A27F    XXA290   A290
 XXA29D   A29D    XXA2AA   A2AA    XXA2BA   A2BA    XXA2C8   A2C8
 XXA2D5   A2D5    XXA2E4   A2E4    XXA2ED   A2ED    XXA300   A300
 XXA30E   A30E    XXA31E   A31E    XXA324   A324    XXA327   A327
 XXA383   A383    XXA38A   A38A    XXA38F   A38F    XXA3A4   A3A4
 XXA3B0   A3B0    XXA3B7   A3B7    XXA3B8   A3B8    XXA3BF   A3BF
 XXA3DC   A3DC    XXA3E8   A3E8    XXA3EC   A3EC    XXA3F3   A3F3
 XXA3FB   A3FB    XXA408   A408    XXA412   A412    XXA416   A416
 XXA421   A421    XXA434   A434    XXA435   A435    XXA437   A437
 XXA456   A456    XXA469   A469    XXA474   A474    XXA480   A480
 XXA49C   A49C    XXA4D7   A4D7    XXA4DF   A4DF    XXA4ED   A4ED
 XXA508   A508    XXA522   A522    XXA533   A533    XXA53C   A53C
 XXA544   A544    XXA55F   A55F    XXA560   A560    XXA562   A562
 XXA576   A576    XXA579   A579    XXA582   A582    XXA58E   A58E
 XXA5A4   A5A4    XXA5AC   A5AC    XXA5B6   A5B6    XXA5B8   A5B8
 XXA5C7   A5C7    XXA5C9   A5C9    XXA5DC   A5DC    XXA5DE   A5DE
 XXA5E5   A5E5    XXA5EE   A5EE    XXA5F5   A5F5    XXA5F9   A5F9
 XXA609   A609    XXA613   A613    XXA617   A617    XXA62E   A62E
 XXA637   A637    XXA640   A640    XXA641   A641    XXA659   A659
 XXA660   A660    XXA67A   A67A    XXA68D   A68D    XXA68E   A68E
 XXA69B   A69B    XXA6A4   A6A4    XXA6BB   A6BB    XXA6C9   A6C9
 XXA6E6   A6E6    XXA6E8   A6E8    XXA6EF   A6EF    XXA6F3   A6F3
 XXA700   A700    XXA714   A714    XXA717   A717    XXA72C   A72C
 XXA72F   A72F    XXA737   A737    XXA753   A753    XXA79F   A79F
 XXA7AE   A7AE    XXA7BE   A7BE    XXA7CE   A7CE    XXA7E1   A7E1
 XXA7ED   A7ED    XXA7EF   A7EF    XXA804   A804    XXA807   A807
 XXA80B   A80B    XXA80E   A80E    XXA81D   A81D    XXA827   A827
 XXA82B   A82B    XXA82C   A82C    XXA832   A832    XXA849   A849
 XXA84B   A84B    XXA854   A854    XXA862   A862    XXA870   A870
 XXA87D   A87D    XXA897   A897    XXA8A0   A8A0    XXA8BC   A8BC
 XXA8C0   A8C0    XXA8D1   A8D1    XXA8E3   A8E3    XXA8E8   A8E8
 XXA8EB   A8EB    XXA8F8   A8F8    XXA8FB   A8FB    XXA905   A905
 XXA906   A906    XXA909   A909    XXA911   A911    XXA919   A919
 XXA937   A937    XXA940   A940    XXA948   A948    XXA953   A953








SYMBOL TABLE

SYMBOL VALUE
 XXA957   A957    XXA95F   A95F    XXA96A   A96A    XXA96B   A96B
 XXA971   A971    XXA99F   A99F    XXA9A5   A9A5    XXA9C2   A9C2
 XXA9D6   A9D6    XXA9D9   A9D9    XXA9DA   A9DA    XXA9ED   A9ED
 XXAA07   AA07    XXAA1D   AA1D    XXAA24   AA24    XXAA27   AA27
 XXAA2C   AA2C    XXAA3D   AA3D    XXAA4B   AA4B    XXAA52   AA52
 XXAA68   AA68    XXAA7F   AA7F    XXAA86   AA86    XXAA90   AA90
 XXAA9A   AA9A    XXAA9D   AA9D    XXAAA0   AAA0    XXAAA2   AAA2
 XXAACA   AACA    XXAAD7   AAD7    XXAAE5   AAE5    XXAAE7   AAE7
 XXAAE8   AAE8    XXAAEE   AAEE    XXAAF8   AAF8    XXAB0E   AB0E
 XXAB0F   AB0F    XXAB10   AB10    XXAB13   AB13    XXAB19   AB19
 XXAB1E   AB1E    XXAB21   AB21    XXAB28   AB28    XXAB3B   AB3B
 XXAB42   AB42    XXAB45   AB45    XXAB47   AB47    XXAB4D   AB4D
 XXAB57   AB57    XXAB5B   AB5B    XXAB5F   AB5F    XXAB62   AB62
 XXAB6B   AB6B    XXAB7A   AB7A    XXAB7B   AB7B    XXAB92   AB92
 XXABA4   ABA4    XXABB5   ABB5    XXABB7   ABB7    XXABBE   ABBE
 XXABCE   ABCE    XXABD6   ABD6    XXABEA   ABEA    XXABF9   ABF9
 XXAC03   AC03    XXAC0D   AC0D    XXAC0F   AC0F    XXAC15   AC15
 XXAC41   AC41    XXAC4A   AC4A    XXAC4D   AC4D    XXAC51   AC51
 XXAC65   AC65    XXAC71   AC71    XXAC72   AC72    XXAC7D   AC7D
 XXAC89   AC89    XXAC91   AC91    XXAC9D   AC9D    XXACB8   ACB8
 XXACD1   ACD1    XXACDF   ACDF    XXACEA   ACEA    XXACFB   ACFB
 XXAD1D   AD1D    XXAD24   AD24    XXAD27   AD27    XXAD32   AD32
 XXAD35   AD35    XXAD75   AD75    XXAD78   AD78    XXAD8A   AD8A
 XXAD8D   AD8D    XXAD8F   AD8F    XXAD90   AD90    XXAD96   AD96
 XXAD97   AD97    XXAD99   AD99    XXAD9E   AD9E    XXADA4   ADA4
 XXADA9   ADA9    XXADB8   ADB8    XXADBB   ADBB    XXADD7   ADD7
 XXADE8   ADE8    XXADF0   ADF0    XXADF9   ADF9    XXADFA   ADFA
 XXAE07   AE07    XXAE11   AE11    XXAE19   AE19    XXAE20   AE20
 XXAE30   AE30    XXAE33   AE33    XXAE38   AE38    XXAE43   AE43
 XXAE58   AE58    XXAE5B   AE5B    XXAE5D   AE5D    XXAE64   AE64
 XXAE66   AE66    XXAE80   AE80    XXAE83   AE83    XXAE8A   AE8A
 XXAE8F   AE8F    XXAE92   AE92    XXAE9A   AE9A    XXAEAD   AEAD
 XXAEBD   AEBD    XXAEC6   AEC6    XXAECC   AECC    XXAEE3   AEE3
 XXAEEA   AEEA    XXAEF1   AEF1    XXAEF7   AEF7    XXAEFA   AEFA
 XXAEFD   AEFD    XXAEFF   AEFF    XXAF08   AF08    XXAF0D   AF0D
 XXAF0F   AF0F    XXAF14   AF14    XXAF27   AF27    XXAF28   AF28
 XXAF5C   AF5C    XXAF5D   AF5D    XXAF6E   AF6E    XXAF84   AF84
 XXAF92   AF92    XXAFA0   AFA0    XXAFA7   AFA7    XXAFD1   AFD1
 XXAFD6   AFD6    XXB02E   B02E    XXB056   B056    XXB05B   B05B
 XXB061   B061    XXB066   B066    XXB072   B072    XXB07B   B07B
 XXB07E   B07E    XXB08B   B08B    XXB090   B090    XXB092   B092
 XXB09C   B09C    XXB09F   B09F    XXB0AF   B0AF    XXB0B0   B0B0
 XXB0BA   B0BA    XXB0C4   B0C4    XXB0D4   B0D4    XXB0DB   B0DB
 XXB0E7   B0E7    XXB0EF   B0EF    XXB0F1   B0F1    XXB0FB   B0FB
 XXB109   B109    XXB113   B113    XXB11C   B11C    XXB11D   B11D
 XXB123   B123    XXB128   B128    XXB138   B138    XXB13B   B13B
 XXB143   B143    XXB159   B159    XXB185   B185    XXB18F   B18F
 XXB194   B194    XXB1A0   B1A0    XXB1B2   B1B2    XXB1B8   B1B8
 XXB1BF   B1BF    XXB1CC   B1CC    XXB1CE   B1CE    XXB1D1   B1D1
 XXB1DB   B1DB    XXB21C   B21C    XXB228   B228    XXB237   B237
 XXB245   B245    XXB248   B248    XXB24A   B24A    XXB24D   B24D
 XXB261   B261    XXB274   B274    XXB27D   B27D    XXB286   B286
 XXB296   B296    XXB2B9   B2B9    XXB2C8   B2C8    XXB2CD   B2CD
 XXB2EA   B2EA    XXB2F2   B2F2    XXB308   B308    XXB30B   B30B
 XXB30E   B30E    XXB30F   B30F    XXB320   B320    XXB331   B331








SYMBOL TABLE

SYMBOL VALUE
 XXB337   B337    XXB34B   B34B    XXB34C   B34C    XXB355   B355
 XXB35F   B35F    XXB378   B378    XXB37D   B37D    XXB384   B384
 XXB391   B391    XXB39E   B39E    XXB3A2   B3A2    XXB3A6   B3A6
 XXB3AE   B3AE    XXB3E1   B3E1    XXB3F4   B3F4    XXB418   B418
 XXB449   B449    XXB44F   B44F    XXB465   B465    XXB46F   B46F
 XXB475   B475    XXB47D   B47D    XXB487   B487    XXB48D   B48D
 XXB497   B497    XXB4A4   B4A4    XXB4A8   B4A8    XXB4A9   B4A9
 XXB4B5   B4B5    XXB4BF   B4BF    XXB4CA   B4CA    XXB4D2   B4D2
 XXB4D5   B4D5    XXB4F4   B4F4    XXB4F6   B4F6    XXB501   B501
 XXB50B   B50B    XXB516   B516    XXB526   B526    XXB52A   B52A
 XXB544   B544    XXB54D   B54D    XXB559   B559    XXB561   B561
 XXB566   B566    XXB56E   B56E    XXB572   B572    XXB57D   B57D
 XXB5AE   B5AE    XXB5B0   B5B0    XXB5B8   B5B8    XXB5BD   B5BD
 XXB5C7   B5C7    XXB5DC   B5DC    XXB5E6   B5E6    XXB5F6   B5F6
 XXB601   B601    XXB606   B606    XXB63D   B63D    XXB65D   B65D
 XXB67A   B67A    XXB688   B688    XXB68C   B68C    XXB690   B690
 XXB699   B699    XXB6A2   B6A2    XXB6A3   B6A3    XXB6A6   B6A6
 XXB6AA   B6AA    XXB6D5   B6D5    XXB6D6   B6D6    XXB6DB   B6DB
 XXB6EB   B6EB    XXB6EC   B6EC    XXB700   B700    XXB706   B706
 XXB70C   B70C    XXB70D   B70D    XXB70E   B70E    XXB725   B725
 XXB72C   B72C    XXB737   B737    XXB748   B748    XXB761   B761
 XXB77C   B77C    XXB782   B782    XXB78B   B78B    XXB798   B798
 XXB79B   B79B    XXB79E   B79E    XXB7A1   B7A1    XXB7AD   B7AD
 XXB7B5   B7B5    XXB7CD   B7CD    XXB7E2   B7E2    XXB7EB   B7EB
 XXB7F1   B7F1    XXB7F7   B7F7    XXB80D   B80D    XXB82C   B82C
 XXB83C   B83C    XXB840   B840    XXB848   B848    XXB849   B849
 XXB850   B850    XXB862   B862    XXB867   B867    XXB86A   B86A
 XXB86F   B86F    XXB877   B877    XXB893   B893    XXB897   B897
 XXB8A3   B8A3    XXB8AF   B8AF    XXB8D2   B8D2    XXB8D7   B8D7
 XXB8DB   B8DB    XXB8F7   B8F7    XXB8F9   B8F9    XXB8FB   B8FB
 XXB8FE   B8FE    XXB91D   B91D    XXB929   B929    XXB936   B936
 XXB938   B938    XXB946   B946    XXB947   B947    XXB94D   B94D
 XXB96F   B96F    XXB97D   B97D    XXB97E   B97E    XXB983   B983
 XXB985   B985    XXB999   B999    XXB9A6   B9A6    XXB9AC   B9AC
 XXB9B0   B9B0    XXB9BA   B9BA    XXB9EA   B9EA    XXB9F1   B9F1
 XXB9F4   B9F4    XXBA28   BA28    XXBA30   BA30    XXBA59   BA59
 XXBA5E   BA5E    XXBA61   BA61    XXBA7D   BA7D    XXBA8B   BA8B
 XXBA8C   BA8C    XXBAB7   BAB7    XXBAC4   BAC4    XXBACF   BACF
 XXBADA   BADA    XXBADF   BADF    XXBAE2   BAE2    XXBAED   BAED
 XXBAF8   BAF8    XXBAFE   BAFE    XXBB0F   BB0F    XXBB12   BB12
 XXBB29   BB29    XXBB3F   BB3F    XXBB4C   BB4C    XXBB4F   BB4F
 XXBB5D   BB5D    XXBB7A   BB7A    XXBB7E   BB7E    XXBB8A   BB8A
 XXBB8F   BB8F    XXBBA2   BBA2    XXBBD0   BBD0    XXBBD4   BBD4
 XXBBFC   BBFC    XXBBFE   BBFE    XXBC02   BC02    XXBC0C   BC0C
 XXBC11   BC11    XXBC1A   BC1A    XXBC1B   BC1B    XXBC23   BC23
 XXBC2B   BC2B    XXBC2F   BC2F    XXBC31   BC31    XXBC38   BC38
 XXBC39   BC39    XXBC3C   BC3C    XXBC44   BC44    XXBC49   BC49
 XXBC4F   BC4F    XXBC58   BC58    XXBC5B   BC5B    XXBC5D   BC5D
 XXBC92   BC92    XXBC98   BC98    XXBC9B   BC9B    XXBCAF   BCAF
 XXBCBA   BCBA    XXBCBB   BCBB    XXBCCC   BCCC    XXBCE9   BCE9
 XXBCF2   BCF2    XXBCF3   BCF3    XXBCF7   BCF7    XXBD06   BD06
 XXBD0A   BD0A    XXBD0D   BD0D    XXBD0F   BD0F    XXBD2E   BD2E
 XXBD30   BD30    XXBD33   BD33    XXBD35   BD35    XXBD41   BD41
 XXBD47   BD47    XXBD49   BD49    XXBD52   BD52    XXBD5B   BD5B
 XXBD62   BD62    XXBD67   BD67    XXBD6A   BD6A    XXBD71   BD71








SYMBOL TABLE

SYMBOL VALUE
 XXBD7E   BD7E    XXBD91   BD91    XXBDA0   BDA0    XXBDAE   BDAE
 XXBDC2   BDC2    XXBDCD   BDCD    XXBDDA   BDDA    XXBDDD   BDDD
 XXBDDF   BDDF    XXBDE7   BDE7    XXBDF8   BDF8    XXBE00   BE00
 XXBE09   BE09    XXBE0B   BE0B    XXBE16   BE16    XXBE21   BE21
 XXBE28   BE28    XXBE2F   BE2F    XXBE32   BE32    XXBE47   BE47
 XXBE48   BE48    XXBE53   BE53    XXBE64   BE64    XXBE66   BE66
 XXBE68   BE68    XXBE6A   BE6A    XXBE8E   BE8E    XXBE90   BE90
 XXBE97   BE97    XXBEB2   BEB2    XXBEC4   BEC4    XXBEC6   BEC6
 XXBED3   BED3    XXBEE3   BEE3    XXBEEF   BEEF    XXBF04   BF04
 XXBF07   BF07    XXBF0C   BF0C    XXBF16   BF16    XXBF17   BF17
 XXBF18   BF18    XXBF19   BF19    XXBF71   BF71    XXBF84   BF84
 XXBF9E   BF9E    XXBFB4   BFB4    XXBFBE   BFBE    XXBFED   BFED
 XXBFFD   BFFD    XXE00B   E00B    XXE00E   E00E    XXE01E   E01E
 XXE043   E043    XXE059   E059    XXE05D   E05D    XXE06C   E06C
 XXE070   E070    XXE07D   E07D    XXE0BE   E0BE    XXE0D3   E0D3
 XXE0E3   E0E3    XXE0F6   E0F6    XXE0F9   E0F9    XXE104   E104
 XXE109   E109    XXE194   E194    XXE195   E195    XXE19E   E19E
 XXE1A1   E1A1    XXE1B5   E1B5    XXE1D1   E1D1    XXE1D4   E1D4
 XXE200   E200    XXE206   E206    XXE20D   E20D    XXE20E   E20E
 XXE211   E211    XXE219   E219    XXE23F   E23F    XXE257   E257
 XXE26B   E26B    XXE29D   E29D    XXE2A0   E2A0    XXE2AD   E2AD
 XXE2DC   E2DC    XXE316   E316    XXE324   E324    XXE337   E337
 XXE33D   E33D    XXE386   E386    XXE38B   E38B    XXE391   E391
 XXE3A2   E3A2    XXE3A8   E3A8    XXE3B9   E3B9    XXE3BF   E3BF
 XXE3E2   E3E2    XXE421   E421    XXE422   E422    XXE447   E447
 XXE453   E453    XXE455   E455    XXE4AD   E4AD    XXE4B6   E4B6
 XXE4D3   E4D3    XXEA61   EA61    ZZA000   A000    ZZA002   A002
 ZZA004   A004    ZZA00C   A00C    ZZA050   A050    ZZA052   A052
 ZZA129   A129    ZZA642   A642    ZZA65E   A65E    ZZA69C   A69C
 ZZA71A   A71A    ZZA742   A742    ZZA78B   A78B    ZZA82F   A82F
 ZZA831   A831    ZZA857   A857    ZZA871   A871    ZZA883   A883
 ZZA8D2   A8D2    ZZA928   A928    ZZA93B   A93B    ZZA94B   A94B
 ZZAA80   AA80    ZZABA5   ABA5    ZZABBF   ABBF    ZZAC06   AC06
 ZZACFC   ACFC    ZZAD0C   AD0C    ZZAD1E   AD1E    ZZAEA8   AEA8
 ZZAED4   AED4    ZZAFE6   AFE6    ZZAFE9   AFE9    ZZB016   B016
 ZZB081   B081    ZZB1AA   B1AA    ZZB3B3   B3B3    ZZB824   B824
 ZZB82D   B82D    ZZBA2B   BA2B    ZZBBC7   BBC7    ZZBDB3   BDB3
 ZZBF11   BF11    ZZBF13   BF13    ZZBF1A   BF1A    ZZBF3A   BF3A
 ZZBF52   BF52    ZZBF53   BF53    ZZBF7B   BF7B    ZZBFBF   BFBF
 ZZBFC4   BFC4    ZZE08D   E08D    ZZE092   E092    ZZE097   E097
 ZZE12A   E12A    ZZE156   E156    ZZE165   E165    ZZE168   E168
 ZZE1BE   E1BE    ZZE1C7   E1C7    ZZE2B4   E2B4    ZZE2E0   E2E0
 ZZE2E5   E2E5    ZZE2EA   E2EA    ZZE2EF   E2EF    ZZE33E   E33E
 ZZE394   E394    ZZE45F   E45F    ZZE460   E460    ZZE473   E473
 ZZE4AC   E4AC   

END OF ASSEMBLY
