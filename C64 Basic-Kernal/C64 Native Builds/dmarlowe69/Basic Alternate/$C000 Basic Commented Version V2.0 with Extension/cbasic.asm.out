CBASIC.ASM......PAGE 0001

LINE# LOC   CODE        LINE


00001  0000              *=$C000
00002  C000              ;********************************
00003  C000              ; COMMODORE 64 BASICV2 ROM 
00004  C000              ;
00005  C000              ; (C) 1982 COMMODORE BUSINESS MACHINES
00006  C000              ;
00007  C000              ;********************************
00008  C000              ; BASIC V2
00009  C000              ;********************************
00010  C000              .FIL   BASICV2A.ASM
00011  C000              ;********************************
00012  C000              ; COMMODORE 64 BASICV2 ROM 
00013  C000              ;
00014  C000              ; (C) 1982 COMMODORE BUSINESS MACHINES
00015  C000              ;
00016  C000              ;********************************
00017  C000              ; PAGE ZERO EQUATES
00018  C000              ;********************************
00019  C000              ADRAY1 = $03
00020  C000              ADRAY2 = $05
00021  C000              CHARAC = $07
00022  C000              ENDCHR = $08
00023  C000              VERCK  = $0A
00024  C000              COUNT  = $0B
00025  C000              DIMFLG = $0C
00026  C000              VALTYP = $0D
00027  C000              INTFLG = $0E
00028  C000              GARBFL = $0F
00029  C000              SUBFLG = $10
00030  C000              INPFLG = $11
00031  C000              TANSGN = $12
00032  C000              CHANNL = $13
00033  C000              C
00034  C000              LINNUM = $14
00035  C000              TEMPPT = $16
00036  C000              LASTPT = $17
00037  C000              TEMPST = $19           ;NOT USED IN BASIC ROM
00038  C000              INDEX  = $22
00039  C000              RESHO  = $26
00040  C000              TXTTAB = $2B
00041  C000              VARTAB = $2D
00042  C000              ARYTAB = $2F
00043  C000              STREND = $31
00044  C000              FRETOP = $33
00045  C000              FRESPC = $35
00046  C000              MEMSIZ = $37
00047  C000              CURLIN = $39
00048  C000              OLDLIN = $3B
00049  C000              OLDTXT = $3D
00050  C000              DATLIN = $3F
00051  C000              DATPRT = $41
00052  C000              INPPTR = $43
00053  C000              VARNAM = $45
00054  C000              VARPNT = $47
00055  C000              FORPNT = $49






CBASIC.ASM......PAGE 0002

LINE# LOC   CODE        LINE


00056  C000              OPPTR  = $4B
00057  C000              OPMASK = $4D
00058  C000              DEFPNT = $4E
00059  C000              DSCPNT = $50
00060  C000              FOUR6  = $53
00061  C000              JMPER  = $54
00062  C000              J
00063  C000              CHRGET = $73
00064  C000              CHRGOT = $79
00065  C000              TXTPTR = $7A
00066  C000              POINTB = $7C
00067  C000              ;********************************
00068  C000              ; PAGE ONE EQUATES
00069  C000              ;********************************
00070  C000              STACK  = $0100         ; PROCESSOR STACK
00071  C000              ;********************************
00072  C000              ; PAGE TWO EQUATES
00073  C000              ;********************************
00074  C000              BUF    = $0200
00075  C000              LAT    = $0259
00076  C000              FAT    = $0263
00077  C000              SAT    = $026D
00078  C000              KEYD   = $0277
00079  C000              MEMSTR = $0281
00080  C000              MEMSI2 = $0282
00081  C000              TIMOUT = $0285
00082  C000              COLOR  = $0286
00083  C000              GDCOL  = $0287
00084  C000              HIBASE = $0288
00085  C000              XMAX   = $0289
00086  C000              LSTSHF = $028E
00087  C000              KEYLOG = $028F
00088  C000              MODE   = $0291
00089  C000              AUTODN = $0292
00090  C000              ;********************************
00091  C000              ; RS-232 EQUATES
00092  C000              ;********************************
00093  C000              M51CTR = $0293
00094  C000              M51CDR = $0294
00095  C000              M51AJB = $0295
00096  C000              RSSTAT = $0297
00097  C000              BITNUM = $0298
00098  C000              BAUDOF = $0299
00099  C000              RIDBE  = $029B
00100  C000              RIDBS  = $029C
00101  C000              RODBS  = $029D
00102  C000              RODBE  = $029E
00103  C000              IRQTMP = $029F
00104  C000              ENABL  = $02A1
00105  C000              CIA1CA = $02A2
00106  C000              CIA1IR = $02A3
00107  C000              CIA1CB = $02A4
00108  C000              NEXSRO = $02A5
00109  C000              PALNTS = $02A6
00110  C000              ;********************************






CBASIC.ASM......PAGE 0003

LINE# LOC   CODE        LINE


00111  C000              ; PAGE THREE EQUATES
00112  C000              ;********************************
00113  C000              IERROR = $0300
00114  C000              IMAIN  = $0302
00115  C000              ICRNCH = $0304
00116  C000              IQPLOP = $0306
00117  C000              IGONE  = $0308
00118  C000              IEVAL  = $030A
00119  C000              ;********************************
00120  C000              ; SYS - USR EQUATES
00121  C000              ;********************************
00122  C000              SAREG  = $030C
00123  C000              SXREG  = $030D
00124  C000              SYREG  = $030E
00125  C000              SPREG  = $030F
00126  C000              USRPOK = $0310
00127  C000              USRADD = $0311
00128  C000              ;********************************
00129  C000              ; 
00130  C000              ;********************************
00131  C000              CBINV  = $0316
00132  C000              NMINV  = $0318
00133  C000              ;********************************
00134  C000              ; KERNAL INDIRECT VECTORS 
00135  C000              ;********************************
00136  C000              IOPNE  = $031A
00137  C000              ICLOSE = $031C
00138  C000              ICHKIN = $031E
00139  C000              ICKOUT = $0320
00140  C000              ICLRCH = $0322
00141  C000              IBASIN = $0324
00142  C000              IBSOUT = $0326
00143  C000              ISTOP  = $0328
00144  C000              IGETIN = $032A
00145  C000              ICLALL = $032C
00146  C000              USRCMD = $03EE
00147  C000              ILOAD  = $0330
00148  C000              ISAVE  = $0332
00149  C000              ;********************************
00150  C000              ; CASSETTE I/O BUFFER $033C-$03FB 
00151  C000              ;********************************
00152  C000              TBUFER = $033C
00153  C000              ;********************************
00154  C000              ; PAGE FOUR EQUATES
00155  C000              ;********************************
00156  C000              VICSCN = $0400
00157  C000              ;********************************
00158  C000              ; PAGE FIVE EQUATES
00159  C000              ;********************************
00160  C000              
00161  C000              ;********************************
00162  C000              ; PAGE SIX EQUATES
00163  C000              ;********************************
00164  C000              
00165  C000              ;********************************






CBASIC.ASM......PAGE 0004

LINE# LOC   CODE        LINE


00166  C000              ; PAGE SEVEN EQUATES
00167  C000              ;********************************
00168  C000              
00169  C000              ;********************************
00170  C000              ; PAGE EIGHT EQUATES
00171  C000              ;********************************
00172  C000              
00173  C000              ;********************************
00174  C000              ; BASIC-KERNAL ROM EQUATES
00175  C000              ;********************************
00176  C000              ; DIFF
00177  C000              ; POLY1 C64 = $E043 VIC20 = $E040
00178  C000              POLY1  = $E043         ; COMPUTE ODD DEGREES FOR 
SIN AND ATN
00179  C000              ;KKE112 = $E112 ; CHRIN
00180  C000              ;KKE118 = $E118 ; SET OUTPUT DEVICE
00181  C000              ;KKE11E = $E11E ; CHKIN
00182  C000              ;KKE124 = $E124 ; GETIN
00183  C000              ;
00184  C000              KKE12A = $E12A         ; SYS
00185  C000              KKE156 = $E156         ; SAVE
00186  C000              KKE165 = $E165         ; VERIFY
00187  C000              KKE168 = $E168         ; LOAD
00188  C000              KKE1BE = $E1BE         ; OPEN
00189  C000              KKE1C7 = $E1C7         ; CLOSE
00190  C000              ;
00191  C000              ; ADDRESS TABLE FOR FUNCTIONS
00192  C000              ;
00193  C000              ;ZZE097 = $E097   ; RND
00194  C000              ;KKE10C = $E10C
00195  C000              ;KKE264 = $E264   ; COS
00196  C000              ;XXE26B = $E26B   ; SIN
00197  C000              ;ZZE2B4 = $E2B4   ; TAN
00198  C000              ;KKE30E = $E30E   ; ATN
00199  C000              ;
00200  C000              ;XXE386 = $E386   ;
00201  C000              ;********************************
00202  C000              ; KERNAL ROM EQUATES - VECTOR TABLE
00203  C000              ;********************************
00204  C000              SETMSG = $FF90
00205  C000              READST = $FFB7
00206  C000              CLRCHN = $FFCC
00207  C000              RDTIM  = $FFDE
00208  C000              STOP   = $FFE1         ; TEST STOP KEY
00209  C000              CLALL  = $FFE7         ; CLOSE ALL FILES
00210  C000              PLOT   = $FFF0
00211  C000              ;********************************
00212  C000              ; KERNAL ROM EQUATES
00213  C000              ;********************************
00214  C000              KERNAL = $E000         ; START OF KERNAL ROM
00215  C000              BASCLD = $E394         ; BASIC COLD START ENTRY P
OINT
00216  C000              BASWRM = $E37B         ; BASIC WARM START ENTRY P
OINT
00217  C000              ;********************************
00218  C000              ;*** START OF THE BASIC ROM
00219  C000              ;
00220  C000              ;********************************






CBASIC.ASM......PAGE 0005

LINE# LOC   CODE        LINE


00221  C000              ; DIFF
00222  C000              ; C64 = $E394 VIC20 = $E378
00223  C000              ; C64 = $E37B VIC20 = $E467
00224  C000              ;
00225  C000              ;********************************
00226  C000  94 E3       ZZA000 .WORD BASCLD    ; BASIC COLD START ENTRY P
OINT
00227  C002  7B E3       ZZA002 .WORD BASWRM    ; BASIC WARM START ENTRY P
OINT
00228  C004              ;********************************
00229  C004              ; CBMBASIC
00230  C004              ;********************************
00231  C004  43 42       ZZA004 .BYTE 'CBMBASIC'
00232  C00C              ;********************************
00233  C00C              ; ADDRESS TABLE FOR COMMANDS
00234  C00C              ; (ADDRESS MINUS 1 USED)
00235  C00C              ;********************************
00236  C00C              ; DIFF
00237  C00C              ; LOAD   C64 = $E167 VIC20 = $$E164
00238  C00C              ; SAVE   C64 = $E155 VIC20 = $E152
00239  C00C              ; VERIFY C64 = $E164 VIC20 = $E161
00240  C00C              ;
00241  C00C              ; SYS    C64 = $E129 VIC20 = $E126
00242  C00C              ;
00243  C00C              ; OPEN   C64 = #E1BD VIC20 = $$E1BA
00244  C00C              ; CLOSE  C64 = $E1C6 VIC20 = $E1C3
00245  C00C              ;
00246  C00C              ;********************************
00247  C00C  30 C8       ZZA00C .WORD ZZA831-1  ;$A830   ; END
00248  C00E  41 C7              .WORD ZZA742-1  ;$A741   ; FOR
00249  C010  1D CD              .WORD ZZAD1E-1  ;$AD1D   ; NEXT
00250  C012  F7 C8              .WORD XXA8F8-1  ;$A8F7   ; DATA
00251  C014  A4 CB              .WORD ZZABA5-1  ;$ABA4   ; INPUT#
00252  C016  BE CB              .WORD ZZABBF-1  ;$ABBE   ; INPUT
00253  C018  80 D0              .WORD ZZB081-1  ;$B080   ; DIM
00254  C01A  05 CC              .WORD ZZAC06-1  ;$AC05   ; READ
00255  C01C  A4 C9              .WORD XXA9A5-1  ;$A9A4   ; LET
00256  C01E  9F C8              .WORD XXA8A0-1  ;$A89F   ; GOTO
00257  C020  70 C8              .WORD ZZA871-1  ;$A870   ; RUN
00258  C022  27 C9              .WORD ZZA928-1  ;$A927   ; IF
00259  C024  1C C8              .WORD XXA81D-1  ;$A81C   ; RESTORE
00260  C026  82 C8              .WORD ZZA883-1  ;$A882   ; GOSUB
00261  C028  D1 C8              .WORD ZZA8D2-1  ;$A8D1   ; RETURN
00262  C02A  3A C9              .WORD ZZA93B-1  ;$A93A   ; REM
00263  C02C  2E C8              .WORD ZZA82F-1  ;$A82E   ; STOP
00264  C02E  4A C9              .WORD ZZA94B-1  ;$A94A   ; ON
00265  C030  2C D8              .WORD ZZB82D-1  ;$B82C   ; WAIT
00266  C032  67 E1              .WORD KKE168-1  ;$E167   ; LOAD
00267  C034  55 E1              .WORD KKE156-1  ;$E155   ; SAVE
00268  C036  64 E1              .WORD KKE165-1  ;$E164   ; VERIFY
00269  C038  B2 D3              .WORD ZZB3B3-1  ;$B3B2   ; DEF
00270  C03A  23 D8              .WORD ZZB824-1  ;$B823   ; POKE
00271  C03C  7F CA              .WORD ZZAA80-1  ;$AA7F   ; PRINT#
00272  C03E  9F CA              .WORD XXAAA0-1  ;$AA9F   ; PRINT
00273  C040  56 C8              .WORD ZZA857-1  ;$A856   ; CONT
00274  C042  9B C6              .WORD ZZA69C-1  ;$A69B   ; LIST
00275  C044  5D C6              .WORD ZZA65E-1  ;$A65D   ; CLR






CBASIC.ASM......PAGE 0006

LINE# LOC   CODE        LINE


00276  C046  85 CA              .WORD XXAA86-1  ;$AA85   ; CMD
00277  C048  29 E1              .WORD KKE12A-1  ;$E129   ; SYS
00278  C04A  BD E1              .WORD KKE1BE-1  ;$E1BD   ; OPEN
00279  C04C  C6 E1              .WORD KKE1C7-1  ;$E1C6   ; CLOSE
00280  C04E  7A CB              .WORD XXAB7B-1  ;$AB7A   ; GET
00281  C050  41 C6       ZZA050 .WORD ZZA642-1  ;$A641   ; NEW
00282  C052              ;********************************
00283  C052              ; OFFSET TO ADDRESS TABLE
00284  C052              ;********************************
00285  C052              TABLEN = ZZA050 - ZZA00C ; $44
00286  C052              ;********************************
00287  C052              ; ADDRESS TABLE FOR FUNCTIONS
00288  C052              ;********************************
00289  C052              ; DIFF
00290  C052              ; USRPOK C64 = $0310 VIC20 = $0000
00291  C052              ; DIFF - FIXED BY PUTTING BASICV2EX AT END
00292  C052              ; RND    C64 = $E097 VIC20 = $E094
00293  C052              ; COS    C64 = $E264 VIC20 = $E261
00294  C052              ; SIN    C64 = $E26B VIC20 = $E268
00295  C052              ; TAN    C64 = $E2B4 VIC20 = $E2B1
00296  C052              ; ATAN   C64 = $E30E VIC20 = $E30B
00297  C052              ;********************************
00298  C052  39 DC       ZZA052 .WORD XXBC39    ; SGN
00299  C054  CC DC              .WORD XXBCCC    ; INT
00300  C056  58 DC              .WORD XXBC58    ; ABS
00301  C058  10 03              .WORD USRPOK    ; USR
00302  C05A  7D D3              .WORD XXB37D    ; FRE
00303  C05C  9E D3              .WORD XXB39E    ; POS
00304  C05E  71 DF              .WORD XXBF71    ; SQR
00305  C060  94 E0              .WORD ZZE097    ; RND
00306  C062  EA D9              .WORD XXB9EA    ; LOG
00307  C064  ED DF              .WORD XXBFED    ; EXP
00308  C066  61 E2              .WORD KKE264    ; COS
00309  C068  68 E2              .WORD XXE26B    ; SIN
00310  C06A  B1 E2              .WORD ZZE2B4    ; TAN
00311  C06C  0B E3              .WORD KKE30E    ; ATN
00312  C06E  0D D8              .WORD XXB80D    ; PEEK
00313  C070  7C D7              .WORD XXB77C    ; LEN
00314  C072  65 D4              .WORD XXB465    ; STR$
00315  C074  AD D7              .WORD XXB7AD    ; VAL
00316  C076  8B D7              .WORD XXB78B    ; ASC
00317  C078  EC D6              .WORD XXB6EC    ; CHR$
00318  C07A  00 D7              .WORD XXB700    ; LEFT$
00319  C07C  2C D7              .WORD XXB72C    ; RIGHT$
00320  C07E  37 D7              .WORD XXB737    ; MID$
00321  C080              ;********************************
00322  C080              ; PRIORITY AND ADDRESS TABLE
00323  C080              ; FOR OPERATORS
00324  C080              ; (ADDRESS MINUS 1 USED)
00325  C080              ;
00326  C080              ;*** PRECEDENCE BYTE AND ACTION ADDRESSES
00327  C080              ; FOR OPERATORS
00328  C080              ; LIKE THE PRIMARY COMMANDS THESE ARE CALLED
00329  C080              ; BY PUSHING THE ADDRESS ONTO THE STACK
00330  C080              ; AND DOING AN RTS, SO AGAIN THE 






CBASIC.ASM......PAGE 0007

LINE# LOC   CODE        LINE


00331  C080              ; ACTUAL ADDRESS -1 NEEDS TO BE PUSHED
00332  C080              ;********************************
00333  C080  79          XXA080 .BYTE $79
00334  C081  69 D8       XXA081 .WORD XXB86A-1  ;$B869   ; PLUS
00335  C083  79                 .BYTE $79
00336  C084  52 D8              .WORD KKB853-1  ;$B852   ; MINUS
00337  C086  7B                 .BYTE $7B
00338  C087  2A DA              .WORD ZZBA2B-1  ;$BA2A   ; MULTIPLY
00339  C089  7B                 .BYTE $7B
00340  C08A  11 DB              .WORD XXBB12-1  ;$BB11   ; DIVIDE
00341  C08C  7F                 .BYTE $7F
00342  C08D  7A DF              .WORD ZZBF7B-1  ;$BF7A   ; POWER
00343  C08F  50                 .BYTE $50
00344  C090  E8 CF              .WORD ZZAFE9-1  ;$AFE8   ; AND
00345  C092  46                 .BYTE $46
00346  C093  E5 CF              .WORD ZZAFE6-1  ;$AFE5   ; OR
00347  C095  7D                 .BYTE $7D
00348  C096  B3 DF              .WORD XXBFB4-1  ;$BFB3   ; NEGATIVE
00349  C098  5A                 .BYTE $5A
00350  C099  D3 CE              .WORD ZZAED4-1  ;$AED3   ; NOT
00351  C09B  64                 .BYTE $64
00352  C09C  15 D0       WWA09C .WORD ZZB016-1  ;$B015   ; GREATER / EQUAL
 / LESS
00353  C09E              ;********************************
00354  C09E              ; TABLE OF COMMANDS
00355  C09E              ; EACH ENDED WITH A +$80
00356  C09E              ;
00357  C09E              ; *** BASIC KEYWORDS
00358  C09E              ; EACH WORD HAS B7 SET IN IT'S LAST CHARACTER
00359  C09E              ; AS AN END MARKER, EVEN THE ONE CHARACTER
00360  C09E              ; KEYWORDS SUCH AS "<" OR "="
00361  C09E              ; FIRST ARE THE PRIMARY COMMAND KEYWORDS,
00362  C09E              ; ONLY THESE CAN START A STATEMENT
00363  C09E              ;
00364  C09E              ;********************************
00365  C09E  45          XXA09E .BYTE $45,$4E,$C4                 ; END
00365  C09F  4E 
00365  C0A0  C4 
00366  C0A1  46                 .BYTE $46,$4F,$D2                 ; FOR
00366  C0A2  4F 
00366  C0A3  D2 
00367  C0A4  4E                 .BYTE $4E,$45,$58,$D4             ; NEXT
00367  C0A5  45 
00367  C0A6  58 
00367  C0A7  D4 
00368  C0A8  44                 .BYTE $44,$41,$54,$C1             ; DATA
00368  C0A9  41 
00368  C0AA  54 
00368  C0AB  C1 
00369  C0AC  49                 .BYTE $49,$4E,$50,$55,$54,$A3     ; INPUT#

00369  C0AD  4E 
00369  C0AE  50 
00369  C0AF  55 
00369  C0B0  54 
00369  C0B1  A3 
00370  C0B2  49                 .BYTE $49,$4E,$50,$55,$D4         ; INPUT






CBASIC.ASM......PAGE 0008

LINE# LOC   CODE        LINE


00370  C0B3  4E 
00370  C0B4  50 
00370  C0B5  55 
00370  C0B6  D4 
00371  C0B7  44                 .BYTE $44,$49,$CD                 ; DIM
00371  C0B8  49 
00371  C0B9  CD 
00372  C0BA  52                 .BYTE $52,$45,$41,$C4             ; READ
00372  C0BB  45 
00372  C0BC  41 
00372  C0BD  C4 
00373  C0BE  4C                 .BYTE $4C,$45,$D4                 ; LET
00373  C0BF  45 
00373  C0C0  D4 
00374  C0C1  47                 .BYTE $47,$4F,$54,$CF             ; GOTO
00374  C0C2  4F 
00374  C0C3  54 
00374  C0C4  CF 
00375  C0C5  52                 .BYTE $52,$55,$CE                 ; RUN
00375  C0C6  55 
00375  C0C7  CE 
00376  C0C8  49                 .BYTE $49,$C6                     ; IF
00376  C0C9  C6 
00377  C0CA  52                 .BYTE $52,$45,$53,$54,$4F,$52,$C5 ; RESTOR
E
00377  C0CB  45 
00377  C0CC  53 
00377  C0CD  54 
00377  C0CE  4F 
00377  C0CF  52 
00377  C0D0  C5 
00378  C0D1  47                 .BYTE $47,$4F,$53,$55,$C2         ; GOSUB
00378  C0D2  4F 
00378  C0D3  53 
00378  C0D4  55 
00378  C0D5  C2 
00379  C0D6  52                 .BYTE $52,$45,$54,$55,$52,$CE     ; RETURN

00379  C0D7  45 
00379  C0D8  54 
00379  C0D9  55 
00379  C0DA  52 
00379  C0DB  CE 
00380  C0DC  52                 .BYTE $52,$45,$CD                 ; REM
00380  C0DD  45 
00380  C0DE  CD 
00381  C0DF  53                 .BYTE $53,$54,$4F,$D0             ; STOP
00381  C0E0  54 
00381  C0E1  4F 
00381  C0E2  D0 
00382  C0E3  4F                 .BYTE $4F,$CE                     ; ON
00382  C0E4  CE 
00383  C0E5  57                 .BYTE $57,$41,$49,$D4             ; WAIT
00383  C0E6  41 
00383  C0E7  49 
00383  C0E8  D4 
00384  C0E9  4C                 .BYTE $4C,$4F,$41,$C4             ; LOAD






CBASIC.ASM......PAGE 0009

LINE# LOC   CODE        LINE


00384  C0EA  4F 
00384  C0EB  41 
00384  C0EC  C4 
00385  C0ED  53                 .BYTE $53,$41,$56,$C5             ; SAVE
00385  C0EE  41 
00385  C0EF  56 
00385  C0F0  C5 
00386  C0F1  56                 .BYTE $56,$45,$52,$49,$46,$D9     ; VERIFY

00386  C0F2  45 
00386  C0F3  52 
00386  C0F4  49 
00386  C0F5  46 
00386  C0F6  D9 
00387  C0F7  44                 .BYTE $44,$45,$C6                 ; DEF
00387  C0F8  45 
00387  C0F9  C6 
00388  C0FA  50                 .BYTE $50,$4F,$4B,$C5             ; POKE
00388  C0FB  4F 
00388  C0FC  4B 
00388  C0FD  C5 
00389  C0FE  50                 .BYTE $50,$52,$49,$4E,$54,$A3     ; PRINT#

00389  C0FF  52 
00389  C100  49 
00389  C101  4E 
00389  C102  54 
00389  C103  A3 
00390  C104  50                 .BYTE $50,$52,$49,$4E,$D4         ; PRINT
00390  C105  52 
00390  C106  49 
00390  C107  4E 
00390  C108  D4 
00391  C109  43                 .BYTE $43,$4F,$4E,$D4             ; CONT
00391  C10A  4F 
00391  C10B  4E 
00391  C10C  D4 
00392  C10D  4C                 .BYTE $4C,$49,$53,$D4             ; LIST
00392  C10E  49 
00392  C10F  53 
00392  C110  D4 
00393  C111  43                 .BYTE $43,$4C,$D2                 ; CLR
00393  C112  4C 
00393  C113  D2 
00394  C114  43                 .BYTE $43,$4D,$C4                 ; CMD
00394  C115  4D 
00394  C116  C4 
00395  C117  53                 .BYTE $53,$59,$D3                 ; SYS
00395  C118  59 
00395  C119  D3 
00396  C11A  4F                 .BYTE $4F,$50,$45,$CE             ; OPEN
00396  C11B  50 
00396  C11C  45 
00396  C11D  CE 
00397  C11E  43                 .BYTE $43,$4C,$4F,$53,$C5         ; CLOSE
00397  C11F  4C 
00397  C120  4F 






CBASIC.ASM......PAGE 0010

LINE# LOC   CODE        LINE


00397  C121  53 
00397  C122  C5 
00398  C123  47                 .BYTE $47,$45,$D4                 ; GET
00398  C124  45 
00398  C125  D4 
00399  C126  4E                 .BYTE $4E,$45,$D7                 ; NEW
00399  C127  45 
00399  C128  D7 
00400  C129              ;********************************
00401  C129              ; TABLE OF FUNCTIONS
00402  C129              ; EACH ENDED WITH A +$80
00403  C129              ;********************************
00404  C129  54          ZZA129 .BYTE $54,$41,$42,$A8         ; TAB(
00404  C12A  41 
00404  C12B  42 
00404  C12C  A8 
00405  C12D  54                 .BYTE $54,$CF                 ; TO
00405  C12E  CF 
00406  C12F  46                 .BYTE $46,$CE                 ; FN
00406  C130  CE 
00407  C131  53                 .BYTE $53,$50,$43,$A8         ; SPC(
00407  C132  50 
00407  C133  43 
00407  C134  A8 
00408  C135  54                 .BYTE $54,$48,$45,$CE         ; THEN
00408  C136  48 
00408  C137  45 
00408  C138  CE 
00409  C139  4E                 .BYTE $4E,$4F,$D4             ; NOT
00409  C13A  4F 
00409  C13B  D4 
00410  C13C  53                 .BYTE $53,$54,$45,$D0         ; STEP
00410  C13D  54 
00410  C13E  45 
00410  C13F  D0 
00411  C140  AB                 .BYTE $AB                     ; PLUS
00412  C141  AD                 .BYTE $AD                     ; MINUS
00413  C142  AA                 .BYTE $AA                     ; MULTIPLY
00414  C143  AF                 .BYTE $AF                     ; DIVIDE
00415  C144  DE                 .BYTE $DE                     ; POWER
00416  C145  41                 .BYTE $41,$4E,$C4             ; AND
00416  C146  4E 
00416  C147  C4 
00417  C148  4F                 .BYTE $4F,$D2                 ; ON
00417  C149  D2 
00418  C14A  BE                 .BYTE $BE                     ; GREATER
00419  C14B  BD                 .BYTE $BD                     ; EQUAL
00420  C14C  BC                 .BYTE $BC                     ; LESS
00421  C14D  53                 .BYTE $53,$47,$CE             ; SGN
00421  C14E  47 
00421  C14F  CE 
00422  C150  49                 .BYTE $49,$4E,$D4             ; INT
00422  C151  4E 
00422  C152  D4 
00423  C153  41                 .BYTE $41,$42,$D3             ; ABS






CBASIC.ASM......PAGE 0011

LINE# LOC   CODE        LINE


00423  C154  42 
00423  C155  D3 
00424  C156  55                 .BYTE $55,$53,$D2             ; USR
00424  C157  53 
00424  C158  D2 
00425  C159  46                 .BYTE $46,$52,$C5             ; FRE
00425  C15A  52 
00425  C15B  C5 
00426  C15C  50                 .BYTE $50,$4F,$D3             ; POS
00426  C15D  4F 
00426  C15E  D3 
00427  C15F  53                 .BYTE $53,$51,$D2             ; SQR
00427  C160  51 
00427  C161  D2 
00428  C162  52                 .BYTE $52,$4E,$C4             ; RND
00428  C163  4E 
00428  C164  C4 
00429  C165  4C                 .BYTE $4C,$4F,$C7             ; LOG
00429  C166  4F 
00429  C167  C7 
00430  C168  45                 .BYTE $45,$58,$D0             ; EXP
00430  C169  58 
00430  C16A  D0 
00431  C16B  43                 .BYTE $43,$4F,$D3             ; COS
00431  C16C  4F 
00431  C16D  D3 
00432  C16E  53                 .BYTE $53,$49,$CE             ; SIN
00432  C16F  49 
00432  C170  CE 
00433  C171  54                 .BYTE $54,$41,$CE             ; TAN
00433  C172  41 
00433  C173  CE 
00434  C174  41                 .BYTE $41,$54,$CE             ; ATN
00434  C175  54 
00434  C176  CE 
00435  C177  50                 .BYTE $50,$45,$45,$CB         ; PEEK
00435  C178  45 
00435  C179  45 
00435  C17A  CB 
00436  C17B  4C                 .BYTE $4C,$45,$CE             ; LEN
00436  C17C  45 
00436  C17D  CE 
00437  C17E  53                 .BYTE $53,$54,$52,$A4         ; STR$
00437  C17F  54 
00437  C180  52 
00437  C181  A4 
00438  C182  56                 .BYTE $56,$41,$CC             ; VAL
00438  C183  41 
00438  C184  CC 
00439  C185  41                 .BYTE $41,$53,$C3             ; ASC
00439  C186  53 
00439  C187  C3 
00440  C188  43                 .BYTE $43,$48,$52,$A4         ; CHR$
00440  C189  48 
00440  C18A  52 






CBASIC.ASM......PAGE 0012

LINE# LOC   CODE        LINE


00440  C18B  A4 
00441  C18C  4C                 .BYTE $4C,$45,$46,$54,$A4     ; LEFT$
00441  C18D  45 
00441  C18E  46 
00441  C18F  54 
00441  C190  A4 
00442  C191  52                 .BYTE $52,$49,$47,$48,$54,$A4 ; RIGHT$
00442  C192  49 
00442  C193  47 
00442  C194  48 
00442  C195  54 
00442  C196  A4 
00443  C197  4D                 .BYTE $4D,$49,$44,$A4         ; MID$
00443  C198  49 
00443  C199  44 
00443  C19A  A4 
00444  C19B              ;********************************
00445  C19B              ; OTHER COMMANDS
00446  C19B              ;********************************
00447  C19B  47                 .BYTE $47,$CF                 ; GO
00447  C19C  CF 
00448  C19D  00                 .BYTE $00
00449  C19E              ;********************************
00450  C19E              ; TABLE OF ERRORS MESSAGES
00451  C19E              ; EACH ENDED WITH A +$80
00452  C19E              ;********************************
00453  C19E              ; TOO MANY FILES
00454  C19E  54 4F       XXA19E .BYTE 'TOO MANY FILE'
00455  C1AB  D3                 .BYTE $D3
00456  C1AC              ; FILE OPEN
00457  C1AC  46 49       XXA1AC .BYTE 'FILE OPE'
00458  C1B4  CE                 .BYTE $CE
00459  C1B5              ; FILE NOT OPEN
00460  C1B5  46 49       XXA1B5 .BYTE 'FILE NOT OPE'
00461  C1C1  CE                 .BYTE $CE
00462  C1C2              ; FILE NOT FOUND
00463  C1C2  46 49       XXA1C2 .BYTE 'FILE NOT FOUN'
00464  C1CF  C4                 .BYTE $C4
00465  C1D0              ; DEVICE NOT PRESENT
00466  C1D0  44 45       XXA1D0 .BYTE 'DEVICE NOT PRESEN'
00467  C1E1  D4                 .BYTE $D4
00468  C1E2              ; NOT INPUT FILE
00469  C1E2  4E 4F       XXA1E2 .BYTE 'NOT INPUT FIL'
00470  C1EF  C5                 .BYTE $C5
00471  C1F0              ; NOT OUTPUT FILE
00472  C1F0  4E 4F       XXA1F0 .BYTE 'NOT OUTPUT FIL'
00473  C1FE  C5                 .BYTE $C5
00474  C1FF              ; MISSISNG FILE NAME
00475  C1FF  4D 49       XXA1FF .BYTE 'MISSING FILE NAM'
00476  C20F  C5                 .BYTE $C5
00477  C210              ; ILLEGAL DEVICE NUMBER
00478  C210  49 4C       XXA210 .BYTE 'ILLEGAL DEVICE NUMBE'
00479  C224  D2                 .BYTE $D2
00480  C225              ; NEXT WITHOUT FOR
00481  C225  4E 45       XXA225 .BYTE 'NEXT WITHOUT FO'






CBASIC.ASM......PAGE 0013

LINE# LOC   CODE        LINE


00482  C234  D2                 .BYTE $D2
00483  C235              ; SYNTAX
00484  C235  53 59       XXA235 .BYTE 'SYNTA'
00485  C23A  D8                 .BYTE $D8
00486  C23B              ; RETURN WITHOUT GOSUB
00487  C23B  52 45       XXA23B .BYTE 'RETURN WITHOUT GOSU'
00488  C24E  C2                 .BYTE $C2
00489  C24F              ; OUT OF DATA
00490  C24F  4F 55       XXA24F .BYTE 'OUT OF DAT'
00491  C259  C1                 .BYTE $C1
00492  C25A              ; ILLEGAL QUANTITY
00493  C25A  49 4C       XXA25A .BYTE 'ILLEGAL QUANTIT'
00494  C269  D9                 .BYTE $D9
00495  C26A              ; OVERFLOW
00496  C26A  4F 56       XXA26A .BYTE 'OVERFLO'
00497  C271  D7                 .BYTE $D7
00498  C272              ; OUT OF MEMORY
00499  C272  4F 55       XXA272 .BYTE 'OUT OF MEMOR'
00500  C27E  D9                 .BYTE $D9
00501  C27F              ; UNDEF'D STATEMENT
00502  C27F  55 4E       XXA27F .BYTE 'UNDEF''D STATEMEN'
00503  C28F  D4                 .BYTE $D4
00504  C290              ; BAD SUBSCRIPT
00505  C290  42 41       XXA290 .BYTE 'BAD SUBSCRIP'
00506  C29C  D4                 .BYTE $D4
00507  C29D              ; REDIM'D ARRAY
00508  C29D  52 45       XXA29D .BYTE 'REDIM''D ARRA'
00509  C2A9  D9                 .BYTE $D9
00510  C2AA              ; DIVISION BY ZERO
00511  C2AA  44 49       XXA2AA .BYTE 'DIVISION BY ZER'
00512  C2B9  CF                 .BYTE $CF
00513  C2BA              ; ILLEGAL DIRECT
00514  C2BA  49 4C       XXA2BA .BYTE 'ILLEGAL DIREC'
00515  C2C7  D4                 .BYTE $D4
00516  C2C8              ; TYPE MISMATCH
00517  C2C8  54 59       XXA2C8 .BYTE 'TYPE MISMATC'
00518  C2D4  C8                 .BYTE $C8
00519  C2D5              ; STRING TO LONG
00520  C2D5  53 54       XXA2D5 .BYTE 'STRING TOO LON'
00521  C2E3  C7                 .BYTE $C7
00522  C2E4              ; FILE DATA
00523  C2E4  46 49       XXA2E4 .BYTE 'FILE DAT'
00524  C2EC  C1                 .BYTE $C1
00525  C2ED              ; FORMULA TOO COMPLEX
00526  C2ED  46 4F       XXA2ED .BYTE 'FORMULA TOO COMPLE'
00527  C2FF  D8                 .BYTE $D8
00528  C300              ; CAN'T CONTINUE
00529  C300  43 41       XXA300 .BYTE 'CAN''T CONTINU'
00530  C30D  C5                 .BYTE $C5
00531  C30E              ; UNDEF'D FUNCTION
00532  C30E  55 4E       XXA30E .BYTE 'UNDEF''D FUNCTIO'
00533  C31D  CE                 .BYTE $CE
00534  C31E              ; VERIFY
00535  C31E  56 45       XXA31E .BYTE 'VERIF'
00536  C323  D9                 .BYTE $D9






CBASIC.ASM......PAGE 0014

LINE# LOC   CODE        LINE


00537  C324              ; LOAD
00538  C324  4C 4F 41    XXA324 .BYTE 'LOA'
00539  C327  C4          XXA327 .BYTE $C4
00540  C328              ;********************************
00541  C328              ; ERROR MESSAGE ADDRESS LOCATIONS
00542  C328              ;********************************
00543  C328  9E C1       WWA328 .WORD XXA19E    ; 01 TOO MANY FILES
00544  C32A  AC C1              .WORD XXA1AC    ; 02 FILE OPEN
00545  C32C  B5 C1              .WORD XXA1B5    ; 03 FILE NOT OPEN
00546  C32E  C2 C1              .WORD XXA1C2    ; 04 FILE NOT FOUND
00547  C330  D0 C1              .WORD XXA1D0    ; 05 DEVICE NOT PRESENT
00548  C332  E2 C1              .WORD XXA1E2    ; 06 NOT INPUT FILE
00549  C334  F0 C1              .WORD XXA1F0    ; 07 NOT OUTPUT FILE
00550  C336  FF C1              .WORD XXA1FF    ; 08 MISSING FILE NAME
00551  C338  10 C2              .WORD XXA210    ; 09 ILLEGAL DEVICE NUMBER

00552  C33A  25 C2              .WORD XXA225    ; 0A NEXT WITHOUT FOR
00553  C33C  35 C2              .WORD XXA235    ; 0B SYNTAX
00554  C33E  3B C2              .WORD XXA23B    ; 0C RETURN WITHOUT GOSUB
00555  C340  4F C2              .WORD XXA24F    ; 0D OUT OF DATA
00556  C342  5A C2              .WORD XXA25A    ; 0E ILLEGAL QUANTITY
00557  C344  6A C2              .WORD XXA26A    ; 0F OVERFLOW
00558  C346  72 C2              .WORD XXA272    ; 10 OUT OF MEMORY
00559  C348  7F C2              .WORD XXA27F    ; 11 UNDEF'D STATMENT
00560  C34A  90 C2              .WORD XXA290    ; 12 BAD SUBSCRIPT
00561  C34C  9D C2              .WORD XXA29D    ; 13 REDIM'D ARRAY
00562  C34E  AA C2              .WORD XXA2AA    ; 14 DEVISION BY ZERO
00563  C350  BA C2              .WORD XXA2BA    ; 15 ILLEGAL DIRECT
00564  C352  C8 C2              .WORD XXA2C8    ; 16 TYPE MISMATCH
00565  C354  D5 C2              .WORD XXA2D5    ; 17 STRING TOO LONG
00566  C356  E4 C2              .WORD XXA2E4    ; 18 FILE DATA
00567  C358  ED C2              .WORD XXA2ED    ; 19 FORMULA TOO COMPLEX
00568  C35A  00 C3              .WORD XXA300    ; 1A CAN'T CONTINUE
00569  C35C  0E C3              .WORD XXA30E    ; 1B UNDEF'D FUNCTION
00570  C35E  1E C3              .WORD XXA31E    ; 1C VERIFY
00571  C360  24 C3              .WORD XXA324    ; 1D LOAD
00572  C362  83 C3              .WORD XXA383    ; 1E BREAK
00573  C364              ;********************************
00574  C364              ; OTHER MESSAGES
00575  C364              ;
00576  C364              ;********************************
00577  C364              ; OK
00578  C364  0D          WWA364 .BYTE $0D
00579  C365  4F 4B              .BYTE 'OK'
00580  C367  0D                 .BYTE $0D
00581  C368  00                 .BYTE $00
00582  C369              ; ERROR
00583  C369              ; DIFF
00584  C369              ; C64 = '  ERROR' VIC20 = $0D,' ERROR'
00585  C369  20 20       WWA369 .BYTE '  ERROR'
00586  C370  00                 .BYTE $00
00587  C371              ; IN
00588  C371  20 49       WWA371 .BYTE ' IN '
00589  C375  00                 .BYTE $00
00590  C376              ; READY.
00591  C376  0D          WWA376 .BYTE $0D






CBASIC.ASM......PAGE 0015

LINE# LOC   CODE        LINE


00592  C377  0A                 .BYTE $0A
00593  C378  52 45              .BYTE 'READY.'
00594  C37E  0D                 .BYTE $0D
00595  C37F  0A                 .BYTE $0A
00596  C380  00                 .BYTE $00
00597  C381              ; BREAK
00598  C381  0D          WWA381 .BYTE $0D
00599  C382  0A                 .BYTE $0A
00600  C383  42 52       XXA383 .BYTE 'BREAK'
00601  C388  00                 .BYTE $00
00602  C389  A0                 .BYTE $A0
00603  C38A              ;********************************
00604  C38A              ; SEARCH FOR "FOR" BLOCKS ON STACK
00605  C38A              ;
00606  C38A              ; *** SEARCH THE STACK FOR FOR OR GOSUB ACTIVITY
00607  C38A              ; RETURN ZB=1 IF FOR VARIABLE FOUND
00608  C38A              ;********************************
00609  C38A  BA          XXA38A TSX             ;COPY STACK POINTER
00610  C38B  E8                 INX             ;+1 PASS RETURN ADDRESS
00611  C38C  E8                 INX             ;+2 PASS RETURN ADDRESS
00612  C38D  E8                 INX             ;+3 PASS CALLING ROUTINE R
ETURN ADDRESS
00613  C38E  E8                 INX             ;+4 PASS CALLING ROUTINE R
ETURN ADDRESS
00614  C38F  BD 01 01    XXA38F LDA STACK+1,X GET THE TOKEN BYTE FROM THE 
STACK
00615  C392  C9 81              CMP #$81        ; FOR BLOCK CODE - IS IT T
HE FOR TOKEN
00616  C394  D0 21              BNE XXA3B7      ; IF NOT FOR TOKEN JUST EX
IT
00617  C396                                     ;IT WAS THE FOR TOKEN
00618  C396  A5 4A              LDA FORPNT+1     ;GET FOR/NEXT VARIABLE PO
INTER HIGH BYTE
00619  C398  D0 0A              BNE XXA3A4      ;BRANCH IF NOT NULL
00620  C39A  BD 02 01           LDA STACK+2,X   ;GET FOR VARIABLE POINTER 
LOW BYTE
00621  C39D  85 49              STA FORPNT      ;SAVE FOR/NEXT VARIABLE PO
INTER LOW BYTE
00622  C39F  BD 03 01           LDA STACK+3,X   ;GET FOR VARIABLE POINTER 
HIGH BYTE
00623  C3A2  85 4A              STA FORPNT+1     ;SAVE FOR/NEXT VARIABLE P
OINTER HIGH BYTE
00624  C3A4  DD 03 01    XXA3A4 CMP STACK+3,X   ;COMPARE VARIABLE POINTER 
WITH STACKED VARIABLE POINTER
00625  C3A7                                     ;HIGH BYTE
00626  C3A7  D0 07              BNE XXA3B0      ;BRANCH IF NO MATCH
00627  C3A9  A5 49              LDA FORPNT      ;GET FOR/NEXT VARIABLE POI
NTER LOW BYTE
00628  C3AB  DD 02 01           CMP STACK+2,X   ;COMPARE VARIABLE POINTER 
WITH STACKED VARIABLE POINTER
00629  C3AE                                     ;LOW BYTE
00630  C3AE  F0 07              BEQ XXA3B7      ;EXIT IF MATCH FOUND
00631  C3B0  8A          XXA3B0 TXA             ;COPY INDEX
00632  C3B1  18                 CLC             ;CLEAR CARRY FOR ADD
00633  C3B2  69 12              ADC #$12        ;ADD FOR STACK USE SIZE
00634  C3B4  AA                 TAX             ;COPY BACK TO INDEX
00635  C3B5  D0 D8              BNE XXA38F      ;LOOP IF NOT AT START OF S
TACK
00636  C3B7  60          XXA3B7 RTS             ;DONE WITH IT
00637  C3B8              ;********************************
00638  C3B8              ; MOVE BYTES AFTER CHECK FOR SPACE
00639  C3B8              ;********************************
00640  C3B8  20 08 C4    XXA3B8 JSR XXA408
00641  C3BB  85 31              STA STREND
00642  C3BD  84 32              STY STREND+1
00643  C3BF              ;********************************
00644  C3BF              ; MOVE BYTES ROUTINE
00645  C3BF              ;  $5F/$60 SOURCE START ADDRESS
00646  C3BF              ;  $5A/$5B SOURCE END ADDRESS






CBASIC.ASM......PAGE 0016

LINE# LOC   CODE        LINE


00647  C3BF              ;  $58/$59 DESTINATION END ADDRESS
00648  C3BF              ;********************************
00649  C3BF  38          XXA3BF SEC 
00650  C3C0  A5 5A              LDA $5A
00651  C3C2  E5 5F              SBC $5F
00652  C3C4  85 22              STA INDEX
00653  C3C6  A8                 TAY 
00654  C3C7  A5 5B              LDA $5B
00655  C3C9  E5 60              SBC $60
00656  C3CB  AA                 TAX 
00657  C3CC  E8                 INX 
00658  C3CD  98                 TYA 
00659  C3CE  F0 23              BEQ XXA3F3
00660  C3D0  A5 5A              LDA $5A
00661  C3D2  38                 SEC 
00662  C3D3  E5 22              SBC INDEX
00663  C3D5  85 5A              STA $5A
00664  C3D7  B0 03              BCS XXA3DC
00665  C3D9  C6 5B              DEC $5B
00666  C3DB  38                 SEC 
00667  C3DC  A5 58       XXA3DC LDA $58
00668  C3DE  E5 22              SBC INDEX
00669  C3E0  85 58              STA $58
00670  C3E2  B0 08              BCS XXA3EC
00671  C3E4  C6 59              DEC $59
00672  C3E6  90 04              BCC XXA3EC
00673  C3E8  B1 5A       XXA3E8 LDA ($5A),Y
00674  C3EA  91 58              STA ($58),Y
00675  C3EC  88          XXA3EC DEY 
00676  C3ED  D0 F9              BNE XXA3E8
00677  C3EF  B1 5A              LDA ($5A),Y
00678  C3F1  91 58              STA ($58),Y
00679  C3F3  C6 5B       XXA3F3 DEC $5B
00680  C3F5  C6 59              DEC $59
00681  C3F7  CA                 DEX 
00682  C3F8  D0 F2              BNE XXA3EC
00683  C3FA  60                 RTS 
00684  C3FB              ;********************************
00685  C3FB              ; TEST FOR 2 * A BYTES FREE ON STACK
00686  C3FB              ;********************************
00687  C3FB  0A          XXA3FB ASL A
00688  C3FC  69 3E              ADC #$3E        ;'>'
00689  C3FE  B0 35              BCS XXA435
00690  C400  85 22              STA INDEX
00691  C402  BA                 TSX 
00692  C403  E4 22              CPX INDEX
00693  C405  90 2E              BCC XXA435
00694  C407  60                 RTS 
00695  C408              ;********************************
00696  C408              ; ARRAY AREA OVERFLOW CHECK
00697  C408              ;********************************
00698  C408  C4 34       XXA408 CPY FRETOP+1
00699  C40A  90 28              BCC XXA434
00700  C40C  D0 04              BNE XXA412
00701  C40E  C5 33              CMP FRETOP






CBASIC.ASM......PAGE 0017

LINE# LOC   CODE        LINE


00702  C410  90 22              BCC XXA434
00703  C412  48          XXA412 PHA 
00704  C413  A2 09              LDX #$09
00705  C415  98                 TYA 
00706  C416  48          XXA416 PHA 
00707  C417  B5 57              LDA $57,X
00708  C419  CA                 DEX 
00709  C41A  10 FA              BPL XXA416
00710  C41C  20 26 D5           JSR XXB526
00711  C41F  A2 F7              LDX #$F7
00712  C421  68          XXA421 PLA 
00713  C422  95 61              STA $61,X
00714  C424  E8                 INX 
00715  C425  30 FA              BMI XXA421
00716  C427  68                 PLA 
00717  C428  A8                 TAY 
00718  C429  68                 PLA 
00719  C42A  C4 34              CPY FRETOP+1
00720  C42C  90 06              BCC XXA434
00721  C42E  D0 05              BNE XXA435
00722  C430  C5 33              CMP FRETOP
00723  C432  B0 01              BCS XXA435
00724  C434  60          XXA434 RTS 
00725  C435              ;********************************
00726  C435              ; OUT OF MEMORY ERROR
00727  C435              ;********************************
00728  C435  A2 10       XXA435 LDX #$10        ; ERROR NUMBER
00729  C437              ;********************************
00730  C437              ; HANDLE ERROR MESSAGES
00731  C437              ;********************************
00732  C437  6C 00 03    XXA437 JMP (IERROR)    ; NORMALLY A43A
00733  C43A              ;********************************
00734  C43A              ; STANDARD ERROR MESSAGE HANDLER
00735  C43A              ;********************************
00736  C43A  8A          KKA43A TXA 
00737  C43B  0A                 ASL A
00738  C43C  AA                 TAX 
00739  C43D  BD 26 C3           LDA XXA327-1,X
00740  C440  85 22              STA INDEX
00741  C442  BD 27 C3           LDA XXA327,X
00742  C445  85 23              STA INDEX+1
00743  C447  20 CC FF           JSR CLRCHN
00744  C44A  A9 00              LDA #$00
00745  C44C  85 13              STA CHANNL
00746  C44E  20 D7 CA           JSR XXAAD7
00747  C451  20 45 CB           JSR XXAB45
00748  C454  A0 00              LDY #$00
00749  C456  B1 22       XXA456 LDA (INDEX),Y
00750  C458  48                 PHA 
00751  C459  29 7F              AND #$7F
00752  C45B  20 47 CB           JSR XXAB47
00753  C45E  C8                 INY 
00754  C45F  68                 PLA 
00755  C460  10 F4              BPL XXA456
00756  C462  20 7A C6           JSR XXA67A






CBASIC.ASM......PAGE 0018

LINE# LOC   CODE        LINE


00757  C465  A9 69              LDA #<WWA369    ;#$69   ; LOW  A369
00758  C467  A0 C3              LDY #>WWA369    ;#$A3   ; HIGH A369
00759  C469  20 1E CB    XXA469 JSR XXAB1E
00760  C46C  A4 3A              LDY CURLIN+1
00761  C46E  C8                 INY 
00762  C46F  F0 03              BEQ XXA474
00763  C471  20 C2 DD           JSR XXBDC2
00764  C474  A9 76       XXA474 LDA #<WWA376    ;#$76   ; LOW A376
00765  C476  A0 C3              LDY #>WWA376    ;#$A3   ; HIGH A376
00766  C478  20 1E CB           JSR XXAB1E
00767  C47B  A9 80              LDA #$80
00768  C47D  20 90 FF           JSR SETMSG
00769  C480  6C 02 03    XXA480 JMP (IMAIN)     ; NORMALLY A483
00770  C483              ;################################
00771  C483              ;********************************
00772  C483              ;
00773  C483              ; STANDARD WARM START ROUTINE
00774  C483              ;
00775  C483              ;********************************
00776  C483              ;################################
00777  C483  20 60 C5    KKA483 JSR XXA560
00778  C486  86 7A              STX TXTPTR
00779  C488  84 7B              STY TXTPTR+1
00780  C48A  20 73 00           JSR CHRGET
00781  C48D  AA                 TAX 
00782  C48E  F0 F0              BEQ XXA480
00783  C490  A2 FF              LDX #$FF
00784  C492  86 3A              STX CURLIN+1
00785  C494  90 06              BCC XXA49C
00786  C496  20 79 C5           JSR XXA579
00787  C499  4C E1 C7           JMP XXA7E1
00788  C49C              ;********************************
00789  C49C              ; HANDLE INSERT/DELETE BASIC LINES
00790  C49C              ;********************************
00791  C49C  20 6B C9    XXA49C JSR XXA96B
00792  C49F  20 79 C5           JSR XXA579
00793  C4A2  84 0B              STY COUNT
00794  C4A4  20 13 C6           JSR XXA613
00795  C4A7  90 44              BCC XXA4ED
00796  C4A9              ;********************************
00797  C4A9              ; DELETE OLD LINE
00798  C4A9              ;********************************
00799  C4A9  A0 01              LDY #$01
00800  C4AB  B1 5F              LDA ($5F),Y
00801  C4AD  85 23              STA INDEX+1
00802  C4AF  A5 2D              LDA VARTAB
00803  C4B1  85 22              STA INDEX
00804  C4B3  A5 60              LDA $60
00805  C4B5  85 25              STA INDEX+3
00806  C4B7  A5 5F              LDA $5F
00807  C4B9  88                 DEY 
00808  C4BA  F1 5F              SBC ($5F),Y
00809  C4BC  18                 CLC 
00810  C4BD  65 2D              ADC VARTAB
00811  C4BF  85 2D              STA VARTAB






CBASIC.ASM......PAGE 0019

LINE# LOC   CODE        LINE


00812  C4C1  85 24              STA INDEX+2
00813  C4C3  A5 2E              LDA VARTAB+1
00814  C4C5  69 FF              ADC #$FF
00815  C4C7  85 2E              STA VARTAB+1
00816  C4C9  E5 60              SBC $60
00817  C4CB  AA                 TAX 
00818  C4CC  38                 SEC 
00819  C4CD  A5 5F              LDA $5F
00820  C4CF  E5 2D              SBC VARTAB
00821  C4D1  A8                 TAY 
00822  C4D2  B0 03              BCS XXA4D7
00823  C4D4  E8                 INX 
00824  C4D5  C6 25              DEC INDEX+3
00825  C4D7  18          XXA4D7 CLC 
00826  C4D8  65 22              ADC INDEX
00827  C4DA  90 03              BCC XXA4DF
00828  C4DC  C6 23              DEC INDEX+1
00829  C4DE  18                 CLC 
00830  C4DF  B1 22       XXA4DF LDA (INDEX),Y
00831  C4E1  91 24              STA (INDEX+2),Y
00832  C4E3  C8                 INY 
00833  C4E4  D0 F9              BNE XXA4DF
00834  C4E6  E6 23              INC INDEX+1
00835  C4E8  E6 25              INC INDEX+3
00836  C4EA  CA                 DEX 
00837  C4EB  D0 F2              BNE XXA4DF
00838  C4ED              ;********************************
00839  C4ED              ; INSERT NEW LINE
00840  C4ED              ;********************************
00841  C4ED  20 59 C6    XXA4ED JSR XXA659
00842  C4F0  20 33 C5           JSR XXA533
00843  C4F3  AD 00 02           LDA BUF
00844  C4F6  F0 88              BEQ XXA480
00845  C4F8  18                 CLC 
00846  C4F9  A5 2D              LDA VARTAB
00847  C4FB  85 5A              STA $5A
00848  C4FD  65 0B              ADC COUNT
00849  C4FF  85 58              STA $58
00850  C501  A4 2E              LDY VARTAB+1
00851  C503  84 5B              STY $5B
00852  C505  90 01              BCC XXA508
00853  C507  C8                 INY 
00854  C508  84 59       XXA508 STY $59
00855  C50A  20 B8 C3           JSR XXA3B8
00856  C50D  A5 14              LDA LINNUM
00857  C50F  A4 15              LDY LINNUM+1
00858  C511  8D FE 01           STA $01FE
00859  C514  8C FF 01           STY $01FF
00860  C517  A5 31              LDA STREND
00861  C519  A4 32              LDY STREND+1
00862  C51B  85 2D              STA VARTAB
00863  C51D  84 2E              STY VARTAB+1
00864  C51F  A4 0B              LDY COUNT
00865  C521  88                 DEY 
00866  C522  B9 FC 01    XXA522 LDA $01FC,Y






CBASIC.ASM......PAGE 0020

LINE# LOC   CODE        LINE


00867  C525  91 5F              STA ($5F),Y
00868  C527  88                 DEY 
00869  C528  10 F8              BPL XXA522
00870  C52A  20 59 C6    KKA52A JSR XXA659
00871  C52D  20 33 C5           JSR XXA533
00872  C530  4C 80 C4           JMP XXA480
00873  C533              ;********************************
00874  C533              ; RELINK BASIC PROGRAM
00875  C533              ;********************************
00876  C533  A5 2B       XXA533 LDA TXTTAB
00877  C535  A4 2C              LDY TXTTAB+1
00878  C537  85 22              STA INDEX
00879  C539  84 23              STY INDEX+1
00880  C53B  18                 CLC 
00881  C53C  A0 01       XXA53C LDY #$01
00882  C53E  B1 22              LDA (INDEX),Y
00883  C540  F0 1D              BEQ XXA55F
00884  C542  A0 04              LDY #$04
00885  C544  C8          XXA544 INY 
00886  C545  B1 22              LDA (INDEX),Y
00887  C547  D0 FB              BNE XXA544
00888  C549  C8                 INY 
00889  C54A  98                 TYA 
00890  C54B  65 22              ADC INDEX
00891  C54D  AA                 TAX 
00892  C54E  A0 00              LDY #$00
00893  C550  91 22              STA (INDEX),Y
00894  C552  A5 23              LDA INDEX+1
00895  C554  69 00              ADC #$00
00896  C556  C8                 INY 
00897  C557  91 22              STA (INDEX),Y
00898  C559  86 22              STX INDEX
00899  C55B  85 23              STA INDEX+1
00900  C55D  90 DD              BCC XXA53C
00901  C55F  60          XXA55F RTS 
00902  C560              ;********************************
00903  C560              ; GET STATEMENT INTO BUFFER
00904  C560              ;********************************
00905  C560  A2 00       XXA560 LDX #$00
00906  C562              ; DIFF - FIXED BY ADDING BASICV3EX TO END
00907  C562              ; C64 = $E112 VIC20 = $E10F
00908  C562  20 0F E1    XXA562 JSR KKE112
00909  C565  C9 0D              CMP #$0D
00910  C567  F0 0D              BEQ XXA576
00911  C569  9D 00 02           STA BUF,X
00912  C56C  E8                 INX 
00913  C56D  E0 59              CPX #$59        ;'Y'
00914  C56F  90 F1              BCC XXA562
00915  C571  A2 17              LDX #$17        ; ERROR NUMBER
00916  C573  4C 37 C4           JMP XXA437
00917  C576              ;********************************
00918  C576  4C CA CA    XXA576 JMP XXAACA      ; GOTO END OF LINE
00919  C579              ;********************************
00920  C579              ; CRUNCH TOKENS
00921  C579              ;********************************






CBASIC.ASM......PAGE 0021

LINE# LOC   CODE        LINE


00922  C579  6C 04 03    XXA579 JMP (ICRNCH)    ; NORMALLY A57C
00923  C57C              ;********************************
00924  C57C              ; STANDARD TOKEN CRUNCHER
00925  C57C              ;********************************
00926  C57C  A6 7A       KKA57C LDX TXTPTR
00927  C57E  A0 04              LDY #$04
00928  C580  84 0F              STY GARBFL
00929  C582  BD 00 02    XXA582 LDA BUF,X
00930  C585  10 07              BPL XXA58E
00931  C587  C9 FF              CMP #$FF        ; PI
00932  C589  F0 3E              BEQ XXA5C9
00933  C58B  E8                 INX 
00934  C58C  D0 F4              BNE XXA582
00935  C58E  C9 20       XXA58E CMP #$20        ;' '
00936  C590  F0 37              BEQ XXA5C9
00937  C592  85 08              STA ENDCHR
00938  C594  C9 22              CMP #$22        ;'"'
00939  C596  F0 56              BEQ XXA5EE
00940  C598  24 0F              BIT GARBFL
00941  C59A  70 2D              BVS XXA5C9
00942  C59C  C9 3F              CMP #$3F        ;'?'
00943  C59E  D0 04              BNE XXA5A4
00944  C5A0  A9 99              LDA #$99        ; PRINT CODE
00945  C5A2  D0 25              BNE XXA5C9
00946  C5A4  C9 30       XXA5A4 CMP #$30        ;'0'
00947  C5A6  90 04              BCC XXA5AC
00948  C5A8  C9 3C              CMP #$3C        ;'<'
00949  C5AA  90 1D              BCC XXA5C9
00950  C5AC  84 71       XXA5AC STY $71
00951  C5AE  A0 00              LDY #$00
00952  C5B0  84 0B              STY COUNT
00953  C5B2  88                 DEY 
00954  C5B3  86 7A              STX TXTPTR
00955  C5B5  CA                 DEX 
00956  C5B6  C8          XXA5B6 INY 
00957  C5B7  E8                 INX 
00958  C5B8  BD 00 02    XXA5B8 LDA BUF,X
00959  C5BB  38                 SEC 
00960  C5BC  F9 9E C0           SBC XXA09E,Y
00961  C5BF  F0 F5              BEQ XXA5B6
00962  C5C1  C9 80              CMP #$80
00963  C5C3  D0 30              BNE XXA5F5
00964  C5C5  05 0B              ORA COUNT
00965  C5C7  A4 71       XXA5C7 LDY $71
00966  C5C9  E8          XXA5C9 INX 
00967  C5CA  C8                 INY 
00968  C5CB  99 FB 01           STA $01FB,Y
00969  C5CE  B9 FB 01           LDA $01FB,Y
00970  C5D1  F0 36              BEQ XXA609
00971  C5D3  38                 SEC 
00972  C5D4  E9 3A              SBC #$3A        ;':'
00973  C5D6  F0 04              BEQ XXA5DC
00974  C5D8  C9 49              CMP #$49        ; DATA CODE
00975  C5DA  D0 02              BNE XXA5DE
00976  C5DC  85 0F       XXA5DC STA GARBFL






CBASIC.ASM......PAGE 0022

LINE# LOC   CODE        LINE


00977  C5DE  38          XXA5DE SEC 
00978  C5DF  E9 55              SBC #$55        ; REM CODE
00979  C5E1  D0 9F              BNE XXA582
00980  C5E3  85 08              STA ENDCHR
00981  C5E5  BD 00 02    XXA5E5 LDA BUF,X
00982  C5E8  F0 DF              BEQ XXA5C9
00983  C5EA  C5 08              CMP ENDCHR
00984  C5EC  F0 DB              BEQ XXA5C9
00985  C5EE  C8          XXA5EE INY 
00986  C5EF  99 FB 01           STA $01FB,Y
00987  C5F2  E8                 INX 
00988  C5F3  D0 F0              BNE XXA5E5
00989  C5F5  A6 7A       XXA5F5 LDX TXTPTR
00990  C5F7  E6 0B              INC COUNT
00991  C5F9  C8          XXA5F9 INY 
00992  C5FA  B9 9D C0           LDA XXA09E-1,Y
00993  C5FD  10 FA              BPL XXA5F9
00994  C5FF  B9 9E C0           LDA XXA09E,Y
00995  C602  D0 B4              BNE XXA5B8
00996  C604  BD 00 02           LDA BUF,X
00997  C607  10 BE              BPL XXA5C7
00998  C609  99 FD 01    XXA609 STA $01FD,Y
00999  C60C  C6 7B              DEC TXTPTR+1
01000  C60E  A9 FF              LDA #$FF
01001  C610  85 7A              STA TXTPTR
01002  C612  60                 RTS 
01003  C613              ;********************************
01004  C613              ; SEARCH FOR A LINE IN A PROGRAM
01005  C613              ;********************************
01006  C613  A5 2B       XXA613 LDA TXTTAB
01007  C615  A6 2C              LDX TXTTAB+1
01008  C617  A0 01       XXA617 LDY #$01
01009  C619  85 5F              STA $5F
01010  C61B  86 60              STX $60
01011  C61D  B1 5F              LDA ($5F),Y
01012  C61F  F0 1F              BEQ XXA640
01013  C621  C8                 INY 
01014  C622  C8                 INY 
01015  C623  A5 15              LDA LINNUM+1
01016  C625  D1 5F              CMP ($5F),Y
01017  C627  90 18              BCC XXA641
01018  C629  F0 03              BEQ XXA62E
01019  C62B  88                 DEY 
01020  C62C  D0 09              BNE XXA637
01021  C62E  A5 14       XXA62E LDA LINNUM
01022  C630  88                 DEY 
01023  C631  D1 5F              CMP ($5F),Y
01024  C633  90 0C              BCC XXA641
01025  C635  F0 0A              BEQ XXA641
01026  C637  88          XXA637 DEY 
01027  C638  B1 5F              LDA ($5F),Y
01028  C63A  AA                 TAX 
01029  C63B  88                 DEY 
01030  C63C  B1 5F              LDA ($5F),Y
01031  C63E  B0 D7              BCS XXA617






CBASIC.ASM......PAGE 0023

LINE# LOC   CODE        LINE


01032  C640  18          XXA640 CLC 
01033  C641  60          XXA641 RTS 
01034  C642              ;********************************
01035  C642              ; NEW COMMAND
01036  C642              ;********************************
01037  C642  D0 FD       ZZA642 BNE XXA641
01038  C644  A9 00       KKA644 LDA #$00
01039  C646  A8                 TAY 
01040  C647  91 2B              STA (TXTTAB),Y
01041  C649  C8                 INY 
01042  C64A  91 2B              STA (TXTTAB),Y
01043  C64C  A5 2B              LDA TXTTAB
01044  C64E  18                 CLC 
01045  C64F  69 02              ADC #$02
01046  C651  85 2D              STA VARTAB
01047  C653  A5 2C              LDA TXTTAB+1
01048  C655  69 00              ADC #$00
01049  C657  85 2E              STA VARTAB+1
01050  C659  20 8E C6    XXA659 JSR XXA68E
01051  C65C  A9 00              LDA #$00
01052  C65E              ;********************************
01053  C65E              ; CLR COMMAND
01054  C65E              ;********************************
01055  C65E  D0 2D       ZZA65E BNE XXA68D
01056  C660  20 E7 FF    XXA660 JSR CLALL
01057  C663  A5 37       KKA663 LDA MEMSIZ
01058  C665  A4 38              LDY MEMSIZ+1
01059  C667  85 33              STA FRETOP
01060  C669  84 34              STY FRETOP+1
01061  C66B  A5 2D              LDA VARTAB
01062  C66D  A4 2E              LDY VARTAB+1
01063  C66F  85 2F              STA ARYTAB
01064  C671  84 30              STY ARYTAB+1
01065  C673  85 31              STA STREND
01066  C675  84 32              STY STREND+1
01067  C677  20 1D C8    KKA677 JSR XXA81D
01068  C67A              ;********************************
01069  C67A              ; RESET STACK AND PROGRAM POINTERS
01070  C67A              ;********************************
01071  C67A  A2 19       XXA67A LDX #$19
01072  C67C  86 16              STX TEMPPT
01073  C67E  68                 PLA 
01074  C67F  A8                 TAY 
01075  C680  68                 PLA 
01076  C681  A2 FA              LDX #$FA
01077  C683  9A                 TXS 
01078  C684  48                 PHA 
01079  C685  98                 TYA 
01080  C686  48                 PHA 
01081  C687  A9 00              LDA #$00
01082  C689  85 3E              STA OLDTXT+1
01083  C68B  85 10              STA SUBFLG
01084  C68D  60          XXA68D RTS 
01085  C68E              ;********************************
01086  C68E              ; SET CURRENT CHARACTER POINTER TO START OF BASIC
 - 1






CBASIC.ASM......PAGE 0024

LINE# LOC   CODE        LINE


01087  C68E              ;********************************
01088  C68E  18          XXA68E CLC 
01089  C68F  A5 2B              LDA TXTTAB
01090  C691  69 FF              ADC #$FF
01091  C693  85 7A              STA TXTPTR
01092  C695  A5 2C              LDA TXTTAB+1
01093  C697  69 FF              ADC #$FF
01094  C699  85 7B              STA TXTPTR+1
01095  C69B  60          XXA69B RTS 
01096  C69C              ;********************************
01097  C69C              ; LIST COMMAND
01098  C69C              ;********************************
01099  C69C  90 06       ZZA69C BCC XXA6A4
01100  C69E  F0 04              BEQ XXA6A4
01101  C6A0  C9 AB              CMP #$AB
01102  C6A2  D0 E9              BNE XXA68D
01103  C6A4  20 6B C9    XXA6A4 JSR XXA96B
01104  C6A7  20 13 C6           JSR XXA613
01105  C6AA  20 79 00           JSR CHRGOT
01106  C6AD  F0 0C              BEQ XXA6BB
01107  C6AF  C9 AB              CMP #$AB
01108  C6B1  D0 8E              BNE XXA641
01109  C6B3  20 73 00           JSR CHRGET
01110  C6B6  20 6B C9           JSR XXA96B
01111  C6B9  D0 86              BNE XXA641
01112  C6BB  68          XXA6BB PLA 
01113  C6BC  68                 PLA 
01114  C6BD  A5 14              LDA LINNUM
01115  C6BF  05 15              ORA LINNUM+1
01116  C6C1  D0 06              BNE XXA6C9
01117  C6C3  A9 FF              LDA #$FF
01118  C6C5  85 14              STA LINNUM
01119  C6C7  85 15              STA LINNUM+1
01120  C6C9              ;********************************
01121  C6C9              ; LIST LINES FROM $5F/$60 TO LINNUM/LINNUM+1
01122  C6C9              ;********************************
01123  C6C9  A0 01       XXA6C9 LDY #$01
01124  C6CB  84 0F              STY GARBFL
01125  C6CD  B1 5F              LDA ($5F),Y
01126  C6CF  F0 43              BEQ XXA714
01127  C6D1  20 2C C8           JSR XXA82C
01128  C6D4  20 D7 CA           JSR XXAAD7
01129  C6D7  C8                 INY 
01130  C6D8  B1 5F              LDA ($5F),Y
01131  C6DA  AA                 TAX 
01132  C6DB  C8                 INY 
01133  C6DC  B1 5F              LDA ($5F),Y
01134  C6DE  C5 15              CMP LINNUM+1
01135  C6E0  D0 04              BNE XXA6E6
01136  C6E2  E4 14              CPX LINNUM
01137  C6E4  F0 02              BEQ XXA6E8
01138  C6E6  B0 2C       XXA6E6 BCS XXA714
01139  C6E8  84 49       XXA6E8 STY FORPNT
01140  C6EA  20 CD DD           JSR XXBDCD
01141  C6ED  A9 20              LDA #$20        ;' '






CBASIC.ASM......PAGE 0025

LINE# LOC   CODE        LINE


01142  C6EF  A4 49       XXA6EF LDY FORPNT
01143  C6F1  29 7F              AND #$7F
01144  C6F3  20 47 CB    XXA6F3 JSR XXAB47
01145  C6F6  C9 22              CMP #$22        ;'"'
01146  C6F8  D0 06              BNE XXA700
01147  C6FA  A5 0F              LDA GARBFL
01148  C6FC  49 FF              EOR #$FF
01149  C6FE  85 0F              STA GARBFL
01150  C700  C8          XXA700 INY 
01151  C701  F0 11              BEQ XXA714
01152  C703  B1 5F              LDA ($5F),Y
01153  C705  D0 10              BNE XXA717
01154  C707  A8                 TAY 
01155  C708  B1 5F              LDA ($5F),Y
01156  C70A  AA                 TAX 
01157  C70B  C8                 INY 
01158  C70C  B1 5F              LDA ($5F),Y
01159  C70E  86 5F              STX $5F
01160  C710  85 60              STA $60
01161  C712  D0 B5              BNE XXA6C9
01162  C714              ; DIFF
01163  C714              ; C64 = $E386 VIC20 = $C474
01164  C714  4C 83 E3    XXA714 JMP XXE386
01165  C717              ;********************************
01166  C717              ; PRINT TOKENS ROUTINE
01167  C717              ;********************************
01168  C717  6C 06 03    XXA717 JMP (IQPLOP)    ; NORMALLY A71A
01169  C71A              ;********************************
01170  C71A              ; STANDARD TOKEN PRINTER
01171  C71A              ;********************************
01172  C71A  10 D7       ZZA71A BPL XXA6F3
01173  C71C  C9 FF              CMP #$FF
01174  C71E  F0 D3              BEQ XXA6F3
01175  C720  24 0F              BIT GARBFL
01176  C722  30 CF              BMI XXA6F3
01177  C724  38                 SEC 
01178  C725  E9 7F              SBC #$7F
01179  C727  AA                 TAX 
01180  C728  84 49              STY FORPNT
01181  C72A  A0 FF              LDY #$FF
01182  C72C  CA          XXA72C DEX 
01183  C72D  F0 08              BEQ XXA737
01184  C72F  C8          XXA72F INY 
01185  C730  B9 9E C0           LDA XXA09E,Y
01186  C733  10 FA              BPL XXA72F
01187  C735  30 F5              BMI XXA72C
01188  C737              ;********************************
01189  C737              ; PRINT KEYWORD
01190  C737              ;********************************
01191  C737  C8          XXA737 INY 
01192  C738  B9 9E C0           LDA XXA09E,Y
01193  C73B  30 B2              BMI XXA6EF
01194  C73D  20 47 CB           JSR XXAB47
01195  C740  D0 F5              BNE XXA737
01196  C742              ;********************************






CBASIC.ASM......PAGE 0026

LINE# LOC   CODE        LINE


01197  C742              ; FOR COMMAND
01198  C742              ;********************************
01199  C742  A9 80       ZZA742 LDA #$80
01200  C744  85 10              STA SUBFLG
01201  C746  20 A5 C9           JSR XXA9A5
01202  C749  20 8A C3           JSR XXA38A
01203  C74C  D0 05              BNE XXA753
01204  C74E  8A                 TXA 
01205  C74F  69 0F              ADC #$0F
01206  C751  AA                 TAX 
01207  C752  9A                 TXS 
01208  C753  68          XXA753 PLA 
01209  C754  68                 PLA 
01210  C755  A9 09              LDA #$09
01211  C757  20 FB C3           JSR XXA3FB
01212  C75A  20 06 C9           JSR XXA906
01213  C75D  18                 CLC 
01214  C75E  98                 TYA 
01215  C75F  65 7A              ADC TXTPTR
01216  C761  48                 PHA 
01217  C762  A5 7B              LDA TXTPTR+1
01218  C764  69 00              ADC #$00
01219  C766  48                 PHA 
01220  C767  A5 3A              LDA CURLIN+1
01221  C769  48                 PHA 
01222  C76A  A5 39              LDA CURLIN
01223  C76C  48                 PHA 
01224  C76D  A9 A4              LDA #$A4
01225  C76F  20 FF CE           JSR XXAEFF
01226  C772  20 8D CD           JSR XXAD8D
01227  C775  20 8A CD           JSR XXAD8A
01228  C778  A5 66              LDA $66
01229  C77A  09 7F              ORA #$7F
01230  C77C  25 62              AND $62
01231  C77E  85 62              STA $62
01232  C780  A9 8B              LDA #<ZZA78B    ;#$8B   ; LOW  A78B
01233  C782  A0 C7              LDY #>ZZA78B    ;#$A7   ; HIGH A78B
01234  C784  85 22              STA INDEX
01235  C786  84 23              STY INDEX+1
01236  C788  4C 43 CE           JMP XXAE43
01237  C78B              ;********************************
01238  C78B              ;
01239  C78B              ;********************************
01240  C78B  A9 BC       ZZA78B LDA #<WWB9BC    ;#$BC   ; LOW  B9BC
01241  C78D  A0 D9              LDY #>WWB9BC    ;#$B9   ; HIGH B9BC
01242  C78F  20 A2 DB           JSR XXBBA2
01243  C792  20 79 00           JSR CHRGOT
01244  C795  C9 A9              CMP #$A9
01245  C797  D0 06              BNE XXA79F
01246  C799  20 73 00           JSR CHRGET
01247  C79C  20 8A CD           JSR XXAD8A
01248  C79F  20 2B DC    XXA79F JSR XXBC2B
01249  C7A2  20 38 CE           JSR XXAE38
01250  C7A5  A5 4A              LDA FORPNT+1
01251  C7A7  48                 PHA 






CBASIC.ASM......PAGE 0027

LINE# LOC   CODE        LINE


01252  C7A8  A5 49              LDA FORPNT
01253  C7AA  48                 PHA 
01254  C7AB  A9 81              LDA #$81        ; FOR BLOCK CODE
01255  C7AD  48                 PHA 
01256  C7AE              ;********************************
01257  C7AE              ; EXECUTE NEXT STATEMENT
01258  C7AE              ;********************************
01259  C7AE  20 2C C8    XXA7AE JSR XXA82C
01260  C7B1  A5 7A              LDA TXTPTR
01261  C7B3  A4 7B              LDY TXTPTR+1
01262  C7B5  C0 02              CPY #$02
01263  C7B7  EA                 NOP 
01264  C7B8  F0 04              BEQ XXA7BE
01265  C7BA  85 3D              STA OLDTXT
01266  C7BC  84 3E              STY OLDTXT+1
01267  C7BE  A0 00       XXA7BE LDY #$00
01268  C7C0  B1 7A              LDA (TXTPTR),Y
01269  C7C2  D0 43              BNE XXA807
01270  C7C4  A0 02              LDY #$02
01271  C7C6  B1 7A              LDA (TXTPTR),Y
01272  C7C8  18                 CLC 
01273  C7C9  D0 03              BNE XXA7CE
01274  C7CB  4C 4B C8           JMP XXA84B
01275  C7CE              ;********************************
01276  C7CE              ;
01277  C7CE              ;********************************
01278  C7CE  C8          XXA7CE INY 
01279  C7CF  B1 7A              LDA (TXTPTR),Y
01280  C7D1  85 39              STA CURLIN
01281  C7D3  C8                 INY 
01282  C7D4  B1 7A              LDA (TXTPTR),Y
01283  C7D6  85 3A              STA CURLIN+1
01284  C7D8  98                 TYA 
01285  C7D9  65 7A              ADC TXTPTR
01286  C7DB  85 7A              STA TXTPTR
01287  C7DD  90 02              BCC XXA7E1
01288  C7DF  E6 7B              INC TXTPTR+1
01289  C7E1  6C 08 03    XXA7E1 JMP (IGONE)     ; NORMALLY A7E4
01290  C7E4              ;********************************
01291  C7E4              ; EXECUTE A STATEMENT
01292  C7E4              ;********************************
01293  C7E4  20 73 00    KKA7E4 JSR CHRGET
01294  C7E7  20 ED C7           JSR XXA7ED
01295  C7EA  4C AE C7           JMP XXA7AE
01296  C7ED              ;********************************
01297  C7ED              ; EXECUTE COMMAND IN A
01298  C7ED              ;********************************
01299  C7ED  F0 3C       XXA7ED BEQ XXA82B
01300  C7EF  E9 80       XXA7EF SBC #$80
01301  C7F1  90 11              BCC XXA804
01302  C7F3  C9 23              CMP #$23        ;'#'
01303  C7F5  B0 17              BCS XXA80E
01304  C7F7  0A                 ASL A
01305  C7F8  A8                 TAY 
01306  C7F9  B9 0D C0           LDA ZZA00C+1,Y






CBASIC.ASM......PAGE 0028

LINE# LOC   CODE        LINE


01307  C7FC  48                 PHA 
01308  C7FD  B9 0C C0           LDA ZZA00C,Y
01309  C800  48                 PHA 
01310  C801  4C 73 00           JMP CHRGET
01311  C804              ;********************************
01312  C804              ;
01313  C804              ;********************************
01314  C804  4C A5 C9    XXA804 JMP XXA9A5
01315  C807              ;********************************
01316  C807  C9 3A       XXA807 CMP #$3A        ;':'
01317  C809  F0 D6              BEQ XXA7E1
01318  C80B  4C 08 CF    XXA80B JMP XXAF08
01319  C80E              ;********************************
01320  C80E              ;
01321  C80E              ;********************************
01322  C80E  C9 4B       XXA80E CMP #$4B        ; GO CODE
01323  C810  D0 F9              BNE XXA80B
01324  C812  20 73 00           JSR CHRGET
01325  C815  A9 A4              LDA #$A4        ; TO CODE
01326  C817  20 FF CE           JSR XXAEFF
01327  C81A  4C A0 C8           JMP XXA8A0      ; DO GOTO
01328  C81D              ;********************************
01329  C81D              ; RESTORE COMMAND
01330  C81D              ;********************************
01331  C81D  38          XXA81D SEC 
01332  C81E  A5 2B              LDA TXTTAB
01333  C820  E9 01              SBC #$01
01334  C822  A4 2C              LDY TXTTAB+1
01335  C824  B0 01              BCS XXA827
01336  C826  88                 DEY 
01337  C827  85 41       XXA827 STA DATPRT
01338  C829  84 42              STY DATPRT+1
01339  C82B  60          XXA82B RTS 
01340  C82C              ;********************************
01341  C82C              ; STOP COMMAND
01342  C82C              ;********************************
01343  C82C  20 E1 FF    XXA82C JSR STOP        ; TEST STOP KEY
01344  C82F              ;********************************
01345  C82F              ; STOP COMMAND
01346  C82F              ;********************************
01347  C82F  B0 01       ZZA82F BCS XXA832
01348  C831  18          ZZA831 CLC
01349  C832              ;********************************
01350  C832              ; END COMMAND
01351  C832              ;********************************
01352  C832  D0 3C       XXA832 BNE XXA870
01353  C834  A5 7A              LDA TXTPTR
01354  C836  A4 7B              LDY TXTPTR+1
01355  C838  A6 3A              LDX CURLIN+1
01356  C83A  E8                 INX 
01357  C83B  F0 0C              BEQ XXA849
01358  C83D  85 3D              STA OLDTXT
01359  C83F  84 3E              STY OLDTXT+1
01360  C841  A5 39              LDA CURLIN
01361  C843  A4 3A              LDY CURLIN+1






CBASIC.ASM......PAGE 0029

LINE# LOC   CODE        LINE


01362  C845  85 3B              STA OLDLIN
01363  C847  84 3C              STY OLDLIN+1
01364  C849  68          XXA849 PLA 
01365  C84A  68                 PLA 
01366  C84B  A9 81       XXA84B LDA #<WWA381    ;#$81   ; LOW  A381
01367  C84D  A0 C3              LDY #>WWA381    ;#$A3   ; HIGH A381
01368  C84F  90 03              BCC XXA854
01369  C851  4C 69 C4           JMP XXA469
01370  C854              ;********************************
01371  C854              ;
01372  C854              ;********************************
01373  C854              ; DIFF
01374  C854              ; C64 = $E386 VIC20 = $C474
01375  C854  4C 83 E3    XXA854 JMP XXE386
01376  C857              ;********************************
01377  C857              ; CONT COMMAND
01378  C857              ;********************************
01379  C857  D0 17       ZZA857 BNE XXA870
01380  C859  A2 1A              LDX #$1A        ; ERROR NUMBER
01381  C85B  A4 3E              LDY OLDTXT+1
01382  C85D  D0 03              BNE XXA862
01383  C85F  4C 37 C4           JMP XXA437
01384  C862              ;********************************
01385  C862              ;
01386  C862              ;********************************
01387  C862  A5 3D       XXA862 LDA OLDTXT
01388  C864  85 7A              STA TXTPTR
01389  C866  84 7B              STY TXTPTR+1
01390  C868  A5 3B              LDA OLDLIN
01391  C86A  A4 3C              LDY OLDLIN+1
01392  C86C  85 39              STA CURLIN
01393  C86E  84 3A              STY CURLIN+1
01394  C870  60          XXA870 RTS 
01395  C871              ;********************************
01396  C871              ; RUN COMMAND
01397  C871              ;********************************
01398  C871  08          ZZA871 PHP 
01399  C872  A9 00              LDA #$00
01400  C874  20 90 FF           JSR SETMSG
01401  C877  28                 PLP 
01402  C878  D0 03              BNE XXA87D
01403  C87A  4C 59 C6           JMP XXA659
01404  C87D              ;********************************
01405  C87D              ;
01406  C87D              ;********************************
01407  C87D  20 60 C6    XXA87D JSR XXA660      ; DO CLR
01408  C880  4C 97 C8           JMP XXA897      ; DO GOTO
01409  C883              ;********************************
01410  C883              ; GOSUB COMMAND
01411  C883              ;********************************
01412  C883  A9 03       ZZA883 LDA #$03
01413  C885  20 FB C3           JSR XXA3FB
01414  C888  A5 7B              LDA TXTPTR+1
01415  C88A  48                 PHA 
01416  C88B  A5 7A              LDA TXTPTR






CBASIC.ASM......PAGE 0030

LINE# LOC   CODE        LINE


01417  C88D  48                 PHA 
01418  C88E  A5 3A              LDA CURLIN+1
01419  C890  48                 PHA 
01420  C891  A5 39              LDA CURLIN
01421  C893  48                 PHA 
01422  C894  A9 8D              LDA #$8D
01423  C896  48                 PHA 
01424  C897  20 79 00    XXA897 JSR CHRGOT
01425  C89A  20 A0 C8           JSR XXA8A0
01426  C89D  4C AE C7           JMP XXA7AE
01427  C8A0              ;********************************
01428  C8A0              ;
01429  C8A0              ;********************************
01430  C8A0  20 6B C9    XXA8A0 JSR XXA96B
01431  C8A3  20 09 C9           JSR XXA909
01432  C8A6  38                 SEC 
01433  C8A7  A5 39              LDA CURLIN
01434  C8A9  E5 14              SBC LINNUM
01435  C8AB  A5 3A              LDA CURLIN+1
01436  C8AD  E5 15              SBC LINNUM+1
01437  C8AF  B0 0B              BCS XXA8BC
01438  C8B1  98                 TYA 
01439  C8B2  38                 SEC 
01440  C8B3  65 7A              ADC TXTPTR
01441  C8B5  A6 7B              LDX TXTPTR+1
01442  C8B7  90 07              BCC XXA8C0
01443  C8B9  E8                 INX 
01444  C8BA  B0 04              BCS XXA8C0
01445  C8BC  A5 2B       XXA8BC LDA TXTTAB
01446  C8BE  A6 2C              LDX TXTTAB+1
01447  C8C0  20 17 C6    XXA8C0 JSR XXA617
01448  C8C3  90 1E              BCC XXA8E3
01449  C8C5  A5 5F              LDA $5F
01450  C8C7  E9 01              SBC #$01
01451  C8C9  85 7A              STA TXTPTR
01452  C8CB  A5 60              LDA $60
01453  C8CD  E9 00              SBC #$00
01454  C8CF  85 7B              STA TXTPTR+1
01455  C8D1  60          XXA8D1 RTS 
01456  C8D2              ;********************************
01457  C8D2              ;
01458  C8D2              ;********************************
01459  C8D2  D0 FD       ZZA8D2 BNE XXA8D1
01460  C8D4  A9 FF              LDA #$FF
01461  C8D6  85 4A              STA FORPNT+1
01462  C8D8  20 8A C3           JSR XXA38A
01463  C8DB  9A                 TXS 
01464  C8DC  C9 8D              CMP #$8D
01465  C8DE  F0 0B              BEQ XXA8EB
01466  C8E0  A2 0C              LDX #$0C
01467  C8E2              ;********************************
01468  C8E2  2C                 .BYTE $2C
01469  C8E3              ;********************************
01470  C8E3  A2 11       XXA8E3 LDX #$11
01471  C8E5  4C 37 C4           JMP XXA437






CBASIC.ASM......PAGE 0031

LINE# LOC   CODE        LINE


01472  C8E8              ;********************************
01473  C8E8              ;
01474  C8E8              ;********************************
01475  C8E8  4C 08 CF    XXA8E8 JMP XXAF08
01476  C8EB              ;********************************
01477  C8EB              ;
01478  C8EB              ;********************************
01479  C8EB  68          XXA8EB PLA 
01480  C8EC  68                 PLA 
01481  C8ED  85 39              STA CURLIN
01482  C8EF  68                 PLA 
01483  C8F0  85 3A              STA CURLIN+1
01484  C8F2  68                 PLA 
01485  C8F3  85 7A              STA TXTPTR
01486  C8F5  68                 PLA 
01487  C8F6  85 7B              STA TXTPTR+1
01488  C8F8              ;********************************
01489  C8F8              ; DATA
01490  C8F8              ;********************************
01491  C8F8  20 06 C9    XXA8F8 JSR XXA906
01492  C8FB  98          XXA8FB TYA 
01493  C8FC  18                 CLC 
01494  C8FD  65 7A              ADC TXTPTR
01495  C8FF  85 7A              STA TXTPTR
01496  C901  90 02              BCC XXA905
01497  C903  E6 7B              INC TXTPTR+1
01498  C905  60          XXA905 RTS 
01499  C906              ;********************************
01500  C906              ;
01501  C906              ;********************************
01502  C906  A2 3A       XXA906 LDX #$3A        ;':'
01503  C908              ;********************************
01504  C908  2C                 .BYTE $2C
01505  C909              ;********************************
01506  C909  A2 00       XXA909 LDX #$00
01507  C90B  86 07              STX CHARAC
01508  C90D  A0 00              LDY #$00
01509  C90F  84 08              STY ENDCHR
01510  C911  A5 08       XXA911 LDA ENDCHR
01511  C913  A6 07              LDX CHARAC
01512  C915  85 07              STA CHARAC
01513  C917  86 08              STX ENDCHR
01514  C919  B1 7A       XXA919 LDA (TXTPTR),Y
01515  C91B  F0 E8              BEQ XXA905
01516  C91D  C5 08              CMP ENDCHR
01517  C91F  F0 E4              BEQ XXA905
01518  C921  C8                 INY 
01519  C922  C9 22              CMP #$22        ;'"'
01520  C924  D0 F3              BNE XXA919
01521  C926  F0 E9              BEQ XXA911
01522  C928              ;********************************
01523  C928              ;
01524  C928              ;********************************
01525  C928  20 9E CD    ZZA928 JSR XXAD9E
01526  C92B  20 79 00           JSR CHRGOT






CBASIC.ASM......PAGE 0032

LINE# LOC   CODE        LINE


01527  C92E  C9 89              CMP #$89
01528  C930  F0 05              BEQ XXA937
01529  C932  A9 A7              LDA #$A7
01530  C934  20 FF CE           JSR XXAEFF
01531  C937  A5 61       XXA937 LDA $61
01532  C939  D0 05              BNE XXA940
01533  C93B              ;********************************
01534  C93B              ;
01535  C93B              ;********************************
01536  C93B  20 09 C9    ZZA93B JSR XXA909
01537  C93E  F0 BB              BEQ XXA8FB
01538  C940  20 79 00    XXA940 JSR CHRGOT
01539  C943  B0 03              BCS XXA948
01540  C945  4C A0 C8           JMP XXA8A0
01541  C948              ;********************************
01542  C948              ;
01543  C948              ;********************************
01544  C948  4C ED C7    XXA948 JMP XXA7ED
01545  C94B              ;********************************
01546  C94B              ;
01547  C94B              ;********************************
01548  C94B  20 9E D7    ZZA94B JSR XXB79E
01549  C94E  48                 PHA 
01550  C94F  C9 8D              CMP #$8D
01551  C951  F0 04              BEQ XXA957
01552  C953  C9 89       XXA953 CMP #$89
01553  C955  D0 91              BNE XXA8E8
01554  C957  C6 65       XXA957 DEC $65
01555  C959  D0 04              BNE XXA95F
01556  C95B  68                 PLA 
01557  C95C  4C EF C7           JMP XXA7EF
01558  C95F              ;********************************
01559  C95F              ;
01560  C95F              ;********************************
01561  C95F  20 73 00    XXA95F JSR CHRGET
01562  C962  20 6B C9           JSR XXA96B
01563  C965  C9 2C              CMP #$2C        ;','
01564  C967  F0 EE              BEQ XXA957
01565  C969  68                 PLA 
01566  C96A  60          XXA96A RTS 
01567  C96B              ;********************************
01568  C96B              ;
01569  C96B              ;********************************
01570  C96B  A2 00       XXA96B LDX #$00
01571  C96D  86 14              STX LINNUM
01572  C96F  86 15              STX LINNUM+1
01573  C971  B0 F7       XXA971 BCS XXA96A
01574  C973  E9 2F              SBC #$2F        ;'/'
01575  C975  85 07              STA CHARAC
01576  C977  A5 15              LDA LINNUM+1
01577  C979  85 22              STA INDEX
01578  C97B  C9 19              CMP #$19
01579  C97D  B0 D4              BCS XXA953
01580  C97F  A5 14              LDA LINNUM
01581  C981  0A                 ASL A






CBASIC.ASM......PAGE 0033

LINE# LOC   CODE        LINE


01582  C982  26 22              ROL INDEX
01583  C984  0A                 ASL A
01584  C985  26 22              ROL INDEX
01585  C987  65 14              ADC LINNUM
01586  C989  85 14              STA LINNUM
01587  C98B  A5 22              LDA INDEX
01588  C98D  65 15              ADC LINNUM+1
01589  C98F  85 15              STA LINNUM+1
01590  C991  06 14              ASL LINNUM
01591  C993  26 15              ROL LINNUM+1
01592  C995  A5 14              LDA LINNUM
01593  C997  65 07              ADC CHARAC
01594  C999  85 14              STA LINNUM
01595  C99B  90 02              BCC XXA99F
01596  C99D  E6 15              INC LINNUM+1
01597  C99F  20 73 00    XXA99F JSR CHRGET
01598  C9A2  4C 71 C9           JMP XXA971
01599  C9A5              ;********************************
01600  C9A5              ;
01601  C9A5              ;********************************
01602  C9A5  20 8B D0    XXA9A5 JSR XXB08B
01603  C9A8  85 49              STA FORPNT
01604  C9AA  84 4A              STY FORPNT+1
01605  C9AC  A9 B2              LDA #$B2
01606  C9AE  20 FF CE           JSR XXAEFF
01607  C9B1  A5 0E              LDA INTFLG
01608  C9B3  48                 PHA 
01609  C9B4  A5 0D              LDA VALTYP
01610  C9B6  48                 PHA 
01611  C9B7  20 9E CD           JSR XXAD9E
01612  C9BA  68                 PLA 
01613  C9BB  2A                 ROL A
01614  C9BC  20 90 CD           JSR XXAD90
01615  C9BF  D0 18              BNE XXA9D9
01616  C9C1  68                 PLA 
01617  C9C2  10 12       XXA9C2 BPL XXA9D6
01618  C9C4  20 1B DC           JSR XXBC1B
01619  C9C7  20 BF D1           JSR XXB1BF
01620  C9CA  A0 00              LDY #$00
01621  C9CC  A5 64              LDA $64
01622  C9CE  91 49              STA (FORPNT),Y
01623  C9D0  C8                 INY 
01624  C9D1  A5 65              LDA $65
01625  C9D3  91 49              STA (FORPNT),Y
01626  C9D5  60                 RTS 
01627  C9D6              ;********************************
01628  C9D6              ;
01629  C9D6              ;********************************
01630  C9D6  4C D0 DB    XXA9D6 JMP XXBBD0
01631  C9D9              ;********************************
01632  C9D9              ;
01633  C9D9              ;********************************
01634  C9D9  68          XXA9D9 PLA 
01635  C9DA  A4 4A       XXA9DA LDY FORPNT+1
01636  C9DC  C0 DF              CPY #>ZZBF11    ;#$BF






CBASIC.ASM......PAGE 0034

LINE# LOC   CODE        LINE


01637  C9DE  D0 4C              BNE XXAA2C
01638  C9E0  20 A6 D6           JSR XXB6A6
01639  C9E3  C9 06              CMP #$06
01640  C9E5  D0 3D              BNE XXAA24
01641  C9E7  A0 00              LDY #$00
01642  C9E9  84 61              STY $61
01643  C9EB  84 66              STY $66
01644  C9ED  84 71       XXA9ED STY $71
01645  C9EF  20 1D CA           JSR XXAA1D
01646  C9F2  20 E2 DA           JSR XXBAE2
01647  C9F5  E6 71              INC $71
01648  C9F7  A4 71              LDY $71
01649  C9F9  20 1D CA           JSR XXAA1D
01650  C9FC  20 0C DC           JSR XXBC0C
01651  C9FF  AA                 TAX 
01652  CA00  F0 05              BEQ XXAA07
01653  CA02  E8                 INX 
01654  CA03  8A                 TXA 
01655  CA04  20 ED DA           JSR XXBAED
01656  CA07  A4 71       XXAA07 LDY $71
01657  CA09  C8                 INY 
01658  CA0A  C0 06              CPY #$06
01659  CA0C  D0 DF              BNE XXA9ED
01660  CA0E  20 E2 DA           JSR XXBAE2
01661  CA11  20 9B DC           JSR XXBC9B
01662  CA14  A6 64              LDX $64
01663  CA16  A4 63              LDY $63
01664  CA18  A5 65              LDA $65
01665  CA1A  4C DB FF           JMP $FFDB
01666  CA1D              ;********************************
01667  CA1D              ;
01668  CA1D              ;********************************
01669  CA1D  B1 22       XXAA1D LDA (INDEX),Y
01670  CA1F  20 80 00           JSR POINTB+4    ;$0080
01671  CA22  90 03              BCC XXAA27
01672  CA24  4C 48 D2    XXAA24 JMP XXB248
01673  CA27              ;********************************
01674  CA27              ;
01675  CA27              ;********************************
01676  CA27  E9 2F       XXAA27 SBC #$2F        ;'/'
01677  CA29  4C 7E DD           JMP XXBD7E
01678  CA2C              ;********************************
01679  CA2C              ;
01680  CA2C              ;********************************
01681  CA2C  A0 02       XXAA2C LDY #$02
01682  CA2E  B1 64              LDA ($64),Y
01683  CA30  C5 34              CMP FRETOP+1
01684  CA32  90 17              BCC XXAA4B
01685  CA34  D0 07              BNE XXAA3D
01686  CA36  88                 DEY 
01687  CA37  B1 64              LDA ($64),Y
01688  CA39  C5 33              CMP FRETOP
01689  CA3B  90 0E              BCC XXAA4B
01690  CA3D  A4 65       XXAA3D LDY $65
01691  CA3F  C4 2E              CPY VARTAB+1






CBASIC.ASM......PAGE 0035

LINE# LOC   CODE        LINE


01692  CA41  90 08              BCC XXAA4B
01693  CA43  D0 0D              BNE XXAA52
01694  CA45  A5 64              LDA $64
01695  CA47  C5 2D              CMP VARTAB
01696  CA49  B0 07              BCS XXAA52
01697  CA4B  A5 64       XXAA4B LDA $64
01698  CA4D  A4 65              LDY $65
01699  CA4F  4C 68 CA           JMP XXAA68
01700  CA52              ;********************************
01701  CA52              ;
01702  CA52              ;********************************
01703  CA52  A0 00       XXAA52 LDY #$00
01704  CA54  B1 64              LDA ($64),Y
01705  CA56  20 75 D4           JSR XXB475
01706  CA59  A5 50              LDA DSCPNT
01707  CA5B  A4 51              LDY DSCPNT+1
01708  CA5D  85 6F              STA $6F
01709  CA5F  84 70              STY $70
01710  CA61  20 7A D6           JSR XXB67A
01711  CA64  A9 61              LDA #$61
01712  CA66  A0 00              LDY #$00
01713  CA68  85 50       XXAA68 STA DSCPNT
01714  CA6A  84 51              STY DSCPNT+1
01715  CA6C  20 DB D6           JSR XXB6DB
01716  CA6F  A0 00              LDY #$00
01717  CA71  B1 50              LDA (DSCPNT),Y
01718  CA73  91 49              STA (FORPNT),Y
01719  CA75  C8                 INY 
01720  CA76  B1 50              LDA (DSCPNT),Y
01721  CA78  91 49              STA (FORPNT),Y
01722  CA7A  C8                 INY 
01723  CA7B  B1 50              LDA (DSCPNT),Y
01724  CA7D  91 49              STA (FORPNT),Y
01725  CA7F  60          XXAA7F RTS 
01726  CA80              ;********************************
01727  CA80              ;
01728  CA80              ;********************************
01729  CA80  20 86 CA    ZZAA80 JSR XXAA86
01730  CA83  4C B5 CB           JMP XXABB5
01731  CA86              ;********************************
01732  CA86              ;
01733  CA86              ;********************************
01734  CA86  20 9E D7    XXAA86 JSR XXB79E
01735  CA89  F0 05              BEQ XXAA90
01736  CA8B  A9 2C              LDA #$2C        ;','
01737  CA8D  20 FF CE           JSR XXAEFF
01738  CA90  08          XXAA90 PHP 
01739  CA91  86 13              STX CHANNL
01740  CA93              ; DIFF
01741  CA93              ; C64 = $E118 VIC20 = $$E115
01742  CA93  20 15 E1           JSR KKE118
01743  CA96  28                 PLP 
01744  CA97  4C A0 CA           JMP XXAAA0
01745  CA9A              ;********************************
01746  CA9A              ;






CBASIC.ASM......PAGE 0036

LINE# LOC   CODE        LINE


01747  CA9A              ;********************************
01748  CA9A  20 21 CB    XXAA9A JSR XXAB21
01749  CA9D  20 79 00    XXAA9D JSR CHRGOT
01750  CAA0  F0 35       XXAAA0 BEQ XXAAD7
01751  CAA2  F0 43       XXAAA2 BEQ XXAAE7
01752  CAA4  C9 A3              CMP #$A3
01753  CAA6  F0 50              BEQ XXAAF8
01754  CAA8  C9 A6              CMP #$A6
01755  CAAA  18                 CLC 
01756  CAAB  F0 4B              BEQ XXAAF8
01757  CAAD  C9 2C              CMP #$2C        ;','
01758  CAAF  F0 37              BEQ XXAAE8
01759  CAB1  C9 3B              CMP #$3B        ;';'
01760  CAB3  F0 5E              BEQ XXAB13
01761  CAB5  20 9E CD           JSR XXAD9E
01762  CAB8  24 0D              BIT VALTYP
01763  CABA  30 DE              BMI XXAA9A
01764  CABC  20 DD DD           JSR XXBDDD
01765  CABF  20 87 D4           JSR XXB487
01766  CAC2  20 21 CB           JSR XXAB21
01767  CAC5  20 3B CB           JSR XXAB3B
01768  CAC8  D0 D3              BNE XXAA9D
01769  CACA  A9 00       XXAACA LDA #$00
01770  CACC  9D 00 02           STA BUF,X
01771  CACF  A2 FF              LDX #$FF
01772  CAD1  A0 01              LDY #$01
01773  CAD3  A5 13              LDA CHANNL
01774  CAD5  D0 10              BNE XXAAE7
01775  CAD7  A9 0D       XXAAD7 LDA #$0D
01776  CAD9  20 47 CB           JSR XXAB47
01777  CADC  24 13              BIT CHANNL
01778  CADE  10 05              BPL XXAAE5
01779  CAE0  A9 0A              LDA #$0A
01780  CAE2  20 47 CB           JSR XXAB47
01781  CAE5  49 FF       XXAAE5 EOR #$FF
01782  CAE7  60          XXAAE7 RTS 
01783  CAE8              ;********************************
01784  CAE8              ;
01785  CAE8              ;********************************
01786  CAE8  38          XXAAE8 SEC 
01787  CAE9  20 F0 FF           JSR PLOT
01788  CAEC  98                 TYA 
01789  CAED  38                 SEC 
01790  CAEE              ; DIFF
01791  CAEE              ; C64 = #$0A VIC20 = #$0B
01792  CAEE  E9 0A       XXAAEE SBC #$0A
01793  CAF0  B0 FC              BCS XXAAEE
01794  CAF2  49 FF              EOR #$FF
01795  CAF4  69 01              ADC #$01
01796  CAF6  D0 16              BNE XXAB0E
01797  CAF8  08          XXAAF8 PHP 
01798  CAF9  38                 SEC 
01799  CAFA  20 F0 FF           JSR PLOT
01800  CAFD  84 09              STY $09
01801  CAFF  20 9B D7           JSR XXB79B






CBASIC.ASM......PAGE 0037

LINE# LOC   CODE        LINE


01802  CB02  C9 29              CMP #$29        ;')'
01803  CB04  D0 59              BNE XXAB5F
01804  CB06  28                 PLP 
01805  CB07  90 06              BCC XXAB0F
01806  CB09  8A                 TXA 
01807  CB0A  E5 09              SBC $09
01808  CB0C  90 05              BCC XXAB13
01809  CB0E  AA          XXAB0E TAX 
01810  CB0F  E8          XXAB0F INX 
01811  CB10  CA          XXAB10 DEX 
01812  CB11  D0 06              BNE XXAB19
01813  CB13  20 73 00    XXAB13 JSR CHRGET
01814  CB16  4C A2 CA           JMP XXAAA2
01815  CB19              ;********************************
01816  CB19              ;
01817  CB19              ;********************************
01818  CB19  20 3B CB    XXAB19 JSR XXAB3B
01819  CB1C  D0 F2              BNE XXAB10
01820  CB1E  20 87 D4    XXAB1E JSR XXB487
01821  CB21  20 A6 D6    XXAB21 JSR XXB6A6
01822  CB24  AA                 TAX 
01823  CB25  A0 00              LDY #$00
01824  CB27  E8                 INX 
01825  CB28  CA          XXAB28 DEX 
01826  CB29  F0 BC              BEQ XXAAE7
01827  CB2B  B1 22              LDA (INDEX),Y
01828  CB2D  20 47 CB           JSR XXAB47
01829  CB30  C8                 INY 
01830  CB31  C9 0D              CMP #$0D
01831  CB33  D0 F3              BNE XXAB28
01832  CB35  20 E5 CA           JSR XXAAE5
01833  CB38  4C 28 CB           JMP XXAB28
01834  CB3B              ;********************************
01835  CB3B              ;
01836  CB3B              ;********************************
01837  CB3B  A5 13       XXAB3B LDA CHANNL
01838  CB3D  F0 03              BEQ XXAB42
01839  CB3F  A9 20              LDA #$20        ;' '
01840  CB41              ;********************************
01841  CB41  2C                 .BYTE $2C
01842  CB42              ;********************************
01843  CB42  A9 1D       XXAB42 LDA #$1D
01844  CB44              ;********************************
01845  CB44  2C                 .BYTE $2C
01846  CB45              ;********************************
01847  CB45  A9 3F       XXAB45 LDA #$3F        ;'?'
01848  CB47              ; DIFF
01849  CB47              ; C64 = $E10C VIC20 = $E109
01850  CB47  20 09 E1    XXAB47 JSR KKE10C
01851  CB4A  29 FF              AND #$FF
01852  CB4C  60                 RTS 
01853  CB4D              ;********************************
01854  CB4D              ;
01855  CB4D              ;********************************
01856  CB4D  A5 11       XXAB4D LDA INPFLG






CBASIC.ASM......PAGE 0038

LINE# LOC   CODE        LINE


01857  CB4F  F0 11              BEQ XXAB62
01858  CB51  30 04              BMI XXAB57
01859  CB53  A0 FF              LDY #$FF
01860  CB55  D0 04              BNE XXAB5B
01861  CB57  A5 3F       XXAB57 LDA DATLIN
01862  CB59  A4 40              LDY DATLIN+1
01863  CB5B  85 39       XXAB5B STA CURLIN
01864  CB5D  84 3A              STY CURLIN+1
01865  CB5F  4C 08 CF    XXAB5F JMP XXAF08
01866  CB62              ;********************************
01867  CB62              ;
01868  CB62              ;********************************
01869  CB62  A5 13       XXAB62 LDA CHANNL
01870  CB64  F0 05              BEQ XXAB6B
01871  CB66  A2 18              LDX #$18
01872  CB68  4C 37 C4           JMP XXA437
01873  CB6B              ;********************************
01874  CB6B              ;
01875  CB6B              ;********************************
01876  CB6B  A9 0C       XXAB6B LDA #<ZZAD0C    ;#$0C
01877  CB6D  A0 CD              LDY #>ZZAD0C    ;#$AD
01878  CB6F  20 1E CB           JSR XXAB1E
01879  CB72  A5 3D              LDA OLDTXT
01880  CB74  A4 3E              LDY OLDTXT+1
01881  CB76  85 7A              STA TXTPTR
01882  CB78  84 7B              STY TXTPTR+1
01883  CB7A  60          XXAB7A RTS 
01884  CB7B              ;********************************
01885  CB7B              ;
01886  CB7B              ;********************************
01887  CB7B  20 A6 D3    XXAB7B JSR XXB3A6
01888  CB7E  C9 23              CMP #$23        ;'#'
01889  CB80  D0 10              BNE XXAB92
01890  CB82  20 73 00           JSR CHRGET
01891  CB85  20 9E D7           JSR XXB79E
01892  CB88  A9 2C              LDA #$2C        ;','
01893  CB8A  20 FF CE           JSR XXAEFF
01894  CB8D  86 13              STX CHANNL
01895  CB8F  20 1B E1           JSR KKE11E
01896  CB92  A2 01       XXAB92 LDX #$01
01897  CB94  A0 02              LDY #$02
01898  CB96  A9 00              LDA #$00
01899  CB98  8D 01 02           STA $0201
01900  CB9B  A9 40              LDA #$40        ;'@'
01901  CB9D  20 0F CC           JSR XXAC0F
01902  CBA0  A6 13              LDX CHANNL
01903  CBA2  D0 13              BNE XXABB7
01904  CBA4  60          XXABA4 RTS 
01905  CBA5              ;********************************
01906  CBA5              ; INPUT#
01907  CBA5              ;********************************
01908  CBA5  20 9E D7    ZZABA5 JSR XXB79E
01909  CBA8  A9 2C              LDA #$2C        ;','
01910  CBAA  20 FF CE           JSR XXAEFF
01911  CBAD  86 13              STX CHANNL






CBASIC.ASM......PAGE 0039

LINE# LOC   CODE        LINE


01912  CBAF              ; DIFF
01913  CBAF              ; C64 = $E11E VIC20 = $E11B
01914  CBAF  20 1B E1           JSR KKE11E
01915  CBB2  20 CE CB           JSR XXABCE
01916  CBB5  A5 13       XXABB5 LDA CHANNL
01917  CBB7  20 CC FF    XXABB7 JSR CLRCHN
01918  CBBA  A2 00              LDX #$00
01919  CBBC  86 13              STX CHANNL
01920  CBBE  60          XXABBE RTS 
01921  CBBF              ;********************************
01922  CBBF              ; INPUT
01923  CBBF              ;********************************
01924  CBBF  C9 22       ZZABBF CMP #$22        ;'"'
01925  CBC1  D0 0B              BNE XXABCE
01926  CBC3  20 BD CE           JSR XXAEBD
01927  CBC6  A9 3B              LDA #$3B        ;';'
01928  CBC8  20 FF CE           JSR XXAEFF
01929  CBCB  20 21 CB           JSR XXAB21
01930  CBCE  20 A6 D3    XXABCE JSR XXB3A6
01931  CBD1  A9 2C              LDA #$2C        ;','
01932  CBD3  8D FF 01           STA $01FF
01933  CBD6  20 F9 CB    XXABD6 JSR XXABF9
01934  CBD9  A5 13              LDA CHANNL
01935  CBDB  F0 0D              BEQ XXABEA
01936  CBDD  20 B7 FF           JSR READST
01937  CBE0  29 02              AND #$02
01938  CBE2  F0 06              BEQ XXABEA
01939  CBE4  20 B5 CB           JSR XXABB5
01940  CBE7  4C F8 C8           JMP XXA8F8
01941  CBEA              ;********************************
01942  CBEA              ;
01943  CBEA              ;********************************
01944  CBEA  AD 00 02    XXABEA LDA BUF
01945  CBED  D0 1E              BNE XXAC0D
01946  CBEF  A5 13              LDA CHANNL
01947  CBF1  D0 E3              BNE XXABD6
01948  CBF3  20 06 C9           JSR XXA906
01949  CBF6  4C FB C8           JMP XXA8FB
01950  CBF9              ;********************************
01951  CBF9              ;
01952  CBF9              ;********************************
01953  CBF9  A5 13       XXABF9 LDA CHANNL
01954  CBFB  D0 06              BNE XXAC03
01955  CBFD  20 45 CB           JSR XXAB45
01956  CC00  20 3B CB           JSR XXAB3B
01957  CC03  4C 60 C5    XXAC03 JMP XXA560
01958  CC06              ;********************************
01959  CC06              ;
01960  CC06              ;********************************
01961  CC06  A6 41       ZZAC06 LDX DATPRT
01962  CC08  A4 42              LDY DATPRT+1
01963  CC0A  A9 98              LDA #$98
01964  CC0C              ;********************************
01965  CC0C  2C                 .BYTE $2C
01966  CC0D              ;********************************






CBASIC.ASM......PAGE 0040

LINE# LOC   CODE        LINE


01967  CC0D  A9 00       XXAC0D LDA #$00
01968  CC0F  85 11       XXAC0F STA INPFLG
01969  CC11  86 43              STX INPPTR
01970  CC13  84 44              STY INPPTR+1
01971  CC15  20 8B D0    XXAC15 JSR XXB08B
01972  CC18  85 49              STA FORPNT
01973  CC1A  84 4A              STY FORPNT+1
01974  CC1C  A5 7A              LDA TXTPTR
01975  CC1E  A4 7B              LDY TXTPTR+1
01976  CC20  85 4B              STA OPPTR
01977  CC22  84 4C              STY OPPTR+1
01978  CC24  A6 43              LDX INPPTR
01979  CC26  A4 44              LDY INPPTR+1
01980  CC28  86 7A              STX TXTPTR
01981  CC2A  84 7B              STY TXTPTR+1
01982  CC2C  20 79 00           JSR CHRGOT
01983  CC2F  D0 20              BNE XXAC51
01984  CC31  24 11              BIT INPFLG
01985  CC33  50 0C              BVC XXAC41
01986  CC35              ; DIFF
01987  CC35              ; C64 = $E124 VIC20 = $E121
01988  CC35  20 21 E1           JSR KKE124
01989  CC38  8D 00 02           STA BUF
01990  CC3B  A2 FF              LDX #$FF
01991  CC3D  A0 01              LDY #$01
01992  CC3F  D0 0C              BNE XXAC4D
01993  CC41  30 75       XXAC41 BMI XXACB8
01994  CC43  A5 13              LDA CHANNL
01995  CC45  D0 03              BNE XXAC4A
01996  CC47  20 45 CB           JSR XXAB45
01997  CC4A  20 F9 CB    XXAC4A JSR XXABF9
01998  CC4D  86 7A       XXAC4D STX TXTPTR
01999  CC4F  84 7B              STY TXTPTR+1
02000  CC51  20 73 00    XXAC51 JSR CHRGET
02001  CC54  24 0D              BIT VALTYP
02002  CC56  10 31              BPL XXAC89
02003  CC58  24 11              BIT INPFLG
02004  CC5A  50 09              BVC XXAC65
02005  CC5C  E8                 INX 
02006  CC5D  86 7A              STX TXTPTR
02007  CC5F  A9 00              LDA #$00
02008  CC61  85 07              STA CHARAC
02009  CC63  F0 0C              BEQ XXAC71
02010  CC65  85 07       XXAC65 STA CHARAC
02011  CC67  C9 22              CMP #$22        ;'"'
02012  CC69  F0 07              BEQ XXAC72
02013  CC6B  A9 3A              LDA #$3A        ;':'
02014  CC6D  85 07              STA CHARAC
02015  CC6F  A9 2C              LDA #$2C        ;','
02016  CC71  18          XXAC71 CLC 
02017  CC72  85 08       XXAC72 STA ENDCHR
02018  CC74  A5 7A              LDA TXTPTR
02019  CC76  A4 7B              LDY TXTPTR+1
02020  CC78  69 00              ADC #$00
02021  CC7A  90 01              BCC XXAC7D






CBASIC.ASM......PAGE 0041

LINE# LOC   CODE        LINE


02022  CC7C  C8                 INY 
02023  CC7D  20 8D D4    XXAC7D JSR XXB48D
02024  CC80  20 E2 D7           JSR XXB7E2
02025  CC83  20 DA C9           JSR XXA9DA
02026  CC86  4C 91 CC           JMP XXAC91
02027  CC89              ;********************************
02028  CC89              ;
02029  CC89              ;********************************
02030  CC89  20 F3 DC    XXAC89 JSR XXBCF3
02031  CC8C  A5 0E              LDA INTFLG
02032  CC8E  20 C2 C9           JSR XXA9C2
02033  CC91  20 79 00    XXAC91 JSR CHRGOT
02034  CC94  F0 07              BEQ XXAC9D
02035  CC96  C9 2C              CMP #$2C        ;','
02036  CC98  F0 03              BEQ XXAC9D
02037  CC9A  4C 4D CB           JMP XXAB4D
02038  CC9D              ;********************************
02039  CC9D              ;
02040  CC9D              ;********************************
02041  CC9D  A5 7A       XXAC9D LDA TXTPTR
02042  CC9F  A4 7B              LDY TXTPTR+1
02043  CCA1  85 43              STA INPPTR
02044  CCA3  84 44              STY INPPTR+1
02045  CCA5  A5 4B              LDA OPPTR
02046  CCA7  A4 4C              LDY OPPTR+1
02047  CCA9  85 7A              STA TXTPTR
02048  CCAB  84 7B              STY TXTPTR+1
02049  CCAD  20 79 00           JSR CHRGOT
02050  CCB0  F0 2D              BEQ XXACDF
02051  CCB2  20 FD CE           JSR XXAEFD
02052  CCB5  4C 15 CC           JMP XXAC15
02053  CCB8              ;********************************
02054  CCB8              ;
02055  CCB8              ;********************************
02056  CCB8  20 06 C9    XXACB8 JSR XXA906
02057  CCBB  C8                 INY 
02058  CCBC  AA                 TAX 
02059  CCBD  D0 12              BNE XXACD1
02060  CCBF  A2 0D              LDX #$0D
02061  CCC1  C8                 INY 
02062  CCC2  B1 7A              LDA (TXTPTR),Y
02063  CCC4  F0 6C              BEQ XXAD32
02064  CCC6  C8                 INY 
02065  CCC7  B1 7A              LDA (TXTPTR),Y
02066  CCC9  85 3F              STA DATLIN
02067  CCCB  C8                 INY 
02068  CCCC  B1 7A              LDA (TXTPTR),Y
02069  CCCE  C8                 INY 
02070  CCCF  85 40              STA DATLIN+1
02071  CCD1  20 FB C8    XXACD1 JSR XXA8FB
02072  CCD4  20 79 00           JSR CHRGOT
02073  CCD7  AA                 TAX 
02074  CCD8  E0 83              CPX #$83
02075  CCDA  D0 DC              BNE XXACB8
02076  CCDC  4C 51 CC           JMP XXAC51






CBASIC.ASM......PAGE 0042

LINE# LOC   CODE        LINE


02077  CCDF              ;********************************
02078  CCDF              ;
02079  CCDF              ;********************************
02080  CCDF  A5 43       XXACDF LDA INPPTR
02081  CCE1  A4 44              LDY INPPTR+1
02082  CCE3  A6 11              LDX INPFLG
02083  CCE5  10 03              BPL XXACEA
02084  CCE7  4C 27 C8           JMP XXA827
02085  CCEA              ;********************************
02086  CCEA              ;
02087  CCEA              ;********************************
02088  CCEA  A0 00       XXACEA LDY #$00
02089  CCEC  B1 43              LDA (INPPTR),Y
02090  CCEE  F0 0B              BEQ XXACFB
02091  CCF0  A5 13              LDA CHANNL
02092  CCF2  D0 07              BNE XXACFB
02093  CCF4  A9 FC              LDA #<ZZACFC    ;#$FC
02094  CCF6  A0 CC              LDY #>ZZACFC    ;#$AC
02095  CCF8  4C 1E CB           JMP XXAB1E
02096  CCFB              ;********************************
02097  CCFB              ;
02098  CCFB              ;********************************
02099  CCFB  60          XXACFB RTS 
02100  CCFC              ;********************************
02101  CCFC              ;
02102  CCFC              ;********************************
02103  CCFC  3F 45       ZZACFC .BYTE '?EXTRA IGNORED'
02104  CD0A  0D                 .BYTE $0D
02105  CD0B  00                 .BYTE $00
02106  CD0C  3F 52       ZZAD0C .BYTE '?REDO FROM START'
02107  CD1C  0D                 .BYTE $0D
02108  CD1D  00          XXAD1D .BYTE $00
02109  CD1E              ;********************************
02110  CD1E              ;
02111  CD1E              ;********************************
02112  CD1E  D0 04       ZZAD1E BNE XXAD24
02113  CD20  A0 00              LDY #$00
02114  CD22  F0 03              BEQ XXAD27
02115  CD24  20 8B D0    XXAD24 JSR XXB08B
02116  CD27  85 49       XXAD27 STA FORPNT
02117  CD29  84 4A              STY FORPNT+1
02118  CD2B  20 8A C3           JSR XXA38A
02119  CD2E  F0 05              BEQ XXAD35
02120  CD30  A2 0A              LDX #$0A
02121  CD32  4C 37 C4    XXAD32 JMP XXA437
02122  CD35              ;********************************
02123  CD35              ;
02124  CD35              ;********************************
02125  CD35  9A          XXAD35 TXS 
02126  CD36  8A                 TXA 
02127  CD37  18                 CLC 
02128  CD38  69 04              ADC #$04
02129  CD3A  48                 PHA 
02130  CD3B  69 06              ADC #$06
02131  CD3D  85 24              STA INDEX+2






CBASIC.ASM......PAGE 0043

LINE# LOC   CODE        LINE


02132  CD3F  68                 PLA 
02133  CD40  A0 01              LDY #$01
02134  CD42  20 A2 DB           JSR XXBBA2
02135  CD45  BA                 TSX 
02136  CD46  BD 09 01           LDA $0109,X
02137  CD49  85 66              STA $66
02138  CD4B  A5 49              LDA FORPNT
02139  CD4D  A4 4A              LDY FORPNT+1
02140  CD4F  20 67 D8           JSR XXB867
02141  CD52  20 D0 DB           JSR XXBBD0
02142  CD55  A0 01              LDY #$01
02143  CD57  20 5D DC           JSR XXBC5D
02144  CD5A  BA                 TSX 
02145  CD5B  38                 SEC 
02146  CD5C  FD 09 01           SBC $0109,X
02147  CD5F  F0 17              BEQ XXAD78
02148  CD61  BD 0F 01           LDA $010F,X
02149  CD64  85 39              STA CURLIN
02150  CD66  BD 10 01           LDA $0110,X
02151  CD69  85 3A              STA CURLIN+1
02152  CD6B  BD 12 01           LDA $0112,X
02153  CD6E  85 7A              STA TXTPTR
02154  CD70  BD 11 01           LDA $0111,X
02155  CD73  85 7B              STA TXTPTR+1
02156  CD75  4C AE C7    XXAD75 JMP XXA7AE
02157  CD78              ;********************************
02158  CD78              ;
02159  CD78              ;********************************
02160  CD78  8A          XXAD78 TXA 
02161  CD79  69 11              ADC #$11
02162  CD7B  AA                 TAX 
02163  CD7C  9A                 TXS 
02164  CD7D  20 79 00           JSR CHRGOT
02165  CD80  C9 2C              CMP #$2C        ;','
02166  CD82  D0 F1              BNE XXAD75
02167  CD84  20 73 00           JSR CHRGET
02168  CD87  20 24 CD           JSR XXAD24
02169  CD8A  20 9E CD    XXAD8A JSR XXAD9E
02170  CD8D  18          XXAD8D CLC 
02171  CD8E              ;********************************
02172  CD8E  24                 .BYTE $24
02173  CD8F              ;********************************
02174  CD8F  38          XXAD8F SEC 
02175  CD90  24 0D       XXAD90 BIT VALTYP
02176  CD92  30 03              BMI XXAD97
02177  CD94  B0 03              BCS XXAD99
02178  CD96  60          XXAD96 RTS 
02179  CD97              ;********************************
02180  CD97              ;
02181  CD97              ;********************************
02182  CD97  B0 FD       XXAD97 BCS XXAD96
02183  CD99  A2 16       XXAD99 LDX #$16
02184  CD9B  4C 37 C4           JMP XXA437
02185  CD9E              ;********************************
02186  CD9E              ;






CBASIC.ASM......PAGE 0044

LINE# LOC   CODE        LINE


02187  CD9E              ;********************************
02188  CD9E  A6 7A       XXAD9E LDX TXTPTR
02189  CDA0  D0 02              BNE XXADA4
02190  CDA2  C6 7B              DEC TXTPTR+1
02191  CDA4  C6 7A       XXADA4 DEC TXTPTR
02192  CDA6  A2 00              LDX #$00
02193  CDA8              ;********************************
02194  CDA8  24                 .BYTE $24
02195  CDA9              ;********************************
02196  CDA9  48          XXADA9 PHA 
02197  CDAA  8A                 TXA 
02198  CDAB  48                 PHA 
02199  CDAC  A9 01              LDA #$01
02200  CDAE  20 FB C3           JSR XXA3FB
02201  CDB1  20 83 CE           JSR XXAE83
02202  CDB4  A9 00              LDA #$00
02203  CDB6  85 4D              STA OPMASK
02204  CDB8  20 79 00    XXADB8 JSR CHRGOT
02205  CDBB  38          XXADBB SEC 
02206  CDBC  E9 B1              SBC #$B1
02207  CDBE  90 17              BCC XXADD7
02208  CDC0  C9 03              CMP #$03
02209  CDC2  B0 13              BCS XXADD7
02210  CDC4  C9 01              CMP #$01
02211  CDC6  2A                 ROL A
02212  CDC7  49 01              EOR #$01
02213  CDC9  45 4D              EOR OPMASK
02214  CDCB  C5 4D              CMP OPMASK
02215  CDCD  90 61              BCC XXAE30
02216  CDCF  85 4D              STA OPMASK
02217  CDD1  20 73 00           JSR CHRGET
02218  CDD4  4C BB CD           JMP XXADBB
02219  CDD7              ;********************************
02220  CDD7              ;
02221  CDD7              ;********************************
02222  CDD7  A6 4D       XXADD7 LDX OPMASK
02223  CDD9  D0 2C              BNE XXAE07
02224  CDDB  B0 7B              BCS XXAE58
02225  CDDD  69 07              ADC #$07
02226  CDDF  90 77              BCC XXAE58
02227  CDE1  65 0D              ADC VALTYP
02228  CDE3  D0 03              BNE XXADE8
02229  CDE5  4C 3D D6           JMP XXB63D
02230  CDE8              ;********************************
02231  CDE8              ;
02232  CDE8              ;********************************
02233  CDE8  69 FF       XXADE8 ADC #$FF
02234  CDEA  85 22              STA INDEX
02235  CDEC  0A                 ASL A
02236  CDED  65 22              ADC INDEX
02237  CDEF  A8                 TAY 
02238  CDF0  68          XXADF0 PLA 
02239  CDF1  D9 80 C0           CMP XXA080,Y
02240  CDF4  B0 67              BCS XXAE5D
02241  CDF6  20 8D CD           JSR XXAD8D






CBASIC.ASM......PAGE 0045

LINE# LOC   CODE        LINE


02242  CDF9  48          XXADF9 PHA 
02243  CDFA  20 20 CE    XXADFA JSR XXAE20
02244  CDFD  68                 PLA 
02245  CDFE  A4 4B              LDY OPPTR
02246  CE00  10 17              BPL XXAE19
02247  CE02  AA                 TAX 
02248  CE03  F0 56              BEQ XXAE5B
02249  CE05  D0 5F              BNE XXAE66
02250  CE07  46 0D       XXAE07 LSR VALTYP
02251  CE09  8A                 TXA 
02252  CE0A  2A                 ROL A
02253  CE0B  A6 7A              LDX TXTPTR
02254  CE0D  D0 02              BNE XXAE11
02255  CE0F  C6 7B              DEC TXTPTR+1
02256  CE11  C6 7A       XXAE11 DEC TXTPTR
02257  CE13  A0 1B              LDY #$1B
02258  CE15  85 4D              STA OPMASK
02259  CE17  D0 D7              BNE XXADF0
02260  CE19  D9 80 C0    XXAE19 CMP XXA080,Y
02261  CE1C  B0 48              BCS XXAE66
02262  CE1E  90 D9              BCC XXADF9
02263  CE20  B9 82 C0    XXAE20 LDA XXA081+1,Y
02264  CE23  48                 PHA 
02265  CE24  B9 81 C0           LDA XXA081,Y
02266  CE27  48                 PHA 
02267  CE28  20 33 CE           JSR XXAE33
02268  CE2B  A5 4D              LDA OPMASK
02269  CE2D  4C A9 CD           JMP XXADA9
02270  CE30              ;********************************
02271  CE30              ;
02272  CE30              ;********************************
02273  CE30  4C 08 CF    XXAE30 JMP XXAF08
02274  CE33              ;********************************
02275  CE33              ;
02276  CE33              ;********************************
02277  CE33  A5 66       XXAE33 LDA $66
02278  CE35  BE 80 C0           LDX XXA080,Y
02279  CE38  A8          XXAE38 TAY 
02280  CE39  68                 PLA 
02281  CE3A  85 22              STA INDEX
02282  CE3C  E6 22              INC INDEX
02283  CE3E  68                 PLA 
02284  CE3F  85 23              STA INDEX+1
02285  CE41  98                 TYA 
02286  CE42  48                 PHA 
02287  CE43  20 1B DC    XXAE43 JSR XXBC1B
02288  CE46  A5 65              LDA $65
02289  CE48  48                 PHA 
02290  CE49  A5 64              LDA $64
02291  CE4B  48                 PHA 
02292  CE4C  A5 63              LDA $63
02293  CE4E  48                 PHA 
02294  CE4F  A5 62              LDA $62
02295  CE51  48                 PHA 
02296  CE52  A5 61              LDA $61






CBASIC.ASM......PAGE 0046

LINE# LOC   CODE        LINE


02297  CE54  48                 PHA 
02298  CE55  6C 22 00           JMP ($0022)
02299  CE58              ;********************************
02300  CE58              ;
02301  CE58              ;********************************
02302  CE58  A0 FF       XXAE58 LDY #$FF
02303  CE5A  68                 PLA 
02304  CE5B  F0 23       XXAE5B BEQ XXAE80
02305  CE5D  C9 64       XXAE5D CMP #$64
02306  CE5F  F0 03              BEQ XXAE64
02307  CE61  20 8D CD           JSR XXAD8D
02308  CE64  84 4B       XXAE64 STY OPPTR
02309  CE66  68          XXAE66 PLA 
02310  CE67  4A                 LSR A
02311  CE68  85 12              STA TANSGN
02312  CE6A  68                 PLA 
02313  CE6B  85 69              STA $69
02314  CE6D  68                 PLA 
02315  CE6E  85 6A              STA $6A
02316  CE70  68                 PLA 
02317  CE71  85 6B              STA $6B
02318  CE73  68                 PLA 
02319  CE74  85 6C              STA $6C
02320  CE76  68                 PLA 
02321  CE77  85 6D              STA $6D
02322  CE79  68                 PLA 
02323  CE7A  85 6E              STA $6E
02324  CE7C  45 66              EOR $66
02325  CE7E  85 6F              STA $6F
02326  CE80  A5 61       XXAE80 LDA $61
02327  CE82  60                 RTS 
02328  CE83              ;********************************
02329  CE83              ;
02330  CE83              ;********************************
02331  CE83  6C 0A 03    XXAE83 JMP (IEVAL)
02332  CE86              ;********************************
02333  CE86              ;
02334  CE86              ;********************************
02335  CE86  A9 00       KKAE86 LDA #$00
02336  CE88  85 0D              STA VALTYP
02337  CE8A  20 73 00    XXAE8A JSR CHRGET
02338  CE8D  B0 03              BCS XXAE92
02339  CE8F  4C F3 DC    XXAE8F JMP XXBCF3
02340  CE92              ;********************************
02341  CE92              ;
02342  CE92              ;********************************
02343  CE92  20 13 D1    XXAE92 JSR XXB113
02344  CE95  90 03              BCC XXAE9A
02345  CE97  4C 28 CF           JMP XXAF28
02346  CE9A              ;********************************
02347  CE9A              ;
02348  CE9A              ;********************************
02349  CE9A  C9 FF       XXAE9A CMP #$FF
02350  CE9C  D0 0F              BNE XXAEAD
02351  CE9E  A9 A8              LDA #<ZZAEA8    ;#$A8






CBASIC.ASM......PAGE 0047

LINE# LOC   CODE        LINE


02352  CEA0  A0 CE              LDY #>ZZAEA8    ;#$AE
02353  CEA2  20 A2 DB           JSR XXBBA2
02354  CEA5  4C 73 00           JMP CHRGET
02355  CEA8              ;********************************
02356  CEA8              ;
02357  CEA8              ;********************************
02358  CEA8  82          ZZAEA8 .BYTE $82
02359  CEA9  49                 .BYTE $49
02360  CEAA  0F                 .BYTE $0F
02361  CEAB  DA                 .BYTE $DA
02362  CEAC  A1                 .BYTE $A1
02363  CEAD              ;********************************
02364  CEAD              ;
02365  CEAD              ;********************************
02366  CEAD  C9 2E       XXAEAD CMP #$2E        ;'.'
02367  CEAF  F0 DE              BEQ XXAE8F
02368  CEB1  C9 AB              CMP #$AB
02369  CEB3  F0 58              BEQ XXAF0D
02370  CEB5  C9 AA              CMP #$AA
02371  CEB7  F0 D1              BEQ XXAE8A
02372  CEB9  C9 22              CMP #$22        ;'"'
02373  CEBB  D0 0F              BNE XXAECC
02374  CEBD  A5 7A       XXAEBD LDA TXTPTR
02375  CEBF  A4 7B              LDY TXTPTR+1
02376  CEC1  69 00              ADC #$00
02377  CEC3  90 01              BCC XXAEC6
02378  CEC5  C8                 INY 
02379  CEC6  20 87 D4    XXAEC6 JSR XXB487
02380  CEC9  4C E2 D7           JMP XXB7E2
02381  CECC              ;********************************
02382  CECC              ;
02383  CECC              ;********************************
02384  CECC  C9 A8       XXAECC CMP #$A8
02385  CECE  D0 13              BNE XXAEE3
02386  CED0  A0 18              LDY #$18
02387  CED2  D0 3B              BNE XXAF0F
02388  CED4              ;********************************
02389  CED4              ;
02390  CED4              ;********************************
02391  CED4  20 BF D1    ZZAED4 JSR XXB1BF
02392  CED7  A5 65              LDA $65
02393  CED9  49 FF              EOR #$FF
02394  CEDB  A8                 TAY 
02395  CEDC  A5 64              LDA $64
02396  CEDE  49 FF              EOR #$FF
02397  CEE0  4C 91 D3           JMP XXB391
02398  CEE3              ;********************************
02399  CEE3              ;
02400  CEE3              ;********************************
02401  CEE3  C9 A5       XXAEE3 CMP #$A5
02402  CEE5  D0 03              BNE XXAEEA
02403  CEE7  4C F4 D3           JMP XXB3F4
02404  CEEA              ;********************************
02405  CEEA              ;
02406  CEEA              ;********************************






CBASIC.ASM......PAGE 0048

LINE# LOC   CODE        LINE


02407  CEEA  C9 B4       XXAEEA CMP #$B4
02408  CEEC  90 03              BCC XXAEF1
02409  CEEE  4C A7 CF           JMP XXAFA7
02410  CEF1              ;********************************
02411  CEF1              ;
02412  CEF1              ;********************************
02413  CEF1  20 FA CE    XXAEF1 JSR XXAEFA
02414  CEF4  20 9E CD           JSR XXAD9E
02415  CEF7  A9 29       XXAEF7 LDA #$29        ;')'
02416  CEF9              ;********************************
02417  CEF9  2C                 .BYTE $2C
02418  CEFA              ;********************************
02419  CEFA  A9 28       XXAEFA LDA #$28        ;'('
02420  CEFC              ;********************************
02421  CEFC  2C                 .BYTE $2C
02422  CEFD              ;********************************
02423  CEFD  A9 2C       XXAEFD LDA #$2C        ;','
02424  CEFF  A0 00       XXAEFF LDY #$00
02425  CF01  D1 7A              CMP (TXTPTR),Y
02426  CF03  D0 03              BNE XXAF08
02427  CF05  4C 73 00           JMP CHRGET
02428  CF08              ;********************************
02429  CF08              ;
02430  CF08              ;********************************
02431  CF08  A2 0B       XXAF08 LDX #$0B
02432  CF0A  4C 37 C4           JMP XXA437
02433  CF0D              ;********************************
02434  CF0D              ;
02435  CF0D              ;********************************
02436  CF0D  A0 15       XXAF0D LDY #$15
02437  CF0F  68          XXAF0F PLA 
02438  CF10  68                 PLA 
02439  CF11  4C FA CD           JMP XXADFA
02440  CF14              ;********************************
02441  CF14              ;
02442  CF14              ;********************************
02443  CF14  38          XXAF14 SEC 
02444  CF15  A5 64              LDA $64
02445  CF17  E9 00              SBC #$00
02446  CF19  A5 65              LDA $65
02447  CF1B  E9 C0              SBC #>ZZA000    ;#$A0
02448  CF1D  90 08              BCC XXAF27
02449  CF1F              ; DIFF
02450  CF1F              ; C64 = $E3A2 VIC20 = $E387
02451  CF1F  A9 9F              LDA #<XXE3A2    ;#$A2
02452  CF21  E5 64              SBC $64
02453  CF23  A9 E3              LDA #>XXE3A2    ;#$E3
02454  CF25  E5 65              SBC $65
02455  CF27  60          XXAF27 RTS 
02456  CF28              ;********************************
02457  CF28              ;
02458  CF28              ;********************************
02459  CF28  20 8B D0    XXAF28 JSR XXB08B
02460  CF2B  85 64              STA $64
02461  CF2D  84 65              STY $65






CBASIC.ASM......PAGE 0049

LINE# LOC   CODE        LINE


02462  CF2F  A6 45              LDX VARNAM
02463  CF31  A4 46              LDY VARNAM+1
02464  CF33  A5 0D              LDA VALTYP
02465  CF35  F0 26              BEQ XXAF5D
02466  CF37  A9 00              LDA #$00
02467  CF39  85 70              STA $70
02468  CF3B  20 14 CF           JSR XXAF14
02469  CF3E  90 1C              BCC XXAF5C
02470  CF40  E0 54              CPX #$54        ;'T'
02471  CF42  D0 18              BNE XXAF5C
02472  CF44  C0 C9              CPY #$C9
02473  CF46  D0 14              BNE XXAF5C
02474  CF48  20 84 CF           JSR XXAF84
02475  CF4B  84 5E              STY $5E
02476  CF4D  88                 DEY 
02477  CF4E  84 71              STY $71
02478  CF50  A0 06              LDY #$06
02479  CF52  84 5D              STY $5D
02480  CF54  A0 24              LDY #$24        ;'$'
02481  CF56  20 68 DE           JSR XXBE68
02482  CF59  4C 6F D4           JMP XXB46F
02483  CF5C              ;********************************
02484  CF5C              ;
02485  CF5C              ;********************************
02486  CF5C  60          XXAF5C RTS 
02487  CF5D              ;********************************
02488  CF5D              ;
02489  CF5D              ;********************************
02490  CF5D  24 0E       XXAF5D BIT INTFLG
02491  CF5F  10 0D              BPL XXAF6E
02492  CF61  A0 00              LDY #$00
02493  CF63  B1 64              LDA ($64),Y
02494  CF65  AA                 TAX 
02495  CF66  C8                 INY 
02496  CF67  B1 64              LDA ($64),Y
02497  CF69  A8                 TAY 
02498  CF6A  8A                 TXA 
02499  CF6B  4C 91 D3           JMP XXB391
02500  CF6E              ;********************************
02501  CF6E              ;
02502  CF6E              ;********************************
02503  CF6E  20 14 CF    XXAF6E JSR XXAF14
02504  CF71  90 2D              BCC XXAFA0
02505  CF73  E0 54              CPX #$54        ;'T'
02506  CF75  D0 1B              BNE XXAF92
02507  CF77  C0 49              CPY #$49        ;'I'
02508  CF79  D0 25              BNE XXAFA0
02509  CF7B  20 84 CF           JSR XXAF84
02510  CF7E  98                 TYA 
02511  CF7F  A2 A0              LDX #$A0
02512  CF81  4C 4F DC           JMP XXBC4F
02513  CF84              ;********************************
02514  CF84              ;
02515  CF84              ;********************************
02516  CF84  20 DE FF    XXAF84 JSR RDTIM






CBASIC.ASM......PAGE 0050

LINE# LOC   CODE        LINE


02517  CF87  86 64              STX $64
02518  CF89  84 63              STY $63
02519  CF8B  85 65              STA $65
02520  CF8D  A0 00              LDY #$00
02521  CF8F  84 62              STY $62
02522  CF91  60                 RTS 
02523  CF92              ;********************************
02524  CF92              ;
02525  CF92              ;********************************
02526  CF92  E0 53       XXAF92 CPX #$53        ;'S'
02527  CF94  D0 0A              BNE XXAFA0
02528  CF96  C0 54              CPY #$54        ;'T'
02529  CF98  D0 06              BNE XXAFA0
02530  CF9A  20 B7 FF           JSR READST
02531  CF9D  4C 3C DC           JMP XXBC3C
02532  CFA0              ;********************************
02533  CFA0              ;
02534  CFA0              ;********************************
02535  CFA0  A5 64       XXAFA0 LDA $64
02536  CFA2  A4 65              LDY $65
02537  CFA4  4C A2 DB           JMP XXBBA2
02538  CFA7              ;********************************
02539  CFA7              ; ISFUN - DISPATCH AND EVALUATE A FUNCTION
02540  CFA7              ;********************************
02541  CFA7  0A          XXAFA7 ASL A
02542  CFA8  48                 PHA 
02543  CFA9  AA                 TAX 
02544  CFAA  20 73 00           JSR CHRGET
02545  CFAD  E0 8F              CPX #$8F
02546  CFAF  90 20              BCC XXAFD1
02547  CFB1  20 FA CE           JSR XXAEFA
02548  CFB4  20 9E CD           JSR XXAD9E
02549  CFB7  20 FD CE           JSR XXAEFD
02550  CFBA  20 8F CD           JSR XXAD8F
02551  CFBD  68                 PLA 
02552  CFBE  AA                 TAX 
02553  CFBF  A5 65              LDA $65
02554  CFC1  48                 PHA 
02555  CFC2  A5 64              LDA $64
02556  CFC4  48                 PHA 
02557  CFC5  8A                 TXA 
02558  CFC6  48                 PHA 
02559  CFC7  20 9E D7           JSR XXB79E
02560  CFCA  68                 PLA 
02561  CFCB  A8                 TAY 
02562  CFCC  8A                 TXA 
02563  CFCD  48                 PHA 
02564  CFCE  4C D6 CF           JMP XXAFD6
02565  CFD1              ;********************************
02566  CFD1              ;
02567  CFD1              ;********************************
02568  CFD1              TT9FEA = ZZA00C-$0022  ; (ZZA050-ZZA00C/2)
02569  CFD1              TT9FEB = ZZA00C-$0021  ; (ZZA050-ZZA00C/2)-1
02570  CFD1              ;********************************
02571  CFD1              ;






CBASIC.ASM......PAGE 0051

LINE# LOC   CODE        LINE


02572  CFD1              ;********************************
02573  CFD1  20 F1 CE    XXAFD1 JSR XXAEF1
02574  CFD4  68                 PLA 
02575  CFD5  A8                 TAY 
02576  CFD6  B9 EA BF    XXAFD6 LDA TT9FEA,Y    ;$9FEA,Y
02577  CFD9  85 55              STA JMPER+1     ;$55
02578  CFDB              ;
02579  CFDB  B9 EB BF           LDA TT9FEB,Y    ;$9FEB,Y
02580  CFDE  85 56              STA JMPER+2     ;$56
02581  CFE0              ;
02582  CFE0  20 54 00           JSR JMPER
02583  CFE3  4C 8D CD           JMP XXAD8D
02584  CFE6              ;********************************
02585  CFE6              ; OR OPERATOR
02586  CFE6              ;********************************
02587  CFE6  A0 FF       ZZAFE6 LDY #$FF
02588  CFE8              ;********************************
02589  CFE8  2C                 .BYTE $2C
02590  CFE9              ;********************************
02591  CFE9              ; AND OPERATOR
02592  CFE9              ;********************************
02593  CFE9  A0 00       ZZAFE9 LDY #$00
02594  CFEB  84 0B              STY COUNT
02595  CFED  20 BF D1           JSR XXB1BF
02596  CFF0  A5 64              LDA $64
02597  CFF2  45 0B              EOR COUNT
02598  CFF4  85 07              STA CHARAC
02599  CFF6  A5 65              LDA $65
02600  CFF8  45 0B              EOR COUNT
02601  CFFA  85 08              STA ENDCHR
02602  CFFC  20 FC DB           JSR XXBBFC
02603  CFFF  20 BF D1           JSR XXB1BF
02604  D002  A5 65              LDA $65
02605  D004  45 0B              EOR COUNT
02606  D006  25 08              AND ENDCHR
02607  D008  45 0B              EOR COUNT
02608  D00A  A8                 TAY 
02609  D00B  A5 64              LDA $64
02610  D00D  45 0B              EOR COUNT
02611  D00F  25 07              AND CHARAC
02612  D011  45 0B              EOR COUNT
02613  D013  4C 91 D3           JMP XXB391
02614  D016              ;********************************
02615  D016              ;
02616  D016              ;********************************
02617  D016  20 90 CD    ZZB016 JSR XXAD90
02618  D019  B0 13              BCS XXB02E
02619  D01B  A5 6E              LDA $6E
02620  D01D  09 7F              ORA #$7F
02621  D01F  25 6A              AND $6A
02622  D021  85 6A              STA $6A
02623  D023  A9 69              LDA #$69
02624  D025  A0 00              LDY #$00
02625  D027  20 5B DC           JSR XXBC5B
02626  D02A  AA                 TAX 






CBASIC.ASM......PAGE 0052

LINE# LOC   CODE        LINE


02627  D02B  4C 61 D0           JMP XXB061
02628  D02E              ;********************************
02629  D02E              ;
02630  D02E              ;********************************
02631  D02E  A9 00       XXB02E LDA #$00
02632  D030  85 0D              STA VALTYP
02633  D032  C6 4D              DEC OPMASK
02634  D034  20 A6 D6           JSR XXB6A6
02635  D037  85 61              STA $61
02636  D039  86 62              STX $62
02637  D03B  84 63              STY $63
02638  D03D  A5 6C              LDA $6C
02639  D03F  A4 6D              LDY $6D
02640  D041  20 AA D6           JSR XXB6AA
02641  D044  86 6C              STX $6C
02642  D046  84 6D              STY $6D
02643  D048  AA                 TAX 
02644  D049  38                 SEC 
02645  D04A  E5 61              SBC $61
02646  D04C  F0 08              BEQ XXB056
02647  D04E  A9 01              LDA #$01
02648  D050  90 04              BCC XXB056
02649  D052  A6 61              LDX $61
02650  D054  A9 FF              LDA #$FF
02651  D056  85 66       XXB056 STA $66
02652  D058  A0 FF              LDY #$FF
02653  D05A  E8                 INX 
02654  D05B  C8          XXB05B INY 
02655  D05C  CA                 DEX 
02656  D05D  D0 07              BNE XXB066
02657  D05F  A6 66              LDX $66
02658  D061  30 0F       XXB061 BMI XXB072
02659  D063  18                 CLC 
02660  D064  90 0C              BCC XXB072
02661  D066  B1 6C       XXB066 LDA ($6C),Y
02662  D068  D1 62              CMP ($62),Y
02663  D06A  F0 EF              BEQ XXB05B
02664  D06C  A2 FF              LDX #$FF
02665  D06E  B0 02              BCS XXB072
02666  D070  A2 01              LDX #$01
02667  D072  E8          XXB072 INX 
02668  D073  8A                 TXA 
02669  D074  2A                 ROL A
02670  D075  25 12              AND TANSGN
02671  D077  F0 02              BEQ XXB07B
02672  D079  A9 FF              LDA #$FF
02673  D07B  4C 3C DC    XXB07B JMP XXBC3C
02674  D07E              ;********************************
02675  D07E              ;
02676  D07E              ;********************************
02677  D07E  20 FD CE    XXB07E JSR XXAEFD
02678  D081              ;********************************
02679  D081              ; DIM COMMAND
02680  D081              ;********************************
02681  D081  AA          ZZB081 TAX 






CBASIC.ASM......PAGE 0053

LINE# LOC   CODE        LINE


02682  D082  20 90 D0           JSR XXB090
02683  D085  20 79 00           JSR CHRGOT
02684  D088  D0 F4              BNE XXB07E
02685  D08A  60                 RTS 
02686  D08B              ;********************************
02687  D08B              ; GET NAME AND POINTER TO A VARIABLE
02688  D08B              ;********************************
02689  D08B  A2 00       XXB08B LDX #$00
02690  D08D  20 79 00           JSR CHRGOT
02691  D090  86 0C       XXB090 STX DIMFLG
02692  D092  85 45       XXB092 STA VARNAM
02693  D094  20 79 00           JSR CHRGOT
02694  D097  20 13 D1           JSR XXB113
02695  D09A  B0 03              BCS XXB09F
02696  D09C  4C 08 CF    XXB09C JMP XXAF08
02697  D09F              ;********************************
02698  D09F              ;
02699  D09F              ;********************************
02700  D09F  A2 00       XXB09F LDX #$00
02701  D0A1  86 0D              STX VALTYP
02702  D0A3  86 0E              STX INTFLG
02703  D0A5  20 73 00           JSR CHRGET
02704  D0A8  90 05              BCC XXB0AF
02705  D0AA  20 13 D1           JSR XXB113
02706  D0AD  90 0B              BCC XXB0BA
02707  D0AF  AA          XXB0AF TAX 
02708  D0B0  20 73 00    XXB0B0 JSR CHRGET
02709  D0B3  90 FB              BCC XXB0B0
02710  D0B5  20 13 D1           JSR XXB113
02711  D0B8  B0 F6              BCS XXB0B0
02712  D0BA  C9 24       XXB0BA CMP #$24        ;'$'
02713  D0BC  D0 06              BNE XXB0C4
02714  D0BE  A9 FF              LDA #$FF
02715  D0C0  85 0D              STA VALTYP
02716  D0C2  D0 10              BNE XXB0D4
02717  D0C4  C9 25       XXB0C4 CMP #$25        ;'%'
02718  D0C6  D0 13              BNE XXB0DB
02719  D0C8  A5 10              LDA SUBFLG
02720  D0CA  D0 D0              BNE XXB09C
02721  D0CC  A9 80              LDA #$80
02722  D0CE  85 0E              STA INTFLG
02723  D0D0  05 45              ORA VARNAM
02724  D0D2  85 45              STA VARNAM
02725  D0D4  8A          XXB0D4 TXA 
02726  D0D5  09 80              ORA #$80
02727  D0D7  AA                 TAX 
02728  D0D8  20 73 00           JSR CHRGET
02729  D0DB  86 46       XXB0DB STX VARNAM+1
02730  D0DD  38                 SEC 
02731  D0DE  05 10              ORA SUBFLG
02732  D0E0  E9 28              SBC #$28        ;'('
02733  D0E2  D0 03              BNE XXB0E7
02734  D0E4  4C D1 D1           JMP XXB1D1
02735  D0E7              ;********************************
02736  D0E7              ;






CBASIC.ASM......PAGE 0054

LINE# LOC   CODE        LINE


02737  D0E7              ;********************************
02738  D0E7  A0 00       XXB0E7 LDY #$00
02739  D0E9  84 10              STY SUBFLG
02740  D0EB  A5 2D              LDA VARTAB
02741  D0ED  A6 2E              LDX VARTAB+1
02742  D0EF  86 60       XXB0EF STX $60
02743  D0F1  85 5F       XXB0F1 STA $5F
02744  D0F3  E4 30              CPX ARYTAB+1
02745  D0F5  D0 04              BNE XXB0FB
02746  D0F7  C5 2F              CMP ARYTAB
02747  D0F9  F0 22              BEQ XXB11D
02748  D0FB  A5 45       XXB0FB LDA VARNAM
02749  D0FD  D1 5F              CMP ($5F),Y
02750  D0FF  D0 08              BNE XXB109
02751  D101  A5 46              LDA VARNAM+1
02752  D103  C8                 INY 
02753  D104  D1 5F              CMP ($5F),Y
02754  D106  F0 7D              BEQ XXB185
02755  D108  88                 DEY 
02756  D109  18          XXB109 CLC 
02757  D10A  A5 5F              LDA $5F
02758  D10C  69 07              ADC #$07
02759  D10E  90 E1              BCC XXB0F1
02760  D110  E8                 INX 
02761  D111  D0 DC              BNE XXB0EF
02762  D113              ;********************************
02763  D113              ; CHECK CHARACTER IN A
02764  D113              ; C=1 IF ALPHABETIC, C=0 IF NOT
02765  D113              ;********************************
02766  D113  C9 41       XXB113 CMP #$41        ;'A'
02767  D115  90 05              BCC XXB11C
02768  D117  E9 5B              SBC #$5B        ;'['
02769  D119  38                 SEC 
02770  D11A  E9 A5              SBC #$A5
02771  D11C  60          XXB11C RTS 
02772  D11D              ;********************************
02773  D11D              ; VARIABLE NOT FOUND
02774  D11D              ;********************************
02775  D11D  68          XXB11D PLA 
02776  D11E  48                 PHA 
02777  D11F  C9 2A              CMP #$2A        ;'*'
02778  D121  D0 05              BNE XXB128
02779  D123  A9 13       XXB123 LDA #<ZZBF13    ;#$13
02780  D125  A0 DF              LDY #>ZZBF13    ;#$BF
02781  D127  60                 RTS 
02782  D128              ;********************************
02783  D128              ;
02784  D128              ;********************************
02785  D128  A5 45       XXB128 LDA VARNAM
02786  D12A  A4 46              LDY VARNAM+1
02787  D12C  C9 54              CMP #$54        ;'T'
02788  D12E  D0 0B              BNE XXB13B
02789  D130  C0 C9              CPY #$C9
02790  D132  F0 EF              BEQ XXB123
02791  D134  C0 49              CPY #$49        ;'I'






CBASIC.ASM......PAGE 0055

LINE# LOC   CODE        LINE


02792  D136  D0 03              BNE XXB13B
02793  D138  4C 08 CF    XXB138 JMP XXAF08
02794  D13B              ;********************************
02795  D13B              ;
02796  D13B              ;********************************
02797  D13B  C9 53       XXB13B CMP #$53        ;'S'
02798  D13D  D0 04              BNE XXB143
02799  D13F  C0 54              CPY #$54        ;'T'
02800  D141  F0 F5              BEQ XXB138
02801  D143  A5 2F       XXB143 LDA ARYTAB
02802  D145  A4 30              LDY ARYTAB+1
02803  D147  85 5F              STA $5F
02804  D149  84 60              STY $60
02805  D14B  A5 31              LDA STREND
02806  D14D  A4 32              LDY STREND+1
02807  D14F  85 5A              STA $5A
02808  D151  84 5B              STY $5B
02809  D153  18                 CLC 
02810  D154  69 07              ADC #$07
02811  D156  90 01              BCC XXB159
02812  D158  C8                 INY 
02813  D159  85 58       XXB159 STA $58
02814  D15B  84 59              STY $59
02815  D15D  20 B8 C3           JSR XXA3B8
02816  D160  A5 58              LDA $58
02817  D162  A4 59              LDY $59
02818  D164  C8                 INY 
02819  D165  85 2F              STA ARYTAB
02820  D167  84 30              STY ARYTAB+1
02821  D169  A0 00              LDY #$00
02822  D16B  A5 45              LDA VARNAM
02823  D16D  91 5F              STA ($5F),Y
02824  D16F  C8                 INY 
02825  D170  A5 46              LDA VARNAM+1
02826  D172  91 5F              STA ($5F),Y
02827  D174  A9 00              LDA #$00
02828  D176  C8                 INY 
02829  D177  91 5F              STA ($5F),Y
02830  D179  C8                 INY 
02831  D17A  91 5F              STA ($5F),Y
02832  D17C  C8                 INY 
02833  D17D  91 5F              STA ($5F),Y
02834  D17F  C8                 INY 
02835  D180  91 5F              STA ($5F),Y
02836  D182  C8                 INY 
02837  D183  91 5F              STA ($5F),Y
02838  D185              ;********************************
02839  D185              ; VARIABLE FOUND
02840  D185              ;********************************
02841  D185  A5 5F       XXB185 LDA $5F
02842  D187  18                 CLC 
02843  D188  69 02              ADC #$02
02844  D18A  A4 60              LDY $60
02845  D18C  90 01              BCC XXB18F
02846  D18E  C8                 INY 






CBASIC.ASM......PAGE 0056

LINE# LOC   CODE        LINE


02847  D18F  85 47       XXB18F STA VARPNT
02848  D191  84 48              STY VARPNT+1
02849  D193  60                 RTS 
02850  D194              ;********************************
02851  D194              ; COMPUTE POINTER TO ARRAY BODY
02852  D194              ;********************************
02853  D194  A5 0B       XXB194 LDA COUNT
02854  D196  0A                 ASL A
02855  D197  69 05              ADC #$05
02856  D199  65 5F              ADC $5F
02857  D19B  A4 60              LDY $60
02858  D19D  90 01              BCC XXB1A0
02859  D19F  C8                 INY 
02860  D1A0  85 58       XXB1A0 STA $58
02861  D1A2  84 59              STY $59
02862  D1A4  60                 RTS 
02863  D1A5              ;********************************
02864  D1A5              ; ; FLOAT NUMBER FOR CONVERSION TO INTEGER
02865  D1A5              ;********************************
02866  D1A5  90          WWB1A5 .BYTE $90
02867  D1A6  80                 .BYTE $80
02868  D1A7  00                 .BYTE $00
02869  D1A8  00                 .BYTE $00
02870  D1A9  00                 .BYTE $00
02871  D1AA              ;********************************
02872  D1AA              ; ROUTINE TO CONVERT FLOAT TO FIXED POINT
02873  D1AA              ;********************************
02874  D1AA  20 BF D1    ZZB1AA JSR XXB1BF
02875  D1AD  A5 64              LDA $64
02876  D1AF  A4 65              LDY $65
02877  D1B1  60                 RTS 
02878  D1B2              ;********************************
02879  D1B2              ; CONVERT VALUE FROM STATEMENT TO INTEGER
02880  D1B2              ;********************************
02881  D1B2  20 73 00    XXB1B2 JSR CHRGET
02882  D1B5  20 9E CD           JSR XXAD9E
02883  D1B8  20 8D CD    XXB1B8 JSR XXAD8D
02884  D1BB  A5 66              LDA $66
02885  D1BD  30 0D              BMI XXB1CC
02886  D1BF              ;********************************
02887  D1BF              ; CONVERT FLOAT NUMBER TO INTEGER
02888  D1BF              ;********************************
02889  D1BF  A5 61       XXB1BF LDA $61
02890  D1C1  C9 90              CMP #$90
02891  D1C3  90 09              BCC XXB1CE
02892  D1C5  A9 A5              LDA #<WWB1A5    ;#$A5
02893  D1C7  A0 D1              LDY #>WWB1A5    ;#$B1
02894  D1C9  20 5B DC           JSR XXBC5B
02895  D1CC  D0 7A       XXB1CC BNE XXB248
02896  D1CE  4C 9B DC    XXB1CE JMP XXBC9B
02897  D1D1              ;********************************
02898  D1D1              ; GET POINTER TO DIMENSIONED VARIABLE
02899  D1D1              ;********************************
02900  D1D1  A5 0C       XXB1D1 LDA DIMFLG
02901  D1D3  05 0E              ORA INTFLG






CBASIC.ASM......PAGE 0057

LINE# LOC   CODE        LINE


02902  D1D5  48                 PHA 
02903  D1D6  A5 0D              LDA VALTYP
02904  D1D8  48                 PHA 
02905  D1D9  A0 00              LDY #$00
02906  D1DB  98          XXB1DB TYA 
02907  D1DC  48                 PHA 
02908  D1DD  A5 46              LDA VARNAM+1
02909  D1DF  48                 PHA 
02910  D1E0  A5 45              LDA VARNAM
02911  D1E2  48                 PHA 
02912  D1E3  20 B2 D1           JSR XXB1B2
02913  D1E6  68                 PLA 
02914  D1E7  85 45              STA VARNAM
02915  D1E9  68                 PLA 
02916  D1EA  85 46              STA VARNAM+1
02917  D1EC  68                 PLA 
02918  D1ED  A8                 TAY 
02919  D1EE  BA                 TSX 
02920  D1EF  BD 02 01           LDA STACK+2,X
02921  D1F2  48                 PHA 
02922  D1F3  BD 01 01           LDA STACK+1,X
02923  D1F6  48                 PHA 
02924  D1F7  A5 64              LDA $64
02925  D1F9  9D 02 01           STA STACK+2,X
02926  D1FC  A5 65              LDA $65
02927  D1FE  9D 01 01           STA STACK+1,X
02928  D201  C8                 INY 
02929  D202  20 79 00           JSR CHRGOT
02930  D205  C9 2C              CMP #$2C        ;','
02931  D207  F0 D2              BEQ XXB1DB
02932  D209  84 0B              STY COUNT
02933  D20B  20 F7 CE           JSR XXAEF7
02934  D20E  68                 PLA 
02935  D20F  85 0D              STA VALTYP
02936  D211  68                 PLA 
02937  D212  85 0E              STA INTFLG
02938  D214  29 7F              AND #$7F
02939  D216  85 0C              STA DIMFLG
02940  D218  A6 2F              LDX ARYTAB
02941  D21A  A5 30              LDA ARYTAB+1
02942  D21C  86 5F       XXB21C STX $5F
02943  D21E  85 60              STA $60
02944  D220  C5 32              CMP STREND+1
02945  D222  D0 04              BNE XXB228
02946  D224  E4 31              CPX STREND
02947  D226  F0 39              BEQ XXB261
02948  D228  A0 00       XXB228 LDY #$00
02949  D22A  B1 5F              LDA ($5F),Y
02950  D22C  C8                 INY 
02951  D22D  C5 45              CMP VARNAM
02952  D22F  D0 06              BNE XXB237
02953  D231  A5 46              LDA VARNAM+1
02954  D233  D1 5F              CMP ($5F),Y
02955  D235  F0 16              BEQ XXB24D
02956  D237  C8          XXB237 INY 






CBASIC.ASM......PAGE 0058

LINE# LOC   CODE        LINE


02957  D238  B1 5F              LDA ($5F),Y
02958  D23A  18                 CLC 
02959  D23B  65 5F              ADC $5F
02960  D23D  AA                 TAX 
02961  D23E  C8                 INY 
02962  D23F  B1 5F              LDA ($5F),Y
02963  D241  65 60              ADC $60
02964  D243  90 D7              BCC XXB21C
02965  D245  A2 12       XXB245 LDX #$12        ; ERROR NUMBER
02966  D247              ;********************************
02967  D247  2C                 .BYTE $2C
02968  D248              ;********************************
02969  D248  A2 0E       XXB248 LDX #$0E        ; ERROR NUMBER
02970  D24A  4C 37 C4    XXB24A JMP XXA437
02971  D24D              ;********************************
02972  D24D              ;
02973  D24D              ;********************************
02974  D24D  A2 13       XXB24D LDX #$13        ; ERROR NUMBER
02975  D24F  A5 0C              LDA DIMFLG
02976  D251  D0 F7              BNE XXB24A
02977  D253  20 94 D1           JSR XXB194
02978  D256  A5 0B              LDA COUNT
02979  D258  A0 04              LDY #$04
02980  D25A  D1 5F              CMP ($5F),Y
02981  D25C  D0 E7              BNE XXB245
02982  D25E  4C EA D2           JMP XXB2EA
02983  D261              ;********************************
02984  D261              ; ALLOCATE ARRAY
02985  D261              ;********************************
02986  D261  20 94 D1    XXB261 JSR XXB194
02987  D264  20 08 C4           JSR XXA408
02988  D267  A0 00              LDY #$00
02989  D269  84 72              STY $72
02990  D26B  A2 05              LDX #$05
02991  D26D  A5 45              LDA VARNAM
02992  D26F  91 5F              STA ($5F),Y
02993  D271  10 01              BPL XXB274
02994  D273  CA                 DEX 
02995  D274  C8          XXB274 INY 
02996  D275  A5 46              LDA VARNAM+1
02997  D277  91 5F              STA ($5F),Y
02998  D279  10 02              BPL XXB27D
02999  D27B  CA                 DEX 
03000  D27C  CA                 DEX 
03001  D27D  86 71       XXB27D STX $71
03002  D27F  A5 0B              LDA COUNT
03003  D281  C8                 INY 
03004  D282  C8                 INY 
03005  D283  C8                 INY 
03006  D284  91 5F              STA ($5F),Y
03007  D286  A2 0B       XXB286 LDX #$0B
03008  D288  A9 00              LDA #$00
03009  D28A  24 0C              BIT DIMFLG
03010  D28C  50 08              BVC XXB296
03011  D28E  68                 PLA 






CBASIC.ASM......PAGE 0059

LINE# LOC   CODE        LINE


03012  D28F  18                 CLC 
03013  D290  69 01              ADC #$01
03014  D292  AA                 TAX 
03015  D293  68                 PLA 
03016  D294  69 00              ADC #$00
03017  D296  C8          XXB296 INY 
03018  D297  91 5F              STA ($5F),Y
03019  D299  C8                 INY 
03020  D29A  8A                 TXA 
03021  D29B  91 5F              STA ($5F),Y
03022  D29D  20 4C D3           JSR XXB34C
03023  D2A0  86 71              STX $71
03024  D2A2  85 72              STA $72
03025  D2A4  A4 22              LDY INDEX
03026  D2A6  C6 0B              DEC COUNT
03027  D2A8  D0 DC              BNE XXB286
03028  D2AA  65 59              ADC $59
03029  D2AC  B0 5D              BCS XXB30B
03030  D2AE  85 59              STA $59
03031  D2B0  A8                 TAY 
03032  D2B1  8A                 TXA 
03033  D2B2  65 58              ADC $58
03034  D2B4  90 03              BCC XXB2B9
03035  D2B6  C8                 INY 
03036  D2B7  F0 52              BEQ XXB30B
03037  D2B9  20 08 C4    XXB2B9 JSR XXA408
03038  D2BC  85 31              STA STREND
03039  D2BE  84 32              STY STREND+1
03040  D2C0  A9 00              LDA #$00
03041  D2C2  E6 72              INC $72
03042  D2C4  A4 71              LDY $71
03043  D2C6  F0 05              BEQ XXB2CD
03044  D2C8  88          XXB2C8 DEY 
03045  D2C9  91 58              STA ($58),Y
03046  D2CB  D0 FB              BNE XXB2C8
03047  D2CD  C6 59       XXB2CD DEC $59
03048  D2CF  C6 72              DEC $72
03049  D2D1  D0 F5              BNE XXB2C8
03050  D2D3  E6 59              INC $59
03051  D2D5  38                 SEC 
03052  D2D6  A5 31              LDA STREND
03053  D2D8  E5 5F              SBC $5F
03054  D2DA  A0 02              LDY #$02
03055  D2DC  91 5F              STA ($5F),Y
03056  D2DE  A5 32              LDA STREND+1
03057  D2E0  C8                 INY 
03058  D2E1  E5 60              SBC $60
03059  D2E3  91 5F              STA ($5F),Y
03060  D2E5  A5 0C              LDA DIMFLG
03061  D2E7  D0 62              BNE XXB34B
03062  D2E9  C8                 INY
03063  D2EA              ;********************************
03064  D2EA              ; COMPUTE REFERENCE TO ARRAY ELEMENT
03065  D2EA              ;********************************
03066  D2EA  B1 5F       XXB2EA LDA ($5F),Y






CBASIC.ASM......PAGE 0060

LINE# LOC   CODE        LINE


03067  D2EC  85 0B              STA COUNT
03068  D2EE  A9 00              LDA #$00
03069  D2F0  85 71              STA $71
03070  D2F2  85 72       XXB2F2 STA $72
03071  D2F4  C8                 INY 
03072  D2F5  68                 PLA 
03073  D2F6  AA                 TAX 
03074  D2F7  85 64              STA $64
03075  D2F9  68                 PLA 
03076  D2FA  85 65              STA $65
03077  D2FC  D1 5F              CMP ($5F),Y
03078  D2FE  90 0E              BCC XXB30E
03079  D300  D0 06              BNE XXB308
03080  D302  C8                 INY 
03081  D303  8A                 TXA 
03082  D304  D1 5F              CMP ($5F),Y
03083  D306  90 07              BCC XXB30F
03084  D308  4C 45 D2    XXB308 JMP XXB245
03085  D30B              ;********************************
03086  D30B              ;
03087  D30B              ;********************************
03088  D30B  4C 35 C4    XXB30B JMP XXA435
03089  D30E              ;********************************
03090  D30E              ;
03091  D30E              ;********************************
03092  D30E  C8          XXB30E INY 
03093  D30F  A5 72       XXB30F LDA $72
03094  D311  05 71              ORA $71
03095  D313  18                 CLC 
03096  D314  F0 0A              BEQ XXB320
03097  D316  20 4C D3           JSR XXB34C
03098  D319  8A                 TXA 
03099  D31A  65 64              ADC $64
03100  D31C  AA                 TAX 
03101  D31D  98                 TYA 
03102  D31E  A4 22              LDY INDEX
03103  D320  65 65       XXB320 ADC $65
03104  D322  86 71              STX $71
03105  D324  C6 0B              DEC COUNT
03106  D326  D0 CA              BNE XXB2F2
03107  D328  85 72              STA $72
03108  D32A  A2 05              LDX #$05
03109  D32C  A5 45              LDA VARNAM
03110  D32E  10 01              BPL XXB331
03111  D330  CA                 DEX 
03112  D331  A5 46       XXB331 LDA VARNAM+1
03113  D333  10 02              BPL XXB337
03114  D335  CA                 DEX 
03115  D336  CA                 DEX 
03116  D337  86 28       XXB337 STX RESHO+2
03117  D339  A9 00              LDA #$00
03118  D33B  20 55 D3           JSR XXB355
03119  D33E  8A                 TXA 
03120  D33F  65 58              ADC $58
03121  D341  85 47              STA VARPNT






CBASIC.ASM......PAGE 0061

LINE# LOC   CODE        LINE


03122  D343  98                 TYA 
03123  D344  65 59              ADC $59
03124  D346  85 48              STA VARPNT+1
03125  D348  A8                 TAY 
03126  D349  A5 47              LDA VARPNT
03127  D34B  60          XXB34B RTS 
03128  D34C              ;********************************
03129  D34C              ; XY = XA = LENGTH * LIMIT FROM ARRAY DATA
03130  D34C              ;********************************
03131  D34C  84 22       XXB34C STY INDEX
03132  D34E  B1 5F              LDA ($5F),Y
03133  D350  85 28              STA RESHO+2
03134  D352  88                 DEY 
03135  D353  B1 5F              LDA ($5F),Y
03136  D355  85 29       XXB355 STA RESHO+3
03137  D357  A9 10              LDA #$10
03138  D359  85 5D              STA $5D
03139  D35B  A2 00              LDX #$00
03140  D35D  A0 00              LDY #$00
03141  D35F  8A          XXB35F TXA 
03142  D360  0A                 ASL A
03143  D361  AA                 TAX 
03144  D362  98                 TYA 
03145  D363  2A                 ROL A
03146  D364  A8                 TAY 
03147  D365  B0 A4              BCS XXB30B
03148  D367  06 71              ASL $71
03149  D369  26 72              ROL $72
03150  D36B  90 0B              BCC XXB378
03151  D36D  18                 CLC 
03152  D36E  8A                 TXA 
03153  D36F  65 28              ADC RESHO+2
03154  D371  AA                 TAX 
03155  D372  98                 TYA 
03156  D373  65 29              ADC RESHO+3
03157  D375  A8                 TAY 
03158  D376  B0 93              BCS XXB30B
03159  D378  C6 5D       XXB378 DEC $5D
03160  D37A  D0 E3              BNE XXB35F
03161  D37C  60                 RTS 
03162  D37D              ;********************************
03163  D37D              ; FRE FUNCTION
03164  D37D              ;********************************
03165  D37D  A5 0D       XXB37D LDA VALTYP
03166  D37F  F0 03              BEQ XXB384
03167  D381  20 A6 D6           JSR XXB6A6
03168  D384  20 26 D5    XXB384 JSR XXB526
03169  D387  38                 SEC 
03170  D388  A5 33              LDA FRETOP
03171  D38A  E5 31              SBC STREND
03172  D38C  A8                 TAY 
03173  D38D  A5 34              LDA FRETOP+1
03174  D38F  E5 32              SBC STREND+1
03175  D391              ;********************************
03176  D391              ; ROUTINE TO CONVERT INTEGER TO FLOAT






CBASIC.ASM......PAGE 0062

LINE# LOC   CODE        LINE


03177  D391              ;********************************
03178  D391  A2 00       XXB391 LDX #$00
03179  D393  86 0D              STX VALTYP
03180  D395  85 62              STA $62
03181  D397  84 63              STY $63
03182  D399  A2 90              LDX #$90
03183  D39B  4C 44 DC           JMP XXBC44
03184  D39E              ;********************************
03185  D39E              ; POS FUNCTION
03186  D39E              ;********************************
03187  D39E  38          XXB39E SEC 
03188  D39F  20 F0 FF           JSR PLOT
03189  D3A2  A9 00       XXB3A2 LDA #$00
03190  D3A4  F0 EB              BEQ XXB391
03191  D3A6              ;********************************
03192  D3A6              ; CHECK FOR NON-DIRECT MODE
03193  D3A6              ;********************************
03194  D3A6  A6 3A       XXB3A6 LDX CURLIN+1
03195  D3A8  E8                 INX 
03196  D3A9  D0 A0              BNE XXB34B
03197  D3AB  A2 15              LDX #$15        ; ERROR NUMBER
03198  D3AD              ;********************************
03199  D3AD  2C                 .BYTE $2C
03200  D3AE              ;********************************
03201  D3AE  A2 1B       XXB3AE LDX #$1B        ; ERROR NUMBER
03202  D3B0  4C 37 C4           JMP XXA437
03203  D3B3              ;********************************
03204  D3B3              ; DEF COMMAND
03205  D3B3              ;********************************
03206  D3B3  20 E1 D3    ZZB3B3 JSR XXB3E1
03207  D3B6  20 A6 D3           JSR XXB3A6
03208  D3B9  20 FA CE           JSR XXAEFA
03209  D3BC  A9 80              LDA #$80
03210  D3BE  85 10              STA SUBFLG
03211  D3C0  20 8B D0           JSR XXB08B
03212  D3C3  20 8D CD           JSR XXAD8D
03213  D3C6  20 F7 CE           JSR XXAEF7
03214  D3C9  A9 B2              LDA #$B2
03215  D3CB  20 FF CE           JSR XXAEFF
03216  D3CE  48                 PHA 
03217  D3CF  A5 48              LDA VARPNT+1
03218  D3D1  48                 PHA 
03219  D3D2  A5 47              LDA VARPNT
03220  D3D4  48                 PHA 
03221  D3D5  A5 7B              LDA TXTPTR+1
03222  D3D7  48                 PHA 
03223  D3D8  A5 7A              LDA TXTPTR
03224  D3DA  48                 PHA 
03225  D3DB  20 F8 C8           JSR XXA8F8
03226  D3DE  4C 4F D4           JMP XXB44F
03227  D3E1              ;********************************
03228  D3E1              ; GET FUNCTION NAME
03229  D3E1              ;********************************
03230  D3E1  A9 A5       XXB3E1 LDA #$A5
03231  D3E3  20 FF CE           JSR XXAEFF






CBASIC.ASM......PAGE 0063

LINE# LOC   CODE        LINE


03232  D3E6  09 80              ORA #$80
03233  D3E8  85 10              STA SUBFLG
03234  D3EA  20 92 D0           JSR XXB092
03235  D3ED  85 4E              STA DEFPNT
03236  D3EF  84 4F              STY DEFPNT+1
03237  D3F1  4C 8D CD           JMP XXAD8D
03238  D3F4              ;********************************
03239  D3F4              ; EXPAND FN CALL
03240  D3F4              ;********************************
03241  D3F4  20 E1 D3    XXB3F4 JSR XXB3E1
03242  D3F7  A5 4F              LDA DEFPNT+1
03243  D3F9  48                 PHA 
03244  D3FA  A5 4E              LDA DEFPNT
03245  D3FC  48                 PHA 
03246  D3FD  20 F1 CE           JSR XXAEF1
03247  D400  20 8D CD           JSR XXAD8D
03248  D403  68                 PLA 
03249  D404  85 4E              STA DEFPNT
03250  D406  68                 PLA 
03251  D407  85 4F              STA DEFPNT+1
03252  D409  A0 02              LDY #$02
03253  D40B  B1 4E              LDA (DEFPNT),Y
03254  D40D  85 47              STA VARPNT
03255  D40F  AA                 TAX 
03256  D410  C8                 INY 
03257  D411  B1 4E              LDA (DEFPNT),Y
03258  D413  F0 99              BEQ XXB3AE
03259  D415  85 48              STA VARPNT+1
03260  D417  C8                 INY 
03261  D418  B1 47       XXB418 LDA (VARPNT),Y
03262  D41A  48                 PHA 
03263  D41B  88                 DEY 
03264  D41C  10 FA              BPL XXB418
03265  D41E  A4 48              LDY VARPNT+1
03266  D420  20 D4 DB           JSR XXBBD4
03267  D423  A5 7B              LDA TXTPTR+1
03268  D425  48                 PHA 
03269  D426  A5 7A              LDA TXTPTR
03270  D428  48                 PHA 
03271  D429  B1 4E              LDA (DEFPNT),Y
03272  D42B  85 7A              STA TXTPTR
03273  D42D  C8                 INY 
03274  D42E  B1 4E              LDA (DEFPNT),Y
03275  D430  85 7B              STA TXTPTR+1
03276  D432  A5 48              LDA VARPNT+1
03277  D434  48                 PHA 
03278  D435  A5 47              LDA VARPNT
03279  D437  48                 PHA 
03280  D438  20 8A CD           JSR XXAD8A
03281  D43B  68                 PLA 
03282  D43C  85 4E              STA DEFPNT
03283  D43E  68                 PLA 
03284  D43F  85 4F              STA DEFPNT+1
03285  D441  20 79 00           JSR CHRGOT
03286  D444  F0 03              BEQ XXB449






CBASIC.ASM......PAGE 0064

LINE# LOC   CODE        LINE


03287  D446  4C 08 CF           JMP XXAF08
03288  D449              ;********************************
03289  D449              ;
03290  D449              ;********************************
03291  D449  68          XXB449 PLA 
03292  D44A  85 7A              STA TXTPTR
03293  D44C  68                 PLA 
03294  D44D  85 7B              STA TXTPTR+1
03295  D44F  A0 00       XXB44F LDY #$00
03296  D451  68                 PLA 
03297  D452  91 4E              STA (DEFPNT),Y
03298  D454  68                 PLA 
03299  D455  C8                 INY 
03300  D456  91 4E              STA (DEFPNT),Y
03301  D458  68                 PLA 
03302  D459  C8                 INY 
03303  D45A  91 4E              STA (DEFPNT),Y
03304  D45C  68                 PLA 
03305  D45D  C8                 INY 
03306  D45E  91 4E              STA (DEFPNT),Y
03307  D460  68                 PLA 
03308  D461  C8                 INY 
03309  D462  91 4E              STA (DEFPNT),Y
03310  D464  60                 RTS 
03311  D465              ;********************************
03312  D465              ; STR$ FUNCTION
03313  D465              ;********************************
03314  D465  20 8D CD    XXB465 JSR XXAD8D
03315  D468  A0 00              LDY #$00
03316  D46A  20 DF DD           JSR XXBDDF
03317  D46D  68                 PLA 
03318  D46E  68                 PLA 
03319  D46F  A9 FF       XXB46F LDA #$FF
03320  D471  A0 00              LDY #$00
03321  D473  F0 12              BEQ XXB487
03322  D475  A6 64       XXB475 LDX $64
03323  D477  A4 65              LDY $65
03324  D479  86 50              STX DSCPNT
03325  D47B  84 51              STY DSCPNT+1
03326  D47D              ;********************************
03327  D47D              ; ALLOCATE AREA ACCORDING TO A
03328  D47D              ;********************************
03329  D47D  20 F4 D4    XXB47D JSR XXB4F4
03330  D480  86 62              STX $62
03331  D482  84 63              STY $63
03332  D484  85 61              STA $61
03333  D486  60                 RTS 
03334  D487              ;********************************
03335  D487              ; GET DESCRIPTION OF STRING INTO FLOAT ACCU
03336  D487              ;********************************
03337  D487  A2 22       XXB487 LDX #$22        ;'"'
03338  D489  86 07              STX CHARAC
03339  D48B  86 08              STX ENDCHR
03340  D48D  85 6F       XXB48D STA $6F
03341  D48F  84 70              STY $70






CBASIC.ASM......PAGE 0065

LINE# LOC   CODE        LINE


03342  D491  85 62              STA $62
03343  D493  84 63              STY $63
03344  D495  A0 FF              LDY #$FF
03345  D497  C8          XXB497 INY 
03346  D498  B1 6F              LDA ($6F),Y
03347  D49A  F0 0C              BEQ XXB4A8
03348  D49C  C5 07              CMP CHARAC
03349  D49E  F0 04              BEQ XXB4A4
03350  D4A0  C5 08              CMP ENDCHR
03351  D4A2  D0 F3              BNE XXB497
03352  D4A4  C9 22       XXB4A4 CMP #$22        ;'"'
03353  D4A6  F0 01              BEQ XXB4A9
03354  D4A8  18          XXB4A8 CLC 
03355  D4A9  84 61       XXB4A9 STY $61
03356  D4AB  98                 TYA 
03357  D4AC  65 6F              ADC $6F
03358  D4AE  85 71              STA $71
03359  D4B0  A6 70              LDX $70
03360  D4B2  90 01              BCC XXB4B5
03361  D4B4  E8                 INX 
03362  D4B5  86 72       XXB4B5 STX $72
03363  D4B7  A5 70              LDA $70
03364  D4B9  F0 04              BEQ XXB4BF
03365  D4BB  C9 02              CMP #$02
03366  D4BD  D0 0B              BNE XXB4CA
03367  D4BF  98          XXB4BF TYA 
03368  D4C0  20 75 D4           JSR XXB475
03369  D4C3  A6 6F              LDX $6F
03370  D4C5  A4 70              LDY $70
03371  D4C7  20 88 D6           JSR XXB688
03372  D4CA              ;********************************
03373  D4CA              ; SAVE DESCRIPTOR FROM $61-$63 ON STACK
03374  D4CA              ;********************************
03375  D4CA  A6 16       XXB4CA LDX TEMPPT
03376  D4CC  E0 22              CPX #$22        ;'"'
03377  D4CE  D0 05              BNE XXB4D5
03378  D4D0  A2 19              LDX #$19
03379  D4D2  4C 37 C4    XXB4D2 JMP XXA437
03380  D4D5              ;********************************
03381  D4D5              ;
03382  D4D5              ;********************************
03383  D4D5  A5 61       XXB4D5 LDA $61
03384  D4D7  95 00              STA $00,X
03385  D4D9  A5 62              LDA $62
03386  D4DB  95 01              STA $01,X
03387  D4DD  A5 63              LDA $63
03388  D4DF  95 02              STA $02,X
03389  D4E1  A0 00              LDY #$00
03390  D4E3  86 64              STX $64
03391  D4E5  84 65              STY $65
03392  D4E7  84 70              STY $70
03393  D4E9  88                 DEY 
03394  D4EA  84 0D              STY VALTYP
03395  D4EC  86 17              STX LASTPT
03396  D4EE  E8                 INX 






CBASIC.ASM......PAGE 0066

LINE# LOC   CODE        LINE


03397  D4EF  E8                 INX 
03398  D4F0  E8                 INX 
03399  D4F1  86 16              STX TEMPPT
03400  D4F3  60                 RTS 
03401  D4F4              ;********************************
03402  D4F4              ; ALLOCATE NUMBER OF BYTES IN A
03403  D4F4              ;********************************
03404  D4F4  46 0F       XXB4F4 LSR GARBFL
03405  D4F6  48          XXB4F6 PHA 
03406  D4F7  49 FF              EOR #$FF
03407  D4F9  38                 SEC 
03408  D4FA  65 33              ADC FRETOP
03409  D4FC  A4 34              LDY FRETOP+1
03410  D4FE  B0 01              BCS XXB501
03411  D500  88                 DEY 
03412  D501  C4 32       XXB501 CPY STREND+1
03413  D503  90 11              BCC XXB516
03414  D505  D0 04              BNE XXB50B
03415  D507  C5 31              CMP STREND
03416  D509  90 0B              BCC XXB516
03417  D50B  85 33       XXB50B STA FRETOP
03418  D50D  84 34              STY FRETOP+1
03419  D50F  85 35              STA FRESPC
03420  D511  84 36              STY FRESPC+1
03421  D513  AA                 TAX 
03422  D514  68                 PLA 
03423  D515  60                 RTS 
03424  D516              ;********************************
03425  D516              ;
03426  D516              ;********************************
03427  D516  A2 10       XXB516 LDX #$10
03428  D518  A5 0F              LDA GARBFL
03429  D51A  30 B6              BMI XXB4D2
03430  D51C  20 26 D5           JSR XXB526
03431  D51F  A9 80              LDA #$80
03432  D521  85 0F              STA GARBFL
03433  D523  68                 PLA 
03434  D524  D0 D0              BNE XXB4F6
03435  D526              ;********************************
03436  D526              ; STRING GARBAGE CLEAN UP
03437  D526              ;********************************
03438  D526  A6 37       XXB526 LDX MEMSIZ
03439  D528  A5 38              LDA MEMSIZ+1
03440  D52A  86 33       XXB52A STX FRETOP
03441  D52C  85 34              STA FRETOP+1
03442  D52E  A0 00              LDY #$00
03443  D530  84 4F              STY DEFPNT+1
03444  D532  84 4E              STY DEFPNT
03445  D534  A5 31              LDA STREND
03446  D536  A6 32              LDX STREND+1
03447  D538  85 5F              STA $5F
03448  D53A  86 60              STX $60
03449  D53C  A9 19              LDA #$19        ; LOW  0019
03450  D53E  A2 00              LDX #$00        ; HIGH 0019
03451  D540  85 22              STA INDEX






CBASIC.ASM......PAGE 0067

LINE# LOC   CODE        LINE


03452  D542  86 23              STX INDEX+1
03453  D544  C5 16       XXB544 CMP TEMPPT
03454  D546  F0 05              BEQ XXB54D
03455  D548  20 C7 D5           JSR XXB5C7
03456  D54B  F0 F7              BEQ XXB544
03457  D54D  A9 07       XXB54D LDA #$07
03458  D54F  85 53              STA FOUR6
03459  D551  A5 2D              LDA VARTAB
03460  D553  A6 2E              LDX VARTAB+1
03461  D555  85 22              STA INDEX
03462  D557  86 23              STX INDEX+1
03463  D559  E4 30       XXB559 CPX ARYTAB+1
03464  D55B  D0 04              BNE XXB561
03465  D55D  C5 2F              CMP ARYTAB
03466  D55F  F0 05              BEQ XXB566
03467  D561  20 BD D5    XXB561 JSR XXB5BD
03468  D564  F0 F3              BEQ XXB559
03469  D566  85 58       XXB566 STA $58
03470  D568  86 59              STX $59
03471  D56A  A9 03              LDA #$03
03472  D56C  85 53              STA FOUR6
03473  D56E  A5 58       XXB56E LDA $58
03474  D570  A6 59              LDX $59
03475  D572  E4 32       XXB572 CPX STREND+1
03476  D574  D0 07              BNE XXB57D
03477  D576  C5 31              CMP STREND
03478  D578  D0 03              BNE XXB57D
03479  D57A  4C 06 D6           JMP XXB606
03480  D57D              ;********************************
03481  D57D              ;
03482  D57D              ;********************************
03483  D57D  85 22       XXB57D STA INDEX
03484  D57F  86 23              STX INDEX+1
03485  D581  A0 00              LDY #$00
03486  D583  B1 22              LDA (INDEX),Y
03487  D585  AA                 TAX 
03488  D586  C8                 INY 
03489  D587  B1 22              LDA (INDEX),Y
03490  D589  08                 PHP 
03491  D58A  C8                 INY 
03492  D58B  B1 22              LDA (INDEX),Y
03493  D58D  65 58              ADC $58
03494  D58F  85 58              STA $58
03495  D591  C8                 INY 
03496  D592  B1 22              LDA (INDEX),Y
03497  D594  65 59              ADC $59
03498  D596  85 59              STA $59
03499  D598  28                 PLP 
03500  D599  10 D3              BPL XXB56E
03501  D59B  8A                 TXA 
03502  D59C  30 D0              BMI XXB56E
03503  D59E  C8                 INY 
03504  D59F  B1 22              LDA (INDEX),Y
03505  D5A1  A0 00              LDY #$00
03506  D5A3  0A                 ASL A






CBASIC.ASM......PAGE 0068

LINE# LOC   CODE        LINE


03507  D5A4  69 05              ADC #$05
03508  D5A6  65 22              ADC INDEX
03509  D5A8  85 22              STA INDEX
03510  D5AA  90 02              BCC XXB5AE
03511  D5AC  E6 23              INC INDEX+1
03512  D5AE  A6 23       XXB5AE LDX INDEX+1
03513  D5B0  E4 59       XXB5B0 CPX $59
03514  D5B2  D0 04              BNE XXB5B8
03515  D5B4  C5 58              CMP $58
03516  D5B6  F0 BA              BEQ XXB572
03517  D5B8  20 C7 D5    XXB5B8 JSR XXB5C7
03518  D5BB  F0 F3              BEQ XXB5B0
03519  D5BD              ;********************************
03520  D5BD              ; CHECK STRING AREA
03521  D5BD              ;********************************
03522  D5BD  B1 22              XXB5BD LDA (INDEX),Y
03523  D5BF  30 35              BMI XXB5F6
03524  D5C1  C8                 INY 
03525  D5C2  B1 22              LDA (INDEX),Y
03526  D5C4  10 30              BPL XXB5F6
03527  D5C6  C8                 INY 
03528  D5C7              ;********************************
03529  D5C7              ; CHECK STRING AREA
03530  D5C7              ;********************************
03531  D5C7  B1 22       XXB5C7 LDA (INDEX),Y
03532  D5C9  F0 2B              BEQ XXB5F6
03533  D5CB  C8                 INY 
03534  D5CC  B1 22              LDA (INDEX),Y
03535  D5CE  AA                 TAX 
03536  D5CF  C8                 INY 
03537  D5D0  B1 22              LDA (INDEX),Y
03538  D5D2  C5 34              CMP FRETOP+1
03539  D5D4  90 06              BCC XXB5DC
03540  D5D6  D0 1E              BNE XXB5F6
03541  D5D8  E4 33              CPX FRETOP
03542  D5DA  B0 1A              BCS XXB5F6
03543  D5DC  C5 60       XXB5DC CMP $60
03544  D5DE  90 16              BCC XXB5F6
03545  D5E0  D0 04              BNE XXB5E6
03546  D5E2  E4 5F              CPX $5F
03547  D5E4  90 10              BCC XXB5F6
03548  D5E6  86 5F       XXB5E6 STX $5F
03549  D5E8  85 60              STA $60
03550  D5EA  A5 22              LDA INDEX
03551  D5EC  A6 23              LDX INDEX+1
03552  D5EE  85 4E              STA DEFPNT
03553  D5F0  86 4F              STX DEFPNT+1
03554  D5F2  A5 53              LDA FOUR6
03555  D5F4  85 55              STA JMPER+1
03556  D5F6  A5 53       XXB5F6 LDA FOUR6
03557  D5F8  18                 CLC 
03558  D5F9  65 22              ADC INDEX
03559  D5FB  85 22              STA INDEX
03560  D5FD  90 02              BCC XXB601
03561  D5FF  E6 23              INC INDEX+1






CBASIC.ASM......PAGE 0069

LINE# LOC   CODE        LINE


03562  D601  A6 23       XXB601 LDX INDEX+1
03563  D603  A0 00              LDY #$00
03564  D605  60                 RTS 
03565  D606              ;********************************
03566  D606              ; CONTINUATION OF GARBAGE CLEAN UP
03567  D606              ;********************************
03568  D606  A5 4F       XXB606 LDA DEFPNT+1
03569  D608  05 4E              ORA DEFPNT
03570  D60A  F0 F5              BEQ XXB601
03571  D60C  A5 55              LDA JMPER+1
03572  D60E  29 04              AND #$04
03573  D610  4A                 LSR A
03574  D611  A8                 TAY 
03575  D612  85 55              STA JMPER+1
03576  D614  B1 4E              LDA (DEFPNT),Y
03577  D616  65 5F              ADC $5F
03578  D618  85 5A              STA $5A
03579  D61A  A5 60              LDA $60
03580  D61C  69 00              ADC #$00
03581  D61E  85 5B              STA $5B
03582  D620  A5 33              LDA FRETOP
03583  D622  A6 34              LDX FRETOP+1
03584  D624  85 58              STA $58
03585  D626  86 59              STX $59
03586  D628  20 BF C3           JSR XXA3BF
03587  D62B  A4 55              LDY JMPER+1
03588  D62D  C8                 INY 
03589  D62E  A5 58              LDA $58
03590  D630  91 4E              STA (DEFPNT),Y
03591  D632  AA                 TAX 
03592  D633  E6 59              INC $59
03593  D635  A5 59              LDA $59
03594  D637  C8                 INY 
03595  D638  91 4E              STA (DEFPNT),Y
03596  D63A  4C 2A D5           JMP XXB52A
03597  D63D              ;********************************
03598  D63D              ; JOINING STRINGS
03599  D63D              ;********************************
03600  D63D  A5 65       XXB63D LDA $65
03601  D63F  48                 PHA 
03602  D640  A5 64              LDA $64
03603  D642  48                 PHA 
03604  D643  20 83 CE           JSR XXAE83
03605  D646  20 8F CD           JSR XXAD8F
03606  D649  68                 PLA 
03607  D64A  85 6F              STA $6F
03608  D64C  68                 PLA 
03609  D64D  85 70              STA $70
03610  D64F  A0 00              LDY #$00
03611  D651  B1 6F              LDA ($6F),Y
03612  D653  18                 CLC 
03613  D654  71 64              ADC ($64),Y
03614  D656  90 05              BCC XXB65D
03615  D658  A2 17              LDX #$17
03616  D65A  4C 37 C4           JMP XXA437






CBASIC.ASM......PAGE 0070

LINE# LOC   CODE        LINE


03617  D65D              ;********************************
03618  D65D              ;
03619  D65D              ;********************************
03620  D65D  20 75 D4    XXB65D JSR XXB475
03621  D660  20 7A D6           JSR XXB67A
03622  D663  A5 50              LDA DSCPNT
03623  D665  A4 51              LDY DSCPNT+1
03624  D667  20 AA D6           JSR XXB6AA
03625  D66A  20 8C D6           JSR XXB68C
03626  D66D  A5 6F              LDA $6F
03627  D66F  A4 70              LDY $70
03628  D671  20 AA D6           JSR XXB6AA
03629  D674  20 CA D4           JSR XXB4CA
03630  D677  4C B8 CD           JMP XXADB8
03631  D67A              ;********************************
03632  D67A              ; MOVE STRING
03633  D67A              ;********************************
03634  D67A  A0 00       XXB67A LDY #$00
03635  D67C  B1 6F              LDA ($6F),Y
03636  D67E  48                 PHA 
03637  D67F  C8                 INY 
03638  D680  B1 6F              LDA ($6F),Y
03639  D682  AA                 TAX 
03640  D683  C8                 INY 
03641  D684  B1 6F              LDA ($6F),Y
03642  D686  A8                 TAY 
03643  D687  68                 PLA 
03644  D688              ;********************************
03645  D688              ; MOVE STRING WITH LENGTH A, POINTER IN XY
03646  D688              ;********************************
03647  D688  86 22       XXB688 STX INDEX
03648  D68A  84 23              STY INDEX+1
03649  D68C  A8          XXB68C TAY 
03650  D68D  F0 0A              BEQ XXB699
03651  D68F  48                 PHA 
03652  D690  88          XXB690 DEY 
03653  D691  B1 22              LDA (INDEX),Y
03654  D693  91 35              STA (FRESPC),Y
03655  D695  98                 TYA 
03656  D696  D0 F8              BNE XXB690
03657  D698  68                 PLA 
03658  D699  18          XXB699 CLC 
03659  D69A  65 35              ADC FRESPC
03660  D69C  85 35              STA FRESPC
03661  D69E  90 02              BCC XXB6A2
03662  D6A0  E6 36              INC FRESPC+1
03663  D6A2  60          XXB6A2 RTS 
03664  D6A3              ;********************************
03665  D6A3              ; DE-ALLOCATE TEMPORARY STRING
03666  D6A3              ;********************************
03667  D6A3  20 8F CD    XXB6A3 JSR XXAD8F
03668  D6A6  A5 64       XXB6A6 LDA $64
03669  D6A8  A4 65              LDY $65
03670  D6AA  85 22       XXB6AA STA INDEX
03671  D6AC  84 23              STY INDEX+1






CBASIC.ASM......PAGE 0071

LINE# LOC   CODE        LINE


03672  D6AE  20 DB D6           JSR XXB6DB
03673  D6B1  08                 PHP 
03674  D6B2  A0 00              LDY #$00
03675  D6B4  B1 22              LDA (INDEX),Y
03676  D6B6  48                 PHA 
03677  D6B7  C8                 INY 
03678  D6B8  B1 22              LDA (INDEX),Y
03679  D6BA  AA                 TAX 
03680  D6BB  C8                 INY 
03681  D6BC  B1 22              LDA (INDEX),Y
03682  D6BE  A8                 TAY 
03683  D6BF  68                 PLA 
03684  D6C0  28                 PLP 
03685  D6C1  D0 13              BNE XXB6D6
03686  D6C3  C4 34              CPY FRETOP+1
03687  D6C5  D0 0F              BNE XXB6D6
03688  D6C7  E4 33              CPX FRETOP
03689  D6C9  D0 0B              BNE XXB6D6
03690  D6CB  48                 PHA 
03691  D6CC  18                 CLC 
03692  D6CD  65 33              ADC FRETOP
03693  D6CF  85 33              STA FRETOP
03694  D6D1  90 02              BCC XXB6D5
03695  D6D3  E6 34              INC FRETOP+1
03696  D6D5  68          XXB6D5 PLA 
03697  D6D6  86 22       XXB6D6 STX INDEX
03698  D6D8  84 23              STY INDEX+1
03699  D6DA  60                 RTS 
03700  D6DB              ;********************************
03701  D6DB              ; CHECK DESCRIPTOR STACK
03702  D6DB              ;********************************
03703  D6DB  C4 18       XXB6DB CPY LASTPT+1
03704  D6DD  D0 0C              BNE XXB6EB
03705  D6DF  C5 17              CMP LASTPT
03706  D6E1  D0 08              BNE XXB6EB
03707  D6E3  85 16              STA TEMPPT
03708  D6E5  E9 03              SBC #$03
03709  D6E7  85 17              STA LASTPT
03710  D6E9  A0 00              LDY #$00
03711  D6EB  60          XXB6EB RTS 
03712  D6EC              ;********************************
03713  D6EC              ; CHR$ FUNCTION
03714  D6EC              ;********************************
03715  D6EC  20 A1 D7    XXB6EC JSR XXB7A1
03716  D6EF  8A                 TXA 
03717  D6F0  48                 PHA 
03718  D6F1  A9 01              LDA #$01
03719  D6F3  20 7D D4           JSR XXB47D
03720  D6F6  68                 PLA 
03721  D6F7  A0 00              LDY #$00
03722  D6F9  91 62              STA ($62),Y
03723  D6FB  68                 PLA 
03724  D6FC  68                 PLA 
03725  D6FD  4C CA D4           JMP XXB4CA
03726  D700              ;********************************






CBASIC.ASM......PAGE 0072

LINE# LOC   CODE        LINE


03727  D700              ; LEFT$ FUNCTION
03728  D700              ;********************************
03729  D700  20 61 D7    XXB700 JSR XXB761
03730  D703  D1 50              CMP (DSCPNT),Y
03731  D705  98                 TYA 
03732  D706  90 04       XXB706 BCC XXB70C
03733  D708  B1 50              LDA (DSCPNT),Y
03734  D70A  AA                 TAX 
03735  D70B  98                 TYA 
03736  D70C  48          XXB70C PHA 
03737  D70D  8A          XXB70D TXA 
03738  D70E  48          XXB70E PHA 
03739  D70F  20 7D D4           JSR XXB47D
03740  D712  A5 50              LDA DSCPNT
03741  D714  A4 51              LDY DSCPNT+1
03742  D716  20 AA D6           JSR XXB6AA
03743  D719  68                 PLA 
03744  D71A  A8                 TAY 
03745  D71B  68                 PLA 
03746  D71C  18                 CLC 
03747  D71D  65 22              ADC INDEX
03748  D71F  85 22              STA INDEX
03749  D721  90 02              BCC XXB725
03750  D723  E6 23              INC INDEX+1
03751  D725  98          XXB725 TYA 
03752  D726  20 8C D6           JSR XXB68C
03753  D729  4C CA D4           JMP XXB4CA
03754  D72C              ;********************************
03755  D72C              ; RIGHT$ FUNCTIO
03756  D72C              ;********************************
03757  D72C  20 61 D7    XXB72C JSR XXB761
03758  D72F  18                 CLC 
03759  D730  F1 50              SBC (DSCPNT),Y
03760  D732  49 FF              EOR #$FF
03761  D734  4C 06 D7           JMP XXB706
03762  D737              ;********************************
03763  D737              ; MID$ FUNCTION
03764  D737              ;********************************
03765  D737  A9 FF       XXB737 LDA #$FF        ; DEFAULT 3 PARAMETER
03766  D739  85 65              STA $65
03767  D73B  20 79 00           JSR CHRGOT
03768  D73E  C9 29              CMP #$29        ;')'
03769  D740  F0 06              BEQ XXB748
03770  D742  20 FD CE           JSR XXAEFD
03771  D745  20 9E D7           JSR XXB79E
03772  D748  20 61 D7    XXB748 JSR XXB761
03773  D74B  F0 4B              BEQ XXB798
03774  D74D  CA                 DEX 
03775  D74E  8A                 TXA 
03776  D74F  48                 PHA 
03777  D750  18                 CLC 
03778  D751  A2 00              LDX #$00
03779  D753  F1 50              SBC (DSCPNT),Y
03780  D755  B0 B6              BCS XXB70D
03781  D757  49 FF              EOR #$FF






CBASIC.ASM......PAGE 0073

LINE# LOC   CODE        LINE


03782  D759  C5 65              CMP $65
03783  D75B  90 B1              BCC XXB70E
03784  D75D  A5 65              LDA $65
03785  D75F  B0 AD              BCS XXB70E
03786  D761              ;********************************
03787  D761              ; GET FIRST 2 PARAMETERS FOR
03788  D761              ; LEFT$, RIGHT$ AND MID$
03789  D761              ;********************************
03790  D761  20 F7 CE    XXB761 JSR XXAEF7
03791  D764  68                 PLA 
03792  D765  A8                 TAY 
03793  D766  68                 PLA 
03794  D767  85 55              STA JMPER+1
03795  D769  68                 PLA 
03796  D76A  68                 PLA 
03797  D76B  68                 PLA 
03798  D76C  AA                 TAX 
03799  D76D  68                 PLA 
03800  D76E  85 50              STA DSCPNT
03801  D770  68                 PLA 
03802  D771  85 51              STA DSCPNT+1
03803  D773  A5 55              LDA JMPER+1
03804  D775  48                 PHA 
03805  D776  98                 TYA 
03806  D777  48                 PHA 
03807  D778  A0 00              LDY #$00
03808  D77A  8A                 TXA 
03809  D77B  60                 RTS 
03810  D77C              ;********************************
03811  D77C              ; LEN FUNCTION
03812  D77C              ;********************************
03813  D77C  20 82 D7    XXB77C JSR XXB782
03814  D77F  4C A2 D3           JMP XXB3A2
03815  D782              ;********************************
03816  D782              ;
03817  D782              ;********************************
03818  D782  20 A3 D6    XXB782 JSR XXB6A3
03819  D785  A2 00              LDX #$00
03820  D787  86 0D              STX VALTYP
03821  D789  A8                 TAY 
03822  D78A  60                 RTS 
03823  D78B              ;********************************
03824  D78B              ; ASC FUNCTION
03825  D78B              ;********************************
03826  D78B  20 82 D7    XXB78B JSR XXB782
03827  D78E  F0 08              BEQ XXB798
03828  D790  A0 00              LDY #$00
03829  D792  B1 22              LDA (INDEX),Y
03830  D794  A8                 TAY 
03831  D795  4C A2 D3           JMP XXB3A2
03832  D798              ;********************************
03833  D798              ;
03834  D798              ;********************************
03835  D798  4C 48 D2    XXB798 JMP XXB248
03836  D79B              ;********************************






CBASIC.ASM......PAGE 0074

LINE# LOC   CODE        LINE


03837  D79B              ; FETCH INTEGER VALUE IN X AND CHECK RANGE
03838  D79B              ;********************************
03839  D79B  20 73 00    XXB79B JSR CHRGET
03840  D79E  20 8A CD    XXB79E JSR XXAD8A
03841  D7A1  20 B8 D1    XXB7A1 JSR XXB1B8
03842  D7A4  A6 64              LDX $64
03843  D7A6  D0 F0              BNE XXB798
03844  D7A8  A6 65              LDX $65
03845  D7AA  4C 79 00           JMP CHRGOT
03846  D7AD              ;********************************
03847  D7AD              ; VAL FUNCTION
03848  D7AD              ;********************************
03849  D7AD  20 82 D7    XXB7AD JSR XXB782
03850  D7B0  D0 03              BNE XXB7B5
03851  D7B2  4C F7 D8           JMP XXB8F7
03852  D7B5              ;********************************
03853  D7B5              ;
03854  D7B5              ;********************************
03855  D7B5  A6 7A       XXB7B5 LDX TXTPTR
03856  D7B7  A4 7B              LDY TXTPTR+1
03857  D7B9  86 71              STX $71
03858  D7BB  84 72              STY $72
03859  D7BD  A6 22              LDX INDEX
03860  D7BF  86 7A              STX TXTPTR
03861  D7C1  18                 CLC 
03862  D7C2  65 22              ADC INDEX
03863  D7C4  85 24              STA INDEX+2
03864  D7C6  A6 23              LDX INDEX+1
03865  D7C8  86 7B              STX TXTPTR+1
03866  D7CA  90 01              BCC XXB7CD
03867  D7CC  E8                 INX 
03868  D7CD  86 25       XXB7CD STX INDEX+3
03869  D7CF  A0 00              LDY #$00
03870  D7D1  B1 24              LDA (INDEX+2),Y
03871  D7D3  48                 PHA 
03872  D7D4  98                 TYA 
03873  D7D5  91 24              STA (INDEX+2),Y
03874  D7D7  20 79 00           JSR CHRGOT
03875  D7DA  20 F3 DC           JSR XXBCF3
03876  D7DD  68                 PLA 
03877  D7DE  A0 00              LDY #$00
03878  D7E0  91 24              STA (INDEX+2),Y
03879  D7E2  A6 71       XXB7E2 LDX $71
03880  D7E4  A4 72              LDY $72
03881  D7E6  86 7A              STX TXTPTR
03882  D7E8  84 7B              STY TXTPTR+1
03883  D7EA  60                 RTS 
03884  D7EB              ;********************************
03885  D7EB              ; GET ADDRESS INTO LINNUM/LINNUM+1 AND INTEGER IN
 X
03886  D7EB              ;********************************
03887  D7EB  20 8A CD    XXB7EB JSR XXAD8A
03888  D7EE  20 F7 D7           JSR XXB7F7
03889  D7F1  20 FD CE    XXB7F1 JSR XXAEFD
03890  D7F4  4C 9E D7           JMP XXB79E
03891  D7F7              ;********************************






CBASIC.ASM......PAGE 0075

LINE# LOC   CODE        LINE


03892  D7F7              ; CONVERT FLOAT TI INTEGER IN LINNUM/$1
03893  D7F7              ;********************************
03894  D7F7  A5 66       XXB7F7 LDA $66
03895  D7F9  30 9D              BMI XXB798
03896  D7FB  A5 61              LDA $61
03897  D7FD  C9 91              CMP #$91
03898  D7FF  B0 97              BCS XXB798
03899  D801  20 9B DC           JSR XXBC9B
03900  D804  A5 64              LDA $64
03901  D806  A4 65              LDY $65
03902  D808  84 14              STY LINNUM
03903  D80A  85 15              STA LINNUM+1
03904  D80C  60                 RTS 
03905  D80D              ;********************************
03906  D80D              ; PEEK FUNCTIO
03907  D80D              ;********************************
03908  D80D  A5 15       XXB80D LDA LINNUM+1
03909  D80F  48                 PHA 
03910  D810  A5 14              LDA LINNUM
03911  D812  48                 PHA 
03912  D813  20 F7 D7           JSR XXB7F7
03913  D816  A0 00              LDY #$00
03914  D818  B1 14              LDA (LINNUM),Y
03915  D81A  A8                 TAY 
03916  D81B  68                 PLA 
03917  D81C  85 14              STA LINNUM
03918  D81E  68                 PLA 
03919  D81F  85 15              STA LINNUM+1
03920  D821  4C A2 D3           JMP XXB3A2
03921  D824              ;********************************
03922  D824              ; POKE COMMAND
03923  D824              ;********************************
03924  D824  20 EB D7    ZZB824 JSR XXB7EB
03925  D827  8A                 TXA 
03926  D828  A0 00              LDY #$00
03927  D82A  91 14              STA (LINNUM),Y
03928  D82C  60          XXB82C RTS 
03929  D82D              ;********************************
03930  D82D              ; WAIT COMMAND
03931  D82D              ;********************************
03932  D82D  20 EB D7    ZZB82D JSR XXB7EB
03933  D830  86 49              STX FORPNT
03934  D832  A2 00              LDX #$00
03935  D834  20 79 00           JSR CHRGOT
03936  D837  F0 03              BEQ XXB83C
03937  D839  20 F1 D7           JSR XXB7F1
03938  D83C  86 4A       XXB83C STX FORPNT+1
03939  D83E  A0 00              LDY #$00
03940  D840  B1 14       XXB840 LDA (LINNUM),Y
03941  D842  45 4A              EOR FORPNT+1
03942  D844  25 49              AND FORPNT
03943  D846  F0 F8              BEQ XXB840
03944  D848  60          XXB848 RTS 
03945  D849              ;********************************
03946  D849              ; ADD 0.5 TO FLOAT ACCU (ROUNDING)






CBASIC.ASM......PAGE 0076

LINE# LOC   CODE        LINE


03947  D849              ;********************************
03948  D849  A9 11       XXB849 LDA #<ZZBF11    ;#$11
03949  D84B  A0 DF              LDY #>ZZBF11    ;#$BF
03950  D84D  4C 67 D8           JMP XXB867
03951  D850              ;********************************
03952  D850              ; MINUS OPERATOR
03953  D850              ;********************************
03954  D850  20 8C DA    XXB850 JSR XXBA8C
03955  D853  A5 66       KKB853 LDA $66
03956  D855  49 FF              EOR #$FF
03957  D857  85 66              STA $66
03958  D859  45 6E              EOR $6E
03959  D85B  85 6F              STA $6F
03960  D85D  A5 61              LDA $61
03961  D85F  4C 6A D8           JMP XXB86A
03962  D862              ;********************************
03963  D862              ;
03964  D862              ;********************************
03965  D862  20 99 D9    XXB862 JSR XXB999
03966  D865  90 3C              BCC XXB8A3
03967  D867              ;********************************
03968  D867              ; ADD FLOAT INDEXED BY AY TO FLOAT ACCU
03969  D867              ;********************************
03970  D867  20 8C DA    XXB867 JSR XXBA8C
03971  D86A              ;********************************
03972  D86A              ; PLUS OPERATOR
03973  D86A              ;********************************
03974  D86A  D0 03       XXB86A BNE XXB86F
03975  D86C  4C FC DB           JMP XXBBFC
03976  D86F              ;********************************
03977  D86F              ;
03978  D86F              ;********************************
03979  D86F  A6 70       XXB86F LDX $70
03980  D871  86 56              STX JMPER+2
03981  D873  A2 69              LDX #$69
03982  D875  A5 69              LDA $69
03983  D877  A8          XXB877 TAY 
03984  D878  F0 CE              BEQ XXB848
03985  D87A  38                 SEC 
03986  D87B  E5 61              SBC $61
03987  D87D  F0 24              BEQ XXB8A3
03988  D87F  90 12              BCC XXB893
03989  D881  84 61              STY $61
03990  D883  A4 6E              LDY $6E
03991  D885  84 66              STY $66
03992  D887  49 FF              EOR #$FF
03993  D889  69 00              ADC #$00
03994  D88B  A0 00              LDY #$00
03995  D88D  84 56              STY JMPER+2
03996  D88F  A2 61              LDX #$61
03997  D891  D0 04              BNE XXB897
03998  D893  A0 00       XXB893 LDY #$00
03999  D895  84 70              STY $70
04000  D897  C9 F9       XXB897 CMP #$F9
04001  D899  30 C7              BMI XXB862






CBASIC.ASM......PAGE 0077

LINE# LOC   CODE        LINE


04002  D89B  A8                 TAY 
04003  D89C  A5 70              LDA $70
04004  D89E  56 01              LSR $01,X
04005  D8A0  20 B0 D9           JSR XXB9B0
04006  D8A3  24 6F       XXB8A3 BIT $6F
04007  D8A5  10 57              BPL XXB8FE
04008  D8A7  A0 61              LDY #$61
04009  D8A9  E0 69              CPX #$69
04010  D8AB  F0 02              BEQ XXB8AF
04011  D8AD  A0 69              LDY #$69
04012  D8AF  38          XXB8AF SEC 
04013  D8B0  49 FF              EOR #$FF
04014  D8B2  65 56              ADC JMPER+2
04015  D8B4  85 70              STA $70
04016  D8B6  B9 04 00           LDA $0004,Y
04017  D8B9  F5 04              SBC ADRAY1+1,X
04018  D8BB  85 65              STA $65
04019  D8BD  B9 03 00           LDA $0003,Y
04020  D8C0  F5 03              SBC ADRAY1,X
04021  D8C2  85 64              STA $64
04022  D8C4  B9 02 00           LDA $0002,Y
04023  D8C7  F5 02              SBC $02,X
04024  D8C9  85 63              STA $63
04025  D8CB  B9 01 00           LDA $0001,Y
04026  D8CE  F5 01              SBC $01,X
04027  D8D0  85 62              STA $62
04028  D8D2  B0 03       XXB8D2 BCS XXB8D7
04029  D8D4  20 47 D9           JSR XXB947
04030  D8D7  A0 00       XXB8D7 LDY #$00
04031  D8D9  98                 TYA 
04032  D8DA  18                 CLC 
04033  D8DB  A6 62       XXB8DB LDX $62
04034  D8DD  D0 4A              BNE XXB929
04035  D8DF  A6 63              LDX $63
04036  D8E1  86 62              STX $62
04037  D8E3  A6 64              LDX $64
04038  D8E5  86 63              STX $63
04039  D8E7  A6 65              LDX $65
04040  D8E9  86 64              STX $64
04041  D8EB  A6 70              LDX $70
04042  D8ED  86 65              STX $65
04043  D8EF  84 70              STY $70
04044  D8F1  69 08              ADC #$08
04045  D8F3  C9 20              CMP #$20        ;' '
04046  D8F5  D0 E4              BNE XXB8DB
04047  D8F7  A9 00       XXB8F7 LDA #$00
04048  D8F9  85 61       XXB8F9 STA $61
04049  D8FB  85 66       XXB8FB STA $66
04050  D8FD  60                 RTS 
04051  D8FE              ;********************************
04052  D8FE              ; ADD FRACTIONS
04053  D8FE              ;********************************
04054  D8FE  65 56       XXB8FE ADC JMPER+2
04055  D900  85 70              STA $70
04056  D902  A5 65              LDA $65






CBASIC.ASM......PAGE 0078

LINE# LOC   CODE        LINE


04057  D904  65 6D              ADC $6D
04058  D906  85 65              STA $65
04059  D908  A5 64              LDA $64
04060  D90A  65 6C              ADC $6C
04061  D90C  85 64              STA $64
04062  D90E  A5 63              LDA $63
04063  D910  65 6B              ADC $6B
04064  D912  85 63              STA $63
04065  D914  A5 62              LDA $62
04066  D916  65 6A              ADC $6A
04067  D918  85 62              STA $62
04068  D91A  4C 36 D9           JMP XXB936
04069  D91D              ;********************************
04070  D91D              ; POSTSHIFT
04071  D91D              ;********************************
04072  D91D  69 01       XXB91D ADC #$01
04073  D91F  06 70              ASL $70
04074  D921  26 65              ROL $65
04075  D923  26 64              ROL $64
04076  D925  26 63              ROL $63
04077  D927  26 62              ROL $62
04078  D929  10 F2       XXB929 BPL XXB91D
04079  D92B  38                 SEC 
04080  D92C  E5 61              SBC $61
04081  D92E  B0 C7              BCS XXB8F7
04082  D930  49 FF              EOR #$FF
04083  D932  69 01              ADC #$01
04084  D934  85 61              STA $61
04085  D936  90 0E       XXB936 BCC XXB946
04086  D938  E6 61       XXB938 INC $61
04087  D93A  F0 42              BEQ XXB97E
04088  D93C  66 62              ROR $62
04089  D93E  66 63              ROR $63
04090  D940  66 64              ROR $64
04091  D942  66 65              ROR $65
04092  D944  66 70              ROR $70
04093  D946  60          XXB946 RTS 
04094  D947              ;********************************
04095  D947              ; NEGATE FLOAT ACCU
04096  D947              ;********************************
04097  D947  A5 66       XXB947 LDA $66
04098  D949  49 FF              EOR #$FF
04099  D94B  85 66              STA $66
04100  D94D  A5 62       XXB94D LDA $62
04101  D94F  49 FF              EOR #$FF
04102  D951  85 62              STA $62
04103  D953  A5 63              LDA $63
04104  D955  49 FF              EOR #$FF
04105  D957  85 63              STA $63
04106  D959  A5 64              LDA $64
04107  D95B  49 FF              EOR #$FF
04108  D95D  85 64              STA $64
04109  D95F  A5 65              LDA $65
04110  D961  49 FF              EOR #$FF
04111  D963  85 65              STA $65






CBASIC.ASM......PAGE 0079

LINE# LOC   CODE        LINE


04112  D965  A5 70              LDA $70
04113  D967  49 FF              EOR #$FF
04114  D969  85 70              STA $70
04115  D96B  E6 70              INC $70
04116  D96D  D0 0E              BNE XXB97D
04117  D96F              ;********************************
04118  D96F              ; INCREMENT FRACTION
04119  D96F              ;********************************
04120  D96F  E6 65       XXB96F INC $65
04121  D971  D0 0A              BNE XXB97D
04122  D973  E6 64              INC $64
04123  D975  D0 06              BNE XXB97D
04124  D977  E6 63              INC $63
04125  D979  D0 02              BNE XXB97D
04126  D97B  E6 62              INC $62
04127  D97D  60          XXB97D RTS 
04128  D97E              ;********************************
04129  D97E              ;
04130  D97E              ;********************************
04131  D97E  A2 0F       XXB97E LDX #$0F        ; ERROR NUMBER
04132  D980  4C 37 C4           JMP XXA437
04133  D983              ;********************************
04134  D983              ; PRESHIFT
04135  D983              ;********************************
04136  D983  A2 25       XXB983 LDX #$25        ;'%'
04137  D985  B4 04       XXB985 LDY ADRAY1+1,X
04138  D987  84 70              STY $70
04139  D989  B4 03              LDY ADRAY1,X
04140  D98B  94 04              STY ADRAY1+1,X
04141  D98D  B4 02              LDY $02,X
04142  D98F  94 03              STY ADRAY1,X
04143  D991  B4 01              LDY $01,X
04144  D993  94 02              STY $02,X
04145  D995  A4 68              LDY $68
04146  D997  94 01              STY $01,X
04147  D999  69 08       XXB999 ADC #$08
04148  D99B  30 E8              BMI XXB985
04149  D99D  F0 E6              BEQ XXB985
04150  D99F  E9 08              SBC #$08
04151  D9A1  A8                 TAY 
04152  D9A2  A5 70              LDA $70
04153  D9A4  B0 14              BCS XXB9BA
04154  D9A6  16 01       XXB9A6 ASL $01,X
04155  D9A8  90 02              BCC XXB9AC
04156  D9AA  F6 01              INC $01,X
04157  D9AC  76 01       XXB9AC ROR $01,X
04158  D9AE  76 01              ROR $01,X
04159  D9B0  76 02       XXB9B0 ROR $02,X
04160  D9B2  76 03              ROR ADRAY1,X
04161  D9B4  76 04              ROR ADRAY1+1,X
04162  D9B6  6A                 ROR A
04163  D9B7  C8                 INY 
04164  D9B8  D0 EC              BNE XXB9A6
04165  D9BA  18          XXB9BA CLC 
04166  D9BB  60                 RTS 






CBASIC.ASM......PAGE 0080

LINE# LOC   CODE        LINE


04167  D9BC              ;********************************
04168  D9BC              ; 1
04169  D9BC              ;********************************
04170  D9BC  81          WWB9BC .BYTE $81
04171  D9BD  00                 .BYTE $00
04172  D9BE  00                 .BYTE $00
04173  D9BF  00                 .BYTE $00
04174  D9C0  00                 .BYTE $00
04175  D9C1              ;********************************
04176  D9C1              ; LOG POLYNOMIAL TABLE
04177  D9C1              ;********************************
04178  D9C1  03          WWB9C1 .BYTE $03       ; DEGREE 4
04179  D9C2  7F                 .BYTE $7F
04180  D9C3  5E                 .BYTE $5E
04181  D9C4  56                 .BYTE $56
04182  D9C5  CB                 .BYTE $CB
04183  D9C6  79                 .BYTE $79
04184  D9C7  80                 .BYTE $80
04185  D9C8  13                 .BYTE $13
04186  D9C9  9B                 .BYTE $9B
04187  D9CA  0B                 .BYTE $0B
04188  D9CB  64                 .BYTE $64
04189  D9CC  80                 .BYTE $80
04190  D9CD  76                 .BYTE $76
04191  D9CE  38                 .BYTE $38
04192  D9CF  93                 .BYTE $93
04193  D9D0  16                 .BYTE $16
04194  D9D1  82                 .BYTE $82
04195  D9D2  38                 .BYTE $38
04196  D9D3  AA                 .BYTE $AA
04197  D9D4  3B                 .BYTE $3B
04198  D9D5  20                 .BYTE $20
04199  D9D6              ;********************************
04200  D9D6              ; 0,5 * SQR(2)
04201  D9D6              ;********************************
04202  D9D6  80          WWB9D6 .BYTE $80
04203  D9D7  35                 .BYTE $35
04204  D9D8  04                 .BYTE $04
04205  D9D9  F3                 .BYTE $F3
04206  D9DA  34                 .BYTE $34
04207  D9DB              ;********************************
04208  D9DB              ; SQR(2)
04209  D9DB              ;********************************
04210  D9DB  81          WWB9DB .BYTE $81
04211  D9DC  35                 .BYTE $35
04212  D9DD  04                 .BYTE $04
04213  D9DE  F3                 .BYTE $F3
04214  D9DF  34                 .BYTE $34
04215  D9E0              ;********************************
04216  D9E0              ; -0.5
04217  D9E0              ;********************************
04218  D9E0  80          WWB9E0 .BYTE $80
04219  D9E1  80                 .BYTE $80
04220  D9E2  00                 .BYTE $00
04221  D9E3  00                 .BYTE $00






CBASIC.ASM......PAGE 0081

LINE# LOC   CODE        LINE


04222  D9E4  00                 .BYTE $00
04223  D9E5              ;********************************
04224  D9E5              ; LOG(2)
04225  D9E5              ;********************************
04226  D9E5  80          WWB9E5 .BYTE $80
04227  D9E6  31                 .BYTE $31
04228  D9E7  72                 .BYTE $72
04229  D9E8  17                 .BYTE $17
04230  D9E9  F8                 .BYTE $F8
04231  D9EA              ;********************************
04232  D9EA              ; LOG FUNCTION
04233  D9EA              ;********************************
04234  D9EA  20 2B DC    XXB9EA JSR XXBC2B
04235  D9ED  F0 02              BEQ XXB9F1
04236  D9EF  10 03              BPL XXB9F4
04237  D9F1  4C 48 D2    XXB9F1 JMP XXB248
04238  D9F4              ;********************************
04239  D9F4              ;
04240  D9F4              ;********************************
04241  D9F4  A5 61       XXB9F4 LDA $61
04242  D9F6  E9 7F              SBC #$7F
04243  D9F8  48                 PHA 
04244  D9F9  A9 80              LDA #$80
04245  D9FB  85 61              STA $61
04246  D9FD  A9 D6              LDA #<WWB9D6    ;#$D6   ; LOW  B9D6
04247  D9FF  A0 D9              LDY #>WWB9D6    ;#$B9   ; HIGH B9D6
04248  DA01  20 67 D8           JSR XXB867
04249  DA04  A9 DB              LDA #<WWB9DB    ;#$DB   ; LOW  B9DB
04250  DA06  A0 D9              LDY #>WWB9DB    ;#$B9   ; HIGH B9DB
04251  DA08  20 0F DB           JSR XXBB0F
04252  DA0B  A9 BC              LDA #<WWB9BC    ;#$BC   ; LOW  B9BC
04253  DA0D  A0 D9              LDY #>WWB9BC    ;#$B9   ; HIGH B9BC
04254  DA0F  20 50 D8           JSR XXB850
04255  DA12  A9 C1              LDA #<WWB9C1    ;#$C1   ; LOW  B9C1
04256  DA14  A0 D9              LDY #>WWB9C1    ;#$B9   ; HIGH B9C1
04257  DA16              ; DIFF
04258  DA16              ; C64 = $E043 VIC20 = $E040
04259  DA16  20 40 E0           JSR XXE043
04260  DA19  A9 E0              LDA #<WWB9E0    ;#$E0   ; LOW  B9E0
04261  DA1B  A0 D9              LDY #>WWB9E0    ;#$B9   ; HIGH B9E0
04262  DA1D  20 67 D8           JSR XXB867
04263  DA20  68                 PLA 
04264  DA21  20 7E DD           JSR XXBD7E
04265  DA24  A9 E5              LDA #<WWB9E5    ;#$E5   ; LOW  B9E5
04266  DA26  A0 D9              LDY #>WWB9E5    ;#$B9   ; HIGH B9E5
04267  DA28  20 8C DA    XXBA28 JSR XXBA8C
04268  DA2B              ;********************************
04269  DA2B              ; TIMES OPERATOR
04270  DA2B              ;********************************
04271  DA2B  D0 03       ZZBA2B BNE XXBA30
04272  DA2D  4C 8B DA           JMP XXBA8B
04273  DA30              ;********************************
04274  DA30              ;
04275  DA30              ;********************************
04276  DA30  20 B7 DA    XXBA30 JSR XXBAB7






CBASIC.ASM......PAGE 0082

LINE# LOC   CODE        LINE


04277  DA33  A9 00              LDA #$00
04278  DA35  85 26              STA RESHO
04279  DA37  85 27              STA RESHO+1
04280  DA39  85 28              STA RESHO+2
04281  DA3B  85 29              STA RESHO+3
04282  DA3D  A5 70              LDA $70
04283  DA3F  20 59 DA           JSR XXBA59
04284  DA42  A5 65              LDA $65
04285  DA44  20 59 DA           JSR XXBA59
04286  DA47  A5 64              LDA $64
04287  DA49  20 59 DA           JSR XXBA59
04288  DA4C  A5 63              LDA $63
04289  DA4E  20 59 DA           JSR XXBA59
04290  DA51  A5 62              LDA $62
04291  DA53  20 5E DA           JSR XXBA5E
04292  DA56  4C 8F DB           JMP XXBB8F
04293  DA59              ;********************************
04294  DA59              ;
04295  DA59              ;********************************
04296  DA59  D0 03       XXBA59 BNE XXBA5E
04297  DA5B  4C 83 D9           JMP XXB983
04298  DA5E              ;********************************
04299  DA5E              ;
04300  DA5E              ;********************************
04301  DA5E  4A          XXBA5E LSR A
04302  DA5F  09 80              ORA #$80
04303  DA61  A8          XXBA61 TAY 
04304  DA62  90 19              BCC XXBA7D
04305  DA64  18                 CLC 
04306  DA65  A5 29              LDA RESHO+3
04307  DA67  65 6D              ADC $6D
04308  DA69  85 29              STA RESHO+3
04309  DA6B  A5 28              LDA RESHO+2
04310  DA6D  65 6C              ADC $6C
04311  DA6F  85 28              STA RESHO+2
04312  DA71  A5 27              LDA RESHO+1
04313  DA73  65 6B              ADC $6B
04314  DA75  85 27              STA RESHO+1
04315  DA77  A5 26              LDA RESHO
04316  DA79  65 6A              ADC $6A
04317  DA7B  85 26              STA RESHO
04318  DA7D  66 26       XXBA7D ROR RESHO
04319  DA7F  66 27              ROR RESHO+1
04320  DA81  66 28              ROR RESHO+2
04321  DA83  66 29              ROR RESHO+3
04322  DA85  66 70              ROR $70
04323  DA87  98                 TYA 
04324  DA88  4A                 LSR A
04325  DA89  D0 D6              BNE XXBA61
04326  DA8B  60          XXBA8B RTS 
04327  DA8C              ;********************************
04328  DA8C              ; MOVE FLOAT INDEXED BY AY INTO SECOND FLOAT ACCU

04329  DA8C              ;********************************
04330  DA8C  85 22       XXBA8C STA INDEX
04331  DA8E  84 23              STY INDEX+1






CBASIC.ASM......PAGE 0083

LINE# LOC   CODE        LINE


04332  DA90  A0 04              LDY #$04
04333  DA92  B1 22              LDA (INDEX),Y
04334  DA94  85 6D              STA $6D
04335  DA96  88                 DEY 
04336  DA97  B1 22              LDA (INDEX),Y
04337  DA99  85 6C              STA $6C
04338  DA9B  88                 DEY 
04339  DA9C  B1 22              LDA (INDEX),Y
04340  DA9E  85 6B              STA $6B
04341  DAA0  88                 DEY 
04342  DAA1  B1 22              LDA (INDEX),Y
04343  DAA3  85 6E              STA $6E
04344  DAA5  45 66              EOR $66
04345  DAA7  85 6F              STA $6F
04346  DAA9  A5 6E              LDA $6E
04347  DAAB  09 80              ORA #$80
04348  DAAD  85 6A              STA $6A
04349  DAAF  88                 DEY 
04350  DAB0  B1 22              LDA (INDEX),Y
04351  DAB2  85 69              STA $69
04352  DAB4  A5 61              LDA $61
04353  DAB6  60                 RTS 
04354  DAB7              ;********************************
04355  DAB7              ; ADD EXPONENTS
04356  DAB7              ;********************************
04357  DAB7  A5 69       XXBAB7 LDA $69
04358  DAB9  F0 1F       KKBAB9 BEQ XXBADA
04359  DABB  18                 CLC 
04360  DABC  65 61              ADC $61
04361  DABE  90 04              BCC XXBAC4
04362  DAC0  30 1D              BMI XXBADF
04363  DAC2  18                 CLC 
04364  DAC3              ;********************************
04365  DAC3  2C                 .BYTE $2C
04366  DAC4              ;********************************
04367  DAC4  10 14       XXBAC4 BPL XXBADA
04368  DAC6  69 80              ADC #$80
04369  DAC8  85 61              STA $61
04370  DACA  D0 03       KKBACA BNE XXBACF
04371  DACC  4C FB D8           JMP XXB8FB
04372  DACF              ;********************************
04373  DACF              ;
04374  DACF              ;********************************
04375  DACF  A5 6F       XXBACF LDA $6F
04376  DAD1  85 66              STA $66
04377  DAD3  60                 RTS 
04378  DAD4              ;********************************
04379  DAD4              ;
04380  DAD4              ;********************************
04381  DAD4  A5 66       KKBAD4 LDA $66
04382  DAD6  49 FF              EOR #$FF
04383  DAD8  30 05              BMI XXBADF
04384  DADA  68          XXBADA PLA 
04385  DADB  68                 PLA 
04386  DADC  4C F7 D8           JMP XXB8F7






CBASIC.ASM......PAGE 0084

LINE# LOC   CODE        LINE


04387  DADF              ;********************************
04388  DADF              ;
04389  DADF              ;********************************
04390  DADF  4C 7E D9    XXBADF JMP XXB97E
04391  DAE2              ;********************************
04392  DAE2              ; MULTIPLY FLOAT ACCU BY 10
04393  DAE2              ;********************************
04394  DAE2  20 0C DC    XXBAE2 JSR XXBC0C
04395  DAE5  AA                 TAX 
04396  DAE6  F0 10              BEQ XXBAF8
04397  DAE8  18                 CLC 
04398  DAE9  69 02              ADC #$02
04399  DAEB  B0 F2              BCS XXBADF
04400  DAED  A2 00       XXBAED LDX #$00
04401  DAEF  86 6F              STX $6F
04402  DAF1  20 77 D8           JSR XXB877
04403  DAF4  E6 61              INC $61
04404  DAF6  F0 E7              BEQ XXBADF
04405  DAF8  60          XXBAF8 RTS 
04406  DAF9              ;********************************
04407  DAF9              ; CONSTANT 10 FOR DIVISION
04408  DAF9              ;********************************
04409  DAF9  84          WWBAF9 .BYTE $84
04410  DAFA  20                 .BYTE $20
04411  DAFB  00                 .BYTE $00
04412  DAFC  00                 .BYTE $00
04413  DAFD  00                 .BYTE $00
04414  DAFE              ;********************************
04415  DAFE              ; DIVIDE FLOAT BY 10
04416  DAFE              ;********************************
04417  DAFE  20 0C DC    XXBAFE JSR XXBC0C
04418  DB01  A9 F9              LDA #<WWBAF9    ;#$F9   ; LOW  BAF9
04419  DB03  A0 DA              LDY #>WWBAF9    ;#$BA   ; HIGH BAF
04420  DB05  A2 00              LDX #$00
04421  DB07  86 6F       KKBB07 STX $6F
04422  DB09  20 A2 DB           JSR XXBBA2
04423  DB0C  4C 12 DB           JMP XXBB12
04424  DB0F              ;********************************
04425  DB0F              ; DIVIDE NUMBER INDEXED BY AY BY FLOAT ACCU
04426  DB0F              ;********************************
04427  DB0F  20 8C DA    XXBB0F JSR XXBA8C
04428  DB12              ;********************************
04429  DB12              ; DIVIDE OPERATOR
04430  DB12              ;********************************
04431  DB12  F0 76       XXBB12 BEQ XXBB8A
04432  DB14  20 1B DC           JSR XXBC1B
04433  DB17  A9 00              LDA #$00
04434  DB19  38                 SEC 
04435  DB1A  E5 61              SBC $61
04436  DB1C  85 61              STA $61
04437  DB1E  20 B7 DA           JSR XXBAB7
04438  DB21  E6 61              INC $61
04439  DB23  F0 BA              BEQ XXBADF
04440  DB25  A2 FC              LDX #$FC
04441  DB27  A9 01              LDA #$01






CBASIC.ASM......PAGE 0085

LINE# LOC   CODE        LINE


04442  DB29  A4 6A       XXBB29 LDY $6A
04443  DB2B  C4 62              CPY $62
04444  DB2D  D0 10              BNE XXBB3F
04445  DB2F  A4 6B              LDY $6B
04446  DB31  C4 63              CPY $63
04447  DB33  D0 0A              BNE XXBB3F
04448  DB35  A4 6C              LDY $6C
04449  DB37  C4 64              CPY $64
04450  DB39  D0 04              BNE XXBB3F
04451  DB3B  A4 6D              LDY $6D
04452  DB3D  C4 65              CPY $65
04453  DB3F  08          XXBB3F PHP 
04454  DB40  2A                 ROL A
04455  DB41  90 09              BCC XXBB4C
04456  DB43  E8                 INX 
04457  DB44  95 29              STA RESHO+3,X
04458  DB46  F0 32              BEQ XXBB7A
04459  DB48  10 34              BPL XXBB7E
04460  DB4A  A9 01              LDA #$01
04461  DB4C  28          XXBB4C PLP 
04462  DB4D  B0 0E              BCS XXBB5D
04463  DB4F  06 6D       XXBB4F ASL $6D
04464  DB51  26 6C              ROL $6C
04465  DB53  26 6B              ROL $6B
04466  DB55  26 6A              ROL $6A
04467  DB57  B0 E6              BCS XXBB3F
04468  DB59  30 CE              BMI XXBB29
04469  DB5B  10 E2              BPL XXBB3F
04470  DB5D  A8          XXBB5D TAY 
04471  DB5E  A5 6D              LDA $6D
04472  DB60  E5 65              SBC $65
04473  DB62  85 6D              STA $6D
04474  DB64  A5 6C              LDA $6C
04475  DB66  E5 64              SBC $64
04476  DB68  85 6C              STA $6C
04477  DB6A  A5 6B              LDA $6B
04478  DB6C  E5 63              SBC $63
04479  DB6E  85 6B              STA $6B
04480  DB70  A5 6A              LDA $6A
04481  DB72  E5 62              SBC $62
04482  DB74  85 6A              STA $6A
04483  DB76  98                 TYA 
04484  DB77  4C 4F DB           JMP XXBB4F
04485  DB7A              ;********************************
04486  DB7A              ;
04487  DB7A              ;********************************
04488  DB7A  A9 40       XXBB7A LDA #$40        ;'@'
04489  DB7C  D0 CE              BNE XXBB4C
04490  DB7E  0A          XXBB7E ASL A
04491  DB7F  0A                 ASL A
04492  DB80  0A                 ASL A
04493  DB81  0A                 ASL A
04494  DB82  0A                 ASL A
04495  DB83  0A                 ASL A
04496  DB84  85 70              STA $70






CBASIC.ASM......PAGE 0086

LINE# LOC   CODE        LINE


04497  DB86  28                 PLP 
04498  DB87  4C 8F DB           JMP XXBB8F
04499  DB8A              ;********************************
04500  DB8A              ;
04501  DB8A              ;********************************
04502  DB8A  A2 14       XXBB8A LDX #$14        ; ERROR NUMBER
04503  DB8C  4C 37 C4           JMP XXA437
04504  DB8F              ;********************************
04505  DB8F              ;
04506  DB8F              ;********************************
04507  DB8F  A5 26       XXBB8F LDA RESHO
04508  DB91  85 62              STA $62
04509  DB93  A5 27              LDA RESHO+1
04510  DB95  85 63              STA $63
04511  DB97  A5 28              LDA RESHO+2
04512  DB99  85 64              STA $64
04513  DB9B  A5 29              LDA RESHO+3
04514  DB9D  85 65              STA $65
04515  DB9F  4C D7 D8           JMP XXB8D7
04516  DBA2              ;********************************
04517  DBA2              ;
04518  DBA2              ;********************************
04519  DBA2  85 22       XXBBA2 STA INDEX
04520  DBA4  84 23              STY INDEX+1
04521  DBA6  A0 04              LDY #$04
04522  DBA8  B1 22              LDA (INDEX),Y
04523  DBAA  85 65              STA $65
04524  DBAC  88                 DEY 
04525  DBAD  B1 22              LDA (INDEX),Y
04526  DBAF  85 64              STA $64
04527  DBB1  88                 DEY 
04528  DBB2  B1 22              LDA (INDEX),Y
04529  DBB4  85 63              STA $63
04530  DBB6  88                 DEY 
04531  DBB7  B1 22              LDA (INDEX),Y
04532  DBB9  85 66              STA $66
04533  DBBB  09 80              ORA #$80
04534  DBBD  85 62              STA $62
04535  DBBF  88                 DEY 
04536  DBC0  B1 22              LDA (INDEX),Y
04537  DBC2  85 61              STA $61
04538  DBC4  84 70              STY $70
04539  DBC6  60                 RTS 
04540  DBC7              ;********************************
04541  DBC7              ; STORE FLOAT ACCU AT $5C-$60
04542  DBC7              ;********************************
04543  DBC7  A2 5C       ZZBBC7 LDX #$5C        ; LOW  005C
04544  DBC9              ;********************************
04545  DBC9  2C                 .BYTE $2C
04546  DBCA              ;********************************
04547  DBCA              ; STORE FLOAT ACCU AT $57-$5B
04548  DBCA              ;********************************
04549  DBCA  A2 57       KKBBCA LDX #$57        ; LOW  0057
04550  DBCC  A0 00              LDY #$00        ; HIGH 0057
04551  DBCE  F0 04              BEQ XXBBD4






CBASIC.ASM......PAGE 0087

LINE# LOC   CODE        LINE


04552  DBD0              ;********************************
04553  DBD0              ; STORE FLOAT ACCU IN INDEX AT $49/$4A
04554  DBD0              ;********************************
04555  DBD0  A6 49       XXBBD0 LDX FORPNT
04556  DBD2  A4 4A              LDY FORPNT+1
04557  DBD4              ;********************************
04558  DBD4              ; STORE FLOAT ACCU IN INDEX XY
04559  DBD4              ;********************************
04560  DBD4  20 1B DC    XXBBD4 JSR XXBC1B
04561  DBD7  86 22              STX INDEX
04562  DBD9  84 23              STY INDEX+1
04563  DBDB  A0 04              LDY #$04
04564  DBDD  A5 65              LDA $65
04565  DBDF  91 22              STA (INDEX),Y
04566  DBE1  88                 DEY 
04567  DBE2  A5 64              LDA $64
04568  DBE4  91 22              STA (INDEX),Y
04569  DBE6  88                 DEY 
04570  DBE7  A5 63              LDA $63
04571  DBE9  91 22              STA (INDEX),Y
04572  DBEB  88                 DEY 
04573  DBEC  A5 66              LDA $66
04574  DBEE  09 7F              ORA #$7F
04575  DBF0  25 62              AND $62
04576  DBF2  91 22              STA (INDEX),Y
04577  DBF4  88                 DEY 
04578  DBF5  A5 61              LDA $61
04579  DBF7  91 22              STA (INDEX),Y
04580  DBF9  84 70              STY $70
04581  DBFB  60                 RTS 
04582  DBFC              ;********************************
04583  DBFC              ; MOVE SECOND FLOAT ACCU INTO FIRST
04584  DBFC              ;********************************
04585  DBFC  A5 6E       XXBBFC LDA $6E
04586  DBFE  85 66       XXBBFE STA $66
04587  DC00  A2 05              LDX #$05
04588  DC02  B5 68       XXBC02 LDA $68,X
04589  DC04  95 60              STA $60,X
04590  DC06  CA                 DEX 
04591  DC07  D0 F9              BNE XXBC02
04592  DC09  86 70              STX $70
04593  DC0B  60                 RTS 
04594  DC0C              ;********************************
04595  DC0C              ; MOVE ROUNDED FLOAT ACCU INTO SECOND
04596  DC0C              ;********************************
04597  DC0C  20 1B DC    XXBC0C JSR XXBC1B
04598  DC0F  A2 06       KKBC0F LDX #$06
04599  DC11  B5 60       XXBC11 LDA $60,X
04600  DC13  95 68              STA $68,X
04601  DC15  CA                 DEX 
04602  DC16  D0 F9              BNE XXBC11
04603  DC18  86 70              STX $70
04604  DC1A  60          XXBC1A RTS 
04605  DC1B              ;********************************
04606  DC1B              ; ROUND FLOAT ACCU ACCORDING TO GUARD BIT






CBASIC.ASM......PAGE 0088

LINE# LOC   CODE        LINE


04607  DC1B              ;********************************
04608  DC1B  A5 61       XXBC1B LDA $61
04609  DC1D  F0 FB              BEQ XXBC1A
04610  DC1F  06 70              ASL $70
04611  DC21  90 F7              BCC XXBC1A
04612  DC23  20 6F D9    XXBC23 JSR XXB96F
04613  DC26  D0 F2              BNE XXBC1A
04614  DC28  4C 38 D9           JMP XXB938
04615  DC2B              ;********************************
04616  DC2B              ; GET SIGN OF FLOAT ACCU IN 
04617  DC2B              ;********************************
04618  DC2B  A5 61       XXBC2B LDA $61
04619  DC2D  F0 09              BEQ XXBC38
04620  DC2F  A5 66       XXBC2F LDA $66
04621  DC31  2A          XXBC31 ROL A
04622  DC32  A9 FF              LDA #$FF
04623  DC34  B0 02              BCS XXBC38
04624  DC36  A9 01              LDA #$01
04625  DC38  60          XXBC38 RTS 
04626  DC39              ;********************************
04627  DC39              ; SGN FUNCTION
04628  DC39              ;********************************
04629  DC39  20 2B DC    XXBC39 JSR XXBC2B
04630  DC3C              ;********************************
04631  DC3C              ; MOVE SIGNED NUMBER FROM A INTO FLOAT ACCU
04632  DC3C              ;********************************
04633  DC3C  85 62       XXBC3C STA $62
04634  DC3E  A9 00              LDA #$00
04635  DC40  85 63              STA $63
04636  DC42  A2 88              LDX #$88
04637  DC44  A5 62       XXBC44 LDA $62
04638  DC46  49 FF              EOR #$FF
04639  DC48  2A                 ROL A
04640  DC49  A9 00       XXBC49 LDA #$00
04641  DC4B  85 65              STA $65
04642  DC4D  85 64              STA $64
04643  DC4F  86 61       XXBC4F STX $61
04644  DC51  85 70              STA $70
04645  DC53  85 66              STA $66
04646  DC55  4C D2 D8           JMP XXB8D2
04647  DC58              ;********************************
04648  DC58              ; ABS FUNCTION
04649  DC58              ;********************************
04650  DC58  46 66       XXBC58 LSR $66
04651  DC5A  60                 RTS 
04652  DC5B              ;********************************
04653  DC5B              ; COMPARE FLOAT ACCU TO FLOAT INDEXED BY XY
04654  DC5B              ;********************************
04655  DC5B  85 24       XXBC5B STA INDEX+2
04656  DC5D  84 25       XXBC5D STY INDEX+3
04657  DC5F  A0 00              LDY #$00
04658  DC61  B1 24              LDA (INDEX+2),Y
04659  DC63  C8                 INY 
04660  DC64  AA                 TAX 
04661  DC65  F0 C4              BEQ XXBC2B






CBASIC.ASM......PAGE 0089

LINE# LOC   CODE        LINE


04662  DC67  B1 24              LDA (INDEX+2),Y
04663  DC69  45 66              EOR $66
04664  DC6B  30 C2              BMI XXBC2F
04665  DC6D  E4 61              CPX $61
04666  DC6F  D0 21              BNE XXBC92
04667  DC71  B1 24              LDA (INDEX+2),Y
04668  DC73  09 80              ORA #$80
04669  DC75  C5 62              CMP $62
04670  DC77  D0 19              BNE XXBC92
04671  DC79  C8                 INY 
04672  DC7A  B1 24              LDA (INDEX+2),Y
04673  DC7C  C5 63              CMP $63
04674  DC7E  D0 12              BNE XXBC92
04675  DC80  C8                 INY 
04676  DC81  B1 24              LDA (INDEX+2),Y
04677  DC83  C5 64              CMP $64
04678  DC85  D0 0B              BNE XXBC92
04679  DC87  C8                 INY 
04680  DC88  A9 7F              LDA #$7F
04681  DC8A  C5 70              CMP $70
04682  DC8C  B1 24              LDA (INDEX+2),Y
04683  DC8E  E5 65              SBC $65
04684  DC90  F0 28              BEQ XXBCBA
04685  DC92  A5 66       XXBC92 LDA $66
04686  DC94  90 02              BCC XXBC98
04687  DC96  49 FF              EOR #$FF
04688  DC98  4C 31 DC    XXBC98 JMP XXBC31
04689  DC9B              ;********************************
04690  DC9B              ; CONVERT FLOAT TO A 4 BYTE SIGNED INTEGER
04691  DC9B              ;********************************
04692  DC9B  A5 61       XXBC9B LDA $61
04693  DC9D  F0 4A              BEQ XXBCE9
04694  DC9F  38                 SEC 
04695  DCA0  E9 A0              SBC #$A0
04696  DCA2  24 66              BIT $66
04697  DCA4  10 09              BPL XXBCAF
04698  DCA6  AA                 TAX 
04699  DCA7  A9 FF              LDA #$FF
04700  DCA9  85 68              STA $68
04701  DCAB  20 4D D9           JSR XXB94D
04702  DCAE  8A                 TXA 
04703  DCAF  A2 61       XXBCAF LDX #$61
04704  DCB1  C9 F9              CMP #$F9
04705  DCB3  10 06              BPL XXBCBB
04706  DCB5  20 99 D9           JSR XXB999
04707  DCB8  84 68              STY $68
04708  DCBA  60          XXBCBA RTS 
04709  DCBB              ;********************************
04710  DCBB              ;
04711  DCBB              ;********************************
04712  DCBB  A8          XXBCBB TAY 
04713  DCBC  A5 66              LDA $66
04714  DCBE  29 80              AND #$80
04715  DCC0  46 62              LSR $62
04716  DCC2  05 62              ORA $62






CBASIC.ASM......PAGE 0090

LINE# LOC   CODE        LINE


04717  DCC4  85 62              STA $62
04718  DCC6  20 B0 D9           JSR XXB9B0
04719  DCC9  84 68              STY $68
04720  DCCB  60                 RTS 
04721  DCCC              ;********************************
04722  DCCC              ; INT FUNCTION
04723  DCCC              ;********************************
04724  DCCC  A5 61       XXBCCC LDA $61
04725  DCCE  C9 A0              CMP #$A0
04726  DCD0  B0 20              BCS XXBCF2
04727  DCD2  20 9B DC           JSR XXBC9B
04728  DCD5  84 70              STY $70
04729  DCD7  A5 66              LDA $66
04730  DCD9  84 66              STY $66
04731  DCDB  49 80              EOR #$80
04732  DCDD  2A                 ROL A
04733  DCDE  A9 A0              LDA #$A0
04734  DCE0  85 61              STA $61
04735  DCE2  A5 65              LDA $65
04736  DCE4  85 07              STA CHARAC
04737  DCE6  4C D2 D8           JMP XXB8D2
04738  DCE9              ;********************************
04739  DCE9              ; CLEAR FLOAT ACCU
04740  DCE9              ;********************************
04741  DCE9  85 62       XXBCE9 STA $62
04742  DCEB  85 63              STA $63
04743  DCED  85 64              STA $64
04744  DCEF  85 65              STA $65
04745  DCF1  A8                 TAY 
04746  DCF2  60          XXBCF2 RTS 
04747  DCF3              ;********************************
04748  DCF3              ; CONVERT STRING TO FLOAT IN FLOAT ACCU
04749  DCF3              ;********************************
04750  DCF3  A0 00       XXBCF3 LDY #$00
04751  DCF5  A2 0A              LDX #$0A
04752  DCF7  94 5D       XXBCF7 STY $5D,X
04753  DCF9  CA                 DEX 
04754  DCFA  10 FB              BPL XXBCF7
04755  DCFC  90 0F              BCC XXBD0D
04756  DCFE  C9 2D              CMP #$2D        ;'-'
04757  DD00  D0 04              BNE XXBD06
04758  DD02  86 67              STX $67
04759  DD04  F0 04              BEQ XXBD0A
04760  DD06  C9 2B       XXBD06 CMP #$2B        ;'+'
04761  DD08  D0 05              BNE XXBD0F
04762  DD0A  20 73 00    XXBD0A JSR CHRGET
04763  DD0D  90 5B       XXBD0D BCC XXBD6A
04764  DD0F  C9 2E       XXBD0F CMP #$2E        ;'.'
04765  DD11  F0 2E              BEQ XXBD41
04766  DD13  C9 45              CMP #$45        ;'E'
04767  DD15  D0 30              BNE XXBD47
04768  DD17  20 73 00           JSR CHRGET
04769  DD1A  90 17              BCC XXBD33
04770  DD1C  C9 AB              CMP #$AB
04771  DD1E  F0 0E              BEQ XXBD2E






CBASIC.ASM......PAGE 0091

LINE# LOC   CODE        LINE


04772  DD20  C9 2D              CMP #$2D        ;'-'
04773  DD22  F0 0A              BEQ XXBD2E
04774  DD24  C9 AA              CMP #$AA
04775  DD26  F0 08              BEQ XXBD30
04776  DD28  C9 2B              CMP #$2B        ;'+'
04777  DD2A  F0 04              BEQ XXBD30
04778  DD2C  D0 07              BNE XXBD35
04779  DD2E  66 60       XXBD2E ROR $60
04780  DD30  20 73 00    XXBD30 JSR CHRGET
04781  DD33  90 5C       XXBD33 BCC XXBD91
04782  DD35  24 60       XXBD35 BIT $60
04783  DD37  10 0E              BPL XXBD47
04784  DD39  A9 00              LDA #$00
04785  DD3B  38                 SEC 
04786  DD3C  E5 5E              SBC $5E
04787  DD3E  4C 49 DD           JMP XXBD49
04788  DD41              ;********************************
04789  DD41              ;
04790  DD41              ;********************************
04791  DD41  66 5F       XXBD41 ROR $5F
04792  DD43  24 5F              BIT $5F
04793  DD45  50 C3              BVC XXBD0A
04794  DD47  A5 5E       XXBD47 LDA $5E
04795  DD49  38          XXBD49 SEC 
04796  DD4A  E5 5D              SBC $5D
04797  DD4C  85 5E              STA $5E
04798  DD4E  F0 12              BEQ XXBD62
04799  DD50  10 09              BPL XXBD5B
04800  DD52  20 FE DA    XXBD52 JSR XXBAFE
04801  DD55  E6 5E              INC $5E
04802  DD57  D0 F9              BNE XXBD52
04803  DD59  F0 07              BEQ XXBD62
04804  DD5B  20 E2 DA    XXBD5B JSR XXBAE2
04805  DD5E  C6 5E              DEC $5E
04806  DD60  D0 F9              BNE XXBD5B
04807  DD62  A5 67       XXBD62 LDA $67
04808  DD64  30 01              BMI XXBD67
04809  DD66  60                 RTS 
04810  DD67              ;********************************
04811  DD67              ;
04812  DD67              ;********************************
04813  DD67  4C B4 DF    XXBD67 JMP XXBFB4
04814  DD6A              ;********************************
04815  DD6A              ;
04816  DD6A              ;********************************
04817  DD6A  48          XXBD6A PHA 
04818  DD6B  24 5F              BIT $5F
04819  DD6D  10 02              BPL XXBD71
04820  DD6F  E6 5D              INC $5D
04821  DD71  20 E2 DA    XXBD71 JSR XXBAE2
04822  DD74  68                 PLA 
04823  DD75  38                 SEC 
04824  DD76  E9 30              SBC #$30        ;'0'
04825  DD78  20 7E DD           JSR XXBD7E
04826  DD7B  4C 0A DD           JMP XXBD0A






CBASIC.ASM......PAGE 0092

LINE# LOC   CODE        LINE


04827  DD7E              ;********************************
04828  DD7E              ; ADD SIGNED INTEGER FROM A TO FLOAT ACCU
04829  DD7E              ;********************************
04830  DD7E  48          XXBD7E PHA 
04831  DD7F  20 0C DC           JSR XXBC0C
04832  DD82  68                 PLA 
04833  DD83  20 3C DC           JSR XXBC3C
04834  DD86  A5 6E              LDA $6E
04835  DD88  45 66              EOR $66
04836  DD8A  85 6F              STA $6F
04837  DD8C  A6 61              LDX $61
04838  DD8E  4C 6A D8           JMP XXB86A
04839  DD91              ;********************************
04840  DD91              ; GET EXPONENT OF NUMBER FROM STRING
04841  DD91              ;********************************
04842  DD91  A5 5E       XXBD91 LDA $5E
04843  DD93  C9 0A              CMP #$0A
04844  DD95  90 09              BCC XXBDA0
04845  DD97  A9 64              LDA #$64
04846  DD99  24 60              BIT $60
04847  DD9B  30 11              BMI XXBDAE
04848  DD9D  4C 7E D9           JMP XXB97E
04849  DDA0              ;********************************
04850  DDA0              ;
04851  DDA0              ;********************************
04852  DDA0  0A          XXBDA0 ASL A
04853  DDA1  0A                 ASL A
04854  DDA2  18                 CLC 
04855  DDA3  65 5E              ADC $5E
04856  DDA5  0A                 ASL A
04857  DDA6  18                 CLC 
04858  DDA7  A0 00              LDY #$00
04859  DDA9  71 7A              ADC (TXTPTR),Y
04860  DDAB  38                 SEC 
04861  DDAC  E9 30              SBC #$30        ;'0'
04862  DDAE  85 5E       XXBDAE STA $5E
04863  DDB0  4C 30 DD           JMP XXBD30
04864  DDB3              ;********************************
04865  DDB3              ; CONSTANTS FOR FLOAT TO STRING CONVERSION
04866  DDB3              ;********************************
04867  DDB3  9B          ZZBDB3 .BYTE $9B,$3E,$BC,$1F,$FD
04867  DDB4  3E 
04867  DDB5  BC 
04867  DDB6  1F 
04867  DDB7  FD 
04868  DDB8  9E          WWBDB8 .BYTE $9E,$6E,$6B,$27,$FD
04868  DDB9  6E 
04868  DDBA  6B 
04868  DDBB  27 
04868  DDBC  FD 
04869  DDBD  9E          WWBDBD .BYTE $9E,$6E,$6B,$28,$00
04869  DDBE  6E 
04869  DDBF  6B 
04869  DDC0  28 
04869  DDC1  00 






CBASIC.ASM......PAGE 0093

LINE# LOC   CODE        LINE


04870  DDC2              ;********************************
04871  DDC2              ; PRINT IN FOLLOWED BY LINE NUMBER
04872  DDC2              ;********************************
04873  DDC2  A9 71       XXBDC2 LDA #<WWA371    ;#$71   ; LOW  A371
04874  DDC4  A0 C3              LDY #>WWA371    ;#$A3   ; HIGH A371
04875  DDC6  20 DA DD           JSR XXBDDA
04876  DDC9  A5 3A              LDA CURLIN+1
04877  DDCB  A6 39              LDX CURLIN
04878  DDCD              ;********************************
04879  DDCD              ; PRINT NUMBER FROM AX
04880  DDCD              ;********************************
04881  DDCD  85 62       XXBDCD STA $62
04882  DDCF  86 63              STX $63
04883  DDD1  A2 90              LDX #$90
04884  DDD3  38                 SEC 
04885  DDD4  20 49 DC           JSR XXBC49
04886  DDD7  20 DF DD           JSR XXBDDF
04887  DDDA  4C 1E CB    XXBDDA JMP XXAB1E
04888  DDDD              ;********************************
04889  DDDD              ; CONVERT NUMBER IN FLOAT ACCU TO STRING
04890  DDDD              ;********************************
04891  DDDD  A0 01       XXBDDD LDY #$01
04892  DDDF  A9 20       XXBDDF LDA #$20        ;' '
04893  DDE1  24 66              BIT $66
04894  DDE3  10 02              BPL XXBDE7
04895  DDE5  A9 2D              LDA #$2D        ;'-'
04896  DDE7  99 FF 00    XXBDE7 STA $00FF,Y
04897  DDEA  85 66              STA $66
04898  DDEC  84 71              STY $71
04899  DDEE  C8                 INY 
04900  DDEF  A9 30              LDA #$30        ;'0'
04901  DDF1  A6 61              LDX $61
04902  DDF3  D0 03              BNE XXBDF8
04903  DDF5  4C 04 DF           JMP XXBF04
04904  DDF8              ;********************************
04905  DDF8              ;
04906  DDF8              ;********************************
04907  DDF8  A9 00       XXBDF8 LDA #$00
04908  DDFA  E0 80              CPX #$80
04909  DDFC  F0 02              BEQ XXBE00
04910  DDFE  B0 09              BCS XXBE09
04911  DE00  A9 BD       XXBE00 LDA #<WWBDBD    ;#$BD   ; LOW  BDBD
04912  DE02  A0 DD              LDY #>WWBDBD    ;#$BD   ; HIGH BDBD
04913  DE04  20 28 DA           JSR XXBA28
04914  DE07  A9 F7              LDA #$F7
04915  DE09  85 5D       XXBE09 STA $5D
04916  DE0B  A9 B8       XXBE0B LDA #<WWBDB8    ;#$B8   ; LOW  BDB8
04917  DE0D  A0 DD              LDY #>WWBDB8    ;#$BD   ; HIGH BDB8
04918  DE0F  20 5B DC           JSR XXBC5B
04919  DE12  F0 1E              BEQ XXBE32
04920  DE14  10 12              BPL XXBE28
04921  DE16  A9 B3       XXBE16 LDA #<ZZBDB3    ;#$B3   ; LOW  BDB3
04922  DE18  A0 DD              LDY #>ZZBDB3    ;#$BD   ; HIGH BDB3
04923  DE1A  20 5B DC           JSR XXBC5B
04924  DE1D  F0 02              BEQ XXBE21






CBASIC.ASM......PAGE 0094

LINE# LOC   CODE        LINE


04925  DE1F  10 0E              BPL XXBE2F
04926  DE21  20 E2 DA    XXBE21 JSR XXBAE2
04927  DE24  C6 5D              DEC $5D
04928  DE26  D0 EE              BNE XXBE16
04929  DE28  20 FE DA    XXBE28 JSR XXBAFE
04930  DE2B  E6 5D              INC $5D
04931  DE2D  D0 DC              BNE XXBE0B
04932  DE2F  20 49 D8    XXBE2F JSR XXB849
04933  DE32  20 9B DC    XXBE32 JSR XXBC9B
04934  DE35  A2 01              LDX #$01
04935  DE37  A5 5D              LDA $5D
04936  DE39  18                 CLC 
04937  DE3A  69 0A              ADC #$0A
04938  DE3C  30 09              BMI XXBE47
04939  DE3E  C9 0B              CMP #$0B
04940  DE40  B0 06              BCS XXBE48
04941  DE42  69 FF              ADC #$FF
04942  DE44  AA                 TAX 
04943  DE45  A9 02              LDA #$02
04944  DE47  38          XXBE47 SEC 
04945  DE48  E9 02       XXBE48 SBC #$02
04946  DE4A  85 5E              STA $5E
04947  DE4C  86 5D              STX $5D
04948  DE4E  8A                 TXA 
04949  DE4F  F0 02              BEQ XXBE53
04950  DE51  10 13              BPL XXBE66
04951  DE53  A4 71       XXBE53 LDY $71
04952  DE55  A9 2E              LDA #$2E        ;'.'
04953  DE57  C8                 INY 
04954  DE58  99 FF 00           STA $00FF,Y
04955  DE5B  8A                 TXA 
04956  DE5C  F0 06              BEQ XXBE64
04957  DE5E  A9 30              LDA #$30        ;'0'
04958  DE60  C8                 INY 
04959  DE61  99 FF 00           STA $00FF,Y
04960  DE64  84 71       XXBE64 STY $71
04961  DE66  A0 00       XXBE66 LDY #$00
04962  DE68  A2 80       XXBE68 LDX #$80
04963  DE6A  A5 65       XXBE6A LDA $65
04964  DE6C  18                 CLC 
04965  DE6D  79 19 DF           ADC XXBF19,Y
04966  DE70  85 65              STA $65
04967  DE72  A5 64              LDA $64
04968  DE74  79 18 DF           ADC XXBF18,Y
04969  DE77  85 64              STA $64
04970  DE79  A5 63              LDA $63
04971  DE7B  79 17 DF           ADC XXBF17,Y
04972  DE7E  85 63              STA $63
04973  DE80  A5 62              LDA $62
04974  DE82  79 16 DF           ADC XXBF16,Y
04975  DE85  85 62              STA $62
04976  DE87  E8                 INX 
04977  DE88  B0 04              BCS XXBE8E
04978  DE8A  10 DE              BPL XXBE6A
04979  DE8C  30 02              BMI XXBE90






CBASIC.ASM......PAGE 0095

LINE# LOC   CODE        LINE


04980  DE8E  30 DA       XXBE8E BMI XXBE6A
04981  DE90  8A          XXBE90 TXA 
04982  DE91  90 04              BCC XXBE97
04983  DE93  49 FF              EOR #$FF
04984  DE95  69 0A              ADC #$0A
04985  DE97  69 2F       XXBE97 ADC #$2F        ;'/'
04986  DE99  C8                 INY 
04987  DE9A  C8                 INY 
04988  DE9B  C8                 INY 
04989  DE9C  C8                 INY 
04990  DE9D  84 47              STY VARPNT
04991  DE9F  A4 71              LDY $71
04992  DEA1  C8                 INY 
04993  DEA2  AA                 TAX 
04994  DEA3  29 7F              AND #$7F
04995  DEA5  99 FF 00           STA $00FF,Y
04996  DEA8  C6 5D              DEC $5D
04997  DEAA  D0 06              BNE XXBEB2
04998  DEAC  A9 2E              LDA #$2E        ;'.'
04999  DEAE  C8                 INY 
05000  DEAF  99 FF 00           STA $00FF,Y
05001  DEB2  84 71       XXBEB2 STY $71
05002  DEB4  A4 47              LDY VARPNT
05003  DEB6  8A                 TXA 
05004  DEB7  49 FF              EOR #$FF
05005  DEB9  29 80              AND #$80
05006  DEBB  AA                 TAX 
05007  DEBC  C0 24              CPY #$24        ;'$'
05008  DEBE  F0 04              BEQ XXBEC4
05009  DEC0  C0 3C              CPY #$3C        ;'<'
05010  DEC2  D0 A6              BNE XXBE6A
05011  DEC4  A4 71       XXBEC4 LDY $71
05012  DEC6  B9 FF 00    XXBEC6 LDA $00FF,Y
05013  DEC9  88                 DEY 
05014  DECA  C9 30              CMP #$30        ;'0'
05015  DECC  F0 F8              BEQ XXBEC6
05016  DECE  C9 2E              CMP #$2E        ;'.'
05017  DED0  F0 01              BEQ XXBED3
05018  DED2  C8                 INY 
05019  DED3  A9 2B       XXBED3 LDA #$2B        ;'+'
05020  DED5  A6 5E              LDX $5E
05021  DED7  F0 2E              BEQ XXBF07
05022  DED9  10 08              BPL XXBEE3
05023  DEDB  A9 00              LDA #$00
05024  DEDD  38                 SEC 
05025  DEDE  E5 5E              SBC $5E
05026  DEE0  AA                 TAX 
05027  DEE1  A9 2D              LDA #$2D        ;'-'
05028  DEE3  99 01 01    XXBEE3 STA STACK+1,Y
05029  DEE6  A9 45              LDA #$45        ;'E'
05030  DEE8  99 00 01           STA STACK,Y
05031  DEEB  8A                 TXA 
05032  DEEC  A2 2F              LDX #$2F        ;'/'
05033  DEEE  38                 SEC 
05034  DEEF  E8          XXBEEF INX 






CBASIC.ASM......PAGE 0096

LINE# LOC   CODE        LINE


05035  DEF0  E9 0A              SBC #$0A
05036  DEF2  B0 FB              BCS XXBEEF
05037  DEF4  69 3A              ADC #$3A        ;':'
05038  DEF6  99 03 01           STA STACK+3,Y
05039  DEF9  8A                 TXA 
05040  DEFA  99 02 01           STA STACK+2,Y
05041  DEFD  A9 00              LDA #$00
05042  DEFF  99 04 01           STA STACK+4,Y
05043  DF02  F0 08              BEQ XXBF0C
05044  DF04  99 FF 00    XXBF04 STA $00FF,Y
05045  DF07  A9 00       XXBF07 LDA #$00
05046  DF09  99 00 01           STA STACK,Y
05047  DF0C  A9 00       XXBF0C LDA #$00        ; LOW  0100
05048  DF0E  A0 01              LDY #$01        ; HIGH 0100
05049  DF10  60                 RTS 
05050  DF11              ;********************************
05051  DF11              ; 0.5
05052  DF11              ;********************************
05053  DF11  80          ZZBF11 .BYTE $80,$00
05053  DF12  00 
05054  DF13  00          ZZBF13 .BYTE $00,$00,$00
05054  DF14  00 
05054  DF15  00 
05055  DF16              ;********************************
05056  DF16              ; DIVISORS FOR DECIMAL CONVERSION
05057  DF16              ;********************************
05058  DF16  FA          XXBF16 .BYTE $FA
05059  DF17  0A          XXBF17 .BYTE $0A
05060  DF18  1F          XXBF18 .BYTE $1F
05061  DF19  00          XXBF19 .BYTE $00
05062  DF1A  00          ZZBF1A .BYTE $00,$98,$96,$80
05062  DF1B  98 
05062  DF1C  96 
05062  DF1D  80 
05063  DF1E  FF                 .BYTE $FF,$F0,$BD,$C0
05063  DF1F  F0 
05063  DF20  BD 
05063  DF21  C0 
05064  DF22  00                 .BYTE $00,$01,$86,$A0
05064  DF23  01 
05064  DF24  86 
05064  DF25  A0 
05065  DF26  FF                 .BYTE $FF,$FF,$D8,$F0
05065  DF27  FF 
05065  DF28  D8 
05065  DF29  F0 
05066  DF2A  00                 .BYTE $00,$00,$03,$E8
05066  DF2B  00 
05066  DF2C  03 
05066  DF2D  E8 
05067  DF2E  FF                 .BYTE $FF,$FF,$FF,$9C
05067  DF2F  FF 
05067  DF30  FF 
05067  DF31  9C 
05068  DF32  00                 .BYTE $00,$00,$00,$0A






CBASIC.ASM......PAGE 0097

LINE# LOC   CODE        LINE


05068  DF33  00 
05068  DF34  00 
05068  DF35  0A 
05069  DF36  FF                 .BYTE $FF,$FF,$FF,$FF
05069  DF37  FF 
05069  DF38  FF 
05069  DF39  FF 
05070  DF3A              ;********************************
05071  DF3A              ; DIVISORS FOR TIME CONVERSION
05072  DF3A              ;********************************
05073  DF3A  FF          ZZBF3A .BYTE $FF,$DF,$0A,$80
05073  DF3B  DF 
05073  DF3C  0A 
05073  DF3D  80 
05074  DF3E  00                 .BYTE $00,$03,$4B,$C0
05074  DF3F  03 
05074  DF40  4B 
05074  DF41  C0 
05075  DF42  FF                 .BYTE $FF,$FF,$73,$60
05075  DF43  FF 
05075  DF44  73 
05075  DF45  60 
05076  DF46  00                 .BYTE $00,$00,$0E,$10
05076  DF47  00 
05076  DF48  0E 
05076  DF49  10 
05077  DF4A  FF                 .BYTE $FF,$FF,$FD,$A8
05077  DF4B  FF 
05077  DF4C  FD 
05077  DF4D  A8 
05078  DF4E  00                 .BYTE $00,$00,$00,$3C
05078  DF4F  00 
05078  DF50  00 
05078  DF51  3C 
05079  DF52              ;********************************
05080  DF52              ; UNUSED
05081  DF52              ; IS THIS SOME VERSION ID?
05082  DF52              ;********************************
05083  DF52              ; DIFF
05084  DF52              ; C64 = $EC VIC20 = $BF
05085  DF52  EC          ZZBF52 .BYTE $EC
05086  DF53              ;********************************
05087  DF53              ; UNUSED
05088  DF53              ;********************************
05089  DF53  AA          ZZBF53 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
05089  DF54  AA 
05089  DF55  AA 
05089  DF56  AA 
05089  DF57  AA 
05089  DF58  AA 
05089  DF59  AA 
05089  DF5A  AA 
05090  DF5B  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
05090  DF5C  AA 
05090  DF5D  AA 






CBASIC.ASM......PAGE 0098

LINE# LOC   CODE        LINE


05090  DF5E  AA 
05090  DF5F  AA 
05090  DF60  AA 
05090  DF61  AA 
05090  DF62  AA 
05091  DF63  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
05091  DF64  AA 
05091  DF65  AA 
05091  DF66  AA 
05091  DF67  AA 
05091  DF68  AA 
05091  DF69  AA 
05091  DF6A  AA 
05092  DF6B  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA
05092  DF6C  AA 
05092  DF6D  AA 
05092  DF6E  AA 
05092  DF6F  AA 
05092  DF70  AA 
05093  DF71              ;********************************
05094  DF71              ; SQR FUNCTION
05095  DF71              ;********************************
05096  DF71  20 0C DC    XXBF71 JSR XXBC0C
05097  DF74  A9 11              LDA #<ZZBF11    ;#$11
05098  DF76  A0 DF              LDY #>ZZBF11    ;#$BF
05099  DF78  20 A2 DB           JSR XXBBA2
05100  DF7B              ;********************************
05101  DF7B              ; POWER OPERATOR
05102  DF7B              ;********************************
05103  DF7B  F0 70       ZZBF7B BEQ XXBFED
05104  DF7D  A5 69              LDA $69
05105  DF7F  D0 03              BNE XXBF84
05106  DF81  4C F9 D8           JMP XXB8F9
05107  DF84              ;********************************
05108  DF84              ;
05109  DF84              ;********************************
05110  DF84  A2 4E       XXBF84 LDX #$4E        ; LOW  004E
05111  DF86  A0 00              LDY #$00        ; HIGH 004E
05112  DF88  20 D4 DB           JSR XXBBD4
05113  DF8B  A5 6E              LDA $6E
05114  DF8D  10 0F              BPL XXBF9E
05115  DF8F  20 CC DC           JSR XXBCCC
05116  DF92  A9 4E              LDA #$4E        ; LOW  004E
05117  DF94  A0 00              LDY #$00        ; HIGH 004E
05118  DF96  20 5B DC           JSR XXBC5B
05119  DF99  D0 03              BNE XXBF9E
05120  DF9B  98                 TYA 
05121  DF9C  A4 07              LDY CHARAC
05122  DF9E  20 FE DB    XXBF9E JSR XXBBFE
05123  DFA1  98                 TYA 
05124  DFA2  48                 PHA 
05125  DFA3  20 EA D9           JSR XXB9EA
05126  DFA6  A9 4E              LDA #$4E        ; LOW  004E
05127  DFA8  A0 00              LDY #$00        ; HIGH 004E
05128  DFAA  20 28 DA           JSR XXBA28






CBASIC.ASM......PAGE 0099

LINE# LOC   CODE        LINE


05129  DFAD  20 ED DF           JSR XXBFED
05130  DFB0  68                 PLA 
05131  DFB1  4A                 LSR A
05132  DFB2  90 0A              BCC XXBFBE
05133  DFB4              ;********************************
05134  DFB4              ; MINUS OPERATOR
05135  DFB4              ;********************************
05136  DFB4  A5 61       XXBFB4 LDA $61
05137  DFB6  F0 06              BEQ XXBFBE
05138  DFB8  A5 66              LDA $66
05139  DFBA  49 FF              EOR #$FF
05140  DFBC  85 66              STA $66
05141  DFBE  60          XXBFBE RTS 
05142  DFBF              ;********************************
05143  DFBF              ; FLOATING POINT CONSTANDS FOR EXP
05144  DFBF              ;
05145  DFBF              ; 1/LOG(2)
05146  DFBF              ;********************************
05147  DFBF  81          ZZBFBF .BYTE $81,$38,$AA,$3B,$29
05147  DFC0  38 
05147  DFC1  AA 
05147  DFC2  3B 
05147  DFC3  29 
05148  DFC4              ;********************************
05149  DFC4              ; EXP POLYNOMIAL TABLE
05150  DFC4              ;********************************
05151  DFC4  07          ZZBFC4 .BYTE $07       ; DEGREE 8
05152  DFC5  71                 .BYTE $71,$34,$58,$3E,$56
05152  DFC6  34 
05152  DFC7  58 
05152  DFC8  3E 
05152  DFC9  56 
05153  DFCA  74                 .BYTE $74,$16,$7E,$B3,$1B
05153  DFCB  16 
05153  DFCC  7E 
05153  DFCD  B3 
05153  DFCE  1B 
05154  DFCF  77                 .BYTE $77,$2F,$EE,$E3,$85
05154  DFD0  2F 
05154  DFD1  EE 
05154  DFD2  E3 
05154  DFD3  85 
05155  DFD4  7A                 .BYTE $7A,$1D,$84,$1C,$2A
05155  DFD5  1D 
05155  DFD6  84 
05155  DFD7  1C 
05155  DFD8  2A 
05156  DFD9  7C                 .BYTE $7C,$63,$59,$58,$0A
05156  DFDA  63 
05156  DFDB  59 
05156  DFDC  58 
05156  DFDD  0A 
05157  DFDE  7E                 .BYTE $7E,$75,$FD,$E7,$C6
05157  DFDF  75 
05157  DFE0  FD 






CBASIC.ASM......PAGE 0100

LINE# LOC   CODE        LINE


05157  DFE1  E7 
05157  DFE2  C6 
05158  DFE3  80                 .BYTE $80,$31,$72,$18,$10
05158  DFE4  31 
05158  DFE5  72 
05158  DFE6  18 
05158  DFE7  10 
05159  DFE8  81                 .BYTE $81,$00,$00,$00,$00
05159  DFE9  00 
05159  DFEA  00 
05159  DFEB  00 
05159  DFEC  00 
05160  DFED              ;********************************
05161  DFED              ; EXP COMMAND
05162  DFED              ;********************************
05163  DFED  A9 BF       XXBFED LDA #<ZZBFBF    ;#$BF
05164  DFEF  A0 DF              LDY #>ZZBFBF    ;#$BF
05165  DFF1  20 28 DA           JSR XXBA28
05166  DFF4  A5 70              LDA $70
05167  DFF6  69 50              ADC #$50        ;'P'
05168  DFF8  90 03              BCC XXBFFD
05169  DFFA  20 23 DC           JSR XXBC23
05170  DFFD              ; DIFF
05171  DFFD              ; C64 = JMP KERNAL - $4C $00 $E0 VIC20 = STA $56 
JSR - $85 $56 $20
05172  DFFD              ;XXBFFD JMP KERNAL ;$E000
05173  DFFD              XXBFFD = *
05174  DFFD              ;********************************
05175  DFFD              .FIL   BASICV2EX.ASM
05176  DFFD              ;*=$E000
05177  DFFD              ;********************************
05178  DFFD              ; COMMODORE 64 KERNAL ($03) ROM 
05179  DFFD              ;
05180  DFFD              ; (C) 1982 COMMODORE BUSINESS MACHINES
05181  DFFD              ;
05182  DFFD              ; CONTINUATION OF EXP FUNCTION
05183  DFFD              ;********************************
05184  DFFD              
05185  DFFD              ;********************************
05186  DFFD              ; PAGE ZERO EQUATES
05187  DFFD              ;********************************
05188  DFFD              ;ADRAY1 = $03
05189  DFFD              ;ADRAY2 = $05
05190  DFFD              ;CHARAC = $07
05191  DFFD              ;ENDCHR = $08
05192  DFFD              ;VERCK  = $0A
05193  DFFD              ;TANSGN = $12
05194  DFFD              ;CHANNL = $13
05195  DFFD              ;LINNUM = $14
05196  DFFD              ;TEMPPT = $16
05197  DFFD              ;LASTPT = $17
05198  DFFD              
05199  DFFD              ;INDEX  = $22
05200  DFFD              ;TXTTAB = $2B
05201  DFFD              ;VARTAB = $2D
05202  DFFD              






CBASIC.ASM......PAGE 0101

LINE# LOC   CODE        LINE


05203  DFFD              ;FRETOP = $33
05204  DFFD              ;MEMSIZ = $37
05205  DFFD              
05206  DFFD              ;FORPNT = $49
05207  DFFD              ;DEFPNT = $4E
05208  DFFD              
05209  DFFD              ;FOUR6  = $53
05210  DFFD              ;JMPER  = $54
05211  DFFD              BASWRK = $57
05212  DFFD              B
05213  DFFD              FAC1   = $61
05214  DFFD              FACEXP = $61
05215  DFFD              FACHO  = $62
05216  DFFD              FACSGN = $66
05217  DFFD              SGNFLG = $67
05218  DFFD              BITS   = $68
05219  DFFD              FAC2   = $69
05220  DFFD              ARGEXP = $69
05221  DFFD              ARGHO  = $6A
05222  DFFD              ARGSGN = $6E
05223  DFFD              ARISGN = $6F
05224  DFFD              FACOV  = $70
05225  DFFD              FBUFPT = $71
05226  DFFD              ;CHRGET = $73
05227  DFFD              ;CHRGOT = $79
05228  DFFD              ;TXTPTR = $7A
05229  DFFD              ;********************************
05230  DFFD              ; PAGE THREE EQUATES
05231  DFFD              ;********************************
05232  DFFD              ;IERROR = $0300
05233  DFFD              ;IMAIN  = $0302
05234  DFFD              ;ICRNCH = $0304
05235  DFFD              ;IQPLOP = $0306
05236  DFFD              ;IGONE  = $0308
05237  DFFD              ;IEVAL  = $030A
05238  DFFD              ;
05239  DFFD              ;SAREG  = $030C
05240  DFFD              ;SXREG  = $030D
05241  DFFD              ;SYREG  = $030E
05242  DFFD              ;SPREG  = $030F
05243  DFFD              ;USRPOK = $0310
05244  DFFD              ;USRADD = $0311
05245  DFFD              ;********************************
05246  DFFD              ; BASIC ROM EQUATES
05247  DFFD              ;********************************
05248  DFFD              ;WWA376 = $A376 ;READY MESSAGE
05249  DFFD              ;XXA408 = $A408
05250  DFFD              ;XXA437 = $A437
05251  DFFD              ;KKA43A = $A43A
05252  DFFD              ;XXA474 = $A474
05253  DFFD              ;KKA483 = $A483
05254  DFFD              ;KKA52A = $A52A
05255  DFFD              ;XXA533 = $A533
05256  DFFD              ;KKA57C = $A57C
05257  DFFD              ;KKA644 = $A644






CBASIC.ASM......PAGE 0102

LINE# LOC   CODE        LINE


05258  DFFD              ;KKA663 = $A663
05259  DFFD              ;KKA677 = $A677
05260  DFFD              ;XXA67A = $A67A
05261  DFFD              ;XXA68E = $A68E
05262  DFFD              ;ZZA71A = $A71A
05263  DFFD              ;KKA7E4 = $A7E4
05264  DFFD              ;XXAB1E = $AB1E
05265  DFFD              ;XXAD8A = $AD8A
05266  DFFD              ;XXAD9E = $AD9E
05267  DFFD              ;KKAE86 = $AE86
05268  DFFD              ;XXAEFD = $AEFD
05269  DFFD              ;XXAF08 = $AF08
05270  DFFD              ;
05271  DFFD              ;ZZB1AA = $B1AA
05272  DFFD              ;XXB248 = $B248
05273  DFFD              ;XXB391 = $B391
05274  DFFD              ;
05275  DFFD              ;XXB6A3 = $B6A3
05276  DFFD              ;XXB79E = $B79E
05277  DFFD              ;XXB7F7 = $B7F7
05278  DFFD              ;XXB849 = $B849
05279  DFFD              ;XXB850 = $B850
05280  DFFD              ;KKB853 = $B853
05281  DFFD              ;XXB867 = $B867
05282  DFFD              ;XXB8D7 = $B8D7
05283  DFFD              ;WWB9BC = $B9BC
05284  DFFD              ;XXBA28 = $BA28
05285  DFFD              ;KKBAD4 = $BAD4
05286  DFFD              ;KKBAB9 = $BAB9
05287  DFFD              ;KKBB07 = $BB07
05288  DFFD              ;XXBB0F = $BB0F
05289  DFFD              ;XXBBA2 = $BBA2
05290  DFFD              ;ZZBBC7 = $BBC7
05291  DFFD              ;KKBBCA = $BBCA
05292  DFFD              ;XXBBD4 = $BBD4
05293  DFFD              ;XXBC0C = $BC0C
05294  DFFD              ;KKBC0F = $BC0F
05295  DFFD              ;XXBC2B = $BC2B
05296  DFFD              ;XXBCCC = $BCCC
05297  DFFD              ;XXBDCD = $BDCD
05298  DFFD              ;XXBFB4 = $BFB4
05299  DFFD              ;ZZBFC4 = $BFC4 ;EXP POLYNOMIAL TABLE
05300  DFFD              ;********************************
05301  DFFD              ; KERNAL ROM EQUATES
05302  DFFD              ;********************************
05303  DFFD              XXEA61 = $EA61
05304  DFFD              ;********************************
05305  DFFD              ; KERNAL ROM EQUATES
05306  DFFD              ;********************************
05307  DFFD              MEMTOP = $FF99
05308  DFFD              MEMBOT = $FF9C
05309  DFFD              SETLFS = $FFBA
05310  DFFD              SETNAM = $FFBD
05311  DFFD              OPEN   = $FFC0
05312  DFFD              CLOSE  = $FFC3






CBASIC.ASM......PAGE 0103

LINE# LOC   CODE        LINE


05313  DFFD              CHKIN  = $FFC6
05314  DFFD              CHKOUT = $FFC9
05315  DFFD              CLRCHN = $FFCC
05316  DFFD              CHRIN  = $FFCF
05317  DFFD              CHROUT = $FFD2
05318  DFFD              LOAD   = $FFD5
05319  DFFD              SAVE   = $FFD8
05320  DFFD              GETIN  = $FFE4
05321  DFFD              READST = $FFB7         ;READ I/O STATUS
05322  DFFD              IOBASE = $FFF3
05323  DFFD              ;********************************
05324  DFFD              ; CONTINUATION OF EXP FUNCTION
05325  DFFD              ;********************************
05326  DFFD  85 56       KKE000 STA JMPER+2
05327  DFFF  20 0F DC           JSR KKBC0F
05328  E002  A5 61              LDA FACEXP
05329  E004  C9 88              CMP #$88
05330  E006  90 03              BCC XXE00E
05331  E008  20 D4 DA    XXE00B JSR KKBAD4
05332  E00B  20 CC DC    XXE00E JSR XXBCCC
05333  E00E  A5 07              LDA CHARAC
05334  E010  18                 CLC 
05335  E011  69 81              ADC #$81
05336  E013  F0 F3              BEQ XXE00B
05337  E015  38                 SEC 
05338  E016  E9 01              SBC #$01
05339  E018  48                 PHA 
05340  E019  A2 05              LDX #$05
05341  E01B  B5 69       XXE01E LDA ARGEXP,X
05342  E01D  B4 61              LDY FACEXP,X
05343  E01F  95 61              STA FACEXP,X
05344  E021  94 69              STY ARGEXP,X
05345  E023  CA                 DEX 
05346  E024  10 F5              BPL XXE01E
05347  E026  A5 56              LDA JMPER+2
05348  E028  85 70              STA FACOV
05349  E02A  20 53 D8           JSR KKB853
05350  E02D  20 B4 DF           JSR XXBFB4
05351  E030              ;********************************
05352  E030              ; EXP POLYNOMIAL TABLE
05353  E030              ;********************************
05354  E030  A9 C4              LDA #<ZZBFC4    ;#$C4
05355  E032  A0 DF              LDY #>ZZBFC4    ;#$BF
05356  E034  20 56 E0           JSR XXE059
05357  E037  A9 00              LDA #$00
05358  E039  85 6F              STA ARISGN
05359  E03B  68                 PLA 
05360  E03C  20 B9 DA           JSR KKBAB9
05361  E03F  60                 RTS 
05362  E040              ;********************************
05363  E040              ; COMPUTE ODD DEGREES FOR SIN AND ATN
05364  E040              ;********************************
05365  E040  85 71       XXE043 STA FBUFPT
05366  E042  84 72              STY FBUFPT+1
05367  E044  20 CA DB           JSR KKBBCA






CBASIC.ASM......PAGE 0104

LINE# LOC   CODE        LINE


05368  E047  A9 57              LDA #$57        ;'W'
05369  E049  20 28 DA           JSR XXBA28
05370  E04C  20 5A E0           JSR XXE05D
05371  E04F  A9 57              LDA #$57        ;'W'
05372  E051  A0 00              LDY #$00
05373  E053  4C 28 DA           JMP XXBA28
05374  E056              ;********************************
05375  E056              ; COMPUTE POLYNOMIALS ACCORDING TO TABLE INDEXED 
BY AY
05376  E056              ;********************************
05377  E056  85 71       XXE059 STA FBUFPT
05378  E058  84 72              STY FBUFPT+1
05379  E05A  20 C7 DB    XXE05D JSR ZZBBC7
05380  E05D  B1 71              LDA (FBUFPT),Y
05381  E05F  85 67              STA SGNFLG
05382  E061  A4 71              LDY FBUFPT
05383  E063  C8                 INY 
05384  E064  98                 TYA 
05385  E065  D0 02              BNE XXE06C
05386  E067  E6 72              INC FBUFPT+1
05387  E069  85 71       XXE06C STA FBUFPT
05388  E06B  A4 72              LDY FBUFPT+1
05389  E06D  20 28 DA    XXE070 JSR XXBA28
05390  E070  A5 71              LDA FBUFPT
05391  E072  A4 72              LDY FBUFPT+1
05392  E074  18                 CLC 
05393  E075  69 05              ADC #$05
05394  E077  90 01              BCC XXE07D
05395  E079  C8                 INY 
05396  E07A  85 71       XXE07D STA FBUFPT
05397  E07C  84 72              STY FBUFPT+1
05398  E07E  20 67 D8           JSR XXB867
05399  E081  A9 5C              LDA #$5C        ;'\'
05400  E083  A0 00              LDY #$00
05401  E085  C6 67              DEC SGNFLG
05402  E087  D0 E4              BNE XXE070
05403  E089  60                 RTS 
05404  E08A              ;********************************
05405  E08A              ; FLOAT NUMBERS FOR RND
05406  E08A              ;********************************
05407  E08A  98          ZZE08D .BYTE $98,$35,$44,$7A,$00
05407  E08B  35 
05407  E08C  44 
05407  E08D  7A 
05407  E08E  00 
05408  E08F  68          ZZE092 .BYTE $68,$28,$B1,$46,$00
05408  E090  28 
05408  E091  B1 
05408  E092  46 
05408  E093  00 
05409  E094              ;********************************
05410  E094              ; RND FUNCTION
05411  E094              ;********************************
05412  E094  20 2B DC    ZZE097 JSR XXBC2B
05413  E097  30 37              BMI XXE0D3
05414  E099  D0 20              BNE XXE0BE






CBASIC.ASM......PAGE 0105

LINE# LOC   CODE        LINE


05415  E09B  20 F3 FF           JSR IOBASE
05416  E09E  86 22              STX INDEX
05417  E0A0  84 23              STY INDEX+1
05418  E0A2  A0 04              LDY #$04
05419  E0A4  B1 22              LDA (INDEX),Y
05420  E0A6  85 62              STA FACHO
05421  E0A8  C8                 INY 
05422  E0A9  B1 22              LDA (INDEX),Y
05423  E0AB  85 64              STA FACHO+2
05424  E0AD  A0 08              LDY #$08
05425  E0AF  B1 22              LDA (INDEX),Y
05426  E0B1  85 63              STA FACHO+1
05427  E0B3  C8                 INY 
05428  E0B4  B1 22              LDA (INDEX),Y
05429  E0B6  85 65              STA FACHO+3
05430  E0B8  4C E0 E0           JMP XXE0E3
05431  E0BB              ;********************************
05432  E0BB              ;
05433  E0BB              ;********************************
05434  E0BB  A9 8B       XXE0BE LDA #$8B
05435  E0BD  A0 00              LDY #$00
05436  E0BF  20 A2 DB           JSR XXBBA2
05437  E0C2              ;********************************
05438  E0C2              ; FLOAT NUMBERS FOR RND
05439  E0C2              ;********************************
05440  E0C2  A9 8A              LDA #<ZZE08D    ;#$8D
05441  E0C4  A0 E0              LDY #>ZZE08D    ;#$E0
05442  E0C6  20 28 DA           JSR XXBA28
05443  E0C9              ;********************************
05444  E0C9              ; FLOAT NUMBERS FOR RND
05445  E0C9              ;********************************
05446  E0C9  A9 8F              LDA #<ZZE092    ;#$92
05447  E0CB  A0 E0              LDY #>ZZE092    ;#$E0
05448  E0CD  20 67 D8           JSR XXB867
05449  E0D0              ;********************************
05450  E0D0              ; 
05451  E0D0              ;********************************
05452  E0D0  A6 65       XXE0D3 LDX FACHO+3
05453  E0D2  A5 62              LDA FACHO
05454  E0D4  85 65              STA FACHO+3
05455  E0D6  86 62              STX FACHO
05456  E0D8  A6 63              LDX FACHO+1
05457  E0DA  A5 64              LDA FACHO+2
05458  E0DC  85 63              STA FACHO+1
05459  E0DE  86 64              STX FACHO+2
05460  E0E0  A9 00       XXE0E3 LDA #$00
05461  E0E2  85 66              STA FACSGN
05462  E0E4  A5 61              LDA FACEXP
05463  E0E6  85 70              STA FACOV
05464  E0E8  A9 80              LDA #$80
05465  E0EA  85 61              STA FACEXP
05466  E0EC  20 D7 D8           JSR XXB8D7
05467  E0EF  A2 8B              LDX #$8B
05468  E0F1  A0 00              LDY #$00
05469  E0F3  4C D4 DB    XXE0F6 JMP XXBBD4






CBASIC.ASM......PAGE 0106

LINE# LOC   CODE        LINE


05470  E0F6              ;********************************
05471  E0F6              ; HANDLE ERRORS FOR DIRECT I/O
05472  E0F6              ; CALLS FROM BASIC
05473  E0F6              ;********************************
05474  E0F6  C9 F0       XXE0F9 CMP #$F0
05475  E0F8  D0 07              BNE XXE104
05476  E0FA  84 38              STY MEMSIZ+1
05477  E0FC  86 37              STX MEMSIZ
05478  E0FE  4C 63 C6           JMP KKA663
05479  E101              ;********************************
05480  E101              ;
05481  E101              ;********************************
05482  E101  AA          XXE104 TAX 
05483  E102  D0 02              BNE XXE109
05484  E104  A2 1E              LDX #$1E
05485  E106  4C 37 C4    XXE109 JMP XXA437
05486  E109              ;********************************
05487  E109              ;
05488  E109              ;********************************
05489  E109  20 D2 FF    KKE10C JSR CHROUT
05490  E10C  B0 E8              BCS XXE0F9
05491  E10E  60                 RTS 
05492  E10F              ;********************************
05493  E10F              ;
05494  E10F              ;********************************
05495  E10F  20 CF FF    KKE112 JSR CHRIN
05496  E112  B0 E2              BCS XXE0F9
05497  E114  60                 RTS 
05498  E115              ;********************************
05499  E115              ;
05500  E115              ;********************************
05501  E115              ; DIFF
05502  E115              ; C64 = $E4AD VIC20 = $FFC9
05503  E115  20 AA E4    KKE118 JSR XXE4AD
05504  E118  B0 DC              BCS XXE0F9
05505  E11A  60                 RTS 
05506  E11B              ;********************************
05507  E11B              ;
05508  E11B              ;********************************
05509  E11B  20 C6 FF    KKE11E JSR CHKIN
05510  E11E  B0 D6              BCS XXE0F9
05511  E120  60                 RTS 
05512  E121              ;********************************
05513  E121              ;
05514  E121              ;********************************
05515  E121  20 E4 FF    KKE124 JSR GETIN
05516  E124  B0 D0              BCS XXE0F9
05517  E126  60                 RTS 
05518  E127              ;********************************
05519  E127              ; SYS COMMAND
05520  E127              ;********************************
05521  E127  20 8A CD    ZZE12A JSR XXAD8A
05522  E12A  20 F7 D7           JSR XXB7F7
05523  E12D  A9 E1              LDA #>KKE147    ;#$E1
05524  E12F  48                 PHA 






CBASIC.ASM......PAGE 0107

LINE# LOC   CODE        LINE


05525  E130  A9 43              LDA #<KKE147-1  ;#$46      ;'F'
05526  E132  48                 PHA 
05527  E133  AD 0F 03           LDA SPREG
05528  E136  48                 PHA 
05529  E137  AD 0C 03           LDA SAREG
05530  E13A  AE 0D 03           LDX SXREG
05531  E13D  AC 0E 03           LDY SYREG
05532  E140  28                 PLP 
05533  E141  6C 14 00           JMP (LINNUM)
05534  E144              ;********************************
05535  E144              ;
05536  E144              ;********************************
05537  E144  08          KKE147 PHP 
05538  E145  8D 0C 03           STA SAREG
05539  E148  8E 0D 03           STX SXREG
05540  E14B  8C 0E 03           STY SYREG
05541  E14E  68                 PLA 
05542  E14F  8D 0F 03           STA SPREG
05543  E152  60                 RTS 
05544  E153              ;********************************
05545  E153              ; SAVE COMMAND
05546  E153              ;********************************
05547  E153  20 D1 E1    ZZE156 JSR XXE1D4
05548  E156  A6 2D              LDX VARTAB
05549  E158  A4 2E              LDY VARTAB+1
05550  E15A  A9 2B              LDA #TXTTAB      ;'+'
05551  E15C  20 D8 FF           JSR SAVE
05552  E15F  B0 95              BCS XXE0F9
05553  E161  60                 RTS 
05554  E162              ;********************************
05555  E162              ; VERIFY COMMAND
05556  E162              ;********************************
05557  E162  A9 01       ZZE165 LDA #$01
05558  E164              ;********************************
05559  E164  2C                 .BYTE $2C
05560  E165              ;********************************
05561  E165              ; LOAD COMMAND
05562  E165              ;********************************
05563  E165  A9 00       ZZE168 LDA #$00
05564  E167  85 0A              STA VERCK
05565  E169  20 D1 E1           JSR XXE1D4
05566  E16C  A5 0A              LDA VERCK
05567  E16E  A6 2B              LDX TXTTAB
05568  E170  A4 2C              LDY TXTTAB+1
05569  E172  20 D5 FF           JSR LOAD
05570  E175  B0 57              BCS XXE1D1
05571  E177  A5 0A              LDA VERCK
05572  E179              ; DIFF
05573  E179              ; C64 = BEQ $17 VIC20 = BEQ $1A
05574  E179  F0 17              BEQ XXE195
05575  E17B  A2 1C              LDX #$1C
05576  E17D  20 B7 FF           JSR READST
05577  E180  29 10              AND #$10
05578  E182              ; C64 = BNE XXE19E VIC20 = BEQ XXE187
05579  E182              ; C64 = BNE $17 VIC20 = BEQ $03






CBASIC.ASM......PAGE 0108

LINE# LOC   CODE        LINE


05580  E182  D0 17              BNE XXE19E
05581  E184  A5 7A              LDA TXTPTR
05582  E186  C9 02              CMP #$02
05583  E188  F0 07              BEQ XXE194
05584  E18A  A9 64              LDA #<WWA364    ;#$64
05585  E18C  A0 C3              LDY #>WWA364    ;#$A3
05586  E18E  4C 1E CB           JMP XXAB1E
05587  E191              ;********************************
05588  E191              ;
05589  E191              ;********************************
05590  E191  60          XXE194 RTS 
05591  E192              ;********************************
05592  E192              ;
05593  E192              ;********************************
05594  E192  20 B7 FF    XXE195 JSR READST
05595  E195  29 BF              AND #$BF
05596  E197  F0 05              BEQ XXE1A1
05597  E199  A2 1D              LDX #$1D
05598  E19B  4C 37 C4    XXE19E JMP XXA437
05599  E19E              ;********************************
05600  E19E              ;
05601  E19E              ;********************************
05602  E19E  A5 7B       XXE1A1 LDA TXTPTR+1
05603  E1A0  C9 02              CMP #$02
05604  E1A2  D0 0E              BNE XXE1B5
05605  E1A4  86 2D              STX VARTAB
05606  E1A6  84 2E              STY VARTAB+1
05607  E1A8  A9 76              LDA #<WWA376    ;#$76
05608  E1AA  A0 C3              LDY #>WWA376    ;#$A3
05609  E1AC  20 1E CB           JSR XXAB1E
05610  E1AF  4C 2A C5           JMP KKA52A
05611  E1B2              ;********************************
05612  E1B2              ;
05613  E1B2              ;********************************
05614  E1B2  20 8E C6    XXE1B5 JSR XXA68E
05615  E1B5              ; DIFF
05616  E1B5              ; C64 JSR $A533 VIC20 = NOTHING
05617  E1B5  20 33 C5           JSR XXA533
05618  E1B8              ; DIFF
05619  E1B8              ; C64 = JMP $A677 VIC20 = JMP $E476
05620  E1B8  4C 77 C6           JMP KKA677
05621  E1BB              ;********************************
05622  E1BB              ; OPEN COMMAND
05623  E1BB              ;********************************
05624  E1BB  20 16 E2    ZZE1BE JSR XXE219
05625  E1BE  20 C0 FF           JSR OPEN
05626  E1C1  B0 0B              BCS XXE1D1
05627  E1C3  60                 RTS 
05628  E1C4              ;********************************
05629  E1C4              ; CLOSE COMMAND
05630  E1C4              ;********************************
05631  E1C4  20 16 E2    ZZE1C7 JSR XXE219
05632  E1C7  A5 49              LDA FORPNT
05633  E1C9  20 C3 FF           JSR CLOSE
05634  E1CC              ; DIFF






CBASIC.ASM......PAGE 0109

LINE# LOC   CODE        LINE


05635  E1CC              ; C64 = BCC XXE194 VIC20 = BCC XXE194
05636  E1CC              ; C64 = BCC $C3    VIC20 = BCC $C6
05637  E1CC  90 C3              BCC XXE194
05638  E1CE  4C F6 E0    XXE1D1 JMP XXE0F9
05639  E1D1              ;********************************
05640  E1D1              ; SET PARAMETERS FOR LOAD/VERIFY/SAVE
05641  E1D1              ;********************************
05642  E1D1  A9 00       XXE1D4 LDA #$00
05643  E1D3  20 BD FF           JSR SETNAM
05644  E1D6  A2 01              LDX #$01
05645  E1D8  A0 00              LDY #$00
05646  E1DA  20 BA FF           JSR SETLFS
05647  E1DD  20 03 E2           JSR XXE206
05648  E1E0  20 54 E2           JSR XXE257
05649  E1E3  20 03 E2           JSR XXE206
05650  E1E6  20 FD E1           JSR XXE200
05651  E1E9  A0 00              LDY #$00
05652  E1EB  86 49              STX FORPNT
05653  E1ED  20 BA FF           JSR SETLFS
05654  E1F0  20 03 E2           JSR XXE206
05655  E1F3  20 FD E1           JSR XXE200
05656  E1F6  8A                 TXA 
05657  E1F7  A8                 TAY 
05658  E1F8  A6 49              LDX FORPNT
05659  E1FA  4C BA FF           JMP SETLFS
05660  E1FD              ;********************************
05661  E1FD              ; SKIP COMMA AND GET INTEGER IN X
05662  E1FD              ;********************************
05663  E1FD  20 0B E2    XXE200 JSR XXE20E
05664  E200  4C 9E D7           JMP XXB79E
05665  E203              ;********************************
05666  E203              ; GET CHARACTER AND CHECK FOR END OF LINE
05667  E203              ;********************************
05668  E203  20 79 00    XXE206 JSR CHRGOT
05669  E206  D0 02              BNE XXE20D
05670  E208  68                 PLA 
05671  E209  68                 PLA 
05672  E20A  60          XXE20D RTS 
05673  E20B              ;********************************
05674  E20B              ; CHECK FOR COMMA AND SKIP IT
05675  E20B              ;********************************
05676  E20B  20 FD CE    XXE20E JSR XXAEFD
05677  E20E  20 79 00    XXE211 JSR CHRGOT
05678  E211  D0 F7              BNE XXE20D
05679  E213  4C 08 CF           JMP XXAF08
05680  E216              ;********************************
05681  E216              ; GET OPEN/CLOSE PARAMETERS
05682  E216              ;********************************
05683  E216  A9 00       XXE219 LDA #$00
05684  E218  20 BD FF           JSR SETNAM
05685  E21B  20 0E E2           JSR XXE211
05686  E21E  20 9E D7           JSR XXB79E
05687  E221  86 49              STX FORPNT
05688  E223  8A                 TXA 
05689  E224  A2 01              LDX #$01






CBASIC.ASM......PAGE 0110

LINE# LOC   CODE        LINE


05690  E226  A0 00              LDY #$00
05691  E228  20 BA FF           JSR SETLFS
05692  E22B  20 03 E2           JSR XXE206
05693  E22E  20 FD E1           JSR XXE200
05694  E231  86 4A              STX FORPNT+1
05695  E233  A0 00              LDY #$00
05696  E235  A5 49              LDA FORPNT
05697  E237  E0 03              CPX #$03
05698  E239  90 01              BCC XXE23F
05699  E23B  88                 DEY 
05700  E23C  20 BA FF    XXE23F JSR SETLFS
05701  E23F  20 03 E2           JSR XXE206
05702  E242  20 FD E1           JSR XXE200
05703  E245  8A                 TXA 
05704  E246  A8                 TAY 
05705  E247  A6 4A              LDX FORPNT+1
05706  E249  A5 49              LDA FORPNT
05707  E24B  20 BA FF           JSR SETLFS
05708  E24E  20 03 E2           JSR XXE206
05709  E251  20 0B E2           JSR XXE20E
05710  E254  20 9E CD    XXE257 JSR XXAD9E
05711  E257  20 A3 D6           JSR XXB6A3
05712  E25A  A6 22              LDX INDEX
05713  E25C  A4 23              LDY INDEX+1
05714  E25E  4C BD FF           JMP SETNAM
05715  E261              ;********************************
05716  E261              ; COS FUNCTION
05717  E261              ;********************************
05718  E261  A9 DD       KKE264 LDA #<ZZE2E0      ; LOW  E2E0
05719  E263  A0 E2              LDY #>ZZE2E0      ; HIGH E2E0
05720  E265  20 67 D8           JSR XXB867
05721  E268              ;********************************
05722  E268              ; SIN FUNCTION
05723  E268              ;********************************
05724  E268  20 0C DC    XXE26B JSR XXBC0C
05725  E26B  A9 E2              LDA #<ZZE2E5      ; LOW  E2E5
05726  E26D  A0 E2              LDY #>ZZE2E5      ; HIGH E2E5
05727  E26F  A6 6E              LDX ARGSGN
05728  E271  20 07 DB           JSR KKBB07
05729  E274  20 0C DC           JSR XXBC0C
05730  E277  20 CC DC           JSR XXBCCC
05731  E27A  A9 00              LDA #$00
05732  E27C  85 6F              STA ARISGN
05733  E27E  20 53 D8           JSR KKB853
05734  E281  A9 E7              LDA #<ZZE2EA      ; LOW  E2EA
05735  E283  A0 E2              LDY #>ZZE2EA      ; HIGH E2EA
05736  E285  20 50 D8           JSR XXB850
05737  E288  A5 66              LDA FACSGN
05738  E28A  48                 PHA 
05739  E28B  10 0D              BPL XXE29D
05740  E28D  20 49 D8           JSR XXB849
05741  E290  A5 66              LDA FACSGN
05742  E292  30 09              BMI XXE2A0
05743  E294  A5 12              LDA TANSGN
05744  E296  49 FF              EOR #$FF






CBASIC.ASM......PAGE 0111

LINE# LOC   CODE        LINE


05745  E298  85 12              STA TANSGN
05746  E29A  20 B4 DF    XXE29D JSR XXBFB4
05747  E29D  A9 E7       XXE2A0 LDA #<ZZE2EA      ; LOW  E2EA
05748  E29F  A0 E2              LDY #>ZZE2EA      ; HIGH E2EA
05749  E2A1  20 67 D8           JSR XXB867
05750  E2A4  68                 PLA 
05751  E2A5  10 03              BPL XXE2AD
05752  E2A7  20 B4 DF           JSR XXBFB4
05753  E2AA  A9 EC       XXE2AD LDA #<ZZE2EF    ;#$EF
05754  E2AC  A0 E2              LDY #>ZZE2EF    ;#$E2
05755  E2AE  4C 40 E0           JMP XXE043
05756  E2B1              ;********************************
05757  E2B1              ; TAN FUNCTION
05758  E2B1              ;********************************
05759  E2B1  20 CA DB    ZZE2B4 JSR KKBBCA
05760  E2B4  A9 00              LDA #$00
05761  E2B6  85 12              STA TANSGN
05762  E2B8  20 68 E2           JSR XXE26B
05763  E2BB  A2 4E              LDX #<DEFPNT    ;#$4E      ; LOW  004E
05764  E2BD  A0 00              LDY #>DEFPNT    ;#$00      ; HIGH 004E
05765  E2BF  20 F3 E0           JSR XXE0F6
05766  E2C2  A9 57              LDA #<BASWRK    ;#$57      ; LOW  0057
05767  E2C4  A0 00              LDY #>BASWRK    ;#$00      ; HIGH 0057
05768  E2C6  20 A2 DB           JSR XXBBA2
05769  E2C9  A9 00              LDA #$00
05770  E2CB  85 66              STA FACSGN
05771  E2CD  A5 12              LDA TANSGN
05772  E2CF  20 D9 E2           JSR XXE2DC
05773  E2D2  A9 4E              LDA #<DEFPNT    ;#$4E      ; LOW  004E
05774  E2D4  A0 00              LDY #>DEFPNT    ;#$00      ; HIGH 004E
05775  E2D6  4C 0F DB           JMP XXBB0F
05776  E2D9              ;********************************
05777  E2D9              ;
05778  E2D9              ;********************************
05779  E2D9  48          XXE2DC PHA 
05780  E2DA  4C 9A E2           JMP XXE29D
05781  E2DD              ;********************************
05782  E2DD              ; FLOAT NUMBERS FOR SIN, COS AND TAN
05783  E2DD              ;********************************
05784  E2DD              ; 0.5 * PI
05785  E2DD  81          ZZE2E0 .BYTE $81,$49,$0F,$DA,$A2
05785  E2DE  49 
05785  E2DF  0F 
05785  E2E0  DA 
05785  E2E1  A2 
05786  E2E2              ; 2 * PI
05787  E2E2  83          ZZE2E5 .BYTE $83,$49,$0F,$DA,$A2
05787  E2E3  49 
05787  E2E4  0F 
05787  E2E5  DA 
05787  E2E6  A2 
05788  E2E7              ; 0.25 * PI
05789  E2E7  7F          ZZE2EA .BYTE $7F,$00,$00,$00,$00
05789  E2E8  00 
05789  E2E9  00 






CBASIC.ASM......PAGE 0112

LINE# LOC   CODE        LINE


05789  E2EA  00 
05789  E2EB  00 
05790  E2EC              ;********************************
05791  E2EC              ; POLYNOMIAL TABLE
05792  E2EC              ;********************************
05793  E2EC  05          ZZE2EF .BYTE $05       ; DEGREE 6
05794  E2ED  84                 .BYTE $84,$E6,$1A,$2D,$1B
05794  E2EE  E6 
05794  E2EF  1A 
05794  E2F0  2D 
05794  E2F1  1B 
05795  E2F2  86                 .BYTE $86,$28,$07,$FB,$F8
05795  E2F3  28 
05795  E2F4  07 
05795  E2F5  FB 
05795  E2F6  F8 
05796  E2F7  87                 .BYTE $87,$99,$68,$89,$01
05796  E2F8  99 
05796  E2F9  68 
05796  E2FA  89 
05796  E2FB  01 
05797  E2FC  87                 .BYTE $87,$23,$35,$DF,$E1
05797  E2FD  23 
05797  E2FE  35 
05797  E2FF  DF 
05797  E300  E1 
05798  E301  86                 .BYTE $86,$A5,$5D,$E7,$28
05798  E302  A5 
05798  E303  5D 
05798  E304  E7 
05798  E305  28 
05799  E306  83                 .BYTE $83,$49,$0F,$DA,$A2
05799  E307  49 
05799  E308  0F 
05799  E309  DA 
05799  E30A  A2 
05800  E30B              ;********************************
05801  E30B              ; ATN FUNCTION
05802  E30B              ;********************************
05803  E30B  A5 66       KKE30E LDA FACSGN
05804  E30D  48                 PHA 
05805  E30E  10 03              BPL XXE316
05806  E310  20 B4 DF           JSR XXBFB4
05807  E313  A5 61       XXE316 LDA FACEXP
05808  E315  48                 PHA 
05809  E316  C9 81              CMP #$81
05810  E318  90 07              BCC XXE324
05811  E31A  A9 BC              LDA #<WWB9BC    ;#$BC      ; LOW  B9BC
05812  E31C  A0 D9              LDY #>WWB9BC    ;#$B9      ; HIGH B9BC
05813  E31E  20 0F DB           JSR XXBB0F
05814  E321  A9 3B       XXE324 LDA #<ZZE33E      ; LOW  E33E
05815  E323  A0 E3              LDY #>ZZE33E      ; HIGH E33E
05816  E325  20 40 E0           JSR XXE043
05817  E328  68                 PLA 
05818  E329  C9 81              CMP #$81






CBASIC.ASM......PAGE 0113

LINE# LOC   CODE        LINE


05819  E32B  90 07              BCC XXE337
05820  E32D  A9 DD              LDA #<ZZE2E0      ; LOW  E2E0
05821  E32F  A0 E2              LDY #>ZZE2E0      ; HIGH E2E0
05822  E331  20 50 D8           JSR XXB850
05823  E334  68          XXE337 PLA 
05824  E335  10 03              BPL XXE33D
05825  E337  4C B4 DF           JMP XXBFB4
05826  E33A              ;********************************
05827  E33A              ;
05828  E33A              ;********************************
05829  E33A  60          XXE33D RTS 
05830  E33B              ;********************************
05831  E33B              ; FLOAT NUMBERS FOR ATN
05832  E33B              ; POLYNOMIAL TABLE
05833  E33B              ;********************************
05834  E33B  0B          ZZE33E .BYTE $0B       ; DEGREE 12
05835  E33C  76                 .BYTE $76,$B3,$83,$BD,$D3
05835  E33D  B3 
05835  E33E  83 
05835  E33F  BD 
05835  E340  D3 
05836  E341  79                 .BYTE $79,$1E,$F4,$A6,$F5
05836  E342  1E 
05836  E343  F4 
05836  E344  A6 
05836  E345  F5 
05837  E346  7B                 .BYTE $7B,$83,$FC,$B0,$10
05837  E347  83 
05837  E348  FC 
05837  E349  B0 
05837  E34A  10 
05838  E34B  7C                 .BYTE $7C,$0C,$1F,$67,$CA
05838  E34C  0C 
05838  E34D  1F 
05838  E34E  67 
05838  E34F  CA 
05839  E350  7C                 .BYTE $7C,$DE,$53,$CB,$C1
05839  E351  DE 
05839  E352  53 
05839  E353  CB 
05839  E354  C1 
05840  E355  7D                 .BYTE $7D,$14,$64,$70,$4C
05840  E356  14 
05840  E357  64 
05840  E358  70 
05840  E359  4C 
05841  E35A  7D                 .BYTE $7D,$B7,$EA,$51,$7A
05841  E35B  B7 
05841  E35C  EA 
05841  E35D  51 
05841  E35E  7A 
05842  E35F  7D                 .BYTE $7D,$63,$30,$88,$7E
05842  E360  63 
05842  E361  30 
05842  E362  88 






CBASIC.ASM......PAGE 0114

LINE# LOC   CODE        LINE


05842  E363  7E 
05843  E364  7E                 .BYTE $7E,$92,$44,$99,$3A
05843  E365  92 
05843  E366  44 
05843  E367  99 
05843  E368  3A 
05844  E369  7E                 .BYTE $7E,$4C,$CC,$91,$C7
05844  E36A  4C 
05844  E36B  CC 
05844  E36C  91 
05844  E36D  C7 
05845  E36E  7F                 .BYTE $7F,$AA,$AA,$AA,$13
05845  E36F  AA 
05845  E370  AA 
05845  E371  AA 
05845  E372  13 
05846  E373  81                 .BYTE $81,$00,$00,$00,$00
05846  E374  00 
05846  E375  00 
05846  E376  00 
05846  E377  00 
05847  E378              ;********************************
05848  E378              ; WARM START ENTRY
05849  E378              ;********************************
05850  E378              ; DIFF
05851  E378              ; MANY DIFFERENCES FROM HERE ON 
05852  E378              ;BASWRM = *
05853  E378  20 CC FF    KKE37B JSR CLRCHN
05854  E37B  A9 00              LDA #$00
05855  E37D  85 13              STA CHANNL
05856  E37F  20 7A C6           JSR XXA67A
05857  E382  58                 CLI 
05858  E383  A2 80       XXE386 LDX #$80
05859  E385  6C 00 03           JMP (IERROR)    ; NORMALLY E38B
05860  E388              ;********************************
05861  E388              ; HANDLE ERROR MESSAGES
05862  E388              ;********************************
05863  E388  8A          XXE38B TXA 
05864  E389  30 03              BMI XXE391
05865  E38B  4C 3A C4           JMP KKA43A
05866  E38E              ;********************************
05867  E38E  4C 74 C4    XXE391 JMP XXA474
05868  E391              ;********************************
05869  E391              ; RESET ROUTINE
05870  E391              ;********************************
05871  E391              ;BASCLD = *
05872  E391  20 50 E4    ZZE394 JSR XXE453
05873  E394  20 BC E3           JSR XXE3BF
05874  E397  20 1F E4           JSR XXE422
05875  E39A  A2 FB              LDX #$FB
05876  E39C  9A                 TXS 
05877  E39D  D0 E4              BNE XXE386
05878  E39F              ;********************************
05879  E39F              ; CHARACTER FETCH CODE FOR ZERO PAGE $0073-$008F
05880  E39F              ;********************************






CBASIC.ASM......PAGE 0115

LINE# LOC   CODE        LINE


05881  E39F  E6 7A       XXE3A2 INC TXTPTR
05882  E3A1  D0 02              BNE XXE3A8
05883  E3A3  E6 7B              INC TXTPTR+1
05884  E3A5  AD 60 EA    XXE3A8 LDA XXEA61-1
05885  E3A8  C9 3A              CMP #$3A        ; COLON ;':'
05886  E3AA  B0 0A              BCS XXE3B9
05887  E3AC  C9 20              CMP #$20        ; SPACE ' '
05888  E3AE  F0 EF              BEQ XXE3A2
05889  E3B0  38                 SEC 
05890  E3B1  E9 30              SBC #$30        ; '0'
05891  E3B3  38                 SEC 
05892  E3B4  E9 D0              SBC #$D0
05893  E3B6  60          XXE3B9 RTS 
05894  E3B7              ;********************************
05895  E3B7              ; FIRST RND SEED VALUE
05896  E3B7              ;********************************
05897  E3B7  80          WWE3BA .BYTE $80,$4F,$C7,$52,$58
05897  E3B8  4F 
05897  E3B9  C7 
05897  E3BA  52 
05897  E3BB  58 
05898  E3BC              ;********************************
05899  E3BC              ; INITIALISATION OF BASIC
05900  E3BC              ;********************************
05901  E3BC  A9 4C       XXE3BF LDA #$4C        ;'L'
05902  E3BE  85 54              STA JMPER
05903  E3C0  8D 10 03           STA USRPOK
05904  E3C3  A9 48              LDA #<XXB248    ;#$48      ; LOW  B248
05905  E3C5  A0 D2              LDY #>XXB248    ;#$B2      ; HIGH B248
05906  E3C7  8D 11 03           STA USRADD
05907  E3CA  8C 12 03           STY USRADD+1
05908  E3CD  A9 91              LDA #<XXB391    ;#$91      ; LOW B391
05909  E3CF  A0 D3              LDY #>XXB391    ;#$B3      ; HIGH B391
05910  E3D1  85 05              STA ADRAY2
05911  E3D3  84 06              STY ADRAY2+1
05912  E3D5  A9 AA              LDA #<ZZB1AA    ;#$AA      ; LOW  B1AA
05913  E3D7  A0 D1              LDY #>ZZB1AA    ;#$B1      ; HIGH B1AA
05914  E3D9  85 03              STA ADRAY1
05915  E3DB  84 04              STY ADRAY1+1
05916  E3DD  A2 1C              LDX #$1C
05917  E3DF  BD 9F E3    XXE3E2 LDA XXE3A2,X
05918  E3E2  95 73              STA CHRGET,X
05919  E3E4  CA                 DEX 
05920  E3E5  10 F8              BPL XXE3E2
05921  E3E7  A9 03              LDA #$03
05922  E3E9  85 53              STA FOUR6
05923  E3EB  A9 00              LDA #$00
05924  E3ED  85 68              STA BITS
05925  E3EF  85 13              STA CHANNL
05926  E3F1  85 18              STA LASTPT+1
05927  E3F3  A2 01              LDX #$01
05928  E3F5  8E FD 01           STX $01FD
05929  E3F8  8E FC 01           STX $01FC
05930  E3FB  A2 19              LDX #$19
05931  E3FD  86 16              STX TEMPPT






CBASIC.ASM......PAGE 0116

LINE# LOC   CODE        LINE


05932  E3FF  38                 SEC 
05933  E400  20 9C FF           JSR MEMBOT
05934  E403  86 2B              STX TXTTAB
05935  E405  84 2C              STY TXTTAB+1
05936  E407  38                 SEC 
05937  E408  20 99 FF           JSR MEMTOP
05938  E40B  86 37              STX MEMSIZ
05939  E40D  84 38              STY MEMSIZ+1
05940  E40F  86 33              STX FRETOP
05941  E411  84 34              STY FRETOP+1
05942  E413  A0 00              LDY #$00
05943  E415  98                 TYA 
05944  E416  91 2B              STA (TXTTAB),Y
05945  E418  E6 2B              INC TXTTAB
05946  E41A  D0 02              BNE XXE421
05947  E41C  E6 2C              INC TXTTAB+1
05948  E41E  60          XXE421 RTS 
05949  E41F              ;********************************
05950  E41F              ; PRINT BASIC START UP MESSAGES
05951  E41F              ;********************************
05952  E41F  A5 2B       XXE422 LDA TXTTAB
05953  E421  A4 2C              LDY TXTTAB+1
05954  E423  20 08 C4           JSR XXA408
05955  E426  A9 70              LDA #<ZZE473    ; LOW  E473
05956  E428  A0 E4              LDY #>ZZE473    ; HIGH E473
05957  E42A  20 1E CB           JSR XXAB1E
05958  E42D  A5 37              LDA MEMSIZ
05959  E42F  38                 SEC 
05960  E430  E5 2B              SBC TXTTAB
05961  E432  AA                 TAX 
05962  E433  A5 38              LDA MEMSIZ+1
05963  E435  E5 2C              SBC TXTTAB+1
05964  E437  20 CD DD           JSR XXBDCD
05965  E43A  A9 5D              LDA #<ZZE460    ; LOW  E460
05966  E43C  A0 E4              LDY #>ZZE460    ; HIGH E460
05967  E43E  20 1E CB           JSR XXAB1E
05968  E441  4C 44 C6           JMP KKA644
05969  E444              ;********************************
05970  E444              ; VECTORS FOR $0300-$030B
05971  E444              ;********************************
05972  E444  88 E3       XXE447 .WORD XXE38B    ;$E38B
05973  E446  83 C4              .WORD KKA483    ;$A483
05974  E448  7C C5              .WORD KKA57C    ;$A57C
05975  E44A  1A C7              .WORD ZZA71A    ;$A71A
05976  E44C  E4 C7              .WORD KKA7E4    ;$A7E4
05977  E44E  86 CE              .WORD KKAE86    ;$AE86
05978  E450              ;********************************
05979  E450              ; INITIALIZE VECTORS
05980  E450              ;********************************
05981  E450  A2 0B       XXE453 LDX #$0B
05982  E452  BD 44 E4    XXE455 LDA XXE447,X
05983  E455  9D 00 03           STA IERROR,X
05984  E458  CA                 DEX 
05985  E459  10 F7              BPL XXE455
05986  E45B  60                 RTS 






CBASIC.ASM......PAGE 0117

LINE# LOC   CODE        LINE


05987  E45C              ;********************************
05988  E45C              ; STARTUP MESSAGES
05989  E45C              ;********************************
05990  E45C  00          ZZE45F .BYTE $00
05991  E45D  20 42       ZZE460 .BYTE ' BASIC BYTES FREE'
05992  E46E  0D                 .BYTE $0D
05993  E46F  00                 .BYTE $00
05994  E470  93          ZZE473 .BYTE $93
05995  E471  0D                 .BYTE $0D
05996  E472  20 20              .BYTE '    **** COMMODORE 64 BASIC V2 ****
'
05997  E495  0D                 .BYTE $0D
05998  E496  0D                 .BYTE $0D
05999  E497  20 36              .BYTE ' 64K RAM SYSTEM  '
06000  E4A8  00                 .BYTE $00
06001  E4A9  81          ZZE4AC .BYTE $81
06002  E4AA              ;********************************
06003  E4AA              ; SET OUTPUT DEVICE
06004  E4AA              ;********************************
06005  E4AA  48          XXE4AD PHA 
06006  E4AB  20 C9 FF           JSR CHKOUT
06007  E4AE  AA                 TAX 
06008  E4AF  68                 PLA 
06009  E4B0  90 01              BCC XXE4B6
06010  E4B2  8A                 TXA 
06011  E4B3  60          XXE4B6 RTS 
06012  E4B4              ;********************************
06013  E4B4              ; UNUSED
06014  E4B4              ;********************************
06015  E4B4  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
06015  E4B5  AA 
06015  E4B6  AA 
06015  E4B7  AA 
06015  E4B8  AA 
06015  E4B9  AA 
06015  E4BA  AA 
06015  E4BB  AA 
06016  E4BC  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
06016  E4BD  AA 
06016  E4BE  AA 
06016  E4BF  AA 
06016  E4C0  AA 
06016  E4C1  AA 
06016  E4C2  AA 
06016  E4C3  AA 
06017  E4C4  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
06017  E4C5  AA 
06017  E4C6  AA 
06017  E4C7  AA 
06017  E4C8  AA 
06017  E4C9  AA 
06017  E4CA  AA 
06017  E4CB  AA 
06018  E4CC  AA                 .BYTE $AA,$AA,$AA,$AA
06018  E4CD  AA 
06018  E4CE  AA 






CBASIC.ASM......PAGE 0118

LINE# LOC   CODE        LINE


06018  E4CF  AA 
06019  E4D0              ;********************************
06020  E4D0              ; RS-232 EQUATES
06021  E4D0              ;********************************
06022  E4D0              RINONE = $A9
06023  E4D0              RIPRTY = $AB
06024  E4D0              ;********************************
06025  E4D0              ; RS-232
06026  E4D0              ;********************************
06027  E4D0  85 A9       XXE4D3 STA RINONE
06028  E4D2  A9 01              LDA #$01
06029  E4D4  85 AB              STA RIPRTY
06030  E4D6  60                 RTS 
06031  E4D7              ;********************************
06032  E4D7              .END


ERRORS = 00000


SYMBOL TABLE

SYMBOL VALUE
 ADRAY1   0003    ADRAY2   0005    ARGEXP   0069    ARGHO    006A
 ARGSGN   006E    ARISGN   006F    ARYTAB   002F    AUTODN   0292
 BASCLD   E394    BASWRK   0057    BASWRM   E37B    BAUDOF   0299
 BITNUM   0298    BITS     0068    BUF      0200    CBINV    0316
 CHANNL   0013    CHARAC   0007    CHKIN    FFC6    CHKOUT   FFC9
 CHRGET   0073    CHRGOT   0079    CHRIN    FFCF    CHROUT   FFD2
 CIA1CA   02A2    CIA1CB   02A4    CIA1IR   02A3    CLALL    FFE7
 CLOSE    FFC3    CLRCHN   FFCC    COLOR    0286    COUNT    000B
 CURLIN   0039    DATLIN   003F    DATPRT   0041    DEFPNT   004E
 DIMFLG   000C    DSCPNT   0050    ENABL    02A1    ENDCHR   0008
 FAC1     0061    FAC2     0069    FACEXP   0061    FACHO    0062
 FACOV    0070    FACSGN   0066    FAT      0263    FBUFPT   0071
 FORPNT   0049    FOUR6    0053    FRESPC   0035    FRETOP   0033
 GARBFL   000F    GDCOL    0287    GETIN    FFE4    HIBASE   0288
 IBASIN   0324    IBSOUT   0326    ICHKIN   031E    ICKOUT   0320
 ICLALL   032C    ICLOSE   031C    ICLRCH   0322    ICRNCH   0304
 IERROR   0300    IEVAL    030A    IGETIN   032A    IGONE    0308
 ILOAD    0330    IMAIN    0302    INDEX    0022    INPFLG   0011
 INPPTR   0043    INTFLG   000E    IOBASE   FFF3    IOPNE    031A
 IQPLOP   0306    IRQTMP   029F    ISAVE    0332    ISTOP    0328
 JMPER    0054    KERNAL   E000    KEYD     0277    KEYLOG   028F
 KKA43A   C43A    KKA483   C483    KKA52A   C52A    KKA57C   C57C
 KKA644   C644    KKA663   C663    KKA677   C677    KKA7E4   C7E4
 KKAE86   CE86    KKB853   D853    KKBAB9   DAB9    KKBACA   DACA
 KKBAD4   DAD4    KKBB07   DB07    KKBBCA   DBCA    KKBC0F   DC0F
 KKE000   DFFD    KKE10C   E109    KKE112   E10F    KKE118   E115
 KKE11E   E11B    KKE124   E121    KKE12A   E12A    KKE147   E144
 KKE156   E156    KKE165   E165    KKE168   E168    KKE1BE   E1BE
 KKE1C7   E1C7    KKE264   E261    KKE30E   E30B    KKE37B   E378
 LASTPT   0017    LAT      0259    LINNUM   0014    LOAD     FFD5
 LSTSHF   028E    M51AJB   0295    M51CDR   0294    M51CTR   0293








SYMBOL TABLE

SYMBOL VALUE
 MEMBOT   FF9C    MEMSI2   0282    MEMSIZ   0037    MEMSTR   0281
 MEMTOP   FF99    MODE     0291    NEXSRO   02A5    NMINV    0318
 OLDLIN   003B    OLDTXT   003D    OPEN     FFC0    OPMASK   004D
 OPPTR    004B    PALNTS   02A6    PLOT     FFF0    POINTB   007C
 POLY1    E043    RDTIM    FFDE    READST   FFB7    RESHO    0026
 RIDBE    029B    RIDBS    029C    RINONE   00A9    RIPRTY   00AB
 RODBE    029E    RODBS    029D    RSSTAT   0297    SAREG    030C
 SAT      026D    SAVE     FFD8    SETLFS   FFBA    SETMSG   FF90
 SETNAM   FFBD    SGNFLG   0067    SPREG    030F    STACK    0100
 STOP     FFE1    STREND   0031    SUBFLG   0010    SXREG    030D
 SYREG    030E    TABLEN   C050    TANSGN   0012    TBUFER   033C
 TEMPPT   0016    TEMPST   0019    TIMOUT   0285    TT9FEA   BFEA
 TT9FEB   BFEB    TXTPTR   007A    TXTTAB   002B    USRADD   0311
 USRCMD   03EE    USRPOK   0310    VALTYP   000D    VARNAM   0045
 VARPNT   0047    VARTAB   002D    VERCK    000A    VICSCN   0400
 WWA09C   C09C    WWA328   C328    WWA364   C364    WWA369   C369
 WWA371   C371    WWA376   C376    WWA381   C381    WWB1A5   D1A5
 WWB9BC   D9BC    WWB9C1   D9C1    WWB9D6   D9D6    WWB9DB   D9DB
 WWB9E0   D9E0    WWB9E5   D9E5    WWBAF9   DAF9    WWBDB8   DDB8
 WWBDBD   DDBD    WWE3BA   E3B7    XMAX     0289    XXA080   C080
 XXA081   C081    XXA09E   C09E    XXA19E   C19E    XXA1AC   C1AC
 XXA1B5   C1B5    XXA1C2   C1C2    XXA1D0   C1D0    XXA1E2   C1E2
 XXA1F0   C1F0    XXA1FF   C1FF    XXA210   C210    XXA225   C225
 XXA235   C235    XXA23B   C23B    XXA24F   C24F    XXA25A   C25A
 XXA26A   C26A    XXA272   C272    XXA27F   C27F    XXA290   C290
 XXA29D   C29D    XXA2AA   C2AA    XXA2BA   C2BA    XXA2C8   C2C8
 XXA2D5   C2D5    XXA2E4   C2E4    XXA2ED   C2ED    XXA300   C300
 XXA30E   C30E    XXA31E   C31E    XXA324   C324    XXA327   C327
 XXA383   C383    XXA38A   C38A    XXA38F   C38F    XXA3A4   C3A4
 XXA3B0   C3B0    XXA3B7   C3B7    XXA3B8   C3B8    XXA3BF   C3BF
 XXA3DC   C3DC    XXA3E8   C3E8    XXA3EC   C3EC    XXA3F3   C3F3
 XXA3FB   C3FB    XXA408   C408    XXA412   C412    XXA416   C416
 XXA421   C421    XXA434   C434    XXA435   C435    XXA437   C437
 XXA456   C456    XXA469   C469    XXA474   C474    XXA480   C480
 XXA49C   C49C    XXA4D7   C4D7    XXA4DF   C4DF    XXA4ED   C4ED
 XXA508   C508    XXA522   C522    XXA533   C533    XXA53C   C53C
 XXA544   C544    XXA55F   C55F    XXA560   C560    XXA562   C562
 XXA576   C576    XXA579   C579    XXA582   C582    XXA58E   C58E
 XXA5A4   C5A4    XXA5AC   C5AC    XXA5B6   C5B6    XXA5B8   C5B8
 XXA5C7   C5C7    XXA5C9   C5C9    XXA5DC   C5DC    XXA5DE   C5DE
 XXA5E5   C5E5    XXA5EE   C5EE    XXA5F5   C5F5    XXA5F9   C5F9
 XXA609   C609    XXA613   C613    XXA617   C617    XXA62E   C62E
 XXA637   C637    XXA640   C640    XXA641   C641    XXA659   C659
 XXA660   C660    XXA67A   C67A    XXA68D   C68D    XXA68E   C68E
 XXA69B   C69B    XXA6A4   C6A4    XXA6BB   C6BB    XXA6C9   C6C9
 XXA6E6   C6E6    XXA6E8   C6E8    XXA6EF   C6EF    XXA6F3   C6F3
 XXA700   C700    XXA714   C714    XXA717   C717    XXA72C   C72C
 XXA72F   C72F    XXA737   C737    XXA753   C753    XXA79F   C79F
 XXA7AE   C7AE    XXA7BE   C7BE    XXA7CE   C7CE    XXA7E1   C7E1
 XXA7ED   C7ED    XXA7EF   C7EF    XXA804   C804    XXA807   C807
 XXA80B   C80B    XXA80E   C80E    XXA81D   C81D    XXA827   C827
 XXA82B   C82B    XXA82C   C82C    XXA832   C832    XXA849   C849
 XXA84B   C84B    XXA854   C854    XXA862   C862    XXA870   C870
 XXA87D   C87D    XXA897   C897    XXA8A0   C8A0    XXA8BC   C8BC
 XXA8C0   C8C0    XXA8D1   C8D1    XXA8E3   C8E3    XXA8E8   C8E8








SYMBOL TABLE

SYMBOL VALUE
 XXA8EB   C8EB    XXA8F8   C8F8    XXA8FB   C8FB    XXA905   C905
 XXA906   C906    XXA909   C909    XXA911   C911    XXA919   C919
 XXA937   C937    XXA940   C940    XXA948   C948    XXA953   C953
 XXA957   C957    XXA95F   C95F    XXA96A   C96A    XXA96B   C96B
 XXA971   C971    XXA99F   C99F    XXA9A5   C9A5    XXA9C2   C9C2
 XXA9D6   C9D6    XXA9D9   C9D9    XXA9DA   C9DA    XXA9ED   C9ED
 XXAA07   CA07    XXAA1D   CA1D    XXAA24   CA24    XXAA27   CA27
 XXAA2C   CA2C    XXAA3D   CA3D    XXAA4B   CA4B    XXAA52   CA52
 XXAA68   CA68    XXAA7F   CA7F    XXAA86   CA86    XXAA90   CA90
 XXAA9A   CA9A    XXAA9D   CA9D    XXAAA0   CAA0    XXAAA2   CAA2
 XXAACA   CACA    XXAAD7   CAD7    XXAAE5   CAE5    XXAAE7   CAE7
 XXAAE8   CAE8    XXAAEE   CAEE    XXAAF8   CAF8    XXAB0E   CB0E
 XXAB0F   CB0F    XXAB10   CB10    XXAB13   CB13    XXAB19   CB19
 XXAB1E   CB1E    XXAB21   CB21    XXAB28   CB28    XXAB3B   CB3B
 XXAB42   CB42    XXAB45   CB45    XXAB47   CB47    XXAB4D   CB4D
 XXAB57   CB57    XXAB5B   CB5B    XXAB5F   CB5F    XXAB62   CB62
 XXAB6B   CB6B    XXAB7A   CB7A    XXAB7B   CB7B    XXAB92   CB92
 XXABA4   CBA4    XXABB5   CBB5    XXABB7   CBB7    XXABBE   CBBE
 XXABCE   CBCE    XXABD6   CBD6    XXABEA   CBEA    XXABF9   CBF9
 XXAC03   CC03    XXAC0D   CC0D    XXAC0F   CC0F    XXAC15   CC15
 XXAC41   CC41    XXAC4A   CC4A    XXAC4D   CC4D    XXAC51   CC51
 XXAC65   CC65    XXAC71   CC71    XXAC72   CC72    XXAC7D   CC7D
 XXAC89   CC89    XXAC91   CC91    XXAC9D   CC9D    XXACB8   CCB8
 XXACD1   CCD1    XXACDF   CCDF    XXACEA   CCEA    XXACFB   CCFB
 XXAD1D   CD1D    XXAD24   CD24    XXAD27   CD27    XXAD32   CD32
 XXAD35   CD35    XXAD75   CD75    XXAD78   CD78    XXAD8A   CD8A
 XXAD8D   CD8D    XXAD8F   CD8F    XXAD90   CD90    XXAD96   CD96
 XXAD97   CD97    XXAD99   CD99    XXAD9E   CD9E    XXADA4   CDA4
 XXADA9   CDA9    XXADB8   CDB8    XXADBB   CDBB    XXADD7   CDD7
 XXADE8   CDE8    XXADF0   CDF0    XXADF9   CDF9    XXADFA   CDFA
 XXAE07   CE07    XXAE11   CE11    XXAE19   CE19    XXAE20   CE20
 XXAE30   CE30    XXAE33   CE33    XXAE38   CE38    XXAE43   CE43
 XXAE58   CE58    XXAE5B   CE5B    XXAE5D   CE5D    XXAE64   CE64
 XXAE66   CE66    XXAE80   CE80    XXAE83   CE83    XXAE8A   CE8A
 XXAE8F   CE8F    XXAE92   CE92    XXAE9A   CE9A    XXAEAD   CEAD
 XXAEBD   CEBD    XXAEC6   CEC6    XXAECC   CECC    XXAEE3   CEE3
 XXAEEA   CEEA    XXAEF1   CEF1    XXAEF7   CEF7    XXAEFA   CEFA
 XXAEFD   CEFD    XXAEFF   CEFF    XXAF08   CF08    XXAF0D   CF0D
 XXAF0F   CF0F    XXAF14   CF14    XXAF27   CF27    XXAF28   CF28
 XXAF5C   CF5C    XXAF5D   CF5D    XXAF6E   CF6E    XXAF84   CF84
 XXAF92   CF92    XXAFA0   CFA0    XXAFA7   CFA7    XXAFD1   CFD1
 XXAFD6   CFD6    XXB02E   D02E    XXB056   D056    XXB05B   D05B
 XXB061   D061    XXB066   D066    XXB072   D072    XXB07B   D07B
 XXB07E   D07E    XXB08B   D08B    XXB090   D090    XXB092   D092
 XXB09C   D09C    XXB09F   D09F    XXB0AF   D0AF    XXB0B0   D0B0
 XXB0BA   D0BA    XXB0C4   D0C4    XXB0D4   D0D4    XXB0DB   D0DB
 XXB0E7   D0E7    XXB0EF   D0EF    XXB0F1   D0F1    XXB0FB   D0FB
 XXB109   D109    XXB113   D113    XXB11C   D11C    XXB11D   D11D
 XXB123   D123    XXB128   D128    XXB138   D138    XXB13B   D13B
 XXB143   D143    XXB159   D159    XXB185   D185    XXB18F   D18F
 XXB194   D194    XXB1A0   D1A0    XXB1B2   D1B2    XXB1B8   D1B8
 XXB1BF   D1BF    XXB1CC   D1CC    XXB1CE   D1CE    XXB1D1   D1D1
 XXB1DB   D1DB    XXB21C   D21C    XXB228   D228    XXB237   D237
 XXB245   D245    XXB248   D248    XXB24A   D24A    XXB24D   D24D
 XXB261   D261    XXB274   D274    XXB27D   D27D    XXB286   D286








SYMBOL TABLE

SYMBOL VALUE
 XXB296   D296    XXB2B9   D2B9    XXB2C8   D2C8    XXB2CD   D2CD
 XXB2EA   D2EA    XXB2F2   D2F2    XXB308   D308    XXB30B   D30B
 XXB30E   D30E    XXB30F   D30F    XXB320   D320    XXB331   D331
 XXB337   D337    XXB34B   D34B    XXB34C   D34C    XXB355   D355
 XXB35F   D35F    XXB378   D378    XXB37D   D37D    XXB384   D384
 XXB391   D391    XXB39E   D39E    XXB3A2   D3A2    XXB3A6   D3A6
 XXB3AE   D3AE    XXB3E1   D3E1    XXB3F4   D3F4    XXB418   D418
 XXB449   D449    XXB44F   D44F    XXB465   D465    XXB46F   D46F
 XXB475   D475    XXB47D   D47D    XXB487   D487    XXB48D   D48D
 XXB497   D497    XXB4A4   D4A4    XXB4A8   D4A8    XXB4A9   D4A9
 XXB4B5   D4B5    XXB4BF   D4BF    XXB4CA   D4CA    XXB4D2   D4D2
 XXB4D5   D4D5    XXB4F4   D4F4    XXB4F6   D4F6    XXB501   D501
 XXB50B   D50B    XXB516   D516    XXB526   D526    XXB52A   D52A
 XXB544   D544    XXB54D   D54D    XXB559   D559    XXB561   D561
 XXB566   D566    XXB56E   D56E    XXB572   D572    XXB57D   D57D
 XXB5AE   D5AE    XXB5B0   D5B0    XXB5B8   D5B8    XXB5BD   D5BD
 XXB5C7   D5C7    XXB5DC   D5DC    XXB5E6   D5E6    XXB5F6   D5F6
 XXB601   D601    XXB606   D606    XXB63D   D63D    XXB65D   D65D
 XXB67A   D67A    XXB688   D688    XXB68C   D68C    XXB690   D690
 XXB699   D699    XXB6A2   D6A2    XXB6A3   D6A3    XXB6A6   D6A6
 XXB6AA   D6AA    XXB6D5   D6D5    XXB6D6   D6D6    XXB6DB   D6DB
 XXB6EB   D6EB    XXB6EC   D6EC    XXB700   D700    XXB706   D706
 XXB70C   D70C    XXB70D   D70D    XXB70E   D70E    XXB725   D725
 XXB72C   D72C    XXB737   D737    XXB748   D748    XXB761   D761
 XXB77C   D77C    XXB782   D782    XXB78B   D78B    XXB798   D798
 XXB79B   D79B    XXB79E   D79E    XXB7A1   D7A1    XXB7AD   D7AD
 XXB7B5   D7B5    XXB7CD   D7CD    XXB7E2   D7E2    XXB7EB   D7EB
 XXB7F1   D7F1    XXB7F7   D7F7    XXB80D   D80D    XXB82C   D82C
 XXB83C   D83C    XXB840   D840    XXB848   D848    XXB849   D849
 XXB850   D850    XXB862   D862    XXB867   D867    XXB86A   D86A
 XXB86F   D86F    XXB877   D877    XXB893   D893    XXB897   D897
 XXB8A3   D8A3    XXB8AF   D8AF    XXB8D2   D8D2    XXB8D7   D8D7
 XXB8DB   D8DB    XXB8F7   D8F7    XXB8F9   D8F9    XXB8FB   D8FB
 XXB8FE   D8FE    XXB91D   D91D    XXB929   D929    XXB936   D936
 XXB938   D938    XXB946   D946    XXB947   D947    XXB94D   D94D
 XXB96F   D96F    XXB97D   D97D    XXB97E   D97E    XXB983   D983
 XXB985   D985    XXB999   D999    XXB9A6   D9A6    XXB9AC   D9AC
 XXB9B0   D9B0    XXB9BA   D9BA    XXB9EA   D9EA    XXB9F1   D9F1
 XXB9F4   D9F4    XXBA28   DA28    XXBA30   DA30    XXBA59   DA59
 XXBA5E   DA5E    XXBA61   DA61    XXBA7D   DA7D    XXBA8B   DA8B
 XXBA8C   DA8C    XXBAB7   DAB7    XXBAC4   DAC4    XXBACF   DACF
 XXBADA   DADA    XXBADF   DADF    XXBAE2   DAE2    XXBAED   DAED
 XXBAF8   DAF8    XXBAFE   DAFE    XXBB0F   DB0F    XXBB12   DB12
 XXBB29   DB29    XXBB3F   DB3F    XXBB4C   DB4C    XXBB4F   DB4F
 XXBB5D   DB5D    XXBB7A   DB7A    XXBB7E   DB7E    XXBB8A   DB8A
 XXBB8F   DB8F    XXBBA2   DBA2    XXBBD0   DBD0    XXBBD4   DBD4
 XXBBFC   DBFC    XXBBFE   DBFE    XXBC02   DC02    XXBC0C   DC0C
 XXBC11   DC11    XXBC1A   DC1A    XXBC1B   DC1B    XXBC23   DC23
 XXBC2B   DC2B    XXBC2F   DC2F    XXBC31   DC31    XXBC38   DC38
 XXBC39   DC39    XXBC3C   DC3C    XXBC44   DC44    XXBC49   DC49
 XXBC4F   DC4F    XXBC58   DC58    XXBC5B   DC5B    XXBC5D   DC5D
 XXBC92   DC92    XXBC98   DC98    XXBC9B   DC9B    XXBCAF   DCAF
 XXBCBA   DCBA    XXBCBB   DCBB    XXBCCC   DCCC    XXBCE9   DCE9
 XXBCF2   DCF2    XXBCF3   DCF3    XXBCF7   DCF7    XXBD06   DD06
 XXBD0A   DD0A    XXBD0D   DD0D    XXBD0F   DD0F    XXBD2E   DD2E








SYMBOL TABLE

SYMBOL VALUE
 XXBD30   DD30    XXBD33   DD33    XXBD35   DD35    XXBD41   DD41
 XXBD47   DD47    XXBD49   DD49    XXBD52   DD52    XXBD5B   DD5B
 XXBD62   DD62    XXBD67   DD67    XXBD6A   DD6A    XXBD71   DD71
 XXBD7E   DD7E    XXBD91   DD91    XXBDA0   DDA0    XXBDAE   DDAE
 XXBDC2   DDC2    XXBDCD   DDCD    XXBDDA   DDDA    XXBDDD   DDDD
 XXBDDF   DDDF    XXBDE7   DDE7    XXBDF8   DDF8    XXBE00   DE00
 XXBE09   DE09    XXBE0B   DE0B    XXBE16   DE16    XXBE21   DE21
 XXBE28   DE28    XXBE2F   DE2F    XXBE32   DE32    XXBE47   DE47
 XXBE48   DE48    XXBE53   DE53    XXBE64   DE64    XXBE66   DE66
 XXBE68   DE68    XXBE6A   DE6A    XXBE8E   DE8E    XXBE90   DE90
 XXBE97   DE97    XXBEB2   DEB2    XXBEC4   DEC4    XXBEC6   DEC6
 XXBED3   DED3    XXBEE3   DEE3    XXBEEF   DEEF    XXBF04   DF04
 XXBF07   DF07    XXBF0C   DF0C    XXBF16   DF16    XXBF17   DF17
 XXBF18   DF18    XXBF19   DF19    XXBF71   DF71    XXBF84   DF84
 XXBF9E   DF9E    XXBFB4   DFB4    XXBFBE   DFBE    XXBFED   DFED
 XXBFFD   DFFD    XXE00B   E008    XXE00E   E00B    XXE01E   E01B
 XXE043   E040    XXE059   E056    XXE05D   E05A    XXE06C   E069
 XXE070   E06D    XXE07D   E07A    XXE0BE   E0BB    XXE0D3   E0D0
 XXE0E3   E0E0    XXE0F6   E0F3    XXE0F9   E0F6    XXE104   E101
 XXE109   E106    XXE194   E191    XXE195   E192    XXE19E   E19B
 XXE1A1   E19E    XXE1B5   E1B2    XXE1D1   E1CE    XXE1D4   E1D1
 XXE200   E1FD    XXE206   E203    XXE20D   E20A    XXE20E   E20B
 XXE211   E20E    XXE219   E216    XXE23F   E23C    XXE257   E254
 XXE26B   E268    XXE29D   E29A    XXE2A0   E29D    XXE2AD   E2AA
 XXE2DC   E2D9    XXE316   E313    XXE324   E321    XXE337   E334
 XXE33D   E33A    XXE386   E383    XXE38B   E388    XXE391   E38E
 XXE3A2   E39F    XXE3A8   E3A5    XXE3B9   E3B6    XXE3BF   E3BC
 XXE3E2   E3DF    XXE421   E41E    XXE422   E41F    XXE447   E444
 XXE453   E450    XXE455   E452    XXE4AD   E4AA    XXE4B6   E4B3
 XXE4D3   E4D0    XXEA61   EA61    ZZA000   C000    ZZA002   C002
 ZZA004   C004    ZZA00C   C00C    ZZA050   C050    ZZA052   C052
 ZZA129   C129    ZZA642   C642    ZZA65E   C65E    ZZA69C   C69C
 ZZA71A   C71A    ZZA742   C742    ZZA78B   C78B    ZZA82F   C82F
 ZZA831   C831    ZZA857   C857    ZZA871   C871    ZZA883   C883
 ZZA8D2   C8D2    ZZA928   C928    ZZA93B   C93B    ZZA94B   C94B
 ZZAA80   CA80    ZZABA5   CBA5    ZZABBF   CBBF    ZZAC06   CC06
 ZZACFC   CCFC    ZZAD0C   CD0C    ZZAD1E   CD1E    ZZAEA8   CEA8
 ZZAED4   CED4    ZZAFE6   CFE6    ZZAFE9   CFE9    ZZB016   D016
 ZZB081   D081    ZZB1AA   D1AA    ZZB3B3   D3B3    ZZB824   D824
 ZZB82D   D82D    ZZBA2B   DA2B    ZZBBC7   DBC7    ZZBDB3   DDB3
 ZZBF11   DF11    ZZBF13   DF13    ZZBF1A   DF1A    ZZBF3A   DF3A
 ZZBF52   DF52    ZZBF53   DF53    ZZBF7B   DF7B    ZZBFBF   DFBF
 ZZBFC4   DFC4    ZZE08D   E08A    ZZE092   E08F    ZZE097   E094
 ZZE12A   E127    ZZE156   E153    ZZE165   E162    ZZE168   E165
 ZZE1BE   E1BB    ZZE1C7   E1C4    ZZE2B4   E2B1    ZZE2E0   E2DD
 ZZE2E5   E2E2    ZZE2EA   E2E7    ZZE2EF   E2EC    ZZE33E   E33B
 ZZE394   E391    ZZE45F   E45C    ZZE460   E45D    ZZE473   E470
 ZZE4AC   E4A9   

END OF ASSEMBLY
